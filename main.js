/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// node_modules/xml2js/lib/defaults.js
var require_defaults = __commonJS({
  "node_modules/xml2js/lib/defaults.js"(exports) {
    (function() {
      exports.defaults = {
        "0.1": {
          explicitCharkey: false,
          trim: true,
          normalize: true,
          normalizeTags: false,
          attrkey: "@",
          charkey: "#",
          explicitArray: false,
          ignoreAttrs: false,
          mergeAttrs: false,
          explicitRoot: false,
          validator: null,
          xmlns: false,
          explicitChildren: false,
          childkey: "@@",
          charsAsChildren: false,
          includeWhiteChars: false,
          async: false,
          strict: true,
          attrNameProcessors: null,
          attrValueProcessors: null,
          tagNameProcessors: null,
          valueProcessors: null,
          emptyTag: ""
        },
        "0.2": {
          explicitCharkey: false,
          trim: false,
          normalize: false,
          normalizeTags: false,
          attrkey: "$",
          charkey: "_",
          explicitArray: true,
          ignoreAttrs: false,
          mergeAttrs: false,
          explicitRoot: true,
          validator: null,
          xmlns: false,
          explicitChildren: false,
          preserveChildrenOrder: false,
          childkey: "$$",
          charsAsChildren: false,
          includeWhiteChars: false,
          async: false,
          strict: true,
          attrNameProcessors: null,
          attrValueProcessors: null,
          tagNameProcessors: null,
          valueProcessors: null,
          rootName: "root",
          xmldec: {
            "version": "1.0",
            "encoding": "UTF-8",
            "standalone": true
          },
          doctype: null,
          renderOpts: {
            "pretty": true,
            "indent": "  ",
            "newline": "\n"
          },
          headless: false,
          chunkSize: 1e4,
          emptyTag: "",
          cdata: false
        }
      };
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/Utility.js
var require_Utility = __commonJS({
  "node_modules/xmlbuilder/lib/Utility.js"(exports, module2) {
    (function() {
      var assign, getValue, isArray, isEmpty, isFunction, isObject, isPlainObject, slice = [].slice, hasProp = {}.hasOwnProperty;
      assign = function() {
        var i, key, len, source, sources, target;
        target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];
        if (isFunction(Object.assign)) {
          Object.assign.apply(null, arguments);
        } else {
          for (i = 0, len = sources.length; i < len; i++) {
            source = sources[i];
            if (source != null) {
              for (key in source) {
                if (!hasProp.call(source, key))
                  continue;
                target[key] = source[key];
              }
            }
          }
        }
        return target;
      };
      isFunction = function(val) {
        return !!val && Object.prototype.toString.call(val) === "[object Function]";
      };
      isObject = function(val) {
        var ref;
        return !!val && ((ref = typeof val) === "function" || ref === "object");
      };
      isArray = function(val) {
        if (isFunction(Array.isArray)) {
          return Array.isArray(val);
        } else {
          return Object.prototype.toString.call(val) === "[object Array]";
        }
      };
      isEmpty = function(val) {
        var key;
        if (isArray(val)) {
          return !val.length;
        } else {
          for (key in val) {
            if (!hasProp.call(val, key))
              continue;
            return false;
          }
          return true;
        }
      };
      isPlainObject = function(val) {
        var ctor, proto;
        return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && typeof ctor === "function" && ctor instanceof ctor && Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object);
      };
      getValue = function(obj) {
        if (isFunction(obj.valueOf)) {
          return obj.valueOf();
        } else {
          return obj;
        }
      };
      module2.exports.assign = assign;
      module2.exports.isFunction = isFunction;
      module2.exports.isObject = isObject;
      module2.exports.isArray = isArray;
      module2.exports.isEmpty = isEmpty;
      module2.exports.isPlainObject = isPlainObject;
      module2.exports.getValue = getValue;
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDOMImplementation.js
var require_XMLDOMImplementation = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDOMImplementation.js"(exports, module2) {
    (function() {
      var XMLDOMImplementation;
      module2.exports = XMLDOMImplementation = function() {
        function XMLDOMImplementation2() {
        }
        XMLDOMImplementation2.prototype.hasFeature = function(feature, version) {
          return true;
        };
        XMLDOMImplementation2.prototype.createDocumentType = function(qualifiedName, publicId, systemId) {
          throw new Error("This DOM method is not implemented.");
        };
        XMLDOMImplementation2.prototype.createDocument = function(namespaceURI, qualifiedName, doctype) {
          throw new Error("This DOM method is not implemented.");
        };
        XMLDOMImplementation2.prototype.createHTMLDocument = function(title) {
          throw new Error("This DOM method is not implemented.");
        };
        XMLDOMImplementation2.prototype.getFeature = function(feature, version) {
          throw new Error("This DOM method is not implemented.");
        };
        return XMLDOMImplementation2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDOMErrorHandler.js
var require_XMLDOMErrorHandler = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDOMErrorHandler.js"(exports, module2) {
    (function() {
      var XMLDOMErrorHandler;
      module2.exports = XMLDOMErrorHandler = function() {
        function XMLDOMErrorHandler2() {
        }
        XMLDOMErrorHandler2.prototype.handleError = function(error) {
          throw new Error(error);
        };
        return XMLDOMErrorHandler2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDOMStringList.js
var require_XMLDOMStringList = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDOMStringList.js"(exports, module2) {
    (function() {
      var XMLDOMStringList;
      module2.exports = XMLDOMStringList = function() {
        function XMLDOMStringList2(arr) {
          this.arr = arr || [];
        }
        Object.defineProperty(XMLDOMStringList2.prototype, "length", {
          get: function() {
            return this.arr.length;
          }
        });
        XMLDOMStringList2.prototype.item = function(index) {
          return this.arr[index] || null;
        };
        XMLDOMStringList2.prototype.contains = function(str) {
          return this.arr.indexOf(str) !== -1;
        };
        return XMLDOMStringList2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDOMConfiguration.js
var require_XMLDOMConfiguration = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDOMConfiguration.js"(exports, module2) {
    (function() {
      var XMLDOMConfiguration, XMLDOMErrorHandler, XMLDOMStringList;
      XMLDOMErrorHandler = require_XMLDOMErrorHandler();
      XMLDOMStringList = require_XMLDOMStringList();
      module2.exports = XMLDOMConfiguration = function() {
        function XMLDOMConfiguration2() {
          var clonedSelf;
          this.defaultParams = {
            "canonical-form": false,
            "cdata-sections": false,
            "comments": false,
            "datatype-normalization": false,
            "element-content-whitespace": true,
            "entities": true,
            "error-handler": new XMLDOMErrorHandler(),
            "infoset": true,
            "validate-if-schema": false,
            "namespaces": true,
            "namespace-declarations": true,
            "normalize-characters": false,
            "schema-location": "",
            "schema-type": "",
            "split-cdata-sections": true,
            "validate": false,
            "well-formed": true
          };
          this.params = clonedSelf = Object.create(this.defaultParams);
        }
        Object.defineProperty(XMLDOMConfiguration2.prototype, "parameterNames", {
          get: function() {
            return new XMLDOMStringList(Object.keys(this.defaultParams));
          }
        });
        XMLDOMConfiguration2.prototype.getParameter = function(name) {
          if (this.params.hasOwnProperty(name)) {
            return this.params[name];
          } else {
            return null;
          }
        };
        XMLDOMConfiguration2.prototype.canSetParameter = function(name, value) {
          return true;
        };
        XMLDOMConfiguration2.prototype.setParameter = function(name, value) {
          if (value != null) {
            return this.params[name] = value;
          } else {
            return delete this.params[name];
          }
        };
        return XMLDOMConfiguration2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/NodeType.js
var require_NodeType = __commonJS({
  "node_modules/xmlbuilder/lib/NodeType.js"(exports, module2) {
    (function() {
      module2.exports = {
        Element: 1,
        Attribute: 2,
        Text: 3,
        CData: 4,
        EntityReference: 5,
        EntityDeclaration: 6,
        ProcessingInstruction: 7,
        Comment: 8,
        Document: 9,
        DocType: 10,
        DocumentFragment: 11,
        NotationDeclaration: 12,
        Declaration: 201,
        Raw: 202,
        AttributeDeclaration: 203,
        ElementDeclaration: 204,
        Dummy: 205
      };
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLAttribute.js
var require_XMLAttribute = __commonJS({
  "node_modules/xmlbuilder/lib/XMLAttribute.js"(exports, module2) {
    (function() {
      var NodeType, XMLAttribute, XMLNode;
      NodeType = require_NodeType();
      XMLNode = require_XMLNode();
      module2.exports = XMLAttribute = function() {
        function XMLAttribute2(parent, name, value) {
          this.parent = parent;
          if (this.parent) {
            this.options = this.parent.options;
            this.stringify = this.parent.stringify;
          }
          if (name == null) {
            throw new Error("Missing attribute name. " + this.debugInfo(name));
          }
          this.name = this.stringify.name(name);
          this.value = this.stringify.attValue(value);
          this.type = NodeType.Attribute;
          this.isId = false;
          this.schemaTypeInfo = null;
        }
        Object.defineProperty(XMLAttribute2.prototype, "nodeType", {
          get: function() {
            return this.type;
          }
        });
        Object.defineProperty(XMLAttribute2.prototype, "ownerElement", {
          get: function() {
            return this.parent;
          }
        });
        Object.defineProperty(XMLAttribute2.prototype, "textContent", {
          get: function() {
            return this.value;
          },
          set: function(value) {
            return this.value = value || "";
          }
        });
        Object.defineProperty(XMLAttribute2.prototype, "namespaceURI", {
          get: function() {
            return "";
          }
        });
        Object.defineProperty(XMLAttribute2.prototype, "prefix", {
          get: function() {
            return "";
          }
        });
        Object.defineProperty(XMLAttribute2.prototype, "localName", {
          get: function() {
            return this.name;
          }
        });
        Object.defineProperty(XMLAttribute2.prototype, "specified", {
          get: function() {
            return true;
          }
        });
        XMLAttribute2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLAttribute2.prototype.toString = function(options) {
          return this.options.writer.attribute(this, this.options.writer.filterOptions(options));
        };
        XMLAttribute2.prototype.debugInfo = function(name) {
          name = name || this.name;
          if (name == null) {
            return "parent: <" + this.parent.name + ">";
          } else {
            return "attribute: {" + name + "}, parent: <" + this.parent.name + ">";
          }
        };
        XMLAttribute2.prototype.isEqualNode = function(node) {
          if (node.namespaceURI !== this.namespaceURI) {
            return false;
          }
          if (node.prefix !== this.prefix) {
            return false;
          }
          if (node.localName !== this.localName) {
            return false;
          }
          if (node.value !== this.value) {
            return false;
          }
          return true;
        };
        return XMLAttribute2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLNamedNodeMap.js
var require_XMLNamedNodeMap = __commonJS({
  "node_modules/xmlbuilder/lib/XMLNamedNodeMap.js"(exports, module2) {
    (function() {
      var XMLNamedNodeMap;
      module2.exports = XMLNamedNodeMap = function() {
        function XMLNamedNodeMap2(nodes) {
          this.nodes = nodes;
        }
        Object.defineProperty(XMLNamedNodeMap2.prototype, "length", {
          get: function() {
            return Object.keys(this.nodes).length || 0;
          }
        });
        XMLNamedNodeMap2.prototype.clone = function() {
          return this.nodes = null;
        };
        XMLNamedNodeMap2.prototype.getNamedItem = function(name) {
          return this.nodes[name];
        };
        XMLNamedNodeMap2.prototype.setNamedItem = function(node) {
          var oldNode;
          oldNode = this.nodes[node.nodeName];
          this.nodes[node.nodeName] = node;
          return oldNode || null;
        };
        XMLNamedNodeMap2.prototype.removeNamedItem = function(name) {
          var oldNode;
          oldNode = this.nodes[name];
          delete this.nodes[name];
          return oldNode || null;
        };
        XMLNamedNodeMap2.prototype.item = function(index) {
          return this.nodes[Object.keys(this.nodes)[index]] || null;
        };
        XMLNamedNodeMap2.prototype.getNamedItemNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented.");
        };
        XMLNamedNodeMap2.prototype.setNamedItemNS = function(node) {
          throw new Error("This DOM method is not implemented.");
        };
        XMLNamedNodeMap2.prototype.removeNamedItemNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented.");
        };
        return XMLNamedNodeMap2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLElement.js
var require_XMLElement = __commonJS({
  "node_modules/xmlbuilder/lib/XMLElement.js"(exports, module2) {
    (function() {
      var NodeType, XMLAttribute, XMLElement, XMLNamedNodeMap, XMLNode, getValue, isFunction, isObject, ref, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      ref = require_Utility(), isObject = ref.isObject, isFunction = ref.isFunction, getValue = ref.getValue;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      XMLAttribute = require_XMLAttribute();
      XMLNamedNodeMap = require_XMLNamedNodeMap();
      module2.exports = XMLElement = function(superClass) {
        extend(XMLElement2, superClass);
        function XMLElement2(parent, name, attributes) {
          var child, j, len, ref1;
          XMLElement2.__super__.constructor.call(this, parent);
          if (name == null) {
            throw new Error("Missing element name. " + this.debugInfo());
          }
          this.name = this.stringify.name(name);
          this.type = NodeType.Element;
          this.attribs = {};
          this.schemaTypeInfo = null;
          if (attributes != null) {
            this.attribute(attributes);
          }
          if (parent.type === NodeType.Document) {
            this.isRoot = true;
            this.documentObject = parent;
            parent.rootObject = this;
            if (parent.children) {
              ref1 = parent.children;
              for (j = 0, len = ref1.length; j < len; j++) {
                child = ref1[j];
                if (child.type === NodeType.DocType) {
                  child.name = this.name;
                  break;
                }
              }
            }
          }
        }
        Object.defineProperty(XMLElement2.prototype, "tagName", {
          get: function() {
            return this.name;
          }
        });
        Object.defineProperty(XMLElement2.prototype, "namespaceURI", {
          get: function() {
            return "";
          }
        });
        Object.defineProperty(XMLElement2.prototype, "prefix", {
          get: function() {
            return "";
          }
        });
        Object.defineProperty(XMLElement2.prototype, "localName", {
          get: function() {
            return this.name;
          }
        });
        Object.defineProperty(XMLElement2.prototype, "id", {
          get: function() {
            throw new Error("This DOM method is not implemented." + this.debugInfo());
          }
        });
        Object.defineProperty(XMLElement2.prototype, "className", {
          get: function() {
            throw new Error("This DOM method is not implemented." + this.debugInfo());
          }
        });
        Object.defineProperty(XMLElement2.prototype, "classList", {
          get: function() {
            throw new Error("This DOM method is not implemented." + this.debugInfo());
          }
        });
        Object.defineProperty(XMLElement2.prototype, "attributes", {
          get: function() {
            if (!this.attributeMap || !this.attributeMap.nodes) {
              this.attributeMap = new XMLNamedNodeMap(this.attribs);
            }
            return this.attributeMap;
          }
        });
        XMLElement2.prototype.clone = function() {
          var att, attName, clonedSelf, ref1;
          clonedSelf = Object.create(this);
          if (clonedSelf.isRoot) {
            clonedSelf.documentObject = null;
          }
          clonedSelf.attribs = {};
          ref1 = this.attribs;
          for (attName in ref1) {
            if (!hasProp.call(ref1, attName))
              continue;
            att = ref1[attName];
            clonedSelf.attribs[attName] = att.clone();
          }
          clonedSelf.children = [];
          this.children.forEach(function(child) {
            var clonedChild;
            clonedChild = child.clone();
            clonedChild.parent = clonedSelf;
            return clonedSelf.children.push(clonedChild);
          });
          return clonedSelf;
        };
        XMLElement2.prototype.attribute = function(name, value) {
          var attName, attValue;
          if (name != null) {
            name = getValue(name);
          }
          if (isObject(name)) {
            for (attName in name) {
              if (!hasProp.call(name, attName))
                continue;
              attValue = name[attName];
              this.attribute(attName, attValue);
            }
          } else {
            if (isFunction(value)) {
              value = value.apply();
            }
            if (this.options.keepNullAttributes && value == null) {
              this.attribs[name] = new XMLAttribute(this, name, "");
            } else if (value != null) {
              this.attribs[name] = new XMLAttribute(this, name, value);
            }
          }
          return this;
        };
        XMLElement2.prototype.removeAttribute = function(name) {
          var attName, j, len;
          if (name == null) {
            throw new Error("Missing attribute name. " + this.debugInfo());
          }
          name = getValue(name);
          if (Array.isArray(name)) {
            for (j = 0, len = name.length; j < len; j++) {
              attName = name[j];
              delete this.attribs[attName];
            }
          } else {
            delete this.attribs[name];
          }
          return this;
        };
        XMLElement2.prototype.toString = function(options) {
          return this.options.writer.element(this, this.options.writer.filterOptions(options));
        };
        XMLElement2.prototype.att = function(name, value) {
          return this.attribute(name, value);
        };
        XMLElement2.prototype.a = function(name, value) {
          return this.attribute(name, value);
        };
        XMLElement2.prototype.getAttribute = function(name) {
          if (this.attribs.hasOwnProperty(name)) {
            return this.attribs[name].value;
          } else {
            return null;
          }
        };
        XMLElement2.prototype.setAttribute = function(name, value) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getAttributeNode = function(name) {
          if (this.attribs.hasOwnProperty(name)) {
            return this.attribs[name];
          } else {
            return null;
          }
        };
        XMLElement2.prototype.setAttributeNode = function(newAttr) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.removeAttributeNode = function(oldAttr) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getElementsByTagName = function(name) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getAttributeNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.setAttributeNS = function(namespaceURI, qualifiedName, value) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.removeAttributeNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getAttributeNodeNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.setAttributeNodeNS = function(newAttr) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.hasAttribute = function(name) {
          return this.attribs.hasOwnProperty(name);
        };
        XMLElement2.prototype.hasAttributeNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.setIdAttribute = function(name, isId) {
          if (this.attribs.hasOwnProperty(name)) {
            return this.attribs[name].isId;
          } else {
            return isId;
          }
        };
        XMLElement2.prototype.setIdAttributeNS = function(namespaceURI, localName, isId) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.setIdAttributeNode = function(idAttr, isId) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getElementsByTagName = function(tagname) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.getElementsByClassName = function(classNames) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLElement2.prototype.isEqualNode = function(node) {
          var i, j, ref1;
          if (!XMLElement2.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {
            return false;
          }
          if (node.namespaceURI !== this.namespaceURI) {
            return false;
          }
          if (node.prefix !== this.prefix) {
            return false;
          }
          if (node.localName !== this.localName) {
            return false;
          }
          if (node.attribs.length !== this.attribs.length) {
            return false;
          }
          for (i = j = 0, ref1 = this.attribs.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; i = 0 <= ref1 ? ++j : --j) {
            if (!this.attribs[i].isEqualNode(node.attribs[i])) {
              return false;
            }
          }
          return true;
        };
        return XMLElement2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLCharacterData.js
var require_XMLCharacterData = __commonJS({
  "node_modules/xmlbuilder/lib/XMLCharacterData.js"(exports, module2) {
    (function() {
      var XMLCharacterData, XMLNode, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      XMLNode = require_XMLNode();
      module2.exports = XMLCharacterData = function(superClass) {
        extend(XMLCharacterData2, superClass);
        function XMLCharacterData2(parent) {
          XMLCharacterData2.__super__.constructor.call(this, parent);
          this.value = "";
        }
        Object.defineProperty(XMLCharacterData2.prototype, "data", {
          get: function() {
            return this.value;
          },
          set: function(value) {
            return this.value = value || "";
          }
        });
        Object.defineProperty(XMLCharacterData2.prototype, "length", {
          get: function() {
            return this.value.length;
          }
        });
        Object.defineProperty(XMLCharacterData2.prototype, "textContent", {
          get: function() {
            return this.value;
          },
          set: function(value) {
            return this.value = value || "";
          }
        });
        XMLCharacterData2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLCharacterData2.prototype.substringData = function(offset, count) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLCharacterData2.prototype.appendData = function(arg) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLCharacterData2.prototype.insertData = function(offset, arg) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLCharacterData2.prototype.deleteData = function(offset, count) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLCharacterData2.prototype.replaceData = function(offset, count, arg) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLCharacterData2.prototype.isEqualNode = function(node) {
          if (!XMLCharacterData2.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {
            return false;
          }
          if (node.data !== this.data) {
            return false;
          }
          return true;
        };
        return XMLCharacterData2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLCData.js
var require_XMLCData = __commonJS({
  "node_modules/xmlbuilder/lib/XMLCData.js"(exports, module2) {
    (function() {
      var NodeType, XMLCData, XMLCharacterData, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      NodeType = require_NodeType();
      XMLCharacterData = require_XMLCharacterData();
      module2.exports = XMLCData = function(superClass) {
        extend(XMLCData2, superClass);
        function XMLCData2(parent, text) {
          XMLCData2.__super__.constructor.call(this, parent);
          if (text == null) {
            throw new Error("Missing CDATA text. " + this.debugInfo());
          }
          this.name = "#cdata-section";
          this.type = NodeType.CData;
          this.value = this.stringify.cdata(text);
        }
        XMLCData2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLCData2.prototype.toString = function(options) {
          return this.options.writer.cdata(this, this.options.writer.filterOptions(options));
        };
        return XMLCData2;
      }(XMLCharacterData);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLComment.js
var require_XMLComment = __commonJS({
  "node_modules/xmlbuilder/lib/XMLComment.js"(exports, module2) {
    (function() {
      var NodeType, XMLCharacterData, XMLComment, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      NodeType = require_NodeType();
      XMLCharacterData = require_XMLCharacterData();
      module2.exports = XMLComment = function(superClass) {
        extend(XMLComment2, superClass);
        function XMLComment2(parent, text) {
          XMLComment2.__super__.constructor.call(this, parent);
          if (text == null) {
            throw new Error("Missing comment text. " + this.debugInfo());
          }
          this.name = "#comment";
          this.type = NodeType.Comment;
          this.value = this.stringify.comment(text);
        }
        XMLComment2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLComment2.prototype.toString = function(options) {
          return this.options.writer.comment(this, this.options.writer.filterOptions(options));
        };
        return XMLComment2;
      }(XMLCharacterData);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDeclaration.js
var require_XMLDeclaration = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDeclaration.js"(exports, module2) {
    (function() {
      var NodeType, XMLDeclaration, XMLNode, isObject, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      isObject = require_Utility().isObject;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      module2.exports = XMLDeclaration = function(superClass) {
        extend(XMLDeclaration2, superClass);
        function XMLDeclaration2(parent, version, encoding, standalone) {
          var ref;
          XMLDeclaration2.__super__.constructor.call(this, parent);
          if (isObject(version)) {
            ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;
          }
          if (!version) {
            version = "1.0";
          }
          this.type = NodeType.Declaration;
          this.version = this.stringify.xmlVersion(version);
          if (encoding != null) {
            this.encoding = this.stringify.xmlEncoding(encoding);
          }
          if (standalone != null) {
            this.standalone = this.stringify.xmlStandalone(standalone);
          }
        }
        XMLDeclaration2.prototype.toString = function(options) {
          return this.options.writer.declaration(this, this.options.writer.filterOptions(options));
        };
        return XMLDeclaration2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDTDAttList.js
var require_XMLDTDAttList = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDTDAttList.js"(exports, module2) {
    (function() {
      var NodeType, XMLDTDAttList, XMLNode, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      module2.exports = XMLDTDAttList = function(superClass) {
        extend(XMLDTDAttList2, superClass);
        function XMLDTDAttList2(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {
          XMLDTDAttList2.__super__.constructor.call(this, parent);
          if (elementName == null) {
            throw new Error("Missing DTD element name. " + this.debugInfo());
          }
          if (attributeName == null) {
            throw new Error("Missing DTD attribute name. " + this.debugInfo(elementName));
          }
          if (!attributeType) {
            throw new Error("Missing DTD attribute type. " + this.debugInfo(elementName));
          }
          if (!defaultValueType) {
            throw new Error("Missing DTD attribute default. " + this.debugInfo(elementName));
          }
          if (defaultValueType.indexOf("#") !== 0) {
            defaultValueType = "#" + defaultValueType;
          }
          if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {
            throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. " + this.debugInfo(elementName));
          }
          if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {
            throw new Error("Default value only applies to #FIXED or #DEFAULT. " + this.debugInfo(elementName));
          }
          this.elementName = this.stringify.name(elementName);
          this.type = NodeType.AttributeDeclaration;
          this.attributeName = this.stringify.name(attributeName);
          this.attributeType = this.stringify.dtdAttType(attributeType);
          if (defaultValue) {
            this.defaultValue = this.stringify.dtdAttDefault(defaultValue);
          }
          this.defaultValueType = defaultValueType;
        }
        XMLDTDAttList2.prototype.toString = function(options) {
          return this.options.writer.dtdAttList(this, this.options.writer.filterOptions(options));
        };
        return XMLDTDAttList2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDTDEntity.js
var require_XMLDTDEntity = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDTDEntity.js"(exports, module2) {
    (function() {
      var NodeType, XMLDTDEntity, XMLNode, isObject, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      isObject = require_Utility().isObject;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      module2.exports = XMLDTDEntity = function(superClass) {
        extend(XMLDTDEntity2, superClass);
        function XMLDTDEntity2(parent, pe, name, value) {
          XMLDTDEntity2.__super__.constructor.call(this, parent);
          if (name == null) {
            throw new Error("Missing DTD entity name. " + this.debugInfo(name));
          }
          if (value == null) {
            throw new Error("Missing DTD entity value. " + this.debugInfo(name));
          }
          this.pe = !!pe;
          this.name = this.stringify.name(name);
          this.type = NodeType.EntityDeclaration;
          if (!isObject(value)) {
            this.value = this.stringify.dtdEntityValue(value);
            this.internal = true;
          } else {
            if (!value.pubID && !value.sysID) {
              throw new Error("Public and/or system identifiers are required for an external entity. " + this.debugInfo(name));
            }
            if (value.pubID && !value.sysID) {
              throw new Error("System identifier is required for a public external entity. " + this.debugInfo(name));
            }
            this.internal = false;
            if (value.pubID != null) {
              this.pubID = this.stringify.dtdPubID(value.pubID);
            }
            if (value.sysID != null) {
              this.sysID = this.stringify.dtdSysID(value.sysID);
            }
            if (value.nData != null) {
              this.nData = this.stringify.dtdNData(value.nData);
            }
            if (this.pe && this.nData) {
              throw new Error("Notation declaration is not allowed in a parameter entity. " + this.debugInfo(name));
            }
          }
        }
        Object.defineProperty(XMLDTDEntity2.prototype, "publicId", {
          get: function() {
            return this.pubID;
          }
        });
        Object.defineProperty(XMLDTDEntity2.prototype, "systemId", {
          get: function() {
            return this.sysID;
          }
        });
        Object.defineProperty(XMLDTDEntity2.prototype, "notationName", {
          get: function() {
            return this.nData || null;
          }
        });
        Object.defineProperty(XMLDTDEntity2.prototype, "inputEncoding", {
          get: function() {
            return null;
          }
        });
        Object.defineProperty(XMLDTDEntity2.prototype, "xmlEncoding", {
          get: function() {
            return null;
          }
        });
        Object.defineProperty(XMLDTDEntity2.prototype, "xmlVersion", {
          get: function() {
            return null;
          }
        });
        XMLDTDEntity2.prototype.toString = function(options) {
          return this.options.writer.dtdEntity(this, this.options.writer.filterOptions(options));
        };
        return XMLDTDEntity2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDTDElement.js
var require_XMLDTDElement = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDTDElement.js"(exports, module2) {
    (function() {
      var NodeType, XMLDTDElement, XMLNode, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      module2.exports = XMLDTDElement = function(superClass) {
        extend(XMLDTDElement2, superClass);
        function XMLDTDElement2(parent, name, value) {
          XMLDTDElement2.__super__.constructor.call(this, parent);
          if (name == null) {
            throw new Error("Missing DTD element name. " + this.debugInfo());
          }
          if (!value) {
            value = "(#PCDATA)";
          }
          if (Array.isArray(value)) {
            value = "(" + value.join(",") + ")";
          }
          this.name = this.stringify.name(name);
          this.type = NodeType.ElementDeclaration;
          this.value = this.stringify.dtdElementValue(value);
        }
        XMLDTDElement2.prototype.toString = function(options) {
          return this.options.writer.dtdElement(this, this.options.writer.filterOptions(options));
        };
        return XMLDTDElement2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDTDNotation.js
var require_XMLDTDNotation = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDTDNotation.js"(exports, module2) {
    (function() {
      var NodeType, XMLDTDNotation, XMLNode, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      module2.exports = XMLDTDNotation = function(superClass) {
        extend(XMLDTDNotation2, superClass);
        function XMLDTDNotation2(parent, name, value) {
          XMLDTDNotation2.__super__.constructor.call(this, parent);
          if (name == null) {
            throw new Error("Missing DTD notation name. " + this.debugInfo(name));
          }
          if (!value.pubID && !value.sysID) {
            throw new Error("Public or system identifiers are required for an external entity. " + this.debugInfo(name));
          }
          this.name = this.stringify.name(name);
          this.type = NodeType.NotationDeclaration;
          if (value.pubID != null) {
            this.pubID = this.stringify.dtdPubID(value.pubID);
          }
          if (value.sysID != null) {
            this.sysID = this.stringify.dtdSysID(value.sysID);
          }
        }
        Object.defineProperty(XMLDTDNotation2.prototype, "publicId", {
          get: function() {
            return this.pubID;
          }
        });
        Object.defineProperty(XMLDTDNotation2.prototype, "systemId", {
          get: function() {
            return this.sysID;
          }
        });
        XMLDTDNotation2.prototype.toString = function(options) {
          return this.options.writer.dtdNotation(this, this.options.writer.filterOptions(options));
        };
        return XMLDTDNotation2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDocType.js
var require_XMLDocType = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDocType.js"(exports, module2) {
    (function() {
      var NodeType, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNamedNodeMap, XMLNode, isObject, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      isObject = require_Utility().isObject;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      XMLDTDAttList = require_XMLDTDAttList();
      XMLDTDEntity = require_XMLDTDEntity();
      XMLDTDElement = require_XMLDTDElement();
      XMLDTDNotation = require_XMLDTDNotation();
      XMLNamedNodeMap = require_XMLNamedNodeMap();
      module2.exports = XMLDocType = function(superClass) {
        extend(XMLDocType2, superClass);
        function XMLDocType2(parent, pubID, sysID) {
          var child, i, len, ref, ref1, ref2;
          XMLDocType2.__super__.constructor.call(this, parent);
          this.type = NodeType.DocType;
          if (parent.children) {
            ref = parent.children;
            for (i = 0, len = ref.length; i < len; i++) {
              child = ref[i];
              if (child.type === NodeType.Element) {
                this.name = child.name;
                break;
              }
            }
          }
          this.documentObject = parent;
          if (isObject(pubID)) {
            ref1 = pubID, pubID = ref1.pubID, sysID = ref1.sysID;
          }
          if (sysID == null) {
            ref2 = [pubID, sysID], sysID = ref2[0], pubID = ref2[1];
          }
          if (pubID != null) {
            this.pubID = this.stringify.dtdPubID(pubID);
          }
          if (sysID != null) {
            this.sysID = this.stringify.dtdSysID(sysID);
          }
        }
        Object.defineProperty(XMLDocType2.prototype, "entities", {
          get: function() {
            var child, i, len, nodes, ref;
            nodes = {};
            ref = this.children;
            for (i = 0, len = ref.length; i < len; i++) {
              child = ref[i];
              if (child.type === NodeType.EntityDeclaration && !child.pe) {
                nodes[child.name] = child;
              }
            }
            return new XMLNamedNodeMap(nodes);
          }
        });
        Object.defineProperty(XMLDocType2.prototype, "notations", {
          get: function() {
            var child, i, len, nodes, ref;
            nodes = {};
            ref = this.children;
            for (i = 0, len = ref.length; i < len; i++) {
              child = ref[i];
              if (child.type === NodeType.NotationDeclaration) {
                nodes[child.name] = child;
              }
            }
            return new XMLNamedNodeMap(nodes);
          }
        });
        Object.defineProperty(XMLDocType2.prototype, "publicId", {
          get: function() {
            return this.pubID;
          }
        });
        Object.defineProperty(XMLDocType2.prototype, "systemId", {
          get: function() {
            return this.sysID;
          }
        });
        Object.defineProperty(XMLDocType2.prototype, "internalSubset", {
          get: function() {
            throw new Error("This DOM method is not implemented." + this.debugInfo());
          }
        });
        XMLDocType2.prototype.element = function(name, value) {
          var child;
          child = new XMLDTDElement(this, name, value);
          this.children.push(child);
          return this;
        };
        XMLDocType2.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {
          var child;
          child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);
          this.children.push(child);
          return this;
        };
        XMLDocType2.prototype.entity = function(name, value) {
          var child;
          child = new XMLDTDEntity(this, false, name, value);
          this.children.push(child);
          return this;
        };
        XMLDocType2.prototype.pEntity = function(name, value) {
          var child;
          child = new XMLDTDEntity(this, true, name, value);
          this.children.push(child);
          return this;
        };
        XMLDocType2.prototype.notation = function(name, value) {
          var child;
          child = new XMLDTDNotation(this, name, value);
          this.children.push(child);
          return this;
        };
        XMLDocType2.prototype.toString = function(options) {
          return this.options.writer.docType(this, this.options.writer.filterOptions(options));
        };
        XMLDocType2.prototype.ele = function(name, value) {
          return this.element(name, value);
        };
        XMLDocType2.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {
          return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);
        };
        XMLDocType2.prototype.ent = function(name, value) {
          return this.entity(name, value);
        };
        XMLDocType2.prototype.pent = function(name, value) {
          return this.pEntity(name, value);
        };
        XMLDocType2.prototype.not = function(name, value) {
          return this.notation(name, value);
        };
        XMLDocType2.prototype.up = function() {
          return this.root() || this.documentObject;
        };
        XMLDocType2.prototype.isEqualNode = function(node) {
          if (!XMLDocType2.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {
            return false;
          }
          if (node.name !== this.name) {
            return false;
          }
          if (node.publicId !== this.publicId) {
            return false;
          }
          if (node.systemId !== this.systemId) {
            return false;
          }
          return true;
        };
        return XMLDocType2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLRaw.js
var require_XMLRaw = __commonJS({
  "node_modules/xmlbuilder/lib/XMLRaw.js"(exports, module2) {
    (function() {
      var NodeType, XMLNode, XMLRaw, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      NodeType = require_NodeType();
      XMLNode = require_XMLNode();
      module2.exports = XMLRaw = function(superClass) {
        extend(XMLRaw2, superClass);
        function XMLRaw2(parent, text) {
          XMLRaw2.__super__.constructor.call(this, parent);
          if (text == null) {
            throw new Error("Missing raw text. " + this.debugInfo());
          }
          this.type = NodeType.Raw;
          this.value = this.stringify.raw(text);
        }
        XMLRaw2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLRaw2.prototype.toString = function(options) {
          return this.options.writer.raw(this, this.options.writer.filterOptions(options));
        };
        return XMLRaw2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLText.js
var require_XMLText = __commonJS({
  "node_modules/xmlbuilder/lib/XMLText.js"(exports, module2) {
    (function() {
      var NodeType, XMLCharacterData, XMLText, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      NodeType = require_NodeType();
      XMLCharacterData = require_XMLCharacterData();
      module2.exports = XMLText = function(superClass) {
        extend(XMLText2, superClass);
        function XMLText2(parent, text) {
          XMLText2.__super__.constructor.call(this, parent);
          if (text == null) {
            throw new Error("Missing element text. " + this.debugInfo());
          }
          this.name = "#text";
          this.type = NodeType.Text;
          this.value = this.stringify.text(text);
        }
        Object.defineProperty(XMLText2.prototype, "isElementContentWhitespace", {
          get: function() {
            throw new Error("This DOM method is not implemented." + this.debugInfo());
          }
        });
        Object.defineProperty(XMLText2.prototype, "wholeText", {
          get: function() {
            var next, prev, str;
            str = "";
            prev = this.previousSibling;
            while (prev) {
              str = prev.data + str;
              prev = prev.previousSibling;
            }
            str += this.data;
            next = this.nextSibling;
            while (next) {
              str = str + next.data;
              next = next.nextSibling;
            }
            return str;
          }
        });
        XMLText2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLText2.prototype.toString = function(options) {
          return this.options.writer.text(this, this.options.writer.filterOptions(options));
        };
        XMLText2.prototype.splitText = function(offset) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLText2.prototype.replaceWholeText = function(content) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        return XMLText2;
      }(XMLCharacterData);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLProcessingInstruction.js
var require_XMLProcessingInstruction = __commonJS({
  "node_modules/xmlbuilder/lib/XMLProcessingInstruction.js"(exports, module2) {
    (function() {
      var NodeType, XMLCharacterData, XMLProcessingInstruction, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      NodeType = require_NodeType();
      XMLCharacterData = require_XMLCharacterData();
      module2.exports = XMLProcessingInstruction = function(superClass) {
        extend(XMLProcessingInstruction2, superClass);
        function XMLProcessingInstruction2(parent, target, value) {
          XMLProcessingInstruction2.__super__.constructor.call(this, parent);
          if (target == null) {
            throw new Error("Missing instruction target. " + this.debugInfo());
          }
          this.type = NodeType.ProcessingInstruction;
          this.target = this.stringify.insTarget(target);
          this.name = this.target;
          if (value) {
            this.value = this.stringify.insValue(value);
          }
        }
        XMLProcessingInstruction2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLProcessingInstruction2.prototype.toString = function(options) {
          return this.options.writer.processingInstruction(this, this.options.writer.filterOptions(options));
        };
        XMLProcessingInstruction2.prototype.isEqualNode = function(node) {
          if (!XMLProcessingInstruction2.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {
            return false;
          }
          if (node.target !== this.target) {
            return false;
          }
          return true;
        };
        return XMLProcessingInstruction2;
      }(XMLCharacterData);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDummy.js
var require_XMLDummy = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDummy.js"(exports, module2) {
    (function() {
      var NodeType, XMLDummy, XMLNode, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      module2.exports = XMLDummy = function(superClass) {
        extend(XMLDummy2, superClass);
        function XMLDummy2(parent) {
          XMLDummy2.__super__.constructor.call(this, parent);
          this.type = NodeType.Dummy;
        }
        XMLDummy2.prototype.clone = function() {
          return Object.create(this);
        };
        XMLDummy2.prototype.toString = function(options) {
          return "";
        };
        return XMLDummy2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLNodeList.js
var require_XMLNodeList = __commonJS({
  "node_modules/xmlbuilder/lib/XMLNodeList.js"(exports, module2) {
    (function() {
      var XMLNodeList;
      module2.exports = XMLNodeList = function() {
        function XMLNodeList2(nodes) {
          this.nodes = nodes;
        }
        Object.defineProperty(XMLNodeList2.prototype, "length", {
          get: function() {
            return this.nodes.length || 0;
          }
        });
        XMLNodeList2.prototype.clone = function() {
          return this.nodes = null;
        };
        XMLNodeList2.prototype.item = function(index) {
          return this.nodes[index] || null;
        };
        return XMLNodeList2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/DocumentPosition.js
var require_DocumentPosition = __commonJS({
  "node_modules/xmlbuilder/lib/DocumentPosition.js"(exports, module2) {
    (function() {
      module2.exports = {
        Disconnected: 1,
        Preceding: 2,
        Following: 4,
        Contains: 8,
        ContainedBy: 16,
        ImplementationSpecific: 32
      };
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLNode.js
var require_XMLNode = __commonJS({
  "node_modules/xmlbuilder/lib/XMLNode.js"(exports, module2) {
    (function() {
      var DocumentPosition, NodeType, XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLNamedNodeMap, XMLNode, XMLNodeList, XMLProcessingInstruction, XMLRaw, XMLText, getValue, isEmpty, isFunction, isObject, ref1, hasProp = {}.hasOwnProperty;
      ref1 = require_Utility(), isObject = ref1.isObject, isFunction = ref1.isFunction, isEmpty = ref1.isEmpty, getValue = ref1.getValue;
      XMLElement = null;
      XMLCData = null;
      XMLComment = null;
      XMLDeclaration = null;
      XMLDocType = null;
      XMLRaw = null;
      XMLText = null;
      XMLProcessingInstruction = null;
      XMLDummy = null;
      NodeType = null;
      XMLNodeList = null;
      XMLNamedNodeMap = null;
      DocumentPosition = null;
      module2.exports = XMLNode = function() {
        function XMLNode2(parent1) {
          this.parent = parent1;
          if (this.parent) {
            this.options = this.parent.options;
            this.stringify = this.parent.stringify;
          }
          this.value = null;
          this.children = [];
          this.baseURI = null;
          if (!XMLElement) {
            XMLElement = require_XMLElement();
            XMLCData = require_XMLCData();
            XMLComment = require_XMLComment();
            XMLDeclaration = require_XMLDeclaration();
            XMLDocType = require_XMLDocType();
            XMLRaw = require_XMLRaw();
            XMLText = require_XMLText();
            XMLProcessingInstruction = require_XMLProcessingInstruction();
            XMLDummy = require_XMLDummy();
            NodeType = require_NodeType();
            XMLNodeList = require_XMLNodeList();
            XMLNamedNodeMap = require_XMLNamedNodeMap();
            DocumentPosition = require_DocumentPosition();
          }
        }
        Object.defineProperty(XMLNode2.prototype, "nodeName", {
          get: function() {
            return this.name;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "nodeType", {
          get: function() {
            return this.type;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "nodeValue", {
          get: function() {
            return this.value;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "parentNode", {
          get: function() {
            return this.parent;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "childNodes", {
          get: function() {
            if (!this.childNodeList || !this.childNodeList.nodes) {
              this.childNodeList = new XMLNodeList(this.children);
            }
            return this.childNodeList;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "firstChild", {
          get: function() {
            return this.children[0] || null;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "lastChild", {
          get: function() {
            return this.children[this.children.length - 1] || null;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "previousSibling", {
          get: function() {
            var i;
            i = this.parent.children.indexOf(this);
            return this.parent.children[i - 1] || null;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "nextSibling", {
          get: function() {
            var i;
            i = this.parent.children.indexOf(this);
            return this.parent.children[i + 1] || null;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "ownerDocument", {
          get: function() {
            return this.document() || null;
          }
        });
        Object.defineProperty(XMLNode2.prototype, "textContent", {
          get: function() {
            var child, j, len, ref2, str;
            if (this.nodeType === NodeType.Element || this.nodeType === NodeType.DocumentFragment) {
              str = "";
              ref2 = this.children;
              for (j = 0, len = ref2.length; j < len; j++) {
                child = ref2[j];
                if (child.textContent) {
                  str += child.textContent;
                }
              }
              return str;
            } else {
              return null;
            }
          },
          set: function(value) {
            throw new Error("This DOM method is not implemented." + this.debugInfo());
          }
        });
        XMLNode2.prototype.setParent = function(parent) {
          var child, j, len, ref2, results;
          this.parent = parent;
          if (parent) {
            this.options = parent.options;
            this.stringify = parent.stringify;
          }
          ref2 = this.children;
          results = [];
          for (j = 0, len = ref2.length; j < len; j++) {
            child = ref2[j];
            results.push(child.setParent(this));
          }
          return results;
        };
        XMLNode2.prototype.element = function(name, attributes, text) {
          var childNode, item, j, k, key, lastChild, len, len1, ref2, ref3, val;
          lastChild = null;
          if (attributes === null && text == null) {
            ref2 = [{}, null], attributes = ref2[0], text = ref2[1];
          }
          if (attributes == null) {
            attributes = {};
          }
          attributes = getValue(attributes);
          if (!isObject(attributes)) {
            ref3 = [attributes, text], text = ref3[0], attributes = ref3[1];
          }
          if (name != null) {
            name = getValue(name);
          }
          if (Array.isArray(name)) {
            for (j = 0, len = name.length; j < len; j++) {
              item = name[j];
              lastChild = this.element(item);
            }
          } else if (isFunction(name)) {
            lastChild = this.element(name.apply());
          } else if (isObject(name)) {
            for (key in name) {
              if (!hasProp.call(name, key))
                continue;
              val = name[key];
              if (isFunction(val)) {
                val = val.apply();
              }
              if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {
                lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);
              } else if (!this.options.separateArrayItems && Array.isArray(val) && isEmpty(val)) {
                lastChild = this.dummy();
              } else if (isObject(val) && isEmpty(val)) {
                lastChild = this.element(key);
              } else if (!this.options.keepNullNodes && val == null) {
                lastChild = this.dummy();
              } else if (!this.options.separateArrayItems && Array.isArray(val)) {
                for (k = 0, len1 = val.length; k < len1; k++) {
                  item = val[k];
                  childNode = {};
                  childNode[key] = item;
                  lastChild = this.element(childNode);
                }
              } else if (isObject(val)) {
                if (!this.options.ignoreDecorators && this.stringify.convertTextKey && key.indexOf(this.stringify.convertTextKey) === 0) {
                  lastChild = this.element(val);
                } else {
                  lastChild = this.element(key);
                  lastChild.element(val);
                }
              } else {
                lastChild = this.element(key, val);
              }
            }
          } else if (!this.options.keepNullNodes && text === null) {
            lastChild = this.dummy();
          } else {
            if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {
              lastChild = this.text(text);
            } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {
              lastChild = this.cdata(text);
            } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {
              lastChild = this.comment(text);
            } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {
              lastChild = this.raw(text);
            } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {
              lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);
            } else {
              lastChild = this.node(name, attributes, text);
            }
          }
          if (lastChild == null) {
            throw new Error("Could not create any elements with: " + name + ". " + this.debugInfo());
          }
          return lastChild;
        };
        XMLNode2.prototype.insertBefore = function(name, attributes, text) {
          var child, i, newChild, refChild, removed;
          if (name != null ? name.type : void 0) {
            newChild = name;
            refChild = attributes;
            newChild.setParent(this);
            if (refChild) {
              i = children.indexOf(refChild);
              removed = children.splice(i);
              children.push(newChild);
              Array.prototype.push.apply(children, removed);
            } else {
              children.push(newChild);
            }
            return newChild;
          } else {
            if (this.isRoot) {
              throw new Error("Cannot insert elements at root level. " + this.debugInfo(name));
            }
            i = this.parent.children.indexOf(this);
            removed = this.parent.children.splice(i);
            child = this.parent.element(name, attributes, text);
            Array.prototype.push.apply(this.parent.children, removed);
            return child;
          }
        };
        XMLNode2.prototype.insertAfter = function(name, attributes, text) {
          var child, i, removed;
          if (this.isRoot) {
            throw new Error("Cannot insert elements at root level. " + this.debugInfo(name));
          }
          i = this.parent.children.indexOf(this);
          removed = this.parent.children.splice(i + 1);
          child = this.parent.element(name, attributes, text);
          Array.prototype.push.apply(this.parent.children, removed);
          return child;
        };
        XMLNode2.prototype.remove = function() {
          var i, ref2;
          if (this.isRoot) {
            throw new Error("Cannot remove the root element. " + this.debugInfo());
          }
          i = this.parent.children.indexOf(this);
          [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref2 = [])), ref2;
          return this.parent;
        };
        XMLNode2.prototype.node = function(name, attributes, text) {
          var child, ref2;
          if (name != null) {
            name = getValue(name);
          }
          attributes || (attributes = {});
          attributes = getValue(attributes);
          if (!isObject(attributes)) {
            ref2 = [attributes, text], text = ref2[0], attributes = ref2[1];
          }
          child = new XMLElement(this, name, attributes);
          if (text != null) {
            child.text(text);
          }
          this.children.push(child);
          return child;
        };
        XMLNode2.prototype.text = function(value) {
          var child;
          if (isObject(value)) {
            this.element(value);
          }
          child = new XMLText(this, value);
          this.children.push(child);
          return this;
        };
        XMLNode2.prototype.cdata = function(value) {
          var child;
          child = new XMLCData(this, value);
          this.children.push(child);
          return this;
        };
        XMLNode2.prototype.comment = function(value) {
          var child;
          child = new XMLComment(this, value);
          this.children.push(child);
          return this;
        };
        XMLNode2.prototype.commentBefore = function(value) {
          var child, i, removed;
          i = this.parent.children.indexOf(this);
          removed = this.parent.children.splice(i);
          child = this.parent.comment(value);
          Array.prototype.push.apply(this.parent.children, removed);
          return this;
        };
        XMLNode2.prototype.commentAfter = function(value) {
          var child, i, removed;
          i = this.parent.children.indexOf(this);
          removed = this.parent.children.splice(i + 1);
          child = this.parent.comment(value);
          Array.prototype.push.apply(this.parent.children, removed);
          return this;
        };
        XMLNode2.prototype.raw = function(value) {
          var child;
          child = new XMLRaw(this, value);
          this.children.push(child);
          return this;
        };
        XMLNode2.prototype.dummy = function() {
          var child;
          child = new XMLDummy(this);
          return child;
        };
        XMLNode2.prototype.instruction = function(target, value) {
          var insTarget, insValue, instruction, j, len;
          if (target != null) {
            target = getValue(target);
          }
          if (value != null) {
            value = getValue(value);
          }
          if (Array.isArray(target)) {
            for (j = 0, len = target.length; j < len; j++) {
              insTarget = target[j];
              this.instruction(insTarget);
            }
          } else if (isObject(target)) {
            for (insTarget in target) {
              if (!hasProp.call(target, insTarget))
                continue;
              insValue = target[insTarget];
              this.instruction(insTarget, insValue);
            }
          } else {
            if (isFunction(value)) {
              value = value.apply();
            }
            instruction = new XMLProcessingInstruction(this, target, value);
            this.children.push(instruction);
          }
          return this;
        };
        XMLNode2.prototype.instructionBefore = function(target, value) {
          var child, i, removed;
          i = this.parent.children.indexOf(this);
          removed = this.parent.children.splice(i);
          child = this.parent.instruction(target, value);
          Array.prototype.push.apply(this.parent.children, removed);
          return this;
        };
        XMLNode2.prototype.instructionAfter = function(target, value) {
          var child, i, removed;
          i = this.parent.children.indexOf(this);
          removed = this.parent.children.splice(i + 1);
          child = this.parent.instruction(target, value);
          Array.prototype.push.apply(this.parent.children, removed);
          return this;
        };
        XMLNode2.prototype.declaration = function(version, encoding, standalone) {
          var doc, xmldec;
          doc = this.document();
          xmldec = new XMLDeclaration(doc, version, encoding, standalone);
          if (doc.children.length === 0) {
            doc.children.unshift(xmldec);
          } else if (doc.children[0].type === NodeType.Declaration) {
            doc.children[0] = xmldec;
          } else {
            doc.children.unshift(xmldec);
          }
          return doc.root() || doc;
        };
        XMLNode2.prototype.dtd = function(pubID, sysID) {
          var child, doc, doctype, i, j, k, len, len1, ref2, ref3;
          doc = this.document();
          doctype = new XMLDocType(doc, pubID, sysID);
          ref2 = doc.children;
          for (i = j = 0, len = ref2.length; j < len; i = ++j) {
            child = ref2[i];
            if (child.type === NodeType.DocType) {
              doc.children[i] = doctype;
              return doctype;
            }
          }
          ref3 = doc.children;
          for (i = k = 0, len1 = ref3.length; k < len1; i = ++k) {
            child = ref3[i];
            if (child.isRoot) {
              doc.children.splice(i, 0, doctype);
              return doctype;
            }
          }
          doc.children.push(doctype);
          return doctype;
        };
        XMLNode2.prototype.up = function() {
          if (this.isRoot) {
            throw new Error("The root node has no parent. Use doc() if you need to get the document object.");
          }
          return this.parent;
        };
        XMLNode2.prototype.root = function() {
          var node;
          node = this;
          while (node) {
            if (node.type === NodeType.Document) {
              return node.rootObject;
            } else if (node.isRoot) {
              return node;
            } else {
              node = node.parent;
            }
          }
        };
        XMLNode2.prototype.document = function() {
          var node;
          node = this;
          while (node) {
            if (node.type === NodeType.Document) {
              return node;
            } else {
              node = node.parent;
            }
          }
        };
        XMLNode2.prototype.end = function(options) {
          return this.document().end(options);
        };
        XMLNode2.prototype.prev = function() {
          var i;
          i = this.parent.children.indexOf(this);
          if (i < 1) {
            throw new Error("Already at the first node. " + this.debugInfo());
          }
          return this.parent.children[i - 1];
        };
        XMLNode2.prototype.next = function() {
          var i;
          i = this.parent.children.indexOf(this);
          if (i === -1 || i === this.parent.children.length - 1) {
            throw new Error("Already at the last node. " + this.debugInfo());
          }
          return this.parent.children[i + 1];
        };
        XMLNode2.prototype.importDocument = function(doc) {
          var clonedRoot;
          clonedRoot = doc.root().clone();
          clonedRoot.parent = this;
          clonedRoot.isRoot = false;
          this.children.push(clonedRoot);
          return this;
        };
        XMLNode2.prototype.debugInfo = function(name) {
          var ref2, ref3;
          name = name || this.name;
          if (name == null && !((ref2 = this.parent) != null ? ref2.name : void 0)) {
            return "";
          } else if (name == null) {
            return "parent: <" + this.parent.name + ">";
          } else if (!((ref3 = this.parent) != null ? ref3.name : void 0)) {
            return "node: <" + name + ">";
          } else {
            return "node: <" + name + ">, parent: <" + this.parent.name + ">";
          }
        };
        XMLNode2.prototype.ele = function(name, attributes, text) {
          return this.element(name, attributes, text);
        };
        XMLNode2.prototype.nod = function(name, attributes, text) {
          return this.node(name, attributes, text);
        };
        XMLNode2.prototype.txt = function(value) {
          return this.text(value);
        };
        XMLNode2.prototype.dat = function(value) {
          return this.cdata(value);
        };
        XMLNode2.prototype.com = function(value) {
          return this.comment(value);
        };
        XMLNode2.prototype.ins = function(target, value) {
          return this.instruction(target, value);
        };
        XMLNode2.prototype.doc = function() {
          return this.document();
        };
        XMLNode2.prototype.dec = function(version, encoding, standalone) {
          return this.declaration(version, encoding, standalone);
        };
        XMLNode2.prototype.e = function(name, attributes, text) {
          return this.element(name, attributes, text);
        };
        XMLNode2.prototype.n = function(name, attributes, text) {
          return this.node(name, attributes, text);
        };
        XMLNode2.prototype.t = function(value) {
          return this.text(value);
        };
        XMLNode2.prototype.d = function(value) {
          return this.cdata(value);
        };
        XMLNode2.prototype.c = function(value) {
          return this.comment(value);
        };
        XMLNode2.prototype.r = function(value) {
          return this.raw(value);
        };
        XMLNode2.prototype.i = function(target, value) {
          return this.instruction(target, value);
        };
        XMLNode2.prototype.u = function() {
          return this.up();
        };
        XMLNode2.prototype.importXMLBuilder = function(doc) {
          return this.importDocument(doc);
        };
        XMLNode2.prototype.replaceChild = function(newChild, oldChild) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.removeChild = function(oldChild) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.appendChild = function(newChild) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.hasChildNodes = function() {
          return this.children.length !== 0;
        };
        XMLNode2.prototype.cloneNode = function(deep) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.normalize = function() {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.isSupported = function(feature, version) {
          return true;
        };
        XMLNode2.prototype.hasAttributes = function() {
          return this.attribs.length !== 0;
        };
        XMLNode2.prototype.compareDocumentPosition = function(other) {
          var ref, res;
          ref = this;
          if (ref === other) {
            return 0;
          } else if (this.document() !== other.document()) {
            res = DocumentPosition.Disconnected | DocumentPosition.ImplementationSpecific;
            if (Math.random() < 0.5) {
              res |= DocumentPosition.Preceding;
            } else {
              res |= DocumentPosition.Following;
            }
            return res;
          } else if (ref.isAncestor(other)) {
            return DocumentPosition.Contains | DocumentPosition.Preceding;
          } else if (ref.isDescendant(other)) {
            return DocumentPosition.Contains | DocumentPosition.Following;
          } else if (ref.isPreceding(other)) {
            return DocumentPosition.Preceding;
          } else {
            return DocumentPosition.Following;
          }
        };
        XMLNode2.prototype.isSameNode = function(other) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.lookupPrefix = function(namespaceURI) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.isDefaultNamespace = function(namespaceURI) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.lookupNamespaceURI = function(prefix) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.isEqualNode = function(node) {
          var i, j, ref2;
          if (node.nodeType !== this.nodeType) {
            return false;
          }
          if (node.children.length !== this.children.length) {
            return false;
          }
          for (i = j = 0, ref2 = this.children.length - 1; 0 <= ref2 ? j <= ref2 : j >= ref2; i = 0 <= ref2 ? ++j : --j) {
            if (!this.children[i].isEqualNode(node.children[i])) {
              return false;
            }
          }
          return true;
        };
        XMLNode2.prototype.getFeature = function(feature, version) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.setUserData = function(key, data, handler) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.getUserData = function(key) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLNode2.prototype.contains = function(other) {
          if (!other) {
            return false;
          }
          return other === this || this.isDescendant(other);
        };
        XMLNode2.prototype.isDescendant = function(node) {
          var child, isDescendantChild, j, len, ref2;
          ref2 = this.children;
          for (j = 0, len = ref2.length; j < len; j++) {
            child = ref2[j];
            if (node === child) {
              return true;
            }
            isDescendantChild = child.isDescendant(node);
            if (isDescendantChild) {
              return true;
            }
          }
          return false;
        };
        XMLNode2.prototype.isAncestor = function(node) {
          return node.isDescendant(this);
        };
        XMLNode2.prototype.isPreceding = function(node) {
          var nodePos, thisPos;
          nodePos = this.treePosition(node);
          thisPos = this.treePosition(this);
          if (nodePos === -1 || thisPos === -1) {
            return false;
          } else {
            return nodePos < thisPos;
          }
        };
        XMLNode2.prototype.isFollowing = function(node) {
          var nodePos, thisPos;
          nodePos = this.treePosition(node);
          thisPos = this.treePosition(this);
          if (nodePos === -1 || thisPos === -1) {
            return false;
          } else {
            return nodePos > thisPos;
          }
        };
        XMLNode2.prototype.treePosition = function(node) {
          var found, pos;
          pos = 0;
          found = false;
          this.foreachTreeNode(this.document(), function(childNode) {
            pos++;
            if (!found && childNode === node) {
              return found = true;
            }
          });
          if (found) {
            return pos;
          } else {
            return -1;
          }
        };
        XMLNode2.prototype.foreachTreeNode = function(node, func) {
          var child, j, len, ref2, res;
          node || (node = this.document());
          ref2 = node.children;
          for (j = 0, len = ref2.length; j < len; j++) {
            child = ref2[j];
            if (res = func(child)) {
              return res;
            } else {
              res = this.foreachTreeNode(child, func);
              if (res) {
                return res;
              }
            }
          }
        };
        return XMLNode2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLStringifier.js
var require_XMLStringifier = __commonJS({
  "node_modules/xmlbuilder/lib/XMLStringifier.js"(exports, module2) {
    (function() {
      var XMLStringifier, bind = function(fn, me) {
        return function() {
          return fn.apply(me, arguments);
        };
      }, hasProp = {}.hasOwnProperty;
      module2.exports = XMLStringifier = function() {
        function XMLStringifier2(options) {
          this.assertLegalName = bind(this.assertLegalName, this);
          this.assertLegalChar = bind(this.assertLegalChar, this);
          var key, ref, value;
          options || (options = {});
          this.options = options;
          if (!this.options.version) {
            this.options.version = "1.0";
          }
          ref = options.stringify || {};
          for (key in ref) {
            if (!hasProp.call(ref, key))
              continue;
            value = ref[key];
            this[key] = value;
          }
        }
        XMLStringifier2.prototype.name = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalName("" + val || "");
        };
        XMLStringifier2.prototype.text = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar(this.textEscape("" + val || ""));
        };
        XMLStringifier2.prototype.cdata = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          val = "" + val || "";
          val = val.replace("]]>", "]]]]><![CDATA[>");
          return this.assertLegalChar(val);
        };
        XMLStringifier2.prototype.comment = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          val = "" + val || "";
          if (val.match(/--/)) {
            throw new Error("Comment text cannot contain double-hypen: " + val);
          }
          return this.assertLegalChar(val);
        };
        XMLStringifier2.prototype.raw = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return "" + val || "";
        };
        XMLStringifier2.prototype.attValue = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar(this.attEscape(val = "" + val || ""));
        };
        XMLStringifier2.prototype.insTarget = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.insValue = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          val = "" + val || "";
          if (val.match(/\?>/)) {
            throw new Error("Invalid processing instruction value: " + val);
          }
          return this.assertLegalChar(val);
        };
        XMLStringifier2.prototype.xmlVersion = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          val = "" + val || "";
          if (!val.match(/1\.[0-9]+/)) {
            throw new Error("Invalid version number: " + val);
          }
          return val;
        };
        XMLStringifier2.prototype.xmlEncoding = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          val = "" + val || "";
          if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {
            throw new Error("Invalid encoding: " + val);
          }
          return this.assertLegalChar(val);
        };
        XMLStringifier2.prototype.xmlStandalone = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          if (val) {
            return "yes";
          } else {
            return "no";
          }
        };
        XMLStringifier2.prototype.dtdPubID = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.dtdSysID = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.dtdElementValue = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.dtdAttType = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.dtdAttDefault = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.dtdEntityValue = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.dtdNData = function(val) {
          if (this.options.noValidation) {
            return val;
          }
          return this.assertLegalChar("" + val || "");
        };
        XMLStringifier2.prototype.convertAttKey = "@";
        XMLStringifier2.prototype.convertPIKey = "?";
        XMLStringifier2.prototype.convertTextKey = "#text";
        XMLStringifier2.prototype.convertCDataKey = "#cdata";
        XMLStringifier2.prototype.convertCommentKey = "#comment";
        XMLStringifier2.prototype.convertRawKey = "#raw";
        XMLStringifier2.prototype.assertLegalChar = function(str) {
          var regex, res;
          if (this.options.noValidation) {
            return str;
          }
          regex = "";
          if (this.options.version === "1.0") {
            regex = /[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
            if (res = str.match(regex)) {
              throw new Error("Invalid character in string: " + str + " at index " + res.index);
            }
          } else if (this.options.version === "1.1") {
            regex = /[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
            if (res = str.match(regex)) {
              throw new Error("Invalid character in string: " + str + " at index " + res.index);
            }
          }
          return str;
        };
        XMLStringifier2.prototype.assertLegalName = function(str) {
          var regex;
          if (this.options.noValidation) {
            return str;
          }
          this.assertLegalChar(str);
          regex = /^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;
          if (!str.match(regex)) {
            throw new Error("Invalid character in name");
          }
          return str;
        };
        XMLStringifier2.prototype.textEscape = function(str) {
          var ampregex;
          if (this.options.noValidation) {
            return str;
          }
          ampregex = this.options.noDoubleEncoding ? /(?!&\S+;)&/g : /&/g;
          return str.replace(ampregex, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\r/g, "&#xD;");
        };
        XMLStringifier2.prototype.attEscape = function(str) {
          var ampregex;
          if (this.options.noValidation) {
            return str;
          }
          ampregex = this.options.noDoubleEncoding ? /(?!&\S+;)&/g : /&/g;
          return str.replace(ampregex, "&amp;").replace(/</g, "&lt;").replace(/"/g, "&quot;").replace(/\t/g, "&#x9;").replace(/\n/g, "&#xA;").replace(/\r/g, "&#xD;");
        };
        return XMLStringifier2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/WriterState.js
var require_WriterState = __commonJS({
  "node_modules/xmlbuilder/lib/WriterState.js"(exports, module2) {
    (function() {
      module2.exports = {
        None: 0,
        OpenTag: 1,
        InsideTag: 2,
        CloseTag: 3
      };
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLWriterBase.js
var require_XMLWriterBase = __commonJS({
  "node_modules/xmlbuilder/lib/XMLWriterBase.js"(exports, module2) {
    (function() {
      var NodeType, WriterState, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLProcessingInstruction, XMLRaw, XMLText, XMLWriterBase, assign, hasProp = {}.hasOwnProperty;
      assign = require_Utility().assign;
      NodeType = require_NodeType();
      XMLDeclaration = require_XMLDeclaration();
      XMLDocType = require_XMLDocType();
      XMLCData = require_XMLCData();
      XMLComment = require_XMLComment();
      XMLElement = require_XMLElement();
      XMLRaw = require_XMLRaw();
      XMLText = require_XMLText();
      XMLProcessingInstruction = require_XMLProcessingInstruction();
      XMLDummy = require_XMLDummy();
      XMLDTDAttList = require_XMLDTDAttList();
      XMLDTDElement = require_XMLDTDElement();
      XMLDTDEntity = require_XMLDTDEntity();
      XMLDTDNotation = require_XMLDTDNotation();
      WriterState = require_WriterState();
      module2.exports = XMLWriterBase = function() {
        function XMLWriterBase2(options) {
          var key, ref, value;
          options || (options = {});
          this.options = options;
          ref = options.writer || {};
          for (key in ref) {
            if (!hasProp.call(ref, key))
              continue;
            value = ref[key];
            this["_" + key] = this[key];
            this[key] = value;
          }
        }
        XMLWriterBase2.prototype.filterOptions = function(options) {
          var filteredOptions, ref, ref1, ref2, ref3, ref4, ref5, ref6;
          options || (options = {});
          options = assign({}, this.options, options);
          filteredOptions = {
            writer: this
          };
          filteredOptions.pretty = options.pretty || false;
          filteredOptions.allowEmpty = options.allowEmpty || false;
          filteredOptions.indent = (ref = options.indent) != null ? ref : "  ";
          filteredOptions.newline = (ref1 = options.newline) != null ? ref1 : "\n";
          filteredOptions.offset = (ref2 = options.offset) != null ? ref2 : 0;
          filteredOptions.dontPrettyTextNodes = (ref3 = (ref4 = options.dontPrettyTextNodes) != null ? ref4 : options.dontprettytextnodes) != null ? ref3 : 0;
          filteredOptions.spaceBeforeSlash = (ref5 = (ref6 = options.spaceBeforeSlash) != null ? ref6 : options.spacebeforeslash) != null ? ref5 : "";
          if (filteredOptions.spaceBeforeSlash === true) {
            filteredOptions.spaceBeforeSlash = " ";
          }
          filteredOptions.suppressPrettyCount = 0;
          filteredOptions.user = {};
          filteredOptions.state = WriterState.None;
          return filteredOptions;
        };
        XMLWriterBase2.prototype.indent = function(node, options, level) {
          var indentLevel;
          if (!options.pretty || options.suppressPrettyCount) {
            return "";
          } else if (options.pretty) {
            indentLevel = (level || 0) + options.offset + 1;
            if (indentLevel > 0) {
              return new Array(indentLevel).join(options.indent);
            }
          }
          return "";
        };
        XMLWriterBase2.prototype.endline = function(node, options, level) {
          if (!options.pretty || options.suppressPrettyCount) {
            return "";
          } else {
            return options.newline;
          }
        };
        XMLWriterBase2.prototype.attribute = function(att, options, level) {
          var r;
          this.openAttribute(att, options, level);
          r = " " + att.name + '="' + att.value + '"';
          this.closeAttribute(att, options, level);
          return r;
        };
        XMLWriterBase2.prototype.cdata = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<![CDATA[";
          options.state = WriterState.InsideTag;
          r += node.value;
          options.state = WriterState.CloseTag;
          r += "]]>" + this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.comment = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<!-- ";
          options.state = WriterState.InsideTag;
          r += node.value;
          options.state = WriterState.CloseTag;
          r += " -->" + this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.declaration = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<?xml";
          options.state = WriterState.InsideTag;
          r += ' version="' + node.version + '"';
          if (node.encoding != null) {
            r += ' encoding="' + node.encoding + '"';
          }
          if (node.standalone != null) {
            r += ' standalone="' + node.standalone + '"';
          }
          options.state = WriterState.CloseTag;
          r += options.spaceBeforeSlash + "?>";
          r += this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.docType = function(node, options, level) {
          var child, i, len, r, ref;
          level || (level = 0);
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level);
          r += "<!DOCTYPE " + node.root().name;
          if (node.pubID && node.sysID) {
            r += ' PUBLIC "' + node.pubID + '" "' + node.sysID + '"';
          } else if (node.sysID) {
            r += ' SYSTEM "' + node.sysID + '"';
          }
          if (node.children.length > 0) {
            r += " [";
            r += this.endline(node, options, level);
            options.state = WriterState.InsideTag;
            ref = node.children;
            for (i = 0, len = ref.length; i < len; i++) {
              child = ref[i];
              r += this.writeChildNode(child, options, level + 1);
            }
            options.state = WriterState.CloseTag;
            r += "]";
          }
          options.state = WriterState.CloseTag;
          r += options.spaceBeforeSlash + ">";
          r += this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.element = function(node, options, level) {
          var att, child, childNodeCount, firstChildNode, i, j, len, len1, name, prettySuppressed, r, ref, ref1, ref2;
          level || (level = 0);
          prettySuppressed = false;
          r = "";
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r += this.indent(node, options, level) + "<" + node.name;
          ref = node.attribs;
          for (name in ref) {
            if (!hasProp.call(ref, name))
              continue;
            att = ref[name];
            r += this.attribute(att, options, level);
          }
          childNodeCount = node.children.length;
          firstChildNode = childNodeCount === 0 ? null : node.children[0];
          if (childNodeCount === 0 || node.children.every(function(e) {
            return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === "";
          })) {
            if (options.allowEmpty) {
              r += ">";
              options.state = WriterState.CloseTag;
              r += "</" + node.name + ">" + this.endline(node, options, level);
            } else {
              options.state = WriterState.CloseTag;
              r += options.spaceBeforeSlash + "/>" + this.endline(node, options, level);
            }
          } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && firstChildNode.value != null) {
            r += ">";
            options.state = WriterState.InsideTag;
            options.suppressPrettyCount++;
            prettySuppressed = true;
            r += this.writeChildNode(firstChildNode, options, level + 1);
            options.suppressPrettyCount--;
            prettySuppressed = false;
            options.state = WriterState.CloseTag;
            r += "</" + node.name + ">" + this.endline(node, options, level);
          } else {
            if (options.dontPrettyTextNodes) {
              ref1 = node.children;
              for (i = 0, len = ref1.length; i < len; i++) {
                child = ref1[i];
                if ((child.type === NodeType.Text || child.type === NodeType.Raw) && child.value != null) {
                  options.suppressPrettyCount++;
                  prettySuppressed = true;
                  break;
                }
              }
            }
            r += ">" + this.endline(node, options, level);
            options.state = WriterState.InsideTag;
            ref2 = node.children;
            for (j = 0, len1 = ref2.length; j < len1; j++) {
              child = ref2[j];
              r += this.writeChildNode(child, options, level + 1);
            }
            options.state = WriterState.CloseTag;
            r += this.indent(node, options, level) + "</" + node.name + ">";
            if (prettySuppressed) {
              options.suppressPrettyCount--;
            }
            r += this.endline(node, options, level);
            options.state = WriterState.None;
          }
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.writeChildNode = function(node, options, level) {
          switch (node.type) {
            case NodeType.CData:
              return this.cdata(node, options, level);
            case NodeType.Comment:
              return this.comment(node, options, level);
            case NodeType.Element:
              return this.element(node, options, level);
            case NodeType.Raw:
              return this.raw(node, options, level);
            case NodeType.Text:
              return this.text(node, options, level);
            case NodeType.ProcessingInstruction:
              return this.processingInstruction(node, options, level);
            case NodeType.Dummy:
              return "";
            case NodeType.Declaration:
              return this.declaration(node, options, level);
            case NodeType.DocType:
              return this.docType(node, options, level);
            case NodeType.AttributeDeclaration:
              return this.dtdAttList(node, options, level);
            case NodeType.ElementDeclaration:
              return this.dtdElement(node, options, level);
            case NodeType.EntityDeclaration:
              return this.dtdEntity(node, options, level);
            case NodeType.NotationDeclaration:
              return this.dtdNotation(node, options, level);
            default:
              throw new Error("Unknown XML node type: " + node.constructor.name);
          }
        };
        XMLWriterBase2.prototype.processingInstruction = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<?";
          options.state = WriterState.InsideTag;
          r += node.target;
          if (node.value) {
            r += " " + node.value;
          }
          options.state = WriterState.CloseTag;
          r += options.spaceBeforeSlash + "?>";
          r += this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.raw = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level);
          options.state = WriterState.InsideTag;
          r += node.value;
          options.state = WriterState.CloseTag;
          r += this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.text = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level);
          options.state = WriterState.InsideTag;
          r += node.value;
          options.state = WriterState.CloseTag;
          r += this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.dtdAttList = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<!ATTLIST";
          options.state = WriterState.InsideTag;
          r += " " + node.elementName + " " + node.attributeName + " " + node.attributeType;
          if (node.defaultValueType !== "#DEFAULT") {
            r += " " + node.defaultValueType;
          }
          if (node.defaultValue) {
            r += ' "' + node.defaultValue + '"';
          }
          options.state = WriterState.CloseTag;
          r += options.spaceBeforeSlash + ">" + this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.dtdElement = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<!ELEMENT";
          options.state = WriterState.InsideTag;
          r += " " + node.name + " " + node.value;
          options.state = WriterState.CloseTag;
          r += options.spaceBeforeSlash + ">" + this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.dtdEntity = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<!ENTITY";
          options.state = WriterState.InsideTag;
          if (node.pe) {
            r += " %";
          }
          r += " " + node.name;
          if (node.value) {
            r += ' "' + node.value + '"';
          } else {
            if (node.pubID && node.sysID) {
              r += ' PUBLIC "' + node.pubID + '" "' + node.sysID + '"';
            } else if (node.sysID) {
              r += ' SYSTEM "' + node.sysID + '"';
            }
            if (node.nData) {
              r += " NDATA " + node.nData;
            }
          }
          options.state = WriterState.CloseTag;
          r += options.spaceBeforeSlash + ">" + this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.dtdNotation = function(node, options, level) {
          var r;
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          r = this.indent(node, options, level) + "<!NOTATION";
          options.state = WriterState.InsideTag;
          r += " " + node.name;
          if (node.pubID && node.sysID) {
            r += ' PUBLIC "' + node.pubID + '" "' + node.sysID + '"';
          } else if (node.pubID) {
            r += ' PUBLIC "' + node.pubID + '"';
          } else if (node.sysID) {
            r += ' SYSTEM "' + node.sysID + '"';
          }
          options.state = WriterState.CloseTag;
          r += options.spaceBeforeSlash + ">" + this.endline(node, options, level);
          options.state = WriterState.None;
          this.closeNode(node, options, level);
          return r;
        };
        XMLWriterBase2.prototype.openNode = function(node, options, level) {
        };
        XMLWriterBase2.prototype.closeNode = function(node, options, level) {
        };
        XMLWriterBase2.prototype.openAttribute = function(att, options, level) {
        };
        XMLWriterBase2.prototype.closeAttribute = function(att, options, level) {
        };
        return XMLWriterBase2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLStringWriter.js
var require_XMLStringWriter = __commonJS({
  "node_modules/xmlbuilder/lib/XMLStringWriter.js"(exports, module2) {
    (function() {
      var XMLStringWriter, XMLWriterBase, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      XMLWriterBase = require_XMLWriterBase();
      module2.exports = XMLStringWriter = function(superClass) {
        extend(XMLStringWriter2, superClass);
        function XMLStringWriter2(options) {
          XMLStringWriter2.__super__.constructor.call(this, options);
        }
        XMLStringWriter2.prototype.document = function(doc, options) {
          var child, i, len, r, ref;
          options = this.filterOptions(options);
          r = "";
          ref = doc.children;
          for (i = 0, len = ref.length; i < len; i++) {
            child = ref[i];
            r += this.writeChildNode(child, options, 0);
          }
          if (options.pretty && r.slice(-options.newline.length) === options.newline) {
            r = r.slice(0, -options.newline.length);
          }
          return r;
        };
        return XMLStringWriter2;
      }(XMLWriterBase);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDocument.js
var require_XMLDocument = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDocument.js"(exports, module2) {
    (function() {
      var NodeType, XMLDOMConfiguration, XMLDOMImplementation, XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      isPlainObject = require_Utility().isPlainObject;
      XMLDOMImplementation = require_XMLDOMImplementation();
      XMLDOMConfiguration = require_XMLDOMConfiguration();
      XMLNode = require_XMLNode();
      NodeType = require_NodeType();
      XMLStringifier = require_XMLStringifier();
      XMLStringWriter = require_XMLStringWriter();
      module2.exports = XMLDocument = function(superClass) {
        extend(XMLDocument2, superClass);
        function XMLDocument2(options) {
          XMLDocument2.__super__.constructor.call(this, null);
          this.name = "#document";
          this.type = NodeType.Document;
          this.documentURI = null;
          this.domConfig = new XMLDOMConfiguration();
          options || (options = {});
          if (!options.writer) {
            options.writer = new XMLStringWriter();
          }
          this.options = options;
          this.stringify = new XMLStringifier(options);
        }
        Object.defineProperty(XMLDocument2.prototype, "implementation", {
          value: new XMLDOMImplementation()
        });
        Object.defineProperty(XMLDocument2.prototype, "doctype", {
          get: function() {
            var child, i, len, ref;
            ref = this.children;
            for (i = 0, len = ref.length; i < len; i++) {
              child = ref[i];
              if (child.type === NodeType.DocType) {
                return child;
              }
            }
            return null;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "documentElement", {
          get: function() {
            return this.rootObject || null;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "inputEncoding", {
          get: function() {
            return null;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "strictErrorChecking", {
          get: function() {
            return false;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "xmlEncoding", {
          get: function() {
            if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {
              return this.children[0].encoding;
            } else {
              return null;
            }
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "xmlStandalone", {
          get: function() {
            if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {
              return this.children[0].standalone === "yes";
            } else {
              return false;
            }
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "xmlVersion", {
          get: function() {
            if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {
              return this.children[0].version;
            } else {
              return "1.0";
            }
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "URL", {
          get: function() {
            return this.documentURI;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "origin", {
          get: function() {
            return null;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "compatMode", {
          get: function() {
            return null;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "characterSet", {
          get: function() {
            return null;
          }
        });
        Object.defineProperty(XMLDocument2.prototype, "contentType", {
          get: function() {
            return null;
          }
        });
        XMLDocument2.prototype.end = function(writer) {
          var writerOptions;
          writerOptions = {};
          if (!writer) {
            writer = this.options.writer;
          } else if (isPlainObject(writer)) {
            writerOptions = writer;
            writer = this.options.writer;
          }
          return writer.document(this, writer.filterOptions(writerOptions));
        };
        XMLDocument2.prototype.toString = function(options) {
          return this.options.writer.document(this, this.options.writer.filterOptions(options));
        };
        XMLDocument2.prototype.createElement = function(tagName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createDocumentFragment = function() {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createTextNode = function(data) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createComment = function(data) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createCDATASection = function(data) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createProcessingInstruction = function(target, data) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createAttribute = function(name) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createEntityReference = function(name) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.getElementsByTagName = function(tagname) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.importNode = function(importedNode, deep) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createElementNS = function(namespaceURI, qualifiedName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createAttributeNS = function(namespaceURI, qualifiedName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.getElementById = function(elementId) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.adoptNode = function(source) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.normalizeDocument = function() {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.renameNode = function(node, namespaceURI, qualifiedName) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.getElementsByClassName = function(classNames) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createEvent = function(eventInterface) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createRange = function() {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createNodeIterator = function(root, whatToShow, filter) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        XMLDocument2.prototype.createTreeWalker = function(root, whatToShow, filter) {
          throw new Error("This DOM method is not implemented." + this.debugInfo());
        };
        return XMLDocument2;
      }(XMLNode);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLDocumentCB.js
var require_XMLDocumentCB = __commonJS({
  "node_modules/xmlbuilder/lib/XMLDocumentCB.js"(exports, module2) {
    (function() {
      var NodeType, WriterState, XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocument, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, getValue, isFunction, isObject, isPlainObject, ref, hasProp = {}.hasOwnProperty;
      ref = require_Utility(), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject, getValue = ref.getValue;
      NodeType = require_NodeType();
      XMLDocument = require_XMLDocument();
      XMLElement = require_XMLElement();
      XMLCData = require_XMLCData();
      XMLComment = require_XMLComment();
      XMLRaw = require_XMLRaw();
      XMLText = require_XMLText();
      XMLProcessingInstruction = require_XMLProcessingInstruction();
      XMLDeclaration = require_XMLDeclaration();
      XMLDocType = require_XMLDocType();
      XMLDTDAttList = require_XMLDTDAttList();
      XMLDTDEntity = require_XMLDTDEntity();
      XMLDTDElement = require_XMLDTDElement();
      XMLDTDNotation = require_XMLDTDNotation();
      XMLAttribute = require_XMLAttribute();
      XMLStringifier = require_XMLStringifier();
      XMLStringWriter = require_XMLStringWriter();
      WriterState = require_WriterState();
      module2.exports = XMLDocumentCB = function() {
        function XMLDocumentCB2(options, onData, onEnd) {
          var writerOptions;
          this.name = "?xml";
          this.type = NodeType.Document;
          options || (options = {});
          writerOptions = {};
          if (!options.writer) {
            options.writer = new XMLStringWriter();
          } else if (isPlainObject(options.writer)) {
            writerOptions = options.writer;
            options.writer = new XMLStringWriter();
          }
          this.options = options;
          this.writer = options.writer;
          this.writerOptions = this.writer.filterOptions(writerOptions);
          this.stringify = new XMLStringifier(options);
          this.onDataCallback = onData || function() {
          };
          this.onEndCallback = onEnd || function() {
          };
          this.currentNode = null;
          this.currentLevel = -1;
          this.openTags = {};
          this.documentStarted = false;
          this.documentCompleted = false;
          this.root = null;
        }
        XMLDocumentCB2.prototype.createChildNode = function(node) {
          var att, attName, attributes, child, i, len, ref1, ref2;
          switch (node.type) {
            case NodeType.CData:
              this.cdata(node.value);
              break;
            case NodeType.Comment:
              this.comment(node.value);
              break;
            case NodeType.Element:
              attributes = {};
              ref1 = node.attribs;
              for (attName in ref1) {
                if (!hasProp.call(ref1, attName))
                  continue;
                att = ref1[attName];
                attributes[attName] = att.value;
              }
              this.node(node.name, attributes);
              break;
            case NodeType.Dummy:
              this.dummy();
              break;
            case NodeType.Raw:
              this.raw(node.value);
              break;
            case NodeType.Text:
              this.text(node.value);
              break;
            case NodeType.ProcessingInstruction:
              this.instruction(node.target, node.value);
              break;
            default:
              throw new Error("This XML node type is not supported in a JS object: " + node.constructor.name);
          }
          ref2 = node.children;
          for (i = 0, len = ref2.length; i < len; i++) {
            child = ref2[i];
            this.createChildNode(child);
            if (child.type === NodeType.Element) {
              this.up();
            }
          }
          return this;
        };
        XMLDocumentCB2.prototype.dummy = function() {
          return this;
        };
        XMLDocumentCB2.prototype.node = function(name, attributes, text) {
          var ref1;
          if (name == null) {
            throw new Error("Missing node name.");
          }
          if (this.root && this.currentLevel === -1) {
            throw new Error("Document can only have one root node. " + this.debugInfo(name));
          }
          this.openCurrent();
          name = getValue(name);
          if (attributes == null) {
            attributes = {};
          }
          attributes = getValue(attributes);
          if (!isObject(attributes)) {
            ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];
          }
          this.currentNode = new XMLElement(this, name, attributes);
          this.currentNode.children = false;
          this.currentLevel++;
          this.openTags[this.currentLevel] = this.currentNode;
          if (text != null) {
            this.text(text);
          }
          return this;
        };
        XMLDocumentCB2.prototype.element = function(name, attributes, text) {
          var child, i, len, oldValidationFlag, ref1, root;
          if (this.currentNode && this.currentNode.type === NodeType.DocType) {
            this.dtdElement.apply(this, arguments);
          } else {
            if (Array.isArray(name) || isObject(name) || isFunction(name)) {
              oldValidationFlag = this.options.noValidation;
              this.options.noValidation = true;
              root = new XMLDocument(this.options).element("TEMP_ROOT");
              root.element(name);
              this.options.noValidation = oldValidationFlag;
              ref1 = root.children;
              for (i = 0, len = ref1.length; i < len; i++) {
                child = ref1[i];
                this.createChildNode(child);
                if (child.type === NodeType.Element) {
                  this.up();
                }
              }
            } else {
              this.node(name, attributes, text);
            }
          }
          return this;
        };
        XMLDocumentCB2.prototype.attribute = function(name, value) {
          var attName, attValue;
          if (!this.currentNode || this.currentNode.children) {
            throw new Error("att() can only be used immediately after an ele() call in callback mode. " + this.debugInfo(name));
          }
          if (name != null) {
            name = getValue(name);
          }
          if (isObject(name)) {
            for (attName in name) {
              if (!hasProp.call(name, attName))
                continue;
              attValue = name[attName];
              this.attribute(attName, attValue);
            }
          } else {
            if (isFunction(value)) {
              value = value.apply();
            }
            if (this.options.keepNullAttributes && value == null) {
              this.currentNode.attribs[name] = new XMLAttribute(this, name, "");
            } else if (value != null) {
              this.currentNode.attribs[name] = new XMLAttribute(this, name, value);
            }
          }
          return this;
        };
        XMLDocumentCB2.prototype.text = function(value) {
          var node;
          this.openCurrent();
          node = new XMLText(this, value);
          this.onData(this.writer.text(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.cdata = function(value) {
          var node;
          this.openCurrent();
          node = new XMLCData(this, value);
          this.onData(this.writer.cdata(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.comment = function(value) {
          var node;
          this.openCurrent();
          node = new XMLComment(this, value);
          this.onData(this.writer.comment(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.raw = function(value) {
          var node;
          this.openCurrent();
          node = new XMLRaw(this, value);
          this.onData(this.writer.raw(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.instruction = function(target, value) {
          var i, insTarget, insValue, len, node;
          this.openCurrent();
          if (target != null) {
            target = getValue(target);
          }
          if (value != null) {
            value = getValue(value);
          }
          if (Array.isArray(target)) {
            for (i = 0, len = target.length; i < len; i++) {
              insTarget = target[i];
              this.instruction(insTarget);
            }
          } else if (isObject(target)) {
            for (insTarget in target) {
              if (!hasProp.call(target, insTarget))
                continue;
              insValue = target[insTarget];
              this.instruction(insTarget, insValue);
            }
          } else {
            if (isFunction(value)) {
              value = value.apply();
            }
            node = new XMLProcessingInstruction(this, target, value);
            this.onData(this.writer.processingInstruction(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          }
          return this;
        };
        XMLDocumentCB2.prototype.declaration = function(version, encoding, standalone) {
          var node;
          this.openCurrent();
          if (this.documentStarted) {
            throw new Error("declaration() must be the first node.");
          }
          node = new XMLDeclaration(this, version, encoding, standalone);
          this.onData(this.writer.declaration(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.doctype = function(root, pubID, sysID) {
          this.openCurrent();
          if (root == null) {
            throw new Error("Missing root node name.");
          }
          if (this.root) {
            throw new Error("dtd() must come before the root node.");
          }
          this.currentNode = new XMLDocType(this, pubID, sysID);
          this.currentNode.rootNodeName = root;
          this.currentNode.children = false;
          this.currentLevel++;
          this.openTags[this.currentLevel] = this.currentNode;
          return this;
        };
        XMLDocumentCB2.prototype.dtdElement = function(name, value) {
          var node;
          this.openCurrent();
          node = new XMLDTDElement(this, name, value);
          this.onData(this.writer.dtdElement(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {
          var node;
          this.openCurrent();
          node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);
          this.onData(this.writer.dtdAttList(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.entity = function(name, value) {
          var node;
          this.openCurrent();
          node = new XMLDTDEntity(this, false, name, value);
          this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.pEntity = function(name, value) {
          var node;
          this.openCurrent();
          node = new XMLDTDEntity(this, true, name, value);
          this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.notation = function(name, value) {
          var node;
          this.openCurrent();
          node = new XMLDTDNotation(this, name, value);
          this.onData(this.writer.dtdNotation(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
          return this;
        };
        XMLDocumentCB2.prototype.up = function() {
          if (this.currentLevel < 0) {
            throw new Error("The document node has no parent.");
          }
          if (this.currentNode) {
            if (this.currentNode.children) {
              this.closeNode(this.currentNode);
            } else {
              this.openNode(this.currentNode);
            }
            this.currentNode = null;
          } else {
            this.closeNode(this.openTags[this.currentLevel]);
          }
          delete this.openTags[this.currentLevel];
          this.currentLevel--;
          return this;
        };
        XMLDocumentCB2.prototype.end = function() {
          while (this.currentLevel >= 0) {
            this.up();
          }
          return this.onEnd();
        };
        XMLDocumentCB2.prototype.openCurrent = function() {
          if (this.currentNode) {
            this.currentNode.children = true;
            return this.openNode(this.currentNode);
          }
        };
        XMLDocumentCB2.prototype.openNode = function(node) {
          var att, chunk, name, ref1;
          if (!node.isOpen) {
            if (!this.root && this.currentLevel === 0 && node.type === NodeType.Element) {
              this.root = node;
            }
            chunk = "";
            if (node.type === NodeType.Element) {
              this.writerOptions.state = WriterState.OpenTag;
              chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + "<" + node.name;
              ref1 = node.attribs;
              for (name in ref1) {
                if (!hasProp.call(ref1, name))
                  continue;
                att = ref1[name];
                chunk += this.writer.attribute(att, this.writerOptions, this.currentLevel);
              }
              chunk += (node.children ? ">" : "/>") + this.writer.endline(node, this.writerOptions, this.currentLevel);
              this.writerOptions.state = WriterState.InsideTag;
            } else {
              this.writerOptions.state = WriterState.OpenTag;
              chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + "<!DOCTYPE " + node.rootNodeName;
              if (node.pubID && node.sysID) {
                chunk += ' PUBLIC "' + node.pubID + '" "' + node.sysID + '"';
              } else if (node.sysID) {
                chunk += ' SYSTEM "' + node.sysID + '"';
              }
              if (node.children) {
                chunk += " [";
                this.writerOptions.state = WriterState.InsideTag;
              } else {
                this.writerOptions.state = WriterState.CloseTag;
                chunk += ">";
              }
              chunk += this.writer.endline(node, this.writerOptions, this.currentLevel);
            }
            this.onData(chunk, this.currentLevel);
            return node.isOpen = true;
          }
        };
        XMLDocumentCB2.prototype.closeNode = function(node) {
          var chunk;
          if (!node.isClosed) {
            chunk = "";
            this.writerOptions.state = WriterState.CloseTag;
            if (node.type === NodeType.Element) {
              chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + "</" + node.name + ">" + this.writer.endline(node, this.writerOptions, this.currentLevel);
            } else {
              chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + "]>" + this.writer.endline(node, this.writerOptions, this.currentLevel);
            }
            this.writerOptions.state = WriterState.None;
            this.onData(chunk, this.currentLevel);
            return node.isClosed = true;
          }
        };
        XMLDocumentCB2.prototype.onData = function(chunk, level) {
          this.documentStarted = true;
          return this.onDataCallback(chunk, level + 1);
        };
        XMLDocumentCB2.prototype.onEnd = function() {
          this.documentCompleted = true;
          return this.onEndCallback();
        };
        XMLDocumentCB2.prototype.debugInfo = function(name) {
          if (name == null) {
            return "";
          } else {
            return "node: <" + name + ">";
          }
        };
        XMLDocumentCB2.prototype.ele = function() {
          return this.element.apply(this, arguments);
        };
        XMLDocumentCB2.prototype.nod = function(name, attributes, text) {
          return this.node(name, attributes, text);
        };
        XMLDocumentCB2.prototype.txt = function(value) {
          return this.text(value);
        };
        XMLDocumentCB2.prototype.dat = function(value) {
          return this.cdata(value);
        };
        XMLDocumentCB2.prototype.com = function(value) {
          return this.comment(value);
        };
        XMLDocumentCB2.prototype.ins = function(target, value) {
          return this.instruction(target, value);
        };
        XMLDocumentCB2.prototype.dec = function(version, encoding, standalone) {
          return this.declaration(version, encoding, standalone);
        };
        XMLDocumentCB2.prototype.dtd = function(root, pubID, sysID) {
          return this.doctype(root, pubID, sysID);
        };
        XMLDocumentCB2.prototype.e = function(name, attributes, text) {
          return this.element(name, attributes, text);
        };
        XMLDocumentCB2.prototype.n = function(name, attributes, text) {
          return this.node(name, attributes, text);
        };
        XMLDocumentCB2.prototype.t = function(value) {
          return this.text(value);
        };
        XMLDocumentCB2.prototype.d = function(value) {
          return this.cdata(value);
        };
        XMLDocumentCB2.prototype.c = function(value) {
          return this.comment(value);
        };
        XMLDocumentCB2.prototype.r = function(value) {
          return this.raw(value);
        };
        XMLDocumentCB2.prototype.i = function(target, value) {
          return this.instruction(target, value);
        };
        XMLDocumentCB2.prototype.att = function() {
          if (this.currentNode && this.currentNode.type === NodeType.DocType) {
            return this.attList.apply(this, arguments);
          } else {
            return this.attribute.apply(this, arguments);
          }
        };
        XMLDocumentCB2.prototype.a = function() {
          if (this.currentNode && this.currentNode.type === NodeType.DocType) {
            return this.attList.apply(this, arguments);
          } else {
            return this.attribute.apply(this, arguments);
          }
        };
        XMLDocumentCB2.prototype.ent = function(name, value) {
          return this.entity(name, value);
        };
        XMLDocumentCB2.prototype.pent = function(name, value) {
          return this.pEntity(name, value);
        };
        XMLDocumentCB2.prototype.not = function(name, value) {
          return this.notation(name, value);
        };
        return XMLDocumentCB2;
      }();
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/XMLStreamWriter.js
var require_XMLStreamWriter = __commonJS({
  "node_modules/xmlbuilder/lib/XMLStreamWriter.js"(exports, module2) {
    (function() {
      var NodeType, WriterState, XMLStreamWriter, XMLWriterBase, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      NodeType = require_NodeType();
      XMLWriterBase = require_XMLWriterBase();
      WriterState = require_WriterState();
      module2.exports = XMLStreamWriter = function(superClass) {
        extend(XMLStreamWriter2, superClass);
        function XMLStreamWriter2(stream, options) {
          this.stream = stream;
          XMLStreamWriter2.__super__.constructor.call(this, options);
        }
        XMLStreamWriter2.prototype.endline = function(node, options, level) {
          if (node.isLastRootNode && options.state === WriterState.CloseTag) {
            return "";
          } else {
            return XMLStreamWriter2.__super__.endline.call(this, node, options, level);
          }
        };
        XMLStreamWriter2.prototype.document = function(doc, options) {
          var child, i, j, k, len, len1, ref, ref1, results;
          ref = doc.children;
          for (i = j = 0, len = ref.length; j < len; i = ++j) {
            child = ref[i];
            child.isLastRootNode = i === doc.children.length - 1;
          }
          options = this.filterOptions(options);
          ref1 = doc.children;
          results = [];
          for (k = 0, len1 = ref1.length; k < len1; k++) {
            child = ref1[k];
            results.push(this.writeChildNode(child, options, 0));
          }
          return results;
        };
        XMLStreamWriter2.prototype.attribute = function(att, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.attribute.call(this, att, options, level));
        };
        XMLStreamWriter2.prototype.cdata = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.cdata.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.comment = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.comment.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.declaration = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.declaration.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.docType = function(node, options, level) {
          var child, j, len, ref;
          level || (level = 0);
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          this.stream.write(this.indent(node, options, level));
          this.stream.write("<!DOCTYPE " + node.root().name);
          if (node.pubID && node.sysID) {
            this.stream.write(' PUBLIC "' + node.pubID + '" "' + node.sysID + '"');
          } else if (node.sysID) {
            this.stream.write(' SYSTEM "' + node.sysID + '"');
          }
          if (node.children.length > 0) {
            this.stream.write(" [");
            this.stream.write(this.endline(node, options, level));
            options.state = WriterState.InsideTag;
            ref = node.children;
            for (j = 0, len = ref.length; j < len; j++) {
              child = ref[j];
              this.writeChildNode(child, options, level + 1);
            }
            options.state = WriterState.CloseTag;
            this.stream.write("]");
          }
          options.state = WriterState.CloseTag;
          this.stream.write(options.spaceBeforeSlash + ">");
          this.stream.write(this.endline(node, options, level));
          options.state = WriterState.None;
          return this.closeNode(node, options, level);
        };
        XMLStreamWriter2.prototype.element = function(node, options, level) {
          var att, child, childNodeCount, firstChildNode, j, len, name, prettySuppressed, ref, ref1;
          level || (level = 0);
          this.openNode(node, options, level);
          options.state = WriterState.OpenTag;
          this.stream.write(this.indent(node, options, level) + "<" + node.name);
          ref = node.attribs;
          for (name in ref) {
            if (!hasProp.call(ref, name))
              continue;
            att = ref[name];
            this.attribute(att, options, level);
          }
          childNodeCount = node.children.length;
          firstChildNode = childNodeCount === 0 ? null : node.children[0];
          if (childNodeCount === 0 || node.children.every(function(e) {
            return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === "";
          })) {
            if (options.allowEmpty) {
              this.stream.write(">");
              options.state = WriterState.CloseTag;
              this.stream.write("</" + node.name + ">");
            } else {
              options.state = WriterState.CloseTag;
              this.stream.write(options.spaceBeforeSlash + "/>");
            }
          } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && firstChildNode.value != null) {
            this.stream.write(">");
            options.state = WriterState.InsideTag;
            options.suppressPrettyCount++;
            prettySuppressed = true;
            this.writeChildNode(firstChildNode, options, level + 1);
            options.suppressPrettyCount--;
            prettySuppressed = false;
            options.state = WriterState.CloseTag;
            this.stream.write("</" + node.name + ">");
          } else {
            this.stream.write(">" + this.endline(node, options, level));
            options.state = WriterState.InsideTag;
            ref1 = node.children;
            for (j = 0, len = ref1.length; j < len; j++) {
              child = ref1[j];
              this.writeChildNode(child, options, level + 1);
            }
            options.state = WriterState.CloseTag;
            this.stream.write(this.indent(node, options, level) + "</" + node.name + ">");
          }
          this.stream.write(this.endline(node, options, level));
          options.state = WriterState.None;
          return this.closeNode(node, options, level);
        };
        XMLStreamWriter2.prototype.processingInstruction = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.processingInstruction.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.raw = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.raw.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.text = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.text.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.dtdAttList = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.dtdAttList.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.dtdElement = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.dtdElement.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.dtdEntity = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.dtdEntity.call(this, node, options, level));
        };
        XMLStreamWriter2.prototype.dtdNotation = function(node, options, level) {
          return this.stream.write(XMLStreamWriter2.__super__.dtdNotation.call(this, node, options, level));
        };
        return XMLStreamWriter2;
      }(XMLWriterBase);
    }).call(exports);
  }
});

// node_modules/xmlbuilder/lib/index.js
var require_lib = __commonJS({
  "node_modules/xmlbuilder/lib/index.js"(exports, module2) {
    (function() {
      var NodeType, WriterState, XMLDOMImplementation, XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;
      ref = require_Utility(), assign = ref.assign, isFunction = ref.isFunction;
      XMLDOMImplementation = require_XMLDOMImplementation();
      XMLDocument = require_XMLDocument();
      XMLDocumentCB = require_XMLDocumentCB();
      XMLStringWriter = require_XMLStringWriter();
      XMLStreamWriter = require_XMLStreamWriter();
      NodeType = require_NodeType();
      WriterState = require_WriterState();
      module2.exports.create = function(name, xmldec, doctype, options) {
        var doc, root;
        if (name == null) {
          throw new Error("Root element needs a name.");
        }
        options = assign({}, xmldec, doctype, options);
        doc = new XMLDocument(options);
        root = doc.element(name);
        if (!options.headless) {
          doc.declaration(options);
          if (options.pubID != null || options.sysID != null) {
            doc.dtd(options);
          }
        }
        return root;
      };
      module2.exports.begin = function(options, onData, onEnd) {
        var ref1;
        if (isFunction(options)) {
          ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];
          options = {};
        }
        if (onData) {
          return new XMLDocumentCB(options, onData, onEnd);
        } else {
          return new XMLDocument(options);
        }
      };
      module2.exports.stringWriter = function(options) {
        return new XMLStringWriter(options);
      };
      module2.exports.streamWriter = function(stream, options) {
        return new XMLStreamWriter(stream, options);
      };
      module2.exports.implementation = new XMLDOMImplementation();
      module2.exports.nodeType = NodeType;
      module2.exports.writerState = WriterState;
    }).call(exports);
  }
});

// node_modules/xml2js/lib/builder.js
var require_builder = __commonJS({
  "node_modules/xml2js/lib/builder.js"(exports) {
    (function() {
      "use strict";
      var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA, hasProp = {}.hasOwnProperty;
      builder = require_lib();
      defaults = require_defaults().defaults;
      requiresCDATA = function(entry) {
        return typeof entry === "string" && (entry.indexOf("&") >= 0 || entry.indexOf(">") >= 0 || entry.indexOf("<") >= 0);
      };
      wrapCDATA = function(entry) {
        return "<![CDATA[" + escapeCDATA(entry) + "]]>";
      };
      escapeCDATA = function(entry) {
        return entry.replace("]]>", "]]]]><![CDATA[>");
      };
      exports.Builder = function() {
        function Builder(opts) {
          var key, ref, value;
          this.options = {};
          ref = defaults["0.2"];
          for (key in ref) {
            if (!hasProp.call(ref, key))
              continue;
            value = ref[key];
            this.options[key] = value;
          }
          for (key in opts) {
            if (!hasProp.call(opts, key))
              continue;
            value = opts[key];
            this.options[key] = value;
          }
        }
        Builder.prototype.buildObject = function(rootObj) {
          var attrkey, charkey, render, rootElement, rootName;
          attrkey = this.options.attrkey;
          charkey = this.options.charkey;
          if (Object.keys(rootObj).length === 1 && this.options.rootName === defaults["0.2"].rootName) {
            rootName = Object.keys(rootObj)[0];
            rootObj = rootObj[rootName];
          } else {
            rootName = this.options.rootName;
          }
          render = function(_this) {
            return function(element, obj) {
              var attr, child, entry, index, key, value;
              if (typeof obj !== "object") {
                if (_this.options.cdata && requiresCDATA(obj)) {
                  element.raw(wrapCDATA(obj));
                } else {
                  element.txt(obj);
                }
              } else if (Array.isArray(obj)) {
                for (index in obj) {
                  if (!hasProp.call(obj, index))
                    continue;
                  child = obj[index];
                  for (key in child) {
                    entry = child[key];
                    element = render(element.ele(key), entry).up();
                  }
                }
              } else {
                for (key in obj) {
                  if (!hasProp.call(obj, key))
                    continue;
                  child = obj[key];
                  if (key === attrkey) {
                    if (typeof child === "object") {
                      for (attr in child) {
                        value = child[attr];
                        element = element.att(attr, value);
                      }
                    }
                  } else if (key === charkey) {
                    if (_this.options.cdata && requiresCDATA(child)) {
                      element = element.raw(wrapCDATA(child));
                    } else {
                      element = element.txt(child);
                    }
                  } else if (Array.isArray(child)) {
                    for (index in child) {
                      if (!hasProp.call(child, index))
                        continue;
                      entry = child[index];
                      if (typeof entry === "string") {
                        if (_this.options.cdata && requiresCDATA(entry)) {
                          element = element.ele(key).raw(wrapCDATA(entry)).up();
                        } else {
                          element = element.ele(key, entry).up();
                        }
                      } else {
                        element = render(element.ele(key), entry).up();
                      }
                    }
                  } else if (typeof child === "object") {
                    element = render(element.ele(key), child).up();
                  } else {
                    if (typeof child === "string" && _this.options.cdata && requiresCDATA(child)) {
                      element = element.ele(key).raw(wrapCDATA(child)).up();
                    } else {
                      if (child == null) {
                        child = "";
                      }
                      element = element.ele(key, child.toString()).up();
                    }
                  }
                }
              }
              return element;
            };
          }(this);
          rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {
            headless: this.options.headless,
            allowSurrogateChars: this.options.allowSurrogateChars
          });
          return render(rootElement, rootObj).end(this.options.renderOpts);
        };
        return Builder;
      }();
    }).call(exports);
  }
});

// node_modules/sax/lib/sax.js
var require_sax = __commonJS({
  "node_modules/sax/lib/sax.js"(exports) {
    (function(sax) {
      sax.parser = function(strict, opt) {
        return new SAXParser(strict, opt);
      };
      sax.SAXParser = SAXParser;
      sax.SAXStream = SAXStream;
      sax.createStream = createStream;
      sax.MAX_BUFFER_LENGTH = 64 * 1024;
      var buffers = [
        "comment",
        "sgmlDecl",
        "textNode",
        "tagName",
        "doctype",
        "procInstName",
        "procInstBody",
        "entity",
        "attribName",
        "attribValue",
        "cdata",
        "script"
      ];
      sax.EVENTS = [
        "text",
        "processinginstruction",
        "sgmldeclaration",
        "doctype",
        "comment",
        "opentagstart",
        "attribute",
        "opentag",
        "closetag",
        "opencdata",
        "cdata",
        "closecdata",
        "error",
        "end",
        "ready",
        "script",
        "opennamespace",
        "closenamespace"
      ];
      function SAXParser(strict, opt) {
        if (!(this instanceof SAXParser)) {
          return new SAXParser(strict, opt);
        }
        var parser = this;
        clearBuffers(parser);
        parser.q = parser.c = "";
        parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;
        parser.opt = opt || {};
        parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;
        parser.looseCase = parser.opt.lowercase ? "toLowerCase" : "toUpperCase";
        parser.tags = [];
        parser.closed = parser.closedRoot = parser.sawRoot = false;
        parser.tag = parser.error = null;
        parser.strict = !!strict;
        parser.noscript = !!(strict || parser.opt.noscript);
        parser.state = S.BEGIN;
        parser.strictEntities = parser.opt.strictEntities;
        parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES);
        parser.attribList = [];
        if (parser.opt.xmlns) {
          parser.ns = Object.create(rootNS);
        }
        if (parser.opt.unquotedAttributeValues === void 0) {
          parser.opt.unquotedAttributeValues = !strict;
        }
        parser.trackPosition = parser.opt.position !== false;
        if (parser.trackPosition) {
          parser.position = parser.line = parser.column = 0;
        }
        emit(parser, "onready");
      }
      if (!Object.create) {
        Object.create = function(o) {
          function F() {
          }
          F.prototype = o;
          var newf = new F();
          return newf;
        };
      }
      if (!Object.keys) {
        Object.keys = function(o) {
          var a = [];
          for (var i in o)
            if (o.hasOwnProperty(i))
              a.push(i);
          return a;
        };
      }
      function checkBufferLength(parser) {
        var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);
        var maxActual = 0;
        for (var i = 0, l = buffers.length; i < l; i++) {
          var len = parser[buffers[i]].length;
          if (len > maxAllowed) {
            switch (buffers[i]) {
              case "textNode":
                closeText(parser);
                break;
              case "cdata":
                emitNode(parser, "oncdata", parser.cdata);
                parser.cdata = "";
                break;
              case "script":
                emitNode(parser, "onscript", parser.script);
                parser.script = "";
                break;
              default:
                error(parser, "Max buffer length exceeded: " + buffers[i]);
            }
          }
          maxActual = Math.max(maxActual, len);
        }
        var m = sax.MAX_BUFFER_LENGTH - maxActual;
        parser.bufferCheckPosition = m + parser.position;
      }
      function clearBuffers(parser) {
        for (var i = 0, l = buffers.length; i < l; i++) {
          parser[buffers[i]] = "";
        }
      }
      function flushBuffers(parser) {
        closeText(parser);
        if (parser.cdata !== "") {
          emitNode(parser, "oncdata", parser.cdata);
          parser.cdata = "";
        }
        if (parser.script !== "") {
          emitNode(parser, "onscript", parser.script);
          parser.script = "";
        }
      }
      SAXParser.prototype = {
        end: function() {
          end(this);
        },
        write,
        resume: function() {
          this.error = null;
          return this;
        },
        close: function() {
          return this.write(null);
        },
        flush: function() {
          flushBuffers(this);
        }
      };
      var Stream;
      try {
        Stream = require("stream").Stream;
      } catch (ex) {
        Stream = function() {
        };
      }
      if (!Stream)
        Stream = function() {
        };
      var streamWraps = sax.EVENTS.filter(function(ev) {
        return ev !== "error" && ev !== "end";
      });
      function createStream(strict, opt) {
        return new SAXStream(strict, opt);
      }
      function SAXStream(strict, opt) {
        if (!(this instanceof SAXStream)) {
          return new SAXStream(strict, opt);
        }
        Stream.apply(this);
        this._parser = new SAXParser(strict, opt);
        this.writable = true;
        this.readable = true;
        var me = this;
        this._parser.onend = function() {
          me.emit("end");
        };
        this._parser.onerror = function(er) {
          me.emit("error", er);
          me._parser.error = null;
        };
        this._decoder = null;
        streamWraps.forEach(function(ev) {
          Object.defineProperty(me, "on" + ev, {
            get: function() {
              return me._parser["on" + ev];
            },
            set: function(h) {
              if (!h) {
                me.removeAllListeners(ev);
                me._parser["on" + ev] = h;
                return h;
              }
              me.on(ev, h);
            },
            enumerable: true,
            configurable: false
          });
        });
      }
      SAXStream.prototype = Object.create(Stream.prototype, {
        constructor: {
          value: SAXStream
        }
      });
      SAXStream.prototype.write = function(data) {
        if (typeof Buffer === "function" && typeof Buffer.isBuffer === "function" && Buffer.isBuffer(data)) {
          if (!this._decoder) {
            var SD = require("string_decoder").StringDecoder;
            this._decoder = new SD("utf8");
          }
          data = this._decoder.write(data);
        }
        this._parser.write(data.toString());
        this.emit("data", data);
        return true;
      };
      SAXStream.prototype.end = function(chunk) {
        if (chunk && chunk.length) {
          this.write(chunk);
        }
        this._parser.end();
        return true;
      };
      SAXStream.prototype.on = function(ev, handler) {
        var me = this;
        if (!me._parser["on" + ev] && streamWraps.indexOf(ev) !== -1) {
          me._parser["on" + ev] = function() {
            var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments);
            args.splice(0, 0, ev);
            me.emit.apply(me, args);
          };
        }
        return Stream.prototype.on.call(me, ev, handler);
      };
      var CDATA = "[CDATA[";
      var DOCTYPE = "DOCTYPE";
      var XML_NAMESPACE = "http://www.w3.org/XML/1998/namespace";
      var XMLNS_NAMESPACE = "http://www.w3.org/2000/xmlns/";
      var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE };
      var nameStart = /[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;
      var nameBody = /[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;
      var entityStart = /[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;
      var entityBody = /[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;
      function isWhitespace(c) {
        return c === " " || c === "\n" || c === "\r" || c === "	";
      }
      function isQuote(c) {
        return c === '"' || c === "'";
      }
      function isAttribEnd(c) {
        return c === ">" || isWhitespace(c);
      }
      function isMatch(regex, c) {
        return regex.test(c);
      }
      function notMatch(regex, c) {
        return !isMatch(regex, c);
      }
      var S = 0;
      sax.STATE = {
        BEGIN: S++,
        BEGIN_WHITESPACE: S++,
        TEXT: S++,
        TEXT_ENTITY: S++,
        OPEN_WAKA: S++,
        SGML_DECL: S++,
        SGML_DECL_QUOTED: S++,
        DOCTYPE: S++,
        DOCTYPE_QUOTED: S++,
        DOCTYPE_DTD: S++,
        DOCTYPE_DTD_QUOTED: S++,
        COMMENT_STARTING: S++,
        COMMENT: S++,
        COMMENT_ENDING: S++,
        COMMENT_ENDED: S++,
        CDATA: S++,
        CDATA_ENDING: S++,
        CDATA_ENDING_2: S++,
        PROC_INST: S++,
        PROC_INST_BODY: S++,
        PROC_INST_ENDING: S++,
        OPEN_TAG: S++,
        OPEN_TAG_SLASH: S++,
        ATTRIB: S++,
        ATTRIB_NAME: S++,
        ATTRIB_NAME_SAW_WHITE: S++,
        ATTRIB_VALUE: S++,
        ATTRIB_VALUE_QUOTED: S++,
        ATTRIB_VALUE_CLOSED: S++,
        ATTRIB_VALUE_UNQUOTED: S++,
        ATTRIB_VALUE_ENTITY_Q: S++,
        ATTRIB_VALUE_ENTITY_U: S++,
        CLOSE_TAG: S++,
        CLOSE_TAG_SAW_WHITE: S++,
        SCRIPT: S++,
        SCRIPT_ENDING: S++
      };
      sax.XML_ENTITIES = {
        "amp": "&",
        "gt": ">",
        "lt": "<",
        "quot": '"',
        "apos": "'"
      };
      sax.ENTITIES = {
        "amp": "&",
        "gt": ">",
        "lt": "<",
        "quot": '"',
        "apos": "'",
        "AElig": 198,
        "Aacute": 193,
        "Acirc": 194,
        "Agrave": 192,
        "Aring": 197,
        "Atilde": 195,
        "Auml": 196,
        "Ccedil": 199,
        "ETH": 208,
        "Eacute": 201,
        "Ecirc": 202,
        "Egrave": 200,
        "Euml": 203,
        "Iacute": 205,
        "Icirc": 206,
        "Igrave": 204,
        "Iuml": 207,
        "Ntilde": 209,
        "Oacute": 211,
        "Ocirc": 212,
        "Ograve": 210,
        "Oslash": 216,
        "Otilde": 213,
        "Ouml": 214,
        "THORN": 222,
        "Uacute": 218,
        "Ucirc": 219,
        "Ugrave": 217,
        "Uuml": 220,
        "Yacute": 221,
        "aacute": 225,
        "acirc": 226,
        "aelig": 230,
        "agrave": 224,
        "aring": 229,
        "atilde": 227,
        "auml": 228,
        "ccedil": 231,
        "eacute": 233,
        "ecirc": 234,
        "egrave": 232,
        "eth": 240,
        "euml": 235,
        "iacute": 237,
        "icirc": 238,
        "igrave": 236,
        "iuml": 239,
        "ntilde": 241,
        "oacute": 243,
        "ocirc": 244,
        "ograve": 242,
        "oslash": 248,
        "otilde": 245,
        "ouml": 246,
        "szlig": 223,
        "thorn": 254,
        "uacute": 250,
        "ucirc": 251,
        "ugrave": 249,
        "uuml": 252,
        "yacute": 253,
        "yuml": 255,
        "copy": 169,
        "reg": 174,
        "nbsp": 160,
        "iexcl": 161,
        "cent": 162,
        "pound": 163,
        "curren": 164,
        "yen": 165,
        "brvbar": 166,
        "sect": 167,
        "uml": 168,
        "ordf": 170,
        "laquo": 171,
        "not": 172,
        "shy": 173,
        "macr": 175,
        "deg": 176,
        "plusmn": 177,
        "sup1": 185,
        "sup2": 178,
        "sup3": 179,
        "acute": 180,
        "micro": 181,
        "para": 182,
        "middot": 183,
        "cedil": 184,
        "ordm": 186,
        "raquo": 187,
        "frac14": 188,
        "frac12": 189,
        "frac34": 190,
        "iquest": 191,
        "times": 215,
        "divide": 247,
        "OElig": 338,
        "oelig": 339,
        "Scaron": 352,
        "scaron": 353,
        "Yuml": 376,
        "fnof": 402,
        "circ": 710,
        "tilde": 732,
        "Alpha": 913,
        "Beta": 914,
        "Gamma": 915,
        "Delta": 916,
        "Epsilon": 917,
        "Zeta": 918,
        "Eta": 919,
        "Theta": 920,
        "Iota": 921,
        "Kappa": 922,
        "Lambda": 923,
        "Mu": 924,
        "Nu": 925,
        "Xi": 926,
        "Omicron": 927,
        "Pi": 928,
        "Rho": 929,
        "Sigma": 931,
        "Tau": 932,
        "Upsilon": 933,
        "Phi": 934,
        "Chi": 935,
        "Psi": 936,
        "Omega": 937,
        "alpha": 945,
        "beta": 946,
        "gamma": 947,
        "delta": 948,
        "epsilon": 949,
        "zeta": 950,
        "eta": 951,
        "theta": 952,
        "iota": 953,
        "kappa": 954,
        "lambda": 955,
        "mu": 956,
        "nu": 957,
        "xi": 958,
        "omicron": 959,
        "pi": 960,
        "rho": 961,
        "sigmaf": 962,
        "sigma": 963,
        "tau": 964,
        "upsilon": 965,
        "phi": 966,
        "chi": 967,
        "psi": 968,
        "omega": 969,
        "thetasym": 977,
        "upsih": 978,
        "piv": 982,
        "ensp": 8194,
        "emsp": 8195,
        "thinsp": 8201,
        "zwnj": 8204,
        "zwj": 8205,
        "lrm": 8206,
        "rlm": 8207,
        "ndash": 8211,
        "mdash": 8212,
        "lsquo": 8216,
        "rsquo": 8217,
        "sbquo": 8218,
        "ldquo": 8220,
        "rdquo": 8221,
        "bdquo": 8222,
        "dagger": 8224,
        "Dagger": 8225,
        "bull": 8226,
        "hellip": 8230,
        "permil": 8240,
        "prime": 8242,
        "Prime": 8243,
        "lsaquo": 8249,
        "rsaquo": 8250,
        "oline": 8254,
        "frasl": 8260,
        "euro": 8364,
        "image": 8465,
        "weierp": 8472,
        "real": 8476,
        "trade": 8482,
        "alefsym": 8501,
        "larr": 8592,
        "uarr": 8593,
        "rarr": 8594,
        "darr": 8595,
        "harr": 8596,
        "crarr": 8629,
        "lArr": 8656,
        "uArr": 8657,
        "rArr": 8658,
        "dArr": 8659,
        "hArr": 8660,
        "forall": 8704,
        "part": 8706,
        "exist": 8707,
        "empty": 8709,
        "nabla": 8711,
        "isin": 8712,
        "notin": 8713,
        "ni": 8715,
        "prod": 8719,
        "sum": 8721,
        "minus": 8722,
        "lowast": 8727,
        "radic": 8730,
        "prop": 8733,
        "infin": 8734,
        "ang": 8736,
        "and": 8743,
        "or": 8744,
        "cap": 8745,
        "cup": 8746,
        "int": 8747,
        "there4": 8756,
        "sim": 8764,
        "cong": 8773,
        "asymp": 8776,
        "ne": 8800,
        "equiv": 8801,
        "le": 8804,
        "ge": 8805,
        "sub": 8834,
        "sup": 8835,
        "nsub": 8836,
        "sube": 8838,
        "supe": 8839,
        "oplus": 8853,
        "otimes": 8855,
        "perp": 8869,
        "sdot": 8901,
        "lceil": 8968,
        "rceil": 8969,
        "lfloor": 8970,
        "rfloor": 8971,
        "lang": 9001,
        "rang": 9002,
        "loz": 9674,
        "spades": 9824,
        "clubs": 9827,
        "hearts": 9829,
        "diams": 9830
      };
      Object.keys(sax.ENTITIES).forEach(function(key) {
        var e = sax.ENTITIES[key];
        var s2 = typeof e === "number" ? String.fromCharCode(e) : e;
        sax.ENTITIES[key] = s2;
      });
      for (var s in sax.STATE) {
        sax.STATE[sax.STATE[s]] = s;
      }
      S = sax.STATE;
      function emit(parser, event, data) {
        parser[event] && parser[event](data);
      }
      function emitNode(parser, nodeType, data) {
        if (parser.textNode)
          closeText(parser);
        emit(parser, nodeType, data);
      }
      function closeText(parser) {
        parser.textNode = textopts(parser.opt, parser.textNode);
        if (parser.textNode)
          emit(parser, "ontext", parser.textNode);
        parser.textNode = "";
      }
      function textopts(opt, text) {
        if (opt.trim)
          text = text.trim();
        if (opt.normalize)
          text = text.replace(/\s+/g, " ");
        return text;
      }
      function error(parser, er) {
        closeText(parser);
        if (parser.trackPosition) {
          er += "\nLine: " + parser.line + "\nColumn: " + parser.column + "\nChar: " + parser.c;
        }
        er = new Error(er);
        parser.error = er;
        emit(parser, "onerror", er);
        return parser;
      }
      function end(parser) {
        if (parser.sawRoot && !parser.closedRoot)
          strictFail(parser, "Unclosed root tag");
        if (parser.state !== S.BEGIN && parser.state !== S.BEGIN_WHITESPACE && parser.state !== S.TEXT) {
          error(parser, "Unexpected end");
        }
        closeText(parser);
        parser.c = "";
        parser.closed = true;
        emit(parser, "onend");
        SAXParser.call(parser, parser.strict, parser.opt);
        return parser;
      }
      function strictFail(parser, message) {
        if (typeof parser !== "object" || !(parser instanceof SAXParser)) {
          throw new Error("bad call to strictFail");
        }
        if (parser.strict) {
          error(parser, message);
        }
      }
      function newTag(parser) {
        if (!parser.strict)
          parser.tagName = parser.tagName[parser.looseCase]();
        var parent = parser.tags[parser.tags.length - 1] || parser;
        var tag = parser.tag = { name: parser.tagName, attributes: {} };
        if (parser.opt.xmlns) {
          tag.ns = parent.ns;
        }
        parser.attribList.length = 0;
        emitNode(parser, "onopentagstart", tag);
      }
      function qname(name, attribute) {
        var i = name.indexOf(":");
        var qualName = i < 0 ? ["", name] : name.split(":");
        var prefix = qualName[0];
        var local = qualName[1];
        if (attribute && name === "xmlns") {
          prefix = "xmlns";
          local = "";
        }
        return { prefix, local };
      }
      function attrib(parser) {
        if (!parser.strict) {
          parser.attribName = parser.attribName[parser.looseCase]();
        }
        if (parser.attribList.indexOf(parser.attribName) !== -1 || parser.tag.attributes.hasOwnProperty(parser.attribName)) {
          parser.attribName = parser.attribValue = "";
          return;
        }
        if (parser.opt.xmlns) {
          var qn = qname(parser.attribName, true);
          var prefix = qn.prefix;
          var local = qn.local;
          if (prefix === "xmlns") {
            if (local === "xml" && parser.attribValue !== XML_NAMESPACE) {
              strictFail(parser, "xml: prefix must be bound to " + XML_NAMESPACE + "\nActual: " + parser.attribValue);
            } else if (local === "xmlns" && parser.attribValue !== XMLNS_NAMESPACE) {
              strictFail(parser, "xmlns: prefix must be bound to " + XMLNS_NAMESPACE + "\nActual: " + parser.attribValue);
            } else {
              var tag = parser.tag;
              var parent = parser.tags[parser.tags.length - 1] || parser;
              if (tag.ns === parent.ns) {
                tag.ns = Object.create(parent.ns);
              }
              tag.ns[local] = parser.attribValue;
            }
          }
          parser.attribList.push([parser.attribName, parser.attribValue]);
        } else {
          parser.tag.attributes[parser.attribName] = parser.attribValue;
          emitNode(parser, "onattribute", {
            name: parser.attribName,
            value: parser.attribValue
          });
        }
        parser.attribName = parser.attribValue = "";
      }
      function openTag(parser, selfClosing) {
        if (parser.opt.xmlns) {
          var tag = parser.tag;
          var qn = qname(parser.tagName);
          tag.prefix = qn.prefix;
          tag.local = qn.local;
          tag.uri = tag.ns[qn.prefix] || "";
          if (tag.prefix && !tag.uri) {
            strictFail(parser, "Unbound namespace prefix: " + JSON.stringify(parser.tagName));
            tag.uri = qn.prefix;
          }
          var parent = parser.tags[parser.tags.length - 1] || parser;
          if (tag.ns && parent.ns !== tag.ns) {
            Object.keys(tag.ns).forEach(function(p) {
              emitNode(parser, "onopennamespace", {
                prefix: p,
                uri: tag.ns[p]
              });
            });
          }
          for (var i = 0, l = parser.attribList.length; i < l; i++) {
            var nv = parser.attribList[i];
            var name = nv[0];
            var value = nv[1];
            var qualName = qname(name, true);
            var prefix = qualName.prefix;
            var local = qualName.local;
            var uri = prefix === "" ? "" : tag.ns[prefix] || "";
            var a = {
              name,
              value,
              prefix,
              local,
              uri
            };
            if (prefix && prefix !== "xmlns" && !uri) {
              strictFail(parser, "Unbound namespace prefix: " + JSON.stringify(prefix));
              a.uri = prefix;
            }
            parser.tag.attributes[name] = a;
            emitNode(parser, "onattribute", a);
          }
          parser.attribList.length = 0;
        }
        parser.tag.isSelfClosing = !!selfClosing;
        parser.sawRoot = true;
        parser.tags.push(parser.tag);
        emitNode(parser, "onopentag", parser.tag);
        if (!selfClosing) {
          if (!parser.noscript && parser.tagName.toLowerCase() === "script") {
            parser.state = S.SCRIPT;
          } else {
            parser.state = S.TEXT;
          }
          parser.tag = null;
          parser.tagName = "";
        }
        parser.attribName = parser.attribValue = "";
        parser.attribList.length = 0;
      }
      function closeTag(parser) {
        if (!parser.tagName) {
          strictFail(parser, "Weird empty close tag.");
          parser.textNode += "</>";
          parser.state = S.TEXT;
          return;
        }
        if (parser.script) {
          if (parser.tagName !== "script") {
            parser.script += "</" + parser.tagName + ">";
            parser.tagName = "";
            parser.state = S.SCRIPT;
            return;
          }
          emitNode(parser, "onscript", parser.script);
          parser.script = "";
        }
        var t = parser.tags.length;
        var tagName = parser.tagName;
        if (!parser.strict) {
          tagName = tagName[parser.looseCase]();
        }
        var closeTo = tagName;
        while (t--) {
          var close = parser.tags[t];
          if (close.name !== closeTo) {
            strictFail(parser, "Unexpected close tag");
          } else {
            break;
          }
        }
        if (t < 0) {
          strictFail(parser, "Unmatched closing tag: " + parser.tagName);
          parser.textNode += "</" + parser.tagName + ">";
          parser.state = S.TEXT;
          return;
        }
        parser.tagName = tagName;
        var s2 = parser.tags.length;
        while (s2-- > t) {
          var tag = parser.tag = parser.tags.pop();
          parser.tagName = parser.tag.name;
          emitNode(parser, "onclosetag", parser.tagName);
          var x = {};
          for (var i in tag.ns) {
            x[i] = tag.ns[i];
          }
          var parent = parser.tags[parser.tags.length - 1] || parser;
          if (parser.opt.xmlns && tag.ns !== parent.ns) {
            Object.keys(tag.ns).forEach(function(p) {
              var n = tag.ns[p];
              emitNode(parser, "onclosenamespace", { prefix: p, uri: n });
            });
          }
        }
        if (t === 0)
          parser.closedRoot = true;
        parser.tagName = parser.attribValue = parser.attribName = "";
        parser.attribList.length = 0;
        parser.state = S.TEXT;
      }
      function parseEntity(parser) {
        var entity = parser.entity;
        var entityLC = entity.toLowerCase();
        var num;
        var numStr = "";
        if (parser.ENTITIES[entity]) {
          return parser.ENTITIES[entity];
        }
        if (parser.ENTITIES[entityLC]) {
          return parser.ENTITIES[entityLC];
        }
        entity = entityLC;
        if (entity.charAt(0) === "#") {
          if (entity.charAt(1) === "x") {
            entity = entity.slice(2);
            num = parseInt(entity, 16);
            numStr = num.toString(16);
          } else {
            entity = entity.slice(1);
            num = parseInt(entity, 10);
            numStr = num.toString(10);
          }
        }
        entity = entity.replace(/^0+/, "");
        if (isNaN(num) || numStr.toLowerCase() !== entity) {
          strictFail(parser, "Invalid character entity");
          return "&" + parser.entity + ";";
        }
        return String.fromCodePoint(num);
      }
      function beginWhiteSpace(parser, c) {
        if (c === "<") {
          parser.state = S.OPEN_WAKA;
          parser.startTagPosition = parser.position;
        } else if (!isWhitespace(c)) {
          strictFail(parser, "Non-whitespace before first tag.");
          parser.textNode = c;
          parser.state = S.TEXT;
        }
      }
      function charAt(chunk, i) {
        var result = "";
        if (i < chunk.length) {
          result = chunk.charAt(i);
        }
        return result;
      }
      function write(chunk) {
        var parser = this;
        if (this.error) {
          throw this.error;
        }
        if (parser.closed) {
          return error(parser, "Cannot write after close. Assign an onready handler.");
        }
        if (chunk === null) {
          return end(parser);
        }
        if (typeof chunk === "object") {
          chunk = chunk.toString();
        }
        var i = 0;
        var c = "";
        while (true) {
          c = charAt(chunk, i++);
          parser.c = c;
          if (!c) {
            break;
          }
          if (parser.trackPosition) {
            parser.position++;
            if (c === "\n") {
              parser.line++;
              parser.column = 0;
            } else {
              parser.column++;
            }
          }
          switch (parser.state) {
            case S.BEGIN:
              parser.state = S.BEGIN_WHITESPACE;
              if (c === "\uFEFF") {
                continue;
              }
              beginWhiteSpace(parser, c);
              continue;
            case S.BEGIN_WHITESPACE:
              beginWhiteSpace(parser, c);
              continue;
            case S.TEXT:
              if (parser.sawRoot && !parser.closedRoot) {
                var starti = i - 1;
                while (c && c !== "<" && c !== "&") {
                  c = charAt(chunk, i++);
                  if (c && parser.trackPosition) {
                    parser.position++;
                    if (c === "\n") {
                      parser.line++;
                      parser.column = 0;
                    } else {
                      parser.column++;
                    }
                  }
                }
                parser.textNode += chunk.substring(starti, i - 1);
              }
              if (c === "<" && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {
                parser.state = S.OPEN_WAKA;
                parser.startTagPosition = parser.position;
              } else {
                if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {
                  strictFail(parser, "Text data outside of root node.");
                }
                if (c === "&") {
                  parser.state = S.TEXT_ENTITY;
                } else {
                  parser.textNode += c;
                }
              }
              continue;
            case S.SCRIPT:
              if (c === "<") {
                parser.state = S.SCRIPT_ENDING;
              } else {
                parser.script += c;
              }
              continue;
            case S.SCRIPT_ENDING:
              if (c === "/") {
                parser.state = S.CLOSE_TAG;
              } else {
                parser.script += "<" + c;
                parser.state = S.SCRIPT;
              }
              continue;
            case S.OPEN_WAKA:
              if (c === "!") {
                parser.state = S.SGML_DECL;
                parser.sgmlDecl = "";
              } else if (isWhitespace(c)) {
              } else if (isMatch(nameStart, c)) {
                parser.state = S.OPEN_TAG;
                parser.tagName = c;
              } else if (c === "/") {
                parser.state = S.CLOSE_TAG;
                parser.tagName = "";
              } else if (c === "?") {
                parser.state = S.PROC_INST;
                parser.procInstName = parser.procInstBody = "";
              } else {
                strictFail(parser, "Unencoded <");
                if (parser.startTagPosition + 1 < parser.position) {
                  var pad = parser.position - parser.startTagPosition;
                  c = new Array(pad).join(" ") + c;
                }
                parser.textNode += "<" + c;
                parser.state = S.TEXT;
              }
              continue;
            case S.SGML_DECL:
              if (parser.sgmlDecl + c === "--") {
                parser.state = S.COMMENT;
                parser.comment = "";
                parser.sgmlDecl = "";
                continue;
              }
              if (parser.doctype && parser.doctype !== true && parser.sgmlDecl) {
                parser.state = S.DOCTYPE_DTD;
                parser.doctype += "<!" + parser.sgmlDecl + c;
                parser.sgmlDecl = "";
              } else if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {
                emitNode(parser, "onopencdata");
                parser.state = S.CDATA;
                parser.sgmlDecl = "";
                parser.cdata = "";
              } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {
                parser.state = S.DOCTYPE;
                if (parser.doctype || parser.sawRoot) {
                  strictFail(parser, "Inappropriately located doctype declaration");
                }
                parser.doctype = "";
                parser.sgmlDecl = "";
              } else if (c === ">") {
                emitNode(parser, "onsgmldeclaration", parser.sgmlDecl);
                parser.sgmlDecl = "";
                parser.state = S.TEXT;
              } else if (isQuote(c)) {
                parser.state = S.SGML_DECL_QUOTED;
                parser.sgmlDecl += c;
              } else {
                parser.sgmlDecl += c;
              }
              continue;
            case S.SGML_DECL_QUOTED:
              if (c === parser.q) {
                parser.state = S.SGML_DECL;
                parser.q = "";
              }
              parser.sgmlDecl += c;
              continue;
            case S.DOCTYPE:
              if (c === ">") {
                parser.state = S.TEXT;
                emitNode(parser, "ondoctype", parser.doctype);
                parser.doctype = true;
              } else {
                parser.doctype += c;
                if (c === "[") {
                  parser.state = S.DOCTYPE_DTD;
                } else if (isQuote(c)) {
                  parser.state = S.DOCTYPE_QUOTED;
                  parser.q = c;
                }
              }
              continue;
            case S.DOCTYPE_QUOTED:
              parser.doctype += c;
              if (c === parser.q) {
                parser.q = "";
                parser.state = S.DOCTYPE;
              }
              continue;
            case S.DOCTYPE_DTD:
              if (c === "]") {
                parser.doctype += c;
                parser.state = S.DOCTYPE;
              } else if (c === "<") {
                parser.state = S.OPEN_WAKA;
                parser.startTagPosition = parser.position;
              } else if (isQuote(c)) {
                parser.doctype += c;
                parser.state = S.DOCTYPE_DTD_QUOTED;
                parser.q = c;
              } else {
                parser.doctype += c;
              }
              continue;
            case S.DOCTYPE_DTD_QUOTED:
              parser.doctype += c;
              if (c === parser.q) {
                parser.state = S.DOCTYPE_DTD;
                parser.q = "";
              }
              continue;
            case S.COMMENT:
              if (c === "-") {
                parser.state = S.COMMENT_ENDING;
              } else {
                parser.comment += c;
              }
              continue;
            case S.COMMENT_ENDING:
              if (c === "-") {
                parser.state = S.COMMENT_ENDED;
                parser.comment = textopts(parser.opt, parser.comment);
                if (parser.comment) {
                  emitNode(parser, "oncomment", parser.comment);
                }
                parser.comment = "";
              } else {
                parser.comment += "-" + c;
                parser.state = S.COMMENT;
              }
              continue;
            case S.COMMENT_ENDED:
              if (c !== ">") {
                strictFail(parser, "Malformed comment");
                parser.comment += "--" + c;
                parser.state = S.COMMENT;
              } else if (parser.doctype && parser.doctype !== true) {
                parser.state = S.DOCTYPE_DTD;
              } else {
                parser.state = S.TEXT;
              }
              continue;
            case S.CDATA:
              if (c === "]") {
                parser.state = S.CDATA_ENDING;
              } else {
                parser.cdata += c;
              }
              continue;
            case S.CDATA_ENDING:
              if (c === "]") {
                parser.state = S.CDATA_ENDING_2;
              } else {
                parser.cdata += "]" + c;
                parser.state = S.CDATA;
              }
              continue;
            case S.CDATA_ENDING_2:
              if (c === ">") {
                if (parser.cdata) {
                  emitNode(parser, "oncdata", parser.cdata);
                }
                emitNode(parser, "onclosecdata");
                parser.cdata = "";
                parser.state = S.TEXT;
              } else if (c === "]") {
                parser.cdata += "]";
              } else {
                parser.cdata += "]]" + c;
                parser.state = S.CDATA;
              }
              continue;
            case S.PROC_INST:
              if (c === "?") {
                parser.state = S.PROC_INST_ENDING;
              } else if (isWhitespace(c)) {
                parser.state = S.PROC_INST_BODY;
              } else {
                parser.procInstName += c;
              }
              continue;
            case S.PROC_INST_BODY:
              if (!parser.procInstBody && isWhitespace(c)) {
                continue;
              } else if (c === "?") {
                parser.state = S.PROC_INST_ENDING;
              } else {
                parser.procInstBody += c;
              }
              continue;
            case S.PROC_INST_ENDING:
              if (c === ">") {
                emitNode(parser, "onprocessinginstruction", {
                  name: parser.procInstName,
                  body: parser.procInstBody
                });
                parser.procInstName = parser.procInstBody = "";
                parser.state = S.TEXT;
              } else {
                parser.procInstBody += "?" + c;
                parser.state = S.PROC_INST_BODY;
              }
              continue;
            case S.OPEN_TAG:
              if (isMatch(nameBody, c)) {
                parser.tagName += c;
              } else {
                newTag(parser);
                if (c === ">") {
                  openTag(parser);
                } else if (c === "/") {
                  parser.state = S.OPEN_TAG_SLASH;
                } else {
                  if (!isWhitespace(c)) {
                    strictFail(parser, "Invalid character in tag name");
                  }
                  parser.state = S.ATTRIB;
                }
              }
              continue;
            case S.OPEN_TAG_SLASH:
              if (c === ">") {
                openTag(parser, true);
                closeTag(parser);
              } else {
                strictFail(parser, "Forward-slash in opening tag not followed by >");
                parser.state = S.ATTRIB;
              }
              continue;
            case S.ATTRIB:
              if (isWhitespace(c)) {
                continue;
              } else if (c === ">") {
                openTag(parser);
              } else if (c === "/") {
                parser.state = S.OPEN_TAG_SLASH;
              } else if (isMatch(nameStart, c)) {
                parser.attribName = c;
                parser.attribValue = "";
                parser.state = S.ATTRIB_NAME;
              } else {
                strictFail(parser, "Invalid attribute name");
              }
              continue;
            case S.ATTRIB_NAME:
              if (c === "=") {
                parser.state = S.ATTRIB_VALUE;
              } else if (c === ">") {
                strictFail(parser, "Attribute without value");
                parser.attribValue = parser.attribName;
                attrib(parser);
                openTag(parser);
              } else if (isWhitespace(c)) {
                parser.state = S.ATTRIB_NAME_SAW_WHITE;
              } else if (isMatch(nameBody, c)) {
                parser.attribName += c;
              } else {
                strictFail(parser, "Invalid attribute name");
              }
              continue;
            case S.ATTRIB_NAME_SAW_WHITE:
              if (c === "=") {
                parser.state = S.ATTRIB_VALUE;
              } else if (isWhitespace(c)) {
                continue;
              } else {
                strictFail(parser, "Attribute without value");
                parser.tag.attributes[parser.attribName] = "";
                parser.attribValue = "";
                emitNode(parser, "onattribute", {
                  name: parser.attribName,
                  value: ""
                });
                parser.attribName = "";
                if (c === ">") {
                  openTag(parser);
                } else if (isMatch(nameStart, c)) {
                  parser.attribName = c;
                  parser.state = S.ATTRIB_NAME;
                } else {
                  strictFail(parser, "Invalid attribute name");
                  parser.state = S.ATTRIB;
                }
              }
              continue;
            case S.ATTRIB_VALUE:
              if (isWhitespace(c)) {
                continue;
              } else if (isQuote(c)) {
                parser.q = c;
                parser.state = S.ATTRIB_VALUE_QUOTED;
              } else {
                if (!parser.opt.unquotedAttributeValues) {
                  error(parser, "Unquoted attribute value");
                }
                parser.state = S.ATTRIB_VALUE_UNQUOTED;
                parser.attribValue = c;
              }
              continue;
            case S.ATTRIB_VALUE_QUOTED:
              if (c !== parser.q) {
                if (c === "&") {
                  parser.state = S.ATTRIB_VALUE_ENTITY_Q;
                } else {
                  parser.attribValue += c;
                }
                continue;
              }
              attrib(parser);
              parser.q = "";
              parser.state = S.ATTRIB_VALUE_CLOSED;
              continue;
            case S.ATTRIB_VALUE_CLOSED:
              if (isWhitespace(c)) {
                parser.state = S.ATTRIB;
              } else if (c === ">") {
                openTag(parser);
              } else if (c === "/") {
                parser.state = S.OPEN_TAG_SLASH;
              } else if (isMatch(nameStart, c)) {
                strictFail(parser, "No whitespace between attributes");
                parser.attribName = c;
                parser.attribValue = "";
                parser.state = S.ATTRIB_NAME;
              } else {
                strictFail(parser, "Invalid attribute name");
              }
              continue;
            case S.ATTRIB_VALUE_UNQUOTED:
              if (!isAttribEnd(c)) {
                if (c === "&") {
                  parser.state = S.ATTRIB_VALUE_ENTITY_U;
                } else {
                  parser.attribValue += c;
                }
                continue;
              }
              attrib(parser);
              if (c === ">") {
                openTag(parser);
              } else {
                parser.state = S.ATTRIB;
              }
              continue;
            case S.CLOSE_TAG:
              if (!parser.tagName) {
                if (isWhitespace(c)) {
                  continue;
                } else if (notMatch(nameStart, c)) {
                  if (parser.script) {
                    parser.script += "</" + c;
                    parser.state = S.SCRIPT;
                  } else {
                    strictFail(parser, "Invalid tagname in closing tag.");
                  }
                } else {
                  parser.tagName = c;
                }
              } else if (c === ">") {
                closeTag(parser);
              } else if (isMatch(nameBody, c)) {
                parser.tagName += c;
              } else if (parser.script) {
                parser.script += "</" + parser.tagName;
                parser.tagName = "";
                parser.state = S.SCRIPT;
              } else {
                if (!isWhitespace(c)) {
                  strictFail(parser, "Invalid tagname in closing tag");
                }
                parser.state = S.CLOSE_TAG_SAW_WHITE;
              }
              continue;
            case S.CLOSE_TAG_SAW_WHITE:
              if (isWhitespace(c)) {
                continue;
              }
              if (c === ">") {
                closeTag(parser);
              } else {
                strictFail(parser, "Invalid characters in closing tag");
              }
              continue;
            case S.TEXT_ENTITY:
            case S.ATTRIB_VALUE_ENTITY_Q:
            case S.ATTRIB_VALUE_ENTITY_U:
              var returnState;
              var buffer;
              switch (parser.state) {
                case S.TEXT_ENTITY:
                  returnState = S.TEXT;
                  buffer = "textNode";
                  break;
                case S.ATTRIB_VALUE_ENTITY_Q:
                  returnState = S.ATTRIB_VALUE_QUOTED;
                  buffer = "attribValue";
                  break;
                case S.ATTRIB_VALUE_ENTITY_U:
                  returnState = S.ATTRIB_VALUE_UNQUOTED;
                  buffer = "attribValue";
                  break;
              }
              if (c === ";") {
                var parsedEntity = parseEntity(parser);
                if (parser.opt.unparsedEntities && !Object.values(sax.XML_ENTITIES).includes(parsedEntity)) {
                  parser.entity = "";
                  parser.state = returnState;
                  parser.write(parsedEntity);
                } else {
                  parser[buffer] += parsedEntity;
                  parser.entity = "";
                  parser.state = returnState;
                }
              } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {
                parser.entity += c;
              } else {
                strictFail(parser, "Invalid character in entity name");
                parser[buffer] += "&" + parser.entity + c;
                parser.entity = "";
                parser.state = returnState;
              }
              continue;
            default: {
              throw new Error(parser, "Unknown state: " + parser.state);
            }
          }
        }
        if (parser.position >= parser.bufferCheckPosition) {
          checkBufferLength(parser);
        }
        return parser;
      }
      if (!String.fromCodePoint) {
        (function() {
          var stringFromCharCode = String.fromCharCode;
          var floor = Math.floor;
          var fromCodePoint = function() {
            var MAX_SIZE = 16384;
            var codeUnits = [];
            var highSurrogate;
            var lowSurrogate;
            var index = -1;
            var length = arguments.length;
            if (!length) {
              return "";
            }
            var result = "";
            while (++index < length) {
              var codePoint = Number(arguments[index]);
              if (!isFinite(codePoint) || codePoint < 0 || codePoint > 1114111 || floor(codePoint) !== codePoint) {
                throw RangeError("Invalid code point: " + codePoint);
              }
              if (codePoint <= 65535) {
                codeUnits.push(codePoint);
              } else {
                codePoint -= 65536;
                highSurrogate = (codePoint >> 10) + 55296;
                lowSurrogate = codePoint % 1024 + 56320;
                codeUnits.push(highSurrogate, lowSurrogate);
              }
              if (index + 1 === length || codeUnits.length > MAX_SIZE) {
                result += stringFromCharCode.apply(null, codeUnits);
                codeUnits.length = 0;
              }
            }
            return result;
          };
          if (Object.defineProperty) {
            Object.defineProperty(String, "fromCodePoint", {
              value: fromCodePoint,
              configurable: true,
              writable: true
            });
          } else {
            String.fromCodePoint = fromCodePoint;
          }
        })();
      }
    })(typeof exports === "undefined" ? exports.sax = {} : exports);
  }
});

// node_modules/xml2js/lib/bom.js
var require_bom = __commonJS({
  "node_modules/xml2js/lib/bom.js"(exports) {
    (function() {
      "use strict";
      exports.stripBOM = function(str) {
        if (str[0] === "\uFEFF") {
          return str.substring(1);
        } else {
          return str;
        }
      };
    }).call(exports);
  }
});

// node_modules/xml2js/lib/processors.js
var require_processors = __commonJS({
  "node_modules/xml2js/lib/processors.js"(exports) {
    (function() {
      "use strict";
      var prefixMatch;
      prefixMatch = new RegExp(/(?!xmlns)^.*:/);
      exports.normalize = function(str) {
        return str.toLowerCase();
      };
      exports.firstCharLowerCase = function(str) {
        return str.charAt(0).toLowerCase() + str.slice(1);
      };
      exports.stripPrefix = function(str) {
        return str.replace(prefixMatch, "");
      };
      exports.parseNumbers = function(str) {
        if (!isNaN(str)) {
          str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);
        }
        return str;
      };
      exports.parseBooleans = function(str) {
        if (/^(?:true|false)$/i.test(str)) {
          str = str.toLowerCase() === "true";
        }
        return str;
      };
    }).call(exports);
  }
});

// node_modules/xml2js/lib/parser.js
var require_parser = __commonJS({
  "node_modules/xml2js/lib/parser.js"(exports) {
    (function() {
      "use strict";
      var bom, defaults, events, isEmpty, processItem, processors, sax, setImmediate, bind = function(fn, me) {
        return function() {
          return fn.apply(me, arguments);
        };
      }, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      sax = require_sax();
      events = require("events");
      bom = require_bom();
      processors = require_processors();
      setImmediate = require("timers").setImmediate;
      defaults = require_defaults().defaults;
      isEmpty = function(thing) {
        return typeof thing === "object" && thing != null && Object.keys(thing).length === 0;
      };
      processItem = function(processors2, item, key) {
        var i, len, process;
        for (i = 0, len = processors2.length; i < len; i++) {
          process = processors2[i];
          item = process(item, key);
        }
        return item;
      };
      exports.Parser = function(superClass) {
        extend(Parser, superClass);
        function Parser(opts) {
          this.parseStringPromise = bind(this.parseStringPromise, this);
          this.parseString = bind(this.parseString, this);
          this.reset = bind(this.reset, this);
          this.assignOrPush = bind(this.assignOrPush, this);
          this.processAsync = bind(this.processAsync, this);
          var key, ref, value;
          if (!(this instanceof exports.Parser)) {
            return new exports.Parser(opts);
          }
          this.options = {};
          ref = defaults["0.2"];
          for (key in ref) {
            if (!hasProp.call(ref, key))
              continue;
            value = ref[key];
            this.options[key] = value;
          }
          for (key in opts) {
            if (!hasProp.call(opts, key))
              continue;
            value = opts[key];
            this.options[key] = value;
          }
          if (this.options.xmlns) {
            this.options.xmlnskey = this.options.attrkey + "ns";
          }
          if (this.options.normalizeTags) {
            if (!this.options.tagNameProcessors) {
              this.options.tagNameProcessors = [];
            }
            this.options.tagNameProcessors.unshift(processors.normalize);
          }
          this.reset();
        }
        Parser.prototype.processAsync = function() {
          var chunk, err;
          try {
            if (this.remaining.length <= this.options.chunkSize) {
              chunk = this.remaining;
              this.remaining = "";
              this.saxParser = this.saxParser.write(chunk);
              return this.saxParser.close();
            } else {
              chunk = this.remaining.substr(0, this.options.chunkSize);
              this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);
              this.saxParser = this.saxParser.write(chunk);
              return setImmediate(this.processAsync);
            }
          } catch (error1) {
            err = error1;
            if (!this.saxParser.errThrown) {
              this.saxParser.errThrown = true;
              return this.emit(err);
            }
          }
        };
        Parser.prototype.assignOrPush = function(obj, key, newValue) {
          if (!(key in obj)) {
            if (!this.options.explicitArray) {
              return obj[key] = newValue;
            } else {
              return obj[key] = [newValue];
            }
          } else {
            if (!(obj[key] instanceof Array)) {
              obj[key] = [obj[key]];
            }
            return obj[key].push(newValue);
          }
        };
        Parser.prototype.reset = function() {
          var attrkey, charkey, ontext, stack;
          this.removeAllListeners();
          this.saxParser = sax.parser(this.options.strict, {
            trim: false,
            normalize: false,
            xmlns: this.options.xmlns
          });
          this.saxParser.errThrown = false;
          this.saxParser.onerror = function(_this) {
            return function(error) {
              _this.saxParser.resume();
              if (!_this.saxParser.errThrown) {
                _this.saxParser.errThrown = true;
                return _this.emit("error", error);
              }
            };
          }(this);
          this.saxParser.onend = function(_this) {
            return function() {
              if (!_this.saxParser.ended) {
                _this.saxParser.ended = true;
                return _this.emit("end", _this.resultObject);
              }
            };
          }(this);
          this.saxParser.ended = false;
          this.EXPLICIT_CHARKEY = this.options.explicitCharkey;
          this.resultObject = null;
          stack = [];
          attrkey = this.options.attrkey;
          charkey = this.options.charkey;
          this.saxParser.onopentag = function(_this) {
            return function(node) {
              var key, newValue, obj, processedKey, ref;
              obj = Object.create(null);
              obj[charkey] = "";
              if (!_this.options.ignoreAttrs) {
                ref = node.attributes;
                for (key in ref) {
                  if (!hasProp.call(ref, key))
                    continue;
                  if (!(attrkey in obj) && !_this.options.mergeAttrs) {
                    obj[attrkey] = Object.create(null);
                  }
                  newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];
                  processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;
                  if (_this.options.mergeAttrs) {
                    _this.assignOrPush(obj, processedKey, newValue);
                  } else {
                    obj[attrkey][processedKey] = newValue;
                  }
                }
              }
              obj["#name"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;
              if (_this.options.xmlns) {
                obj[_this.options.xmlnskey] = {
                  uri: node.uri,
                  local: node.local
                };
              }
              return stack.push(obj);
            };
          }(this);
          this.saxParser.onclosetag = function(_this) {
            return function() {
              var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;
              obj = stack.pop();
              nodeName = obj["#name"];
              if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {
                delete obj["#name"];
              }
              if (obj.cdata === true) {
                cdata = obj.cdata;
                delete obj.cdata;
              }
              s = stack[stack.length - 1];
              if (obj[charkey].match(/^\s*$/) && !cdata) {
                emptyStr = obj[charkey];
                delete obj[charkey];
              } else {
                if (_this.options.trim) {
                  obj[charkey] = obj[charkey].trim();
                }
                if (_this.options.normalize) {
                  obj[charkey] = obj[charkey].replace(/\s{2,}/g, " ").trim();
                }
                obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];
                if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {
                  obj = obj[charkey];
                }
              }
              if (isEmpty(obj)) {
                if (typeof _this.options.emptyTag === "function") {
                  obj = _this.options.emptyTag();
                } else {
                  obj = _this.options.emptyTag !== "" ? _this.options.emptyTag : emptyStr;
                }
              }
              if (_this.options.validator != null) {
                xpath = "/" + function() {
                  var i, len, results;
                  results = [];
                  for (i = 0, len = stack.length; i < len; i++) {
                    node = stack[i];
                    results.push(node["#name"]);
                  }
                  return results;
                }().concat(nodeName).join("/");
                (function() {
                  var err;
                  try {
                    return obj = _this.options.validator(xpath, s && s[nodeName], obj);
                  } catch (error1) {
                    err = error1;
                    return _this.emit("error", err);
                  }
                })();
              }
              if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === "object") {
                if (!_this.options.preserveChildrenOrder) {
                  node = Object.create(null);
                  if (_this.options.attrkey in obj) {
                    node[_this.options.attrkey] = obj[_this.options.attrkey];
                    delete obj[_this.options.attrkey];
                  }
                  if (!_this.options.charsAsChildren && _this.options.charkey in obj) {
                    node[_this.options.charkey] = obj[_this.options.charkey];
                    delete obj[_this.options.charkey];
                  }
                  if (Object.getOwnPropertyNames(obj).length > 0) {
                    node[_this.options.childkey] = obj;
                  }
                  obj = node;
                } else if (s) {
                  s[_this.options.childkey] = s[_this.options.childkey] || [];
                  objClone = Object.create(null);
                  for (key in obj) {
                    if (!hasProp.call(obj, key))
                      continue;
                    objClone[key] = obj[key];
                  }
                  s[_this.options.childkey].push(objClone);
                  delete obj["#name"];
                  if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {
                    obj = obj[charkey];
                  }
                }
              }
              if (stack.length > 0) {
                return _this.assignOrPush(s, nodeName, obj);
              } else {
                if (_this.options.explicitRoot) {
                  old = obj;
                  obj = Object.create(null);
                  obj[nodeName] = old;
                }
                _this.resultObject = obj;
                _this.saxParser.ended = true;
                return _this.emit("end", _this.resultObject);
              }
            };
          }(this);
          ontext = function(_this) {
            return function(text) {
              var charChild, s;
              s = stack[stack.length - 1];
              if (s) {
                s[charkey] += text;
                if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\n/g, "").trim() !== "")) {
                  s[_this.options.childkey] = s[_this.options.childkey] || [];
                  charChild = {
                    "#name": "__text__"
                  };
                  charChild[charkey] = text;
                  if (_this.options.normalize) {
                    charChild[charkey] = charChild[charkey].replace(/\s{2,}/g, " ").trim();
                  }
                  s[_this.options.childkey].push(charChild);
                }
                return s;
              }
            };
          }(this);
          this.saxParser.ontext = ontext;
          return this.saxParser.oncdata = function(_this) {
            return function(text) {
              var s;
              s = ontext(text);
              if (s) {
                return s.cdata = true;
              }
            };
          }(this);
        };
        Parser.prototype.parseString = function(str, cb) {
          var err;
          if (cb != null && typeof cb === "function") {
            this.on("end", function(result) {
              this.reset();
              return cb(null, result);
            });
            this.on("error", function(err2) {
              this.reset();
              return cb(err2);
            });
          }
          try {
            str = str.toString();
            if (str.trim() === "") {
              this.emit("end", null);
              return true;
            }
            str = bom.stripBOM(str);
            if (this.options.async) {
              this.remaining = str;
              setImmediate(this.processAsync);
              return this.saxParser;
            }
            return this.saxParser.write(str).close();
          } catch (error1) {
            err = error1;
            if (!(this.saxParser.errThrown || this.saxParser.ended)) {
              this.emit("error", err);
              return this.saxParser.errThrown = true;
            } else if (this.saxParser.ended) {
              throw err;
            }
          }
        };
        Parser.prototype.parseStringPromise = function(str) {
          return new Promise(function(_this) {
            return function(resolve, reject) {
              return _this.parseString(str, function(err, value) {
                if (err) {
                  return reject(err);
                } else {
                  return resolve(value);
                }
              });
            };
          }(this));
        };
        return Parser;
      }(events);
      exports.parseString = function(str, a, b) {
        var cb, options, parser;
        if (b != null) {
          if (typeof b === "function") {
            cb = b;
          }
          if (typeof a === "object") {
            options = a;
          }
        } else {
          if (typeof a === "function") {
            cb = a;
          }
          options = {};
        }
        parser = new exports.Parser(options);
        return parser.parseString(str, cb);
      };
      exports.parseStringPromise = function(str, a) {
        var options, parser;
        if (typeof a === "object") {
          options = a;
        }
        parser = new exports.Parser(options);
        return parser.parseStringPromise(str);
      };
    }).call(exports);
  }
});

// node_modules/xml2js/lib/xml2js.js
var require_xml2js = __commonJS({
  "node_modules/xml2js/lib/xml2js.js"(exports) {
    (function() {
      "use strict";
      var builder, defaults, parser, processors, extend = function(child, parent) {
        for (var key in parent) {
          if (hasProp.call(parent, key))
            child[key] = parent[key];
        }
        function ctor() {
          this.constructor = child;
        }
        ctor.prototype = parent.prototype;
        child.prototype = new ctor();
        child.__super__ = parent.prototype;
        return child;
      }, hasProp = {}.hasOwnProperty;
      defaults = require_defaults();
      builder = require_builder();
      parser = require_parser();
      processors = require_processors();
      exports.defaults = defaults.defaults;
      exports.processors = processors;
      exports.ValidationError = function(superClass) {
        extend(ValidationError, superClass);
        function ValidationError(message) {
          this.message = message;
        }
        return ValidationError;
      }(Error);
      exports.Builder = builder.Builder;
      exports.Parser = parser.Parser;
      exports.parseString = parser.parseString;
      exports.parseStringPromise = parser.parseStringPromise;
    }).call(exports);
  }
});

// src/main.ts
__export(exports, {
  default: () => BibleLinkPlugin
});
var import_obsidian4 = __toModule(require("obsidian"));

// src/database.ts
var import_obsidian = __toModule(require("obsidian"));
var fs = __toModule(require("fs"));
var path = __toModule(require("path"));
var _BibleDatabase = class {
  constructor(plugin, dataPath = "data") {
    this.isInitialized = false;
    this.isUnloading = false;
    this.plugin = plugin;
    this.dataPath = dataPath;
    console.log(`[BibleLink] Using plugin data path: ${this.dataPath}`);
    this.data = {
      translations: [],
      verses: [],
      nextTranslationId: 1,
      nextVerseId: 1
    };
  }
  async initialize() {
    if (this.isInitialized)
      return;
    try {
      await this.loadData();
      this.isInitialized = true;
    } catch (error) {
      console.error("Failed to initialize Bible database:", error);
      this.isInitialized = true;
      throw error;
    }
  }
  async loadData() {
    try {
      const filePath = path.join(this.plugin.app.vault.adapter.basePath, ".obsidian", "plugins", "obsidian-biblelink", this.dataPath, "bible_data.json");
      console.log(`[BibleLink] [loadData] Checking for data file at: ${filePath}`);
      if (fs.existsSync(filePath)) {
        const content = fs.readFileSync(filePath, "utf8");
        console.log(`[BibleLink] [loadData] File found. First 200 chars:`, content.slice(0, 200));
        this.data = JSON.parse(content);
        console.log(`[BibleLink] [loadData] Loaded: ${this.data.translations.length} translations, ${this.data.verses.length} verses`);
      } else {
        console.log("[BibleLink] [loadData] No existing Bible data file found, starting fresh");
      }
    } catch (error) {
      console.log("[BibleLink] [loadData] Starting with fresh Bible database due to error:", error);
    }
  }
  async saveData() {
    try {
      await this.ensureDirectoryExists();
      const filePath = path.join(this.plugin.app.vault.adapter.basePath, ".obsidian", "plugins", "obsidian-biblelink", this.dataPath, "bible_data.json");
      const content = JSON.stringify(this.data, null, 2);
      console.log(`[BibleLink] [saveData] Saving to: ${filePath}`);
      console.log(`[BibleLink] [saveData] Data (first 200 chars):`, content.slice(0, 200));
      fs.writeFileSync(filePath, content, "utf8");
      console.log(`[BibleLink] [saveData] Bible data saved successfully: ${this.data.translations.length} translations, ${this.data.verses.length} verses`);
    } catch (error) {
      console.error("[BibleLink] [saveData] Failed to save Bible data:", error);
      if (!this.isUnloading) {
        new import_obsidian.Notice("Failed to save Bible data");
      }
      if (!this.isUnloading) {
        throw error;
      }
    }
  }
  async ensureDirectoryExists() {
    try {
      const dirPath = path.join(this.plugin.app.vault.adapter.basePath, ".obsidian", "plugins", "obsidian-biblelink", this.dataPath);
      if (!fs.existsSync(dirPath)) {
        fs.mkdirSync(dirPath, { recursive: true });
        console.log(`[BibleLink] Created directory: ${dirPath}`);
      }
    } catch (error) {
      console.log("[BibleLink] Directory creation error (may already exist):", error);
    }
  }
  getTranslations() {
    return [...this.data.translations].sort((a, b) => a.abbreviation.localeCompare(b.abbreviation));
  }
  getBooks() {
    const books = new Set();
    for (const verse of this.data.verses) {
      books.add(verse.book);
    }
    const bookArray = Array.from(books);
    return bookArray.sort((a, b) => {
      const aIndex = _BibleDatabase.CHRONOLOGICAL_BOOK_ORDER.indexOf(a);
      const bIndex = _BibleDatabase.CHRONOLOGICAL_BOOK_ORDER.indexOf(b);
      if (aIndex !== -1 && bIndex !== -1) {
        return aIndex - bIndex;
      }
      if (aIndex !== -1)
        return -1;
      if (bIndex !== -1)
        return 1;
      return a.localeCompare(b);
    });
  }
  getChaptersForBook(book, translationAbbr) {
    const translation = this.data.translations.find((t) => t.abbreviation === translationAbbr);
    if (!translation)
      return [];
    const chapters = new Set();
    for (const verse of this.data.verses) {
      if (verse.translation_id === translation.id && verse.book === book) {
        chapters.add(verse.chapter);
      }
    }
    return Array.from(chapters).sort((a, b) => a - b);
  }
  getVersesForChapter(book, chapter, translationAbbr) {
    const translation = this.data.translations.find((t) => t.abbreviation === translationAbbr);
    if (!translation)
      return [];
    const verses = new Set();
    for (const verse of this.data.verses) {
      if (verse.translation_id === translation.id && verse.book === book && verse.chapter === chapter) {
        verses.add(verse.verse);
      }
    }
    return Array.from(verses).sort((a, b) => a - b);
  }
  getVerse(book, chapter, verse, translationAbbr) {
    const translation = this.data.translations.find((t) => t.abbreviation === translationAbbr);
    if (!translation)
      return null;
    return this.data.verses.find((v) => v.translation_id === translation.id && v.book === book && v.chapter === chapter && v.verse === verse) || null;
  }
  async addTranslation(name, abbreviation, language = "English", category = "Standard", processingRules = []) {
    const existing = this.data.translations.find((t) => t.abbreviation === abbreviation);
    if (existing) {
      throw new Error(`Translation with abbreviation '${abbreviation}' already exists`);
    }
    const id = this.data.nextTranslationId++;
    this.data.translations.push({
      id,
      name,
      abbreviation,
      language,
      category,
      processingRules
    });
    console.log(`Added translation: ${name} (${abbreviation}) with ID ${id}`);
    await this.saveData();
    return id;
  }
  async updateTranslation(id, name, abbreviation, language, category, processingRules) {
    const translation = this.data.translations.find((t) => t.id === id);
    if (!translation) {
      throw new Error("Translation not found");
    }
    if (translation.abbreviation !== abbreviation && this.data.translations.some((t) => t.abbreviation === abbreviation)) {
      throw new Error("Translation abbreviation already exists");
    }
    translation.name = name;
    translation.abbreviation = abbreviation;
    translation.language = language;
    translation.category = category;
    translation.processingRules = processingRules;
    await this.saveData();
  }
  async addVerse(translationId, book, chapter, verse, text, saveImmediately = true) {
    this.data.verses.push({
      id: this.data.nextVerseId++,
      translation_id: translationId,
      book,
      chapter,
      verse,
      text
    });
    if (saveImmediately) {
      await this.saveData();
    }
  }
  async addVersesBatch(verses) {
    if (verses.length === 0) {
      console.log("[BibleLink] No verses to add");
      return;
    }
    const startId = this.data.nextVerseId;
    for (const verse of verses) {
      this.data.verses.push({
        id: this.data.nextVerseId++,
        translation_id: verse.translationId,
        book: verse.book,
        chapter: verse.chapter,
        verse: verse.verse,
        text: verse.text
      });
    }
    console.log(`[BibleLink] Added ${verses.length} verses (IDs ${startId}-${this.data.nextVerseId - 1})`);
    console.log(`[BibleLink] Total verses in memory: ${this.data.verses.length}`);
    await this.saveData();
    console.log(`[BibleLink] After save - Total verses in memory: ${this.data.verses.length}`);
  }
  async removeTranslation(abbreviation) {
    const translationIndex = this.data.translations.findIndex((t) => t.abbreviation === abbreviation);
    if (translationIndex === -1) {
      return false;
    }
    const translation = this.data.translations[translationIndex];
    this.data.verses = this.data.verses.filter((v) => v.translation_id !== translation.id);
    this.data.translations.splice(translationIndex, 1);
    await this.saveData();
    return true;
  }
  async importFromSQLite(sqliteData) {
    if (sqliteData.translations && sqliteData.verses) {
      for (const translation of sqliteData.translations) {
        await this.addTranslation(translation.name, translation.abbreviation);
      }
      const versesToAdd = [];
      for (const verse of sqliteData.verses) {
        const translation = this.data.translations.find((t) => t.id === verse.translation_id);
        if (translation) {
          versesToAdd.push({
            translationId: translation.id,
            book: verse.book,
            chapter: verse.chapter,
            verse: verse.verse,
            text: verse.text
          });
        }
      }
      if (versesToAdd.length > 0) {
        await this.addVersesBatch(versesToAdd);
      }
    }
  }
  async importFromXML(xmlData) {
    console.log("XML import not yet implemented");
  }
  getDatabaseStats() {
    return {
      translations: this.data.translations.length,
      verses: this.data.verses.length
    };
  }
  verifyTranslationExists(abbreviation) {
    return this.data.translations.some((t) => t.abbreviation === abbreviation);
  }
  getTranslationStats(abbreviation) {
    const translation = this.data.translations.find((t) => t.abbreviation === abbreviation);
    if (!translation)
      return null;
    const translationVerses = this.data.verses.filter((v) => v.translation_id === translation.id);
    const books = [...new Set(translationVerses.map((v) => v.book))].sort();
    return {
      name: translation.name,
      verseCount: translationVerses.length,
      books
    };
  }
  applyProcessingRules(text, translationAbbr) {
    const translation = this.data.translations.find((t) => t.abbreviation === translationAbbr);
    if (!translation || !translation.processingRules) {
      return text;
    }
    let processedText = text;
    for (const rule of translation.processingRules) {
      try {
        const regex = new RegExp(rule.regex, "g");
        if (rule.escape) {
          processedText = processedText.replace(regex, (...args) => {
            let result = rule.formatting;
            for (let i = 1; i < args.length - 2; i++) {
              const group = args[i];
              const escaped = this.escapeHtml(group);
              result = result.replace(new RegExp(`\\$${i}`, "g"), escaped);
            }
            result = result.replace(/\$&/g, this.escapeHtml(args[0]));
            return result;
          });
        } else {
          processedText = processedText.replace(regex, rule.formatting);
        }
      } catch (error) {
        console.warn(`Invalid regex in processing rule for ${translationAbbr}: ${rule.regex}`, error);
      }
    }
    return processedText;
  }
  escapeHtml(str) {
    return str.replace(/[&<>\[\]]/g, (c) => {
      switch (c) {
        case "&":
          return "&amp;";
        case "<":
          return "&lt;";
        case ">":
          return "&gt;";
        case "[":
          return "&#91;";
        case "]":
          return "&#93;";
        default:
          return c;
      }
    });
  }
  getDataFilePath() {
    return path.join(this.plugin.app.vault.adapter.basePath, ".obsidian", "plugins", "obsidian-biblelink", this.dataPath, "bible_data.json");
  }
  dataFileExists() {
    return fs.existsSync(this.getDataFilePath());
  }
  async close() {
    this.isUnloading = true;
    try {
      await this.saveData();
    } catch (error) {
      console.error("Error during database close:", error);
    }
  }
};
var BibleDatabase = _BibleDatabase;
BibleDatabase.CHRONOLOGICAL_BOOK_ORDER = [
  "Genesis",
  "Exodus",
  "Leviticus",
  "Numbers",
  "Deuteronomy",
  "Joshua",
  "Judges",
  "Ruth",
  "1 Samuel",
  "2 Samuel",
  "1 Kings",
  "2 Kings",
  "1 Chronicles",
  "2 Chronicles",
  "Ezra",
  "Nehemiah",
  "Esther",
  "Job",
  "Psalms",
  "Proverbs",
  "Ecclesiastes",
  "Song of Solomon",
  "Isaiah",
  "Jeremiah",
  "Lamentations",
  "Ezekiel",
  "Daniel",
  "Hosea",
  "Joel",
  "Amos",
  "Obadiah",
  "Jonah",
  "Micah",
  "Nahum",
  "Habakkuk",
  "Zephaniah",
  "Haggai",
  "Zechariah",
  "Malachi",
  "Matthew",
  "Mark",
  "Luke",
  "John",
  "Acts",
  "Romans",
  "1 Corinthians",
  "2 Corinthians",
  "Galatians",
  "Ephesians",
  "Philippians",
  "Colossians",
  "1 Thessalonians",
  "2 Thessalonians",
  "1 Timothy",
  "2 Timothy",
  "Titus",
  "Philemon",
  "Hebrews",
  "James",
  "1 Peter",
  "2 Peter",
  "1 John",
  "2 John",
  "3 John",
  "Jude",
  "Revelation"
];

// src/selector.ts
var import_obsidian2 = __toModule(require("obsidian"));
var BibleSelectorModal = class extends import_obsidian2.Modal {
  constructor(app, plugin, onSubmit) {
    super(app);
    this.plugin = plugin;
    this.onSubmit = onSubmit;
    this.selectedBook = null;
    this.selectedStartChapter = 1;
    this.selectedEndChapter = null;
    this.selectedStartVerse = 1;
    this.selectedEndVerse = null;
    this.selectedTranslation = null;
    this.selectedOutputType = "codeblock";
    this.selectedOptions = [];
    this.selectedBooks = new Set();
    this.selectedChapters = new Set();
    this.selectedVerses = new Set();
    this.db = plugin.db;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    this.selectedOutputType = this.plugin.settings.modalOutputType;
    this.selectedOptions = [...this.plugin.settings.modalOptions];
    contentEl.createEl("h2", { text: "Insert Bible Reference" });
    const referenceSetting = new import_obsidian2.Setting(contentEl).setName("Reference").setDesc("Enter a reference (e.g., John 1:13-25) or use the selectors below.").addText((text) => {
      text.setPlaceholder("e.g., John 1:13-25").onChange((value) => {
        this.handleReferenceInput(value);
      });
      this.referenceInput = text;
    });
    this.referenceWarning = contentEl.createEl("div", { cls: "biblelink-ref-warning" });
    this.referenceWarning.style.color = "var(--text-warning)";
    this.referenceWarning.style.display = "none";
    new import_obsidian2.Setting(contentEl).setName("Translation").setDesc("Choose a Bible translation").addDropdown((dropdown) => {
      this.translationDropdown = dropdown;
      const translations = this.db.getTranslations();
      const translationOptions = {};
      translations.forEach((trans) => {
        translationOptions[trans.abbreviation] = `${trans.name} (${trans.abbreviation})`;
      });
      dropdown.addOptions(translationOptions).setValue(this.plugin.settings.defaultTranslation).onChange((value) => {
        this.selectedTranslation = value;
        this.renderBookGrid(bookGridContainer);
        this.renderChapterGrid(chapterGridContainer);
        this.renderVerseGrid(verseGridContainer);
      });
    });
    const bookGridContainer = contentEl.createDiv({ cls: "biblelink-book-grid-container" });
    this.renderBookGrid(bookGridContainer);
    const chapterGridContainer = contentEl.createDiv({ cls: "biblelink-chapter-grid-container" });
    this.renderChapterGrid(chapterGridContainer);
    const verseGridContainer = contentEl.createDiv({ cls: "biblelink-verse-grid-container" });
    this.renderVerseGrid(verseGridContainer);
    new import_obsidian2.Setting(contentEl).setName("Output Type").setDesc("Choose how to insert the reference").addDropdown((dropdown) => dropdown.addOption("text", "Full Verse Text").addOption("link", "Literal Word Link").addOption("codeblock", "Code Block").setValue(this.selectedOutputType).onChange((value) => {
      this.selectedOutputType = value;
      this.plugin.settings.modalOutputType = this.selectedOutputType;
      this.plugin.saveSettings();
      this.updateOptionsSection();
    }));
    const optionsContainer = contentEl.createDiv();
    this.updateOptionsSection(optionsContainer);
    const submitButton = new import_obsidian2.Setting(contentEl).addButton((button) => button.setButtonText("Insert").setCta().onClick(() => {
      this.insertReference();
    }));
    if (this.referenceInput && this.referenceInput.inputEl) {
      this.referenceInput.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          this.insertReference();
        }
      });
    }
    this.injectBibleGridStyles();
  }
  injectBibleGridStyles() {
    if (document.getElementById("biblelink-modal-style"))
      return;
    const style = document.createElement("style");
    style.id = "biblelink-modal-style";
    style.textContent = `
        .biblelink-book-grid-container,
        .biblelink-chapter-grid-container,
        .biblelink-verse-grid-container {
            margin-bottom: 1.2em;
        }
        .biblelink-book-grid,
        .biblelink-chapter-grid,
        .biblelink-verse-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 0.5em;
            max-height: 200px;
            overflow-y: auto;
            padding: 0.5em 0;
            background: var(--background-secondary-alt, #23272e);
            border-radius: 8px;
        }
        .biblelink-book-btn,
        .biblelink-chapter-btn,
        .biblelink-verse-btn {
            background: var(--background-primary, #181a20);
            color: var(--text-normal, #e0e0e0);
            border: none;
            border-radius: 6px;
            padding: 0.6em 0.8em;
            font-size: 1em;
            font-family: inherit;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            transition: background 0.15s, color 0.15s, box-shadow 0.15s, border 0.15s;
            outline: none;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            max-width: 100%;
        }
        .biblelink-book-btn:hover,
        .biblelink-chapter-btn:hover,
        .biblelink-verse-btn:hover {
            background: var(--interactive-accent, #3a7afe);
            color: #fff;
        }
        .biblelink-book-btn.selected,
        .biblelink-chapter-btn.selected,
        .biblelink-verse-btn.selected {
            background: var(--color-accent, #3a7afe);
            color: #fff;
            font-weight: 600;
            border: 2px solid var(--color-accent-2, #1e4fa3);
            box-shadow: 0 2px 8px rgba(58,122,254,0.15);
        }
        .biblelink-selectall-btn {
            background: var(--background-modifier-hover, #2a2d34);
            color: var(--text-muted, #b0b0b0);
            border: none;
            border-radius: 6px;
            padding: 0.4em 0.8em;
            margin-bottom: 0.5em;
            font-size: 0.95em;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
        }
        .biblelink-selectall-btn:hover {
            background: var(--interactive-accent, #3a7afe);
            color: #fff;
        }
        .biblelink-book-grid::-webkit-scrollbar,
        .biblelink-chapter-grid::-webkit-scrollbar,
        .biblelink-verse-grid::-webkit-scrollbar {
            width: 8px;
            background: transparent;
        }
        .biblelink-book-grid::-webkit-scrollbar-thumb,
        .biblelink-chapter-grid::-webkit-scrollbar-thumb,
        .biblelink-verse-grid::-webkit-scrollbar-thumb {
            background: var(--background-modifier-border, #444);
            border-radius: 4px;
        }
        @media (max-width: 600px) {
            .biblelink-book-grid,
            .biblelink-chapter-grid,
            .biblelink-verse-grid {
                grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            }
            .biblelink-book-btn,
            .biblelink-chapter-btn,
            .biblelink-verse-btn {
                font-size: 0.95em;
                padding: 0.5em 0.5em;
            }
        }
        `;
    document.head.appendChild(style);
  }
  renderBookGrid(container) {
    container.empty();
    const books = this.db.getBooks();
    if (!books || books.length === 0)
      return;
    const grid = container.createDiv({ cls: "biblelink-book-grid" });
    books.forEach((book) => {
      const btn = grid.createEl("button", {
        text: book,
        cls: "biblelink-book-btn"
      });
      btn.setAttr("title", book);
      if (this.selectedBook === book) {
        btn.addClass("selected");
      }
      btn.onclick = (e) => {
        this.selectedBook = book;
        this.selectedStartChapter = 1;
        this.selectedEndChapter = null;
        this.selectedStartVerse = 1;
        this.selectedEndVerse = null;
        this.renderBookGrid(container);
        this.renderChapterGrid(document.querySelector(".biblelink-chapter-grid-container"));
        this.renderVerseGrid(document.querySelector(".biblelink-verse-grid-container"));
        this.updateReferenceInputFromSelection();
      };
    });
  }
  renderChapterGrid(container) {
    container.empty();
    if (!this.selectedBook)
      return;
    const chapters = this.db.getChaptersForBook(this.selectedBook, this.selectedTranslation || this.plugin.settings.defaultTranslation);
    if (!chapters || chapters.length === 0)
      return;
    const grid = container.createDiv({ cls: "biblelink-chapter-grid" });
    const selectAllBtn = container.createEl("button", { text: "Select All Chapters", cls: "biblelink-selectall-btn" });
    selectAllBtn.onclick = () => {
      this.selectedChapters = new Set(chapters);
      this.renderChapterGrid(container);
      this.renderVerseGrid(document.querySelector(".biblelink-verse-grid-container"));
      this.updateReferenceInputFromSelection();
    };
    chapters.forEach((chapter) => {
      const btn = grid.createEl("button", {
        text: chapter.toString(),
        cls: "biblelink-chapter-btn"
      });
      if (this.selectedChapters.has(chapter) || this.selectedStartChapter === chapter || this.selectedEndChapter && chapter >= this.selectedStartChapter && chapter <= this.selectedEndChapter) {
        btn.addClass("selected");
      }
      btn.onclick = (e) => {
        if (e.ctrlKey || e.metaKey) {
          if (this.selectedChapters.has(chapter)) {
            this.selectedChapters.delete(chapter);
          } else {
            this.selectedChapters.add(chapter);
          }
        } else if (e.shiftKey && this.selectedStartChapter) {
          const start = Math.min(this.selectedStartChapter, chapter);
          const end = Math.max(this.selectedStartChapter, chapter);
          for (let c = start; c <= end; c++) {
            this.selectedChapters.add(c);
          }
        } else {
          this.selectedChapters = new Set([chapter]);
        }
        this.selectedStartChapter = chapter;
        this.selectedEndChapter = chapter;
        this.selectedStartVerse = 1;
        this.selectedEndVerse = null;
        this.renderChapterGrid(container);
        this.renderVerseGrid(document.querySelector(".biblelink-verse-grid-container"));
        this.updateReferenceInputFromSelection();
      };
    });
  }
  renderVerseGrid(container) {
    container.empty();
    if (!this.selectedBook || !this.selectedStartChapter)
      return;
    const verses = this.db.getVersesForChapter(this.selectedBook, this.selectedStartChapter, this.selectedTranslation || this.plugin.settings.defaultTranslation);
    if (!verses || verses.length === 0)
      return;
    const grid = container.createDiv({ cls: "biblelink-verse-grid" });
    const selectAllBtn = container.createEl("button", { text: "Select All Verses", cls: "biblelink-selectall-btn" });
    selectAllBtn.onclick = () => {
      this.selectedVerses = new Set(verses);
      this.renderVerseGrid(container);
      this.updateReferenceInputFromSelection();
    };
    verses.forEach((verse) => {
      const btn = grid.createEl("button", {
        text: verse.toString(),
        cls: "biblelink-verse-btn"
      });
      if (this.selectedVerses.has(verse) || this.selectedStartVerse === verse || this.selectedEndVerse && verse >= this.selectedStartVerse && verse <= this.selectedEndVerse) {
        btn.addClass("selected");
      }
      btn.onclick = (e) => {
        if (e.ctrlKey || e.metaKey) {
          if (this.selectedVerses.has(verse)) {
            this.selectedVerses.delete(verse);
          } else {
            this.selectedVerses.add(verse);
          }
        } else if (e.shiftKey && this.selectedStartVerse) {
          const start = Math.min(this.selectedStartVerse, verse);
          const end = Math.max(this.selectedStartVerse, verse);
          for (let v = start; v <= end; v++) {
            this.selectedVerses.add(v);
          }
        } else {
          this.selectedVerses = new Set([verse]);
        }
        this.selectedStartVerse = verse;
        this.selectedEndVerse = verse;
        this.renderVerseGrid(container);
        this.updateReferenceInputFromSelection();
      };
    });
  }
  updateReferenceInputFromSelection() {
    if (this.referenceInput) {
      let ref = "";
      if (this.selectedBook) {
        ref += this.selectedBook;
        if (this.selectedChapters.size > 0) {
          const chapters = Array.from(this.selectedChapters).sort((a, b) => a - b);
          ref += " " + chapters.join(",");
        } else if (this.selectedStartChapter) {
          ref += " " + this.selectedStartChapter;
        }
        if (this.selectedVerses.size > 0) {
          const verses = Array.from(this.selectedVerses).sort((a, b) => a - b);
          ref += ":" + verses.join(",");
        } else if (this.selectedStartVerse) {
          ref += ":" + this.selectedStartVerse;
        }
      }
      this.referenceInput.setValue(ref);
    }
  }
  updateChapterDropdown(container) {
    if (!this.selectedBook)
      return;
    const chapters = this.db.getChaptersForBook(this.selectedBook, this.selectedTranslation || this.plugin.settings.defaultTranslation);
    if (!chapters || chapters.length === 0)
      return;
    const target = container || document.querySelector(".chapter-container");
    if (!target)
      return;
    target.empty();
    target.addClass("chapter-container");
    new import_obsidian2.Setting(target).setName("Start Chapter").addDropdown((dropdown) => {
      const chapterOptions = {};
      chapters.forEach((chapter) => {
        chapterOptions[chapter.toString()] = chapter.toString();
      });
      dropdown.addOptions(chapterOptions).setValue(this.selectedStartChapter.toString()).onChange((value) => {
        this.selectedStartChapter = parseInt(value);
        if (!this.selectedEndChapter || this.selectedEndChapter < this.selectedStartChapter) {
          this.selectedEndChapter = this.selectedStartChapter;
        }
        this.updateEndChapterDropdown(target);
        this.updateVerseDropdown();
      });
    });
    this.updateEndChapterDropdown(target);
    if (this.referenceInput) {
      let ref = this.selectedBook ? this.selectedBook + " " + this.selectedStartChapter : "";
      if (this.selectedStartVerse && this.selectedStartVerse !== 0) {
        ref += ":" + this.selectedStartVerse;
        if (this.selectedEndVerse && this.selectedEndVerse !== this.selectedStartVerse) {
          ref += "-" + this.selectedEndVerse;
        }
      }
      this.referenceInput.setValue(ref);
    }
  }
  updateEndChapterDropdown(container) {
    if (!this.selectedBook)
      return;
    const chapters = this.db.getChaptersForBook(this.selectedBook, this.selectedTranslation || this.plugin.settings.defaultTranslation);
    if (!chapters || chapters.length === 0)
      return;
    new import_obsidian2.Setting(container).setName("End Chapter").addDropdown((dropdown) => {
      const chapterOptions = {};
      chapters.filter((c) => c >= this.selectedStartChapter).forEach((chapter) => {
        chapterOptions[chapter.toString()] = chapter.toString();
      });
      dropdown.addOptions(chapterOptions).setValue((this.selectedEndChapter || this.selectedStartChapter).toString()).onChange((value) => {
        this.selectedEndChapter = parseInt(value);
        this.updateVerseDropdown();
      });
    });
  }
  updateVerseDropdown(container) {
    if (!this.selectedBook || !this.selectedStartChapter)
      return;
    const target = container || document.querySelector(".verse-container");
    if (!target)
      return;
    target.empty();
    target.addClass("verse-container");
    const startVerses = this.db.getVersesForChapter(this.selectedBook, this.selectedStartChapter, this.selectedTranslation || this.plugin.settings.defaultTranslation);
    if (startVerses && startVerses.length > 0) {
      new import_obsidian2.Setting(target).setName("Start Verse").addDropdown((dropdown) => {
        const verseOptions = {
          "0": "Entire Chapter"
        };
        startVerses.forEach((verse) => {
          verseOptions[verse.toString()] = verse.toString();
        });
        dropdown.addOptions(verseOptions).setValue(this.selectedStartVerse.toString()).onChange((value) => {
          const verseNum = parseInt(value);
          this.selectedStartVerse = verseNum;
          if (verseNum === 0) {
            this.selectedEndVerse = null;
            this.selectedEndChapter = null;
          }
          this.updateEndVerseDropdown(target);
        });
      });
    }
    if (this.selectedStartVerse !== 0) {
      this.updateEndVerseDropdown(target);
    }
    if (this.referenceInput) {
      let ref = this.selectedBook ? this.selectedBook + " " + this.selectedStartChapter : "";
      if (this.selectedStartVerse && this.selectedStartVerse !== 0) {
        ref += ":" + this.selectedStartVerse;
        if (this.selectedEndVerse && this.selectedEndVerse !== this.selectedStartVerse) {
          ref += "-" + this.selectedEndVerse;
        }
      }
      this.referenceInput.setValue(ref);
    }
  }
  updateEndVerseDropdown(container) {
    if (this.selectedStartVerse === 0)
      return;
    const endVerses = this.db.getVersesForChapter(this.selectedBook, this.selectedEndChapter || this.selectedStartChapter, this.selectedTranslation || this.plugin.settings.defaultTranslation);
    if (!endVerses || endVerses.length === 0)
      return;
    new import_obsidian2.Setting(container).setName("End Verse").addDropdown((dropdown) => {
      const verseOptions = {};
      const minVerse = this.selectedEndChapter === this.selectedStartChapter ? this.selectedStartVerse : 1;
      endVerses.filter((v) => v >= minVerse).forEach((verse) => {
        verseOptions[verse.toString()] = verse.toString();
      });
      dropdown.addOptions(verseOptions).setValue((this.selectedEndVerse || this.selectedStartVerse).toString()).onChange((value) => {
        this.selectedEndVerse = parseInt(value);
      });
    });
  }
  updateOptionsSection(container) {
    if (this.selectedOutputType !== "codeblock")
      return;
    const target = container || document.querySelector(".options-container");
    if (!target)
      return;
    target.empty();
    target.addClass("options-container");
    target.createEl("h3", { text: "Code Block Options" });
    new import_obsidian2.Setting(target).setName("Show Verse Numbers").setDesc("Include verse numbers in the output.").addToggle((toggle) => toggle.setValue(this.selectedOptions.includes("verse")).onChange((value) => {
      this.updateOption("verse", value);
      this.plugin.settings.modalOptions = [...this.selectedOptions];
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(target).setName("Show Chapter Numbers").setDesc("Include chapter numbers in the output.").addToggle((toggle) => toggle.setValue(this.selectedOptions.includes("chapter")).onChange((value) => {
      this.updateOption("chapter", value);
      this.plugin.settings.modalOptions = [...this.selectedOptions];
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(target).setName("Red Letter Text").setDesc("Highlight words of Jesus in red.").addToggle((toggle) => toggle.setValue(this.selectedOptions.includes("red-text")).onChange((value) => {
      this.updateOption("red-text", value);
      this.plugin.settings.modalOptions = [...this.selectedOptions];
      this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(target).setName("Add External Link").setDesc("Add a link to view the verse on Bible Gateway.").addToggle((toggle) => toggle.setValue(this.selectedOptions.includes("link")).onChange((value) => {
      this.updateOption("link", value);
      this.plugin.settings.modalOptions = [...this.selectedOptions];
      this.plugin.saveSettings();
    }));
  }
  updateOption(option, enabled) {
    if (enabled && !this.selectedOptions.includes(option)) {
      this.selectedOptions.push(option);
    } else if (!enabled) {
      this.selectedOptions = this.selectedOptions.filter((o) => o !== option);
    }
  }
  insertReference() {
    var _a, _b;
    const refValue = (_b = (_a = this.referenceInput) == null ? void 0 : _a.getValue()) == null ? void 0 : _b.trim();
    if (!refValue) {
      new import_obsidian2.Notice("Please enter a reference");
      return;
    }
    const translation = this.selectedTranslation || this.plugin.settings.defaultTranslation;
    if (!translation) {
      new import_obsidian2.Notice("Please select a translation");
      return;
    }
    this.onSubmit(refValue, translation, this.selectedOutputType, this.selectedOptions);
    this.close();
  }
  handleReferenceInput(value) {
    if (!value || value.trim() === "") {
      this.referenceWarning.style.display = "none";
      this.selectedChapters.clear();
      this.selectedVerses.clear();
      return;
    }
    const match = value.match(/^([1-3]? ?[A-Za-z ]+)\s+(\d+)(?::(\d+)(?:-(\d+))?)?$/);
    if (!match) {
      this.referenceWarning.style.display = "";
      this.referenceWarning.textContent = "Unrecognized reference format.";
      return;
    }
    this.referenceWarning.style.display = "none";
    const [, book, chapter] = match;
    const bookName = book.trim();
    const chapterNum = parseInt(chapter);
    const books = this.db.getBooks();
    const foundBook = books.find((b) => b.toLowerCase() === bookName.toLowerCase());
    if (!foundBook) {
      this.referenceWarning.style.display = "";
      this.referenceWarning.textContent = "Book not found.";
      return;
    }
    this.selectedBook = foundBook;
    this.selectedStartChapter = chapterNum;
  }
};

// src/settings.ts
var import_obsidian3 = __toModule(require("obsidian"));
var import_xml2js = __toModule(require_xml2js());
var DEFAULT_SETTINGS = {
  defaultTranslation: "ASV",
  outputType: "codeblock",
  showTranslationAbbr: true,
  showBookAbbr: false,
  enableShortcuts: true,
  shortcuts: {
    "jn316": "John 3:16",
    "gen11": "Genesis 1:1",
    "ps231": "Psalm 23:1",
    "rom828": "Romans 8:28",
    "jn11": "John 1:1"
  },
  enableDataviewMetadata: true,
  dataviewMetadataFields: ["book", "chapter", "verse", "translation", "text", "reference", "language", "category"],
  codeBlockBackgroundColor: "#f8f9fa",
  codeBlockHeadingStyle: "detailed",
  codeBlockTextColor: "#2c3e50",
  codeBlockVerseNumberColor: "#7f8c8d",
  codeBlockLanguage: "bible",
  modalOutputType: "codeblock",
  modalOptions: []
};
var AVAILABLE_TRANSLATIONS = {
  "ASV": { name: "American Standard Version (1901)", language: "en", category: "English" },
  "KJV": { name: "King James Version", language: "en", category: "English" },
  "WEB": { name: "World English Bible", language: "en", category: "English" },
  "YLT": { name: "Young's Literal Translation (1898)", language: "en", category: "English" },
  "BBE": { name: "Bible in Basic English (1949/1964)", language: "en", category: "English" },
  "AKJV": { name: "American King James Version", language: "en", category: "English" },
  "Webster": { name: "Webster Bible", language: "en", category: "English" },
  "Tyndale": { name: "William Tyndale Bible (1525/1530)", language: "en", category: "Historical" },
  "Wycliffe": { name: "John Wycliffe Bible (c.1395)", language: "enm", category: "Historical" },
  "BSB": { name: "Berean Standard Bible", language: "en", category: "English" },
  "CPDV": { name: "Catholic Public Domain Version", language: "en", category: "English" },
  "UKJV": { name: "Updated King James Version", language: "en", category: "English" },
  "Twenty": { name: "Twentieth Century New Testament", language: "en", category: "English" },
  "Anderson": { name: "Henry Tompkins Anderson's 1864 New Testament", language: "en", category: "Historical" },
  "ACV": { name: "A Conservative Version", language: "en", category: "English" },
  "SpaRV": { name: "La Santa Biblia Reina-Valera (1909)", language: "es", category: "Spanish" },
  "SpaRV1865": { name: "La Santa Biblia Reina-Valera (1865)", language: "es", category: "Spanish" },
  "SpaRVG": { name: "Reina Valera G\xF3mez", language: "es", category: "Spanish" },
  "SpaPlatense": { name: "Biblia Platense (Straubinger)", language: "es", category: "Spanish" },
  "Vulgate": { name: "Latin Vulgate", language: "la", category: "Latin" },
  "VulgClementine": { name: "Clementine Vulgate", language: "la", category: "Latin" },
  "Byz": { name: "The New Testament in the Original Greek: Byzantine Textform 2013", language: "grc", category: "Greek" },
  "TR": { name: "Textus Receptus (1550/1894)", language: "grc", category: "Greek" },
  "WLC": { name: "Westminster Leningrad Codex", language: "hbo", category: "Hebrew" },
  "StatResGNT": { name: "Statistical Restoration Greek New Testament", language: "grc", category: "Greek" },
  "VulgSistine": { name: "Vulgata Sistina", language: "la", category: "Latin" },
  "VulgHetzenauer": { name: "Vulgata Clementina, Hetzenauer editore", language: "la", category: "Latin" },
  "VulgConte": { name: "Vulgata Clementina, Conte editore", language: "la", category: "Latin" },
  "Swe1917": { name: "Swedish Bible (1917)", language: "sv", category: "Swedish" },
  "SweKarlXII": { name: "Svenska Karl XII:s Bibel (1703)", language: "sv", category: "Historical" },
  "SweKarlXII1873": { name: "Svenska Karl XII:s Bibel (1873)", language: "sv", category: "Historical" },
  "UkrOgienko": { name: "\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430 \u0411\u0456\u0431\u043B\u0456\u044F. \u041F\u0435\u0440\u0435\u043A\u043B\u0430\u0434 \u0406\u0432\u0430\u043D\u0430 \u041E\u0433\u0456\u0454\u043D\u043A\u0430.", language: "uk", category: "Ukrainian" },
  "Viet": { name: "Kinh Th\xE1nh Ti\u1EBFng Vi\u1EC7t (1934)", language: "vi", category: "Vietnamese" },
  "ThaiKJV": { name: "Thai King James Version", language: "th", category: "Thai" },
  "TagAngBiblia": { name: "Philippine Bible Society (1905)", language: "tl", category: "Tagalog" },
  "Tausug": { name: "Tausug Kitab Injil", language: "tsg", category: "Tausug" },
  "TpiKJPB": { name: "King Jems Pisin Baibel", language: "tpi", category: "Tok Pisin" },
  "BurJudson": { name: "1835 Judson Burmese Bible", language: "my", category: "Burmese" },
  "Alb": { name: "Albanian Bible", language: "sq", category: "Albanian" },
  "ArmEastern": { name: "Eastern Armenian Bible", language: "hy", category: "Armenian" },
  "BeaMRK": { name: "The Gospel of Mark in Beaver (Danezaa)", language: "bea", category: "Indigenous" },
  "SrKDEkavski": { name: "Serbian Bible Dani\u010Di\u0107-Karad\u017Ei\u0107 Ekavski", language: "sr", category: "Serbian" },
  "SrKDIjekav": { name: "Serbian Bible Dani\u010Di\u0107-Karad\u017Ei\u0107 Ijekavski", language: "sr", category: "Serbian" },
  "Wulfila": { name: "Bishop Wulfila Gothic Bible", language: "got", category: "Gothic" },
  "sml_BL_2008": { name: "Kitab Awal-Jaman maka Kitab Injil", language: "sml", category: "Indigenous" },
  "vlsJoNT": { name: "Het Nieuwe Testament by Nicolaas De Jonge", language: "vls", category: "Dutch" }
};
var BibleLinkSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.filterText = "";
    this.editingAbbr = null;
    this.editingName = "";
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "BibleLink Settings" });
    containerEl.createEl("h3", { text: "Basic Settings" });
    new import_obsidian3.Setting(containerEl).setName("Default Translation").setDesc("Choose your preferred Bible translation.").addDropdown((dropdown) => {
      const translations = this.plugin.db.getTranslations();
      const translationOptions = {};
      translations.forEach((trans) => {
        translationOptions[trans.abbreviation] = `${trans.name} (${trans.abbreviation})`;
      });
      dropdown.addOptions(translationOptions).setValue(this.plugin.settings.defaultTranslation).onChange(async (value) => {
        this.plugin.settings.defaultTranslation = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Default Output Type").setDesc("Choose how references are inserted.").addDropdown((dropdown) => dropdown.addOption("text", "Full Verse Text").addOption("link", "Literal Word Link").addOption("codeblock", "Code Block").setValue(this.plugin.settings.outputType).onChange(async (value) => {
      this.plugin.settings.outputType = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Show Translation Abbreviation").setDesc("Include translation abbreviation in the output.").addToggle((toggle) => toggle.setValue(this.plugin.settings.showTranslationAbbr).onChange(async (value) => {
      this.plugin.settings.showTranslationAbbr = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Show Book Abbreviations").setDesc("Use abbreviated book names (e.g., Jn instead of John).").addToggle((toggle) => toggle.setValue(this.plugin.settings.showBookAbbr).onChange(async (value) => {
      this.plugin.settings.showBookAbbr = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Code Block Styling" });
    new import_obsidian3.Setting(containerEl).setName("Background Color").setDesc("Background color for Bible verse code blocks.").addColorPicker((colorPicker) => colorPicker.setValue(this.plugin.settings.codeBlockBackgroundColor).onChange(async (value) => {
      this.plugin.settings.codeBlockBackgroundColor = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Heading Style").setDesc("Style for the reference heading in code blocks.").addDropdown((dropdown) => dropdown.addOption("none", "No Heading").addOption("simple", "Simple (John 3:16)").addOption("detailed", "Detailed (John 3:16 ASV)").setValue(this.plugin.settings.codeBlockHeadingStyle).onChange(async (value) => {
      this.plugin.settings.codeBlockHeadingStyle = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Text Color").setDesc("Color for the verse text in code blocks.").addColorPicker((colorPicker) => colorPicker.setValue(this.plugin.settings.codeBlockTextColor).onChange(async (value) => {
      this.plugin.settings.codeBlockTextColor = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Verse Number Color").setDesc("Color for verse numbers in code blocks.").addColorPicker((colorPicker) => colorPicker.setValue(this.plugin.settings.codeBlockVerseNumberColor).onChange(async (value) => {
      this.plugin.settings.codeBlockVerseNumberColor = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Code Block Language").setDesc("The language identifier for Bible verse code blocks.").addText((text) => text.setPlaceholder("bible").setValue(this.plugin.settings.codeBlockLanguage).onChange(async (value) => {
      this.plugin.settings.codeBlockLanguage = value;
      await this.plugin.saveSettings();
    }));
    const exampleContainer = containerEl.createDiv();
    exampleContainer.createEl("h4", { text: "Code Block Examples" });
    exampleContainer.createEl("p", {
      text: "Use options in square brackets after the language identifier to customize the output:"
    });
    const syntaxExample = exampleContainer.createDiv({ cls: "biblelink-syntax-example" });
    syntaxExample.createEl("p", {
      text: "Syntax: ```bible [option1,option2,option3]",
      cls: "biblelink-syntax-text"
    });
    const examples = [
      {
        label: "Basic verse (no options):",
        code: `\`\`\`${this.plugin.settings.codeBlockLanguage}
NASB 1 John 3:17
\`\`\``
      },
      {
        label: "With link option (shows a link to the verse):",
        code: `\`\`\`${this.plugin.settings.codeBlockLanguage}
NASB Matthew 8:8-40 [link]
\`\`\``
      },
      {
        label: "With verse option (displays numbers per verse):",
        code: `\`\`\`${this.plugin.settings.codeBlockLanguage}
NASB 1 Corinthians 1:2-3 [verse]
\`\`\``
      },
      {
        label: "With chapter option (displays each chapter as Chapter X):",
        code: `\`\`\`${this.plugin.settings.codeBlockLanguage}
NASB Psalm 23 [chapter]
\`\`\``
      },
      {
        label: "Multiple options (comma-separated):",
        code: `\`\`\`${this.plugin.settings.codeBlockLanguage}
NASB John 3:16-18 [verse,chapter,link]
\`\`\``
      }
    ];
    for (const ex of examples) {
      const exampleDiv = exampleContainer.createDiv({ cls: "biblelink-example-item" });
      exampleDiv.createEl("div", { text: ex.label, cls: "biblelink-example-label" });
      const codeBlock = exampleDiv.createEl("pre", { cls: "biblelink-example-code" });
      codeBlock.createEl("code", { text: ex.code });
    }
    containerEl.createEl("h3", { text: "Bible Reference Shortcuts" });
    this.renderShortcutsSection(containerEl);
    containerEl.createEl("h3", { text: "Dataview Integration" });
    new import_obsidian3.Setting(containerEl).setName("Enable Dataview Metadata").setDesc("Add rich metadata to Bible verses for Dataview queries.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableDataviewMetadata).onChange(async (value) => {
      this.plugin.settings.enableDataviewMetadata = value;
      await this.plugin.saveSettings();
    }));
    if (this.plugin.settings.enableDataviewMetadata) {
      const metadataContainer = containerEl.createDiv();
      metadataContainer.createEl("p", {
        text: "Available metadata fields: book, chapter, verse, translation, text, reference, language, category"
      });
      const queryContainer = metadataContainer.createDiv();
      queryContainer.createEl("h4", { text: "How to Query Bible Verses" });
      queryContainer.createEl("p", {
        text: "Use Dataview queries to search and display Bible verses. You can filter by translation, book, chapter, verse, or search within the text content."
      });
      const exampleQuery = `\`\`\`dataview
TABLE book, chapter, verse, translation
FROM "Bible"
WHERE translation = "ASV"
SORT book, chapter, verse
\`\`\``;
      const codeBlock = queryContainer.createEl("pre");
      codeBlock.createEl("code", { text: exampleQuery });
    }
    containerEl.createEl("h3", { text: "Translation Management" });
    const uploadSection = containerEl.createDiv({ cls: "biblelink-upload-section" });
    uploadSection.createEl("h4", { text: "Upload Custom Translation" });
    const uploadDesc = uploadSection.createEl("p");
    uploadDesc.innerHTML = 'Upload your own Bible translation files. <strong>XML format is recommended</strong> and can be downloaded from <a href="https://github.com/scrollmapper/bible_databases" target="_blank">scrollmapper/bible_databases</a>.';
    new import_obsidian3.Setting(uploadSection).setName("Upload Translation").setDesc("Choose a file to upload (SQLite or XML format).").addButton((button) => button.setButtonText("Upload XML").setClass("mod-cta").onClick(() => this.uploadXMLFile())).addButton((button) => button.setButtonText("Upload SQLite").onClick(() => this.uploadSQLiteFile()));
    this.displayCurrentTranslations(containerEl);
  }
  displayCurrentTranslations(containerEl) {
    const sectionHeader = containerEl.createDiv({ cls: "biblelink-translations-header" });
    sectionHeader.createEl("h4", { text: "Installed Translations" });
    const filterContainer = containerEl.createDiv({ cls: "biblelink-filter-container" });
    const filterInput = filterContainer.createEl("input", {
      type: "text",
      placeholder: "Search translations...",
      cls: "biblelink-filter-input"
    });
    const tableContainer = containerEl.createDiv({ cls: "biblelink-table-container" });
    let sortField = "name";
    let sortAsc = true;
    const renderTable = () => {
      tableContainer.empty();
      const table = tableContainer.createEl("table", { cls: "biblelink-translation-table" });
      const thead = table.createEl("thead");
      const headerRow = thead.createEl("tr");
      const createSortableHeader = (text, field) => {
        const th = headerRow.createEl("th");
        th.createSpan({ text });
        if (sortField === field) {
          th.createSpan({ text: sortAsc ? " \u2193" : " \u2191" });
        }
        th.onclick = () => {
          if (sortField === field) {
            sortAsc = !sortAsc;
          } else {
            sortField = field;
            sortAsc = true;
          }
          renderTable();
        };
      };
      createSortableHeader("Translation Name", "name");
      createSortableHeader("Abbreviation", "abbreviation");
      createSortableHeader("Language", "language");
      createSortableHeader("Category", "category");
      headerRow.createEl("th", { text: "Actions" });
      const tbody = table.createEl("tbody");
      let translations = this.plugin.db.getTranslations().map((t) => ({
        ...t,
        ...AVAILABLE_TRANSLATIONS[t.abbreviation],
        installed: true
      }));
      const filterText = filterInput.value.toLowerCase();
      if (filterText) {
        translations = translations.filter((t) => {
          var _a, _b;
          return t.name.toLowerCase().includes(filterText) || t.abbreviation.toLowerCase().includes(filterText) || ((_a = t.language) == null ? void 0 : _a.toLowerCase().includes(filterText)) || ((_b = t.category) == null ? void 0 : _b.toLowerCase().includes(filterText));
        });
      }
      translations.sort((a, b) => {
        const aVal = a[sortField] || "";
        const bVal = b[sortField] || "";
        return (sortAsc ? 1 : -1) * aVal.localeCompare(bVal);
      });
      if (translations.length === 0) {
        const emptyRow = tbody.createEl("tr");
        emptyRow.createEl("td", {
          text: "No translations installed.",
          attr: { colspan: "5" }
        });
        return;
      }
      translations.forEach((trans) => {
        const row = tbody.createEl("tr");
        if (this.editingAbbr === trans.abbreviation) {
          const nameCell = row.createEl("td");
          const nameInput = nameCell.createEl("input", {
            type: "text",
            value: trans.name,
            cls: "biblelink-edit-input",
            placeholder: "Translation Name"
          });
          const abbrCell = row.createEl("td");
          const abbrInput = abbrCell.createEl("input", {
            type: "text",
            value: trans.abbreviation,
            cls: "biblelink-edit-input",
            placeholder: "Abbreviation (e.g., KJV)"
          });
          row.createEl("td", { text: trans.language || "" });
          row.createEl("td", { text: trans.category || "" });
          const actionCell = row.createEl("td", { cls: "biblelink-translation-actions" });
          actionCell.createEl("button", { text: "Save", cls: "mod-cta" }).onclick = async () => {
            var _a, _b;
            const newName = nameInput.value.trim();
            const newAbbr = abbrInput.value.trim().toUpperCase();
            if (!newName || !newAbbr) {
              new import_obsidian3.Notice("Name and abbreviation are required");
              return;
            }
            if (newAbbr !== trans.abbreviation && this.plugin.db.getTranslations().some((t) => t.abbreviation === newAbbr)) {
              new import_obsidian3.Notice("Abbreviation already exists");
              return;
            }
            const oldAbbr = trans.abbreviation;
            trans.name = newName;
            trans.abbreviation = newAbbr;
            if (this.plugin.settings.defaultTranslation === oldAbbr) {
              this.plugin.settings.defaultTranslation = newAbbr;
              await this.plugin.saveSettings();
            }
            await ((_b = (_a = this.plugin.db).saveData) == null ? void 0 : _b.call(_a));
            this.editingAbbr = null;
            renderTable();
            new import_obsidian3.Notice("Translation updated");
          };
          actionCell.createEl("button", { text: "Cancel" }).onclick = () => {
            this.editingAbbr = null;
            renderTable();
          };
        } else {
          row.createEl("td", { text: trans.name });
          row.createEl("td", { text: trans.abbreviation });
          row.createEl("td", { text: trans.language || "" });
          row.createEl("td", { text: trans.category || "" });
          const actionCell = row.createEl("td", { cls: "biblelink-translation-actions" });
          if (trans.abbreviation !== "ASV") {
            actionCell.createEl("button", { text: "Edit" }).onclick = () => {
              const translation = this.plugin.db.getTranslations().find((t) => t.abbreviation === trans.abbreviation);
              if (translation) {
                new TranslationEditModal(this.app, translation.name, translation.abbreviation, translation.language, translation.category, translation.processingRules, async (name, abbreviation, language, category, processingRules) => {
                  try {
                    await this.plugin.db.updateTranslation(translation.id, name, abbreviation, language, category, processingRules);
                    new import_obsidian3.Notice("Translation updated successfully");
                    renderTable();
                  } catch (error) {
                    new import_obsidian3.Notice(`Error updating translation: ${error.message}`);
                  }
                }, true).open();
              }
            };
            actionCell.createEl("button", {
              text: "Remove",
              cls: "mod-warning"
            }).onclick = () => {
              this.confirmRemoveTranslation(trans.abbreviation, trans.name);
            };
          } else {
            actionCell.createEl("span", {
              text: "(Built-in)",
              cls: "biblelink-builtin-label"
            });
          }
        }
      });
    };
    filterInput.addEventListener("input", renderTable);
    renderTable();
    const css = `
            .biblelink-translations-header {
                margin-bottom: 16px;
            }
            .biblelink-filter-container {
                margin-bottom: 16px;
            }
            .biblelink-filter-input {
                width: 100%;
                max-width: 300px;
                padding: 8px 12px;
                border: 1px solid var(--background-modifier-border);
                border-radius: 4px;
                background: var(--background-primary);
                color: var(--text-normal);
            }
            .biblelink-filter-input:focus {
                outline: none;
                border-color: var(--interactive-accent);
                box-shadow: 0 0 0 2px var(--interactive-accent-hover);
            }
            .biblelink-table-container {
                margin-top: 16px;
                border: 1px solid var(--background-modifier-border);
                border-radius: 8px;
                overflow: hidden;
            }
            .biblelink-translation-table {
                width: 100%;
                border-collapse: collapse;
                background: var(--background-primary);
            }
            .biblelink-translation-table th {
                background: var(--background-secondary);
                padding: 12px 16px;
                text-align: left;
                font-weight: 600;
                color: var(--text-normal);
                border-bottom: 1px solid var(--background-modifier-border);
                cursor: pointer;
                user-select: none;
            }
            .biblelink-translation-table th:hover {
                background: var(--background-modifier-hover);
            }
            .biblelink-translation-table td {
                padding: 12px 16px;
                border-bottom: 1px solid var(--background-modifier-border);
                color: var(--text-normal);
            }
            .biblelink-translation-table tr:hover {
                background: var(--background-modifier-hover);
            }
            .biblelink-translation-table tr:last-child td {
                border-bottom: none;
            }
            .biblelink-translation-actions {
                display: flex;
                gap: 8px;
                align-items: center;
            }
            .biblelink-translation-actions button {
                padding: 4px 8px;
                font-size: 12px;
                border-radius: 4px;
                border: 1px solid var(--background-modifier-border);
                background: var(--background-primary);
                color: var(--text-normal);
                cursor: pointer;
            }
            .biblelink-translation-actions button:hover {
                background: var(--background-modifier-hover);
            }
            .biblelink-translation-actions button.mod-cta {
                background: var(--interactive-accent);
                color: var(--text-on-accent);
                border-color: var(--interactive-accent);
            }
            .biblelink-translation-actions button.mod-warning {
                background: var(--text-error);
                color: var(--text-on-accent);
                border-color: var(--text-error);
            }
            .biblelink-builtin-label {
                color: var(--text-muted);
                font-style: italic;
                font-size: 12px;
            }
            .biblelink-edit-input {
                width: 100%;
                padding: 4px 8px;
                border: 1px solid var(--background-modifier-border);
                border-radius: 4px;
                background: var(--background-primary);
                color: var(--text-normal);
            }
            .biblelink-upload-section {
                margin-bottom: 24px;
                padding: 16px;
                background: var(--background-secondary);
                border-radius: 8px;
                border: 1px solid var(--background-modifier-border);
            }
            .biblelink-upload-section h4 {
                margin-top: 0;
                margin-bottom: 8px;
            }
            .biblelink-upload-section p {
                margin-bottom: 16px;
                color: var(--text-muted);
            }
        `;
    const styleEl = document.head.querySelector("#biblelink-table-styles") || document.head.createEl("style", { attr: { id: "biblelink-table-styles" } });
    styleEl.textContent = css;
    const exampleCss = `
            .biblelink-syntax-example {
                background: var(--background-secondary);
                padding: 12px;
                border-radius: 6px;
                margin-bottom: 16px;
                border-left: 4px solid var(--interactive-accent);
            }
            .biblelink-syntax-text {
                margin: 0;
                font-family: monospace;
                font-weight: 600;
                color: var(--text-normal);
            }
            .biblelink-example-item {
                margin-bottom: 16px;
                padding: 12px;
                background: var(--background-secondary);
                border-radius: 6px;
                border: 1px solid var(--background-modifier-border);
            }
            .biblelink-example-label {
                font-weight: 600;
                margin-bottom: 8px;
                color: var(--text-normal);
            }
            .biblelink-example-code {
                margin: 0;
                background: var(--background-primary);
                border: 1px solid var(--background-modifier-border);
                border-radius: 4px;
            }
            .biblelink-example-code code {
                color: var(--text-normal);
            }
        `;
    const exampleStyleEl = document.head.querySelector("#biblelink-example-styles") || document.head.createEl("style", { attr: { id: "biblelink-example-styles" } });
    exampleStyleEl.textContent = exampleCss;
  }
  async uploadSQLiteFile() {
    const input = document.createElement("input");
    input.type = "file";
    input.accept = ".sqlite,.db";
    input.onchange = async (event) => {
      var _a;
      const file = (_a = event.target.files) == null ? void 0 : _a[0];
      if (file) {
        await this.processSQLiteFile(file);
      }
    };
    input.click();
  }
  async processSQLiteFile(file) {
    try {
      new import_obsidian3.Notice(`Processing ${file.name}...`);
      const translationName = file.name.replace(/\.(sqlite|db)$/i, "");
      const abbreviation = translationName.toUpperCase();
      const modal = new TranslationEditModal(this.app, translationName, abbreviation, "English", "Standard", [], async (name, abbr, language, category, processingRules) => {
        try {
          const existingTranslations = this.plugin.db.getTranslations();
          if (existingTranslations.some((t) => t.abbreviation === abbr)) {
            throw new Error(`Translation ${abbr} already exists`);
          }
          const translationId = await this.plugin.db.addTranslation(name, abbr, language, category, processingRules);
          const sampleVerses = [
            { book: "John", chapter: 3, verse: 16, text: "Sample verse from uploaded file" },
            { book: "Genesis", chapter: 1, verse: 1, text: "Sample verse from uploaded file" }
          ];
          const versesToAdd = sampleVerses.map((verse) => ({
            translationId,
            book: verse.book,
            chapter: verse.chapter,
            verse: verse.verse,
            text: verse.text
          }));
          await this.plugin.db.addVersesBatch(versesToAdd);
          new import_obsidian3.Notice(`Successfully imported sample data from ${file.name}`);
          this.display();
        } catch (error) {
          console.error("SQLite import error:", error);
          new import_obsidian3.Notice(`Failed to import ${file.name}: ${error.message}`);
        }
      }, false);
      modal.open();
    } catch (error) {
      console.error("SQLite import error:", error);
      new import_obsidian3.Notice(`Failed to import ${file.name}: ${error.message}`);
    }
  }
  uploadXMLFile() {
    const input = document.createElement("input");
    input.type = "file";
    input.accept = ".xml";
    input.onchange = async (event) => {
      var _a;
      const file = (_a = event.target.files) == null ? void 0 : _a[0];
      if (file) {
        await this.processXMLFile(file);
      }
    };
    input.click();
  }
  async processXMLFile(file) {
    var _a;
    try {
      new import_obsidian3.Notice(`Processing ${file.name}...`);
      const text = await file.text();
      const result = await (0, import_xml2js.parseStringPromise)(text);
      if (!result.XMLBIBLE || !result.XMLBIBLE.BIBLEBOOK) {
        throw new Error("Invalid XML file: missing XMLBIBLE or BIBLEBOOK elements");
      }
      const biblename = ((_a = result.XMLBIBLE.$) == null ? void 0 : _a.biblename) || file.name.replace(".xml", "");
      const translationName = biblename;
      const abbreviation = biblename.toUpperCase();
      const modal = new TranslationEditModal(this.app, translationName, abbreviation, "English", "Standard", [], async (name, abbr, language, category, processingRules) => {
        try {
          const existingTranslations = this.plugin.db.getTranslations();
          if (existingTranslations.some((t) => t.abbreviation === abbr)) {
            const confirmModal = new ConfirmModal(this.app, `Translation '${abbr}' already exists. Overwrite?`, async (confirmed) => {
              if (confirmed) {
                await this.plugin.db.removeTranslation(abbr);
                await this.importXMLBooks(result, name, abbr, file.name, language, category, processingRules);
              } else {
                new import_obsidian3.Notice("Import cancelled.");
              }
              this.display();
            });
            confirmModal.open();
            return;
          }
          await this.importXMLBooks(result, name, abbr, file.name, language, category, processingRules);
          this.display();
        } catch (error) {
          console.error("XML import error:", error);
          new import_obsidian3.Notice(`Failed to import ${file.name}: ${error.message}`);
        }
      }, false);
      modal.open();
    } catch (error) {
      console.error("XML import error:", error);
      new import_obsidian3.Notice(`Failed to import ${file.name}: ${error.message}`);
    }
  }
  async importXMLBooks(result, translationName, abbreviation, fileName, language = "English", category = "Standard", processingRules = []) {
    var _a, _b;
    try {
      const books = result.XMLBIBLE.BIBLEBOOK;
      if (!books || books.length === 0) {
        new import_obsidian3.Notice("No books found in XML. Import aborted.");
        console.error("No books found in XML:", result);
        return;
      }
      new import_obsidian3.Notice(`Starting import of ${translationName}...`);
      const translationId = await this.plugin.db.addTranslation(translationName, abbreviation, language, category, processingRules);
      let importedCount = 0;
      let bookCount = 0;
      const versesToAdd = [];
      for (const book of books) {
        if (!book || !book.$)
          continue;
        const bookName = book.$.bname || book.$.sname || "Unknown";
        const chapters = Array.isArray(book.CHAPTER) ? book.CHAPTER : [book.CHAPTER];
        for (const chapter of chapters) {
          if (!chapter || !chapter.$)
            continue;
          const chapterNum = parseInt(chapter.$.cnumber);
          if (isNaN(chapterNum))
            continue;
          const verses = Array.isArray(chapter.VERS) ? chapter.VERS : chapter.VERS ? [chapter.VERS] : [];
          for (const verse of verses) {
            if (!verse)
              continue;
            let verseText = "";
            let verseNum = 1;
            if (typeof verse === "string") {
              verseText = verse;
            } else if (verse._) {
              verseText = verse._;
            } else if (Array.isArray(verse)) {
              verseText = verse.join("");
            }
            if (verse.$ && verse.$.vnumber) {
              verseNum = parseInt(verse.$.vnumber);
            }
            if (verseText && verseText.trim()) {
              versesToAdd.push({
                translationId,
                book: bookName,
                chapter: chapterNum,
                verse: verseNum,
                text: verseText.trim()
              });
              importedCount++;
            }
          }
        }
        bookCount++;
        if (bookCount % 10 === 0) {
          new import_obsidian3.Notice(`Processed ${bookCount} books, ${importedCount} verses...`);
        }
      }
      console.log(`[BibleLink] Parsed ${importedCount} verses from XML for ${translationName}`);
      if (versesToAdd.length > 0) {
        new import_obsidian3.Notice(`Saving ${importedCount} verses to database...`);
        await this.plugin.db.addVersesBatch(versesToAdd);
        const translationExists = this.plugin.db.verifyTranslationExists(abbreviation);
        const translationStats = this.plugin.db.getTranslationStats(abbreviation);
        const allVerses = ((_b = (_a = this.plugin.db["data"]) == null ? void 0 : _a.verses) == null ? void 0 : _b.filter((v) => v.translation_id === translationId)) || [];
        console.log(`[BibleLink] Saved ${allVerses.length} verses for ${translationName} (should match ${importedCount})`);
        if (translationExists && translationStats && allVerses.length > 0) {
          new import_obsidian3.Notice(`\u2705 Successfully imported ${translationName} (${abbreviation}) with ${translationStats.verseCount} verses from ${translationStats.books.length} books`);
          console.log(`Bible import completed: ${translationName} (${abbreviation}) - ${translationStats.verseCount} verses from ${translationStats.books.length} books`);
        } else {
          new import_obsidian3.Notice(`\u274C Import failed: No verses saved for ${translationName}. Check the XML format and try again.`);
          console.error(`[BibleLink] Import failed: No verses saved for ${translationName}.`);
          await this.plugin.db.removeTranslation(abbreviation);
        }
      } else {
        new import_obsidian3.Notice("\u274C No verses were found in the XML file. Import aborted.");
        console.error("[BibleLink] No verses found in XML:", result);
        await this.plugin.db.removeTranslation(abbreviation);
      }
    } catch (error) {
      console.error("XML import error:", error);
      new import_obsidian3.Notice(`\u274C Failed to import ${fileName}: ${error.message}`);
      try {
        await this.plugin.db.removeTranslation(abbreviation);
      } catch (cleanupError) {
        console.error("Failed to cleanup after import error:", cleanupError);
      }
    }
  }
  async removeTranslation(abbreviation) {
    if (abbreviation === "ASV") {
      new import_obsidian3.Notice("Cannot remove ASV translation");
      return;
    }
    const success = await this.plugin.db.removeTranslation(abbreviation);
    if (success) {
      new import_obsidian3.Notice(`${abbreviation} translation removed`);
      if (this.plugin.settings.defaultTranslation === abbreviation) {
        this.plugin.settings.defaultTranslation = "ASV";
        await this.plugin.saveSettings();
      }
      this.display();
    } else {
      new import_obsidian3.Notice(`Failed to remove ${abbreviation}: translation not found`);
    }
  }
  confirmRemoveTranslation(abbreviation, name) {
    const modal = new ConfirmModal(this.app, `Remove translation '${name}' (${abbreviation})?`, async (confirmed) => {
      if (confirmed) {
        await this.removeTranslation(abbreviation);
      }
      this.display();
    });
    modal.open();
  }
  renderShortcutsSection(containerEl) {
    const shortcuts = this.plugin.settings.shortcuts;
    const filterContainer = containerEl.createDiv({ cls: "biblelink-filter-container" });
    const filterInput = filterContainer.createEl("input", {
      type: "text",
      placeholder: "Filter shortcuts...",
      cls: "biblelink-filter-input"
    });
    const table = containerEl.createEl("table", { cls: "biblelink-shortcut-table" });
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    let sortField = "key";
    let sortAsc = true;
    const createSortableHeader = (text, field) => {
      const th = headerRow.createEl("th", { text });
      th.style.cursor = "pointer";
      th.onclick = () => {
        if (sortField === field) {
          sortAsc = !sortAsc;
        } else {
          sortField = field;
          sortAsc = true;
        }
        renderShortcuts();
      };
    };
    createSortableHeader("Shortcut", "key");
    createSortableHeader("Reference", "reference");
    headerRow.createEl("th", { text: "Actions" });
    const tbody = table.createEl("tbody");
    const renderShortcuts = () => {
      tbody.empty();
      let shortcutEntries = Object.entries(shortcuts);
      const filterText = filterInput.value.toLowerCase();
      if (filterText) {
        shortcutEntries = shortcutEntries.filter(([key, ref]) => key.toLowerCase().includes(filterText) || ref.toLowerCase().includes(filterText));
      }
      shortcutEntries.sort(([keyA, refA], [keyB, refB]) => {
        const aVal = sortField === "key" ? keyA : refA;
        const bVal = sortField === "key" ? keyB : refB;
        return (sortAsc ? 1 : -1) * aVal.localeCompare(bVal);
      });
      shortcutEntries.forEach(([key, reference]) => {
        const row = tbody.createEl("tr");
        if (this._editingKey === key) {
          const keyCell = row.createEl("td");
          const keyInput = keyCell.createEl("input", {
            type: "text",
            value: key,
            cls: "biblelink-edit-input",
            placeholder: "Shortcut (e.g., jn316)"
          });
          const refCell = row.createEl("td");
          const refInput = refCell.createEl("input", {
            type: "text",
            value: reference,
            cls: "biblelink-edit-input",
            placeholder: "Reference (e.g., John 3:16)"
          });
          const actionCell = row.createEl("td");
          actionCell.createEl("button", { text: "Save" }).onclick = async () => {
            const newKey = keyInput.value.trim();
            const newRef = refInput.value.trim();
            if (!newKey || !newRef) {
              new import_obsidian3.Notice("Shortcut and reference required");
              return;
            }
            if (newKey !== key && shortcuts[newKey]) {
              new import_obsidian3.Notice("Shortcut key already exists");
              return;
            }
            if (!/^\w+\s+\d+:\d+$/.test(newRef) && !/^\w+\s+\d+:\d+(-\d+)?$/.test(newRef)) {
              new import_obsidian3.Notice("Reference must be in the format Book Chapter:Verse or Book Chapter:Verse-Verse");
              return;
            }
            delete shortcuts[key];
            shortcuts[newKey] = newRef;
            this._editingKey = null;
            await this.plugin.saveSettings();
            renderShortcuts();
            new import_obsidian3.Notice("Shortcut updated");
          };
          actionCell.createEl("button", { text: "Cancel" }).onclick = () => {
            this._editingKey = null;
            renderShortcuts();
          };
        } else {
          row.createEl("td", { text: key });
          row.createEl("td", { text: reference });
          const actionCell = row.createEl("td");
          actionCell.createEl("button", { text: "Edit" }).onclick = () => {
            this._editingKey = key;
            renderShortcuts();
          };
          actionCell.createEl("button", {
            text: "Remove",
            cls: "mod-warning"
          }).onclick = () => {
            const modal = new ConfirmModal(this.app, `Remove shortcut '${key}'?`, async (confirmed) => {
              if (confirmed) {
                delete shortcuts[key];
                await this.plugin.saveSettings();
                renderShortcuts();
              }
            });
            modal.open();
          };
        }
      });
      if (this._addingShortcut) {
        const row = tbody.createEl("tr");
        const keyInput = row.createEl("td").createEl("input", {
          type: "text",
          placeholder: "Shortcut (e.g., jn316)",
          cls: "biblelink-edit-input"
        });
        const refInput = row.createEl("td").createEl("input", {
          type: "text",
          placeholder: "Reference (e.g., John 3:16)",
          cls: "biblelink-edit-input"
        });
        const actionCell = row.createEl("td");
        actionCell.createEl("button", { text: "Add" }).onclick = async () => {
          const newKey = keyInput.value.trim();
          const newRef = refInput.value.trim();
          if (!newKey || !newRef) {
            new import_obsidian3.Notice("Shortcut and reference required");
            return;
          }
          if (shortcuts[newKey]) {
            new import_obsidian3.Notice("Shortcut key already exists");
            return;
          }
          if (!/^\w+\s+\d+:\d+$/.test(newRef) && !/^\w+\s+\d+:\d+(-\d+)?$/.test(newRef)) {
            new import_obsidian3.Notice("Reference must be in the format Book Chapter:Verse or Book Chapter:Verse-Verse");
            return;
          }
          shortcuts[newKey] = newRef;
          this._addingShortcut = false;
          await this.plugin.saveSettings();
          renderShortcuts();
          new import_obsidian3.Notice("Shortcut added");
        };
        actionCell.createEl("button", { text: "Cancel" }).onclick = () => {
          this._addingShortcut = false;
          renderShortcuts();
        };
      } else {
        const addRow = tbody.createEl("tr");
        const addCell = addRow.createEl("td", { attr: { colspan: "3" } });
        addCell.createEl("button", {
          text: "Add Shortcut",
          cls: "mod-cta"
        }).onclick = () => {
          this._addingShortcut = true;
          renderShortcuts();
        };
      }
    };
    renderShortcuts();
    filterInput.addEventListener("input", renderShortcuts);
    const css = `
            .biblelink-shortcut-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 10px;
            }
            .biblelink-shortcut-table th,
            .biblelink-shortcut-table td {
                padding: 8px;
                border: 1px solid var(--background-modifier-border);
                text-align: left;
            }
            .biblelink-shortcut-table th {
                background-color: var(--background-secondary);
            }
        `;
    const styleEl = document.head.createEl("style");
    styleEl.textContent = css;
  }
};
var ConfirmModal = class extends import_obsidian3.Modal {
  constructor(app, message, onResult) {
    super(app);
    this.message = message;
    this.onResult = onResult;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h3", { text: "Confirm" });
    contentEl.createEl("p", { text: this.message });
    const btnRow = contentEl.createDiv();
    btnRow.style.display = "flex";
    btnRow.style.gap = "10px";
    btnRow.createEl("button", { text: "Remove", cls: "mod-warning" }).onclick = () => {
      this.close();
      this.onResult(true);
    };
    btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
      this.close();
      this.onResult(false);
    };
  }
  onClose() {
    this.contentEl.empty();
  }
};
var TranslationEditModal = class extends import_obsidian3.Modal {
  constructor(app, defaultName, defaultAbbr, defaultLanguage = "English", defaultCategory = "Standard", defaultProcessingRules = [], onSubmit, isEdit = false) {
    super(app);
    this.name = defaultName;
    this.abbreviation = defaultAbbr;
    this.language = defaultLanguage;
    this.category = defaultCategory;
    this.processingRules = [...defaultProcessingRules];
    this.onSubmit = onSubmit;
    this.isEdit = isEdit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.isEdit ? "Edit Translation" : "Add Translation" });
    new import_obsidian3.Setting(contentEl).setName("Translation Name").setDesc("Full name of the translation").addText((text) => text.setPlaceholder("e.g., American Standard Version").setValue(this.name).onChange((value) => {
      this.name = value;
    }));
    new import_obsidian3.Setting(contentEl).setName("Abbreviation").setDesc("Short abbreviation for the translation").addText((text) => text.setPlaceholder("e.g., ASV").setValue(this.abbreviation).onChange((value) => {
      this.abbreviation = value;
    }));
    new import_obsidian3.Setting(contentEl).setName("Language").setDesc("Language of the translation").addDropdown((dropdown) => {
      const languages = [
        "English",
        "Spanish",
        "French",
        "German",
        "Italian",
        "Portuguese",
        "Russian",
        "Chinese",
        "Japanese",
        "Korean",
        "Arabic",
        "Hebrew",
        "Greek",
        "Latin",
        "Swedish",
        "Norwegian",
        "Danish",
        "Dutch",
        "Polish",
        "Czech",
        "Slovak",
        "Hungarian",
        "Romanian",
        "Bulgarian",
        "Ukrainian",
        "Belarusian",
        "Serbian",
        "Croatian",
        "Slovenian",
        "Estonian",
        "Latvian",
        "Lithuanian",
        "Finnish",
        "Icelandic",
        "Turkish",
        "Persian",
        "Hindi",
        "Bengali",
        "Thai",
        "Vietnamese",
        "Indonesian",
        "Malay",
        "Filipino",
        "Other"
      ];
      languages.forEach((lang) => dropdown.addOption(lang, lang));
      dropdown.setValue(this.language);
      dropdown.onChange((value) => {
        this.language = value;
      });
    });
    new import_obsidian3.Setting(contentEl).setName("Category").setDesc("Category of the translation").addDropdown((dropdown) => {
      const categories = [
        "Standard",
        "Study",
        "Paraphrase",
        "Literal",
        "Dynamic",
        "Historical",
        "Catholic",
        "Orthodox",
        "Protestant",
        "Jewish",
        "Academic",
        "Children",
        "Other"
      ];
      categories.forEach((cat) => dropdown.addOption(cat, cat));
      dropdown.setValue(this.category);
      dropdown.onChange((value) => {
        this.category = value;
      });
    });
    contentEl.createEl("h3", { text: "Processing Rules" });
    contentEl.createEl("p", {
      text: "Add regex patterns to format verse text. Example: \\[\\w+\\] = <em>$&</em> to make bracketed text italic.",
      cls: "setting-item-description"
    });
    const rulesContainer = contentEl.createDiv({ cls: "processing-rules-container" });
    this.renderProcessingRules(rulesContainer);
    new import_obsidian3.Setting(contentEl).addButton((button) => button.setButtonText("Add Processing Rule").onClick(() => {
      this.processingRules.push({ regex: "", formatting: "", escape: false });
      this.renderProcessingRules(rulesContainer);
    }));
    const buttonContainer = contentEl.createDiv({ cls: "setting-item-control" });
    buttonContainer.createEl("button", {
      text: "Cancel",
      cls: "mod-warning"
    }).onclick = () => this.close();
    buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Add",
      cls: "mod-cta"
    }).onclick = () => {
      if (this.name.trim() && this.abbreviation.trim()) {
        this.onSubmit(this.name.trim(), this.abbreviation.trim(), this.language, this.category, this.processingRules);
        this.close();
      } else {
        new import_obsidian3.Notice("Please fill in all required fields");
      }
    };
  }
  renderProcessingRules(container) {
    container.empty();
    this.processingRules.forEach((rule, index) => {
      const ruleContainer = container.createDiv({ cls: "processing-rule-item" });
      new import_obsidian3.Setting(ruleContainer).setName("Regex Pattern").setDesc("Regular expression to match").addText((text) => text.setPlaceholder("e.g., \\[\\w+\\]").setValue(rule.regex).onChange((value) => {
        this.processingRules[index].regex = value;
      }));
      new import_obsidian3.Setting(ruleContainer).setName("Formatting").setDesc("Replacement text (use $& for matched text)").addText((text) => text.setPlaceholder("e.g., <em>$&</em>").setValue(rule.formatting).onChange((value) => {
        this.processingRules[index].formatting = value;
      }));
      new import_obsidian3.Setting(ruleContainer).setName("Escape special characters").setDesc("Escape [, ], <, >, & in the matched text for HTML output.").addToggle((toggle) => toggle.setValue(!!rule.escape).onChange((value) => {
        this.processingRules[index].escape = value;
      }));
      new import_obsidian3.Setting(ruleContainer).addButton((button) => button.setButtonText("Remove").setWarning().onClick(() => {
        this.processingRules.splice(index, 1);
        this.renderProcessingRules(container);
      }));
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/main.ts
var fs2 = __toModule(require("fs"));
var path2 = __toModule(require("path"));
var BOOK_ABBREVIATIONS = {
  "Genesis": "Gen",
  "Exodus": "Exo",
  "Leviticus": "Lev",
  "Numbers": "Num",
  "Deuteronomy": "Deu",
  "Joshua": "Jos",
  "Judges": "Jdg",
  "Ruth": "Rut",
  "1 Samuel": "1Sa",
  "2 Samuel": "2Sa",
  "1 Kings": "1Ki",
  "2 Kings": "2Ki",
  "1 Chronicles": "1Ch",
  "2 Chronicles": "2Ch",
  "Ezra": "Ezr",
  "Nehemiah": "Neh",
  "Esther": "Est",
  "Job": "Job",
  "Psalms": "Psa",
  "Proverbs": "Pro",
  "Ecclesiastes": "Ecc",
  "Song of Solomon": "Sng",
  "Isaiah": "Isa",
  "Jeremiah": "Jer",
  "Lamentations": "Lam",
  "Ezekiel": "Ezk",
  "Daniel": "Dan",
  "Hosea": "Hos",
  "Joel": "Jol",
  "Amos": "Amo",
  "Obadiah": "Oba",
  "Jonah": "Jon",
  "Micah": "Mic",
  "Nahum": "Nah",
  "Habakkuk": "Hab",
  "Zephaniah": "Zep",
  "Haggai": "Hag",
  "Zechariah": "Zec",
  "Malachi": "Mal",
  "Matthew": "Mat",
  "Mark": "Mrk",
  "Luke": "Luk",
  "John": "Jhn",
  "Acts": "Act",
  "Romans": "Rom",
  "1 Corinthians": "1Co",
  "2 Corinthians": "2Co",
  "Galatians": "Gal",
  "Ephesians": "Eph",
  "Philippians": "Php",
  "Colossians": "Col",
  "1 Thessalonians": "1Th",
  "2 Thessalonians": "2Th",
  "1 Timothy": "1Ti",
  "2 Timothy": "2Ti",
  "Titus": "Tit",
  "Philemon": "Phm",
  "Hebrews": "Heb",
  "James": "Jas",
  "1 Peter": "1Pe",
  "2 Peter": "2Pe",
  "1 John": "1Jn",
  "2 John": "2Jn",
  "3 John": "3Jn",
  "Jude": "Jud",
  "Revelation": "Rev"
};
var BibleLinkPlugin = class extends import_obsidian4.Plugin {
  constructor() {
    super(...arguments);
    this.isFirstLoad = true;
  }
  async onload() {
    await this.loadSettings();
    this.db = new BibleDatabase(this);
    if (this.isFirstLoad) {
      await this.db.initialize();
      this.isFirstLoad = false;
      new import_obsidian4.Notice('Welcome to BibleLink! ASV Bible is ready. Use "Insert Bible Reference" command to get started.');
    } else {
      await this.db.initialize();
    }
    window.BibleLinkPlugin = this;
    window.BibleLinkAPI = {
      getAllVerses: () => this.getAllVersesWithMetadata(),
      queryVerses: (book, chapter, translation) => this.queryVerses(book, chapter, translation),
      getTranslations: () => this.db.getTranslations(),
      getBooks: () => this.db.getBooks(),
      getChaptersForBook: (book, translation) => this.db.getChaptersForBook(book, translation),
      getVersesForChapter: (book, chapter, translation) => this.db.getVersesForChapter(book, chapter, translation),
      getVerse: (book, chapter, verse, translation) => this.db.getVerse(book, chapter, verse, translation),
      plugin: this
    };
    const parseReference = (ref) => {
      const match = ref.match(/^(.+?)\s+(\d+)(?::(\d+))?$/);
      if (!match)
        return null;
      const [, book, chapter, verse] = match;
      return {
        book: book.trim(),
        chapter: parseInt(chapter),
        verse: verse ? parseInt(verse) : void 0
      };
    };
    this.registerMarkdownCodeBlockProcessor(this.settings.codeBlockLanguage, (source, el, ctx) => {
      this.processCodeBlock(source, el, ctx);
    });
    this.addCommand({
      id: "insert-bible-reference",
      name: "Insert Bible Reference",
      editorCallback: (editor) => {
        new BibleSelectorModal(this.app, this, (reference, translation, outputType, options) => {
          this.insertBibleReference(editor, reference, translation, outputType, options);
          setTimeout(() => this.attachInlinePopoverHandlers(), 100);
        }).open();
      }
    });
    if (this.settings.enableShortcuts) {
      this.registerShortcutCommands();
    }
    this.addSettingTab(new BibleLinkSettingTab(this.app, this));
    this.registerDataviewSource();
    this.addStyles();
    this.updateStyles();
    this.testSettingsPersistence();
    this.attachInlinePopoverHandlers();
    console.log("BibleLink plugin loaded");
  }
  testSettingsPersistence() {
    console.log("[BibleLink] [testSettingsPersistence] Current settings:", {
      defaultTranslation: this.settings.defaultTranslation,
      outputType: this.settings.outputType,
      modalOutputType: this.settings.modalOutputType,
      modalOptions: this.settings.modalOptions,
      codeBlockBackgroundColor: this.settings.codeBlockBackgroundColor,
      codeBlockTextColor: this.settings.codeBlockTextColor
    });
    const settingsPath = path2.join(this.app.vault.adapter.basePath, ".obsidian", "plugins", "obsidian-biblelink", "data", "settings.json");
    if (fs2.existsSync(settingsPath)) {
      const content = fs2.readFileSync(settingsPath, "utf8");
      console.log("[BibleLink] [testSettingsPersistence] Settings file exists and contains:", content.slice(0, 500));
    } else {
      console.log("[BibleLink] [testSettingsPersistence] Settings file does not exist yet");
    }
  }
  async onunload() {
    if (this.db) {
      await this.db.close();
    }
    if (window.BibleLinkAPI) {
      delete window.BibleLinkAPI;
    }
    if (window.BibleLinkPlugin) {
      delete window.BibleLinkPlugin;
    }
    console.log("BibleLink plugin unloaded");
  }
  async loadSettings() {
    try {
      const settingsPath = path2.join(this.app.vault.adapter.basePath, ".obsidian", "plugins", "obsidian-biblelink", "data", "settings.json");
      console.log(`[BibleLink] [loadSettings] Loading settings from: ${settingsPath}`);
      if (fs2.existsSync(settingsPath)) {
        const content = fs2.readFileSync(settingsPath, "utf8");
        console.log(`[BibleLink] [loadSettings] Settings file found. First 200 chars:`, content.slice(0, 200));
        const savedSettings = JSON.parse(content);
        this.settings = Object.assign({}, DEFAULT_SETTINGS, savedSettings);
        console.log(`[BibleLink] [loadSettings] Loaded settings successfully`);
      } else {
        console.log("[BibleLink] [loadSettings] No settings file found, using defaults");
        this.settings = Object.assign({}, DEFAULT_SETTINGS);
        await this.saveSettings();
        console.log("[BibleLink] [loadSettings] Created default settings file");
      }
    } catch (error) {
      console.error("[BibleLink] [loadSettings] Error loading settings:", error);
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
    }
  }
  async saveSettings() {
    try {
      const dataDir = path2.join(this.app.vault.adapter.basePath, ".obsidian", "plugins", "obsidian-biblelink", "data");
      if (!fs2.existsSync(dataDir)) {
        fs2.mkdirSync(dataDir, { recursive: true });
      }
      const settingsPath = path2.join(dataDir, "settings.json");
      const content = JSON.stringify(this.settings, null, 2);
      console.log(`[BibleLink] [saveSettings] Saving settings to: ${settingsPath}`);
      console.log(`[BibleLink] [saveSettings] Settings (first 200 chars):`, content.slice(0, 200));
      fs2.writeFileSync(settingsPath, content, "utf8");
      console.log(`[BibleLink] [saveSettings] Settings saved successfully`);
      this.updateStyles();
    } catch (error) {
      console.error("[BibleLink] [saveSettings] Error saving settings:", error);
      new import_obsidian4.Notice("Failed to save settings");
    }
  }
  addStyles() {
    this.updateStyles();
  }
  updateStyles() {
    const existingStyle = document.getElementById("biblelink-styles");
    if (existingStyle) {
      existingStyle.remove();
    }
    const style = document.createElement("style");
    style.id = "biblelink-styles";
    style.textContent = `
            .bible-reference {
                color: ${this.settings.codeBlockTextColor};
                background-color: ${this.settings.codeBlockBackgroundColor};
                padding: 2px 6px;
                border-radius: 4px;
                display: inline-block;
                margin: 0 2px;
            }
            
            .bible-reference.simple {
                font-weight: normal;
                background: none;
                padding: 0;
                color: inherit;
            }
            
            .bible-reference.detailed {
                font-weight: 500;
            }
            
            .bible-reference.custom {
                font-style: italic;
            }

            .bible-verse-container {
                margin: 1em 0;
                line-height: 1.5;
            }

            .bible-verse-reference {
                font-weight: 500;
                color: var(--text-muted);
            }

            .bible-verse-text {
                margin-top: 0.5em;
            }

            .bible-verse-text sup {
                color: ${this.settings.codeBlockVerseNumberColor};
                font-size: 0.8em;
                font-weight: 500;
                vertical-align: super;
            }

            .red-letter-text {
                color: var(--text-red);
            }

            .chapter-number {
                font-weight: bold;
                color: var(--text-muted);
                margin-top: 1em;
                margin-bottom: 0.5em;
            }

            .bible-verse-link {
                margin-top: 1em;
                text-align: right;
            }

            .bible-verse-link a {
                color: var(--text-accent);
                font-size: 0.9em;
                text-decoration: none;
            }

            .bible-verse-link a:hover {
                text-decoration: underline;
            }

            /* BibleLink chapter/verse grid styles */
            .biblelink-chapter-grid, .biblelink-verse-grid {
                display: flex;
                flex-wrap: wrap;
                gap: 6px;
                margin-bottom: 8px;
            }
            .biblelink-chapter-btn, .biblelink-verse-btn {
                min-width: 32px;
                min-height: 32px;
                border-radius: 4px;
                border: 1px solid var(--background-modifier-border);
                background: var(--background-secondary);
                cursor: pointer;
                font-size: 1em;
                transition: background 0.2s, color 0.2s;
            }
            .biblelink-chapter-btn.selected, .biblelink-verse-btn.selected {
                background: var(--interactive-accent);
                color: var(--text-on-accent);
                font-weight: bold;
            }

            /* Inline reference popover styles */
            .biblelink-inline-ref {
                color: var(--text-accent);
                text-decoration: underline;
                cursor: pointer;
                position: relative;
            }
            .biblelink-inline-ref:hover {
                text-decoration: none;
            }
            .biblelink-inline-popover {
                position: fixed;
                z-index: 9999;
                background-color: #fff;
                color: #222;
                border: 1px solid #ccc;
                border-radius: 6px;
                padding: 8px 12px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.15);
                max-width: 350px;
                font-size: 1em;
                pointer-events: auto;
                white-space: pre-wrap; /* Preserve line breaks */
                word-break: break-word;
            }
        `;
    document.head.appendChild(style);
  }
  processCodeBlock(source, el, ctx) {
    el.style.backgroundColor = this.settings.codeBlockBackgroundColor;
    el.style.color = this.settings.codeBlockTextColor;
    const lines = source.trim().split("\n");
    if (lines.length === 0)
      return;
    const firstLine = lines[0].trim();
    const parts = firstLine.split(" ").filter((p) => p.length > 0);
    const options = {
      verse: false,
      chapter: false,
      redText: false,
      link: false
    };
    let translationIndex = 0;
    let referenceStartIndex = 1;
    for (let i = 1; i < parts.length; i++) {
      const part = parts[i].toLowerCase();
      if (["verse", "chapter", "red-text", "link"].includes(part)) {
        switch (part) {
          case "verse":
            options.verse = true;
            break;
          case "chapter":
            options.chapter = true;
            break;
          case "red-text":
            options.redText = true;
            break;
          case "link":
            options.link = true;
            break;
        }
        translationIndex = i + 1;
      } else {
        break;
      }
    }
    const lastPart = parts[parts.length - 1];
    let referenceEndIndex = parts.length;
    if (lastPart.startsWith("[") && lastPart.endsWith("]")) {
      const optionsStr = lastPart.slice(1, -1);
      const optionsList = optionsStr.split(/[,|]/).map((o) => o.trim()).filter((o) => o.length > 0);
      options.verse = options.verse || optionsList.includes("verse");
      options.chapter = options.chapter || optionsList.includes("chapter");
      options.redText = options.redText || optionsList.includes("red-text");
      options.link = options.link || optionsList.includes("link");
      referenceEndIndex--;
    }
    if (translationIndex >= referenceEndIndex) {
      el.createSpan({ text: "Invalid format. Use: ```bible [option1,option2] TRANSLATION REFERENCE``` or ```bible TRANSLATION REFERENCE [option1,option2]```" });
      return;
    }
    const translation = parts[translationIndex];
    const referenceText = parts.slice(translationIndex + 1, referenceEndIndex).join(" ");
    const crossRefMatch = referenceText.match(/^(.+?)\s+(\d+):(\d+)-(.+?)\s+(\d+):(\d+)$/);
    let verses = [];
    if (crossRefMatch) {
      const [, startBook, startChapter, startVerse, endBook, endChapter, endVerse] = crossRefMatch;
      const startChapterNum = parseInt(startChapter);
      const startVerseNum = parseInt(startVerse);
      const endChapterNum = parseInt(endChapter);
      const endVerseNum = parseInt(endVerse);
      if (startBook !== endBook) {
        el.createSpan({ text: "Cross-book references are not supported yet." });
        return;
      }
      for (let chapter = startChapterNum; chapter <= endChapterNum; chapter++) {
        const start = chapter === startChapterNum ? startVerseNum : 1;
        const end = chapter === endChapterNum ? endVerseNum : 999;
        for (let verse = start; verse <= end; verse++) {
          const verseData = this.db.getVerse(startBook, chapter, verse, translation);
          if (verseData) {
            verses.push({ chapter, verse, text: verseData.text });
          }
        }
      }
      if (verses.length === 0) {
        el.createSpan({ text: `Invalid reference: ${referenceText} in ${translation}` });
        return;
      }
      const container = el.createDiv({
        cls: `bible-verse-container${options.redText ? " red-letter" : ""}${options.chapter ? " show-chapter" : ""}${options.verse ? " show-verse" : ""}`
      });
      const ref = `${startBook} ${startChapterNum}:${startVerseNum}-${endChapterNum}:${endVerseNum} (${translation})`;
      container.createSpan({ text: ref + ": ", cls: "bible-verse-reference" });
      const verseContainer = container.createDiv({ cls: "bible-verse-text" });
      let lastChapter = -1;
      verses.forEach((verse) => {
        if (options.chapter && verse.chapter !== lastChapter) {
          verseContainer.createEl("h4", {
            text: `Chapter ${verse.chapter}`,
            cls: "chapter-number"
          });
          lastChapter = verse.chapter;
        }
        if (options.verse) {
          const sup = verseContainer.createEl("sup", { text: verse.verse.toString() });
          sup.style.marginRight = "0.3em";
        }
        let processedText = this.db.applyProcessingRules(verse.text, translation);
        if (options.redText) {
          const words = processedText.split(" ");
          words.forEach((word, i) => {
            const isJesusWord = this.isJesusWord(word);
            verseContainer.createSpan({
              text: word + (i < words.length - 1 ? " " : ""),
              cls: isJesusWord ? "red-letter-text" : ""
            });
          });
        } else {
          const textSpan = verseContainer.createSpan();
          textSpan.innerHTML = processedText + " ";
        }
      });
      if (options.link) {
        const linkContainer = container.createDiv({ cls: "bible-verse-link" });
        const linkText = `${startBook} ${startChapterNum}:${startVerseNum}${endVerseNum !== startVerseNum ? "-" + endVerseNum : ""}`;
        const linkUrl = this.generateBibleGatewayUrl(linkText, translation);
        const link = linkContainer.createEl("a", {
          text: `[@${linkUrl}]`,
          href: linkUrl
        });
        link.addClass("external-link");
      }
    } else {
      const match = referenceText.match(/^(.+?)\s+(\d+)(?::(\d+)(?:-(\d+))?)?$/);
      if (!match) {
        el.createSpan({ text: `Invalid reference format: ${referenceText}` });
        return;
      }
      const [, book, chapter, startVerse, endVerse] = match;
      const startChapterNum = parseInt(chapter);
      const startVerseNum = startVerse ? parseInt(startVerse) : 1;
      const endVerseNum = endVerse ? parseInt(endVerse) : startVerseNum;
      for (let v = startVerseNum; v <= endVerseNum; v++) {
        const verseData = this.db.getVerse(book, startChapterNum, v, translation);
        if (verseData) {
          verses.push({ chapter: startChapterNum, verse: v, text: verseData.text });
        }
      }
      if (verses.length === 0) {
        el.createSpan({ text: `Invalid reference: ${book} ${startChapterNum}:${startVerseNum}${endVerseNum !== startVerseNum ? "-" + endVerseNum : ""} in ${translation}` });
        return;
      }
      const container = el.createDiv({
        cls: `bible-verse-container${options.redText ? " red-letter" : ""}${options.chapter ? " show-chapter" : ""}${options.verse ? " show-verse" : ""}`
      });
      const ref = `${book} ${startChapterNum}:${startVerseNum}${endVerseNum !== startVerseNum ? "-" + endVerseNum : ""} (${translation})`;
      container.createSpan({ text: ref + ": ", cls: "bible-verse-reference" });
      const verseContainer = container.createDiv({ cls: "bible-verse-text" });
      let lastChapter = -1;
      verses.forEach((verse) => {
        if (options.chapter && verse.chapter !== lastChapter) {
          const chapterNum = verseContainer.createEl("strong", {
            text: verse.chapter.toString(),
            cls: "chapter-number"
          });
          chapterNum.style.marginRight = "0.5em";
          lastChapter = verse.chapter;
        }
        if (options.verse || verses.length > 1) {
          const sup = verseContainer.createEl("sup", { text: verse.verse.toString() });
          sup.style.marginRight = "0.3em";
        }
        let processedText = this.db.applyProcessingRules(verse.text, translation);
        if (options.redText) {
          const words = processedText.split(" ");
          words.forEach((word, i) => {
            const isJesusWord = this.isJesusWord(word);
            verseContainer.createSpan({
              text: word + (i < words.length - 1 ? " " : ""),
              cls: isJesusWord ? "red-letter-text" : ""
            });
          });
        } else {
          const textSpan = verseContainer.createSpan();
          textSpan.innerHTML = processedText + " ";
        }
      });
      if (options.link) {
        const linkContainer = container.createDiv({ cls: "bible-verse-link" });
        const linkText = `${book} ${startChapterNum}:${startVerseNum}${endVerseNum !== startVerseNum ? "-" + endVerseNum : ""}`;
        const linkUrl = this.generateBibleGatewayUrl(linkText, translation);
        const link = linkContainer.createEl("a", {
          text: `[@${linkUrl}]`,
          href: linkUrl
        });
        link.addClass("external-link");
      }
    }
  }
  registerShortcutCommands() {
    Object.entries(this.settings.shortcuts).forEach(([shortcut, reference]) => {
      this.addCommand({
        id: `bible-shortcut-${shortcut}`,
        name: `Insert ${reference} (${shortcut})`,
        editorCallback: (editor) => {
          this.insertShortcutReference(editor, reference);
        }
      });
    });
  }
  insertShortcutReference(editor, reference) {
    const match = reference.match(/^(\w+)\s+(\d+):(\d+)$/);
    if (!match) {
      new import_obsidian4.Notice(`Invalid reference format: ${reference}`);
      return;
    }
    const [, book, chapter, verse] = match;
    const chapterNum = parseInt(chapter);
    const verseNum = parseInt(verse);
    const verseData = this.db.getVerse(book, chapterNum, verseNum, this.settings.defaultTranslation);
    if (!verseData) {
      new import_obsidian4.Notice(`Verse not found: ${reference} in ${this.settings.defaultTranslation}`);
      return;
    }
    this.insertBibleReference(editor, reference, this.settings.defaultTranslation, this.settings.outputType, []);
  }
  attachInlinePopoverHandlers() {
    document.querySelectorAll(".biblelink-inline-ref").forEach((el) => {
      if (el.getAttribute("data-biblelink-popover") === "1")
        return;
      el.setAttribute("data-biblelink-popover", "1");
      el.addEventListener("mouseenter", (e) => {
        this.showInlineReferencePopover(el);
      });
      el.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        this.showInlineReferencePopover(el, true);
      });
      el.addEventListener("mouseleave", () => {
        setTimeout(() => {
          document.querySelectorAll(".biblelink-inline-popover").forEach((el2) => el2.remove());
        }, 200);
      });
    });
  }
  showInlineReferencePopover(target, force = false) {
    document.querySelectorAll(".biblelink-inline-popover").forEach((el) => el.remove());
    let text = target.textContent || "";
    let refMatch = text.match(/^(.*?) \(([^)]+)\)$/);
    if (!refMatch)
      return;
    let reference = refMatch[1];
    let translation = refMatch[2];
    let match = reference.match(/^(.+?)\s+(\d+)(?::(\d+)(?:-(\d+))?)?$/);
    if (!match)
      return;
    const [, book, chapter, startVerse, endVerse] = match;
    const chapterNum = parseInt(chapter);
    const startVerseNum = startVerse ? parseInt(startVerse) : 1;
    const endVerseNum = endVerse ? parseInt(endVerse) : startVerseNum;
    let verses = [];
    for (let v = startVerseNum; v <= endVerseNum; v++) {
      const verseData = this.db.getVerse(book, chapterNum, v, translation);
      if (verseData) {
        verses.push(`<span style='color:#888;font-size:0.9em;'>${v}</span> ${verseData.text}`);
      }
    }
    if (verses.length === 0)
      return;
    const popover = document.createElement("div");
    popover.className = "biblelink-inline-popover";
    popover.innerHTML = `<div style='font-weight:bold;margin-bottom:4px;'>${reference} (${translation})</div>${verses.join("<br/>")}`;
    popover.style.position = "absolute";
    popover.style.zIndex = "9999";
    popover.style.background = "#fff";
    popover.style.color = "#222";
    popover.style.border = "1px solid #ccc";
    popover.style.borderRadius = "6px";
    popover.style.padding = "8px 12px";
    popover.style.boxShadow = "0 2px 8px rgba(0,0,0,0.15)";
    popover.style.maxWidth = "350px";
    popover.style.fontSize = "1em";
    popover.style.pointerEvents = "auto";
    popover.style.whiteSpace = "pre-wrap";
    popover.style.wordBreak = "break-word";
    const rect = target.getBoundingClientRect();
    popover.style.left = `${rect.left + window.scrollX}px`;
    popover.style.top = `${rect.bottom + window.scrollY + 4}px`;
    document.body.appendChild(popover);
    const removePopover = (e) => {
      if (popover.parentNode)
        popover.parentNode.removeChild(popover);
      document.removeEventListener("mousedown", onDocClick);
    };
    const onDocClick = (e) => {
      if (!popover.contains(e.target) && e.target !== target) {
        removePopover();
      }
    };
    if (!force) {
      popover.addEventListener("mouseleave", removePopover);
    }
    document.addEventListener("mousedown", onDocClick);
  }
  insertBibleReference(editor, reference, translation, outputType, options) {
    let multiVerseMatch = reference.match(/^(.+?)\s+(\d+):([\d,\-]+)$/);
    let crossChapterMatch = reference.match(/^(.+?)\s+(\d+):(\d+)-(.+?)\s+(\d+):(\d+)$/);
    let match = reference.match(/^(.+?)\s+(\d+)(?::(\d+))?$/);
    let verses = [];
    let book, chapterNum, startVerseNum, endVerseNum;
    if (crossChapterMatch) {
      new import_obsidian4.Notice("Cross-chapter references are not supported yet.");
      return;
    } else if (multiVerseMatch) {
      let versePart;
      [, book, chapterNum, versePart] = multiVerseMatch;
      book = book.trim();
      chapterNum = parseInt(chapterNum);
      let verseNumbers = [];
      versePart.split(",").forEach((part) => {
        if (part.includes("-")) {
          const [start, end] = part.split("-").map(Number);
          for (let v = start; v <= end; v++) {
            verseNumbers.push(v);
          }
        } else {
          verseNumbers.push(Number(part));
        }
      });
      for (const v of verseNumbers) {
        const verseData = this.db.getVerse(book, chapterNum, v, translation);
        if (verseData) {
          verses.push({ verse: v, text: verseData.text });
        }
      }
    } else if (match) {
      [, book, chapterNum, startVerseNum] = match;
      book = book.trim();
      chapterNum = parseInt(chapterNum);
      startVerseNum = startVerseNum ? parseInt(startVerseNum) : 1;
      endVerseNum = startVerseNum;
      const verseData = this.db.getVerse(book, chapterNum, startVerseNum, translation);
      if (verseData) {
        verses.push({ verse: startVerseNum, text: verseData.text });
      }
    } else {
      new import_obsidian4.Notice(`Invalid reference format: ${reference}`);
      return;
    }
    if (verses.length === 0) {
      new import_obsidian4.Notice(`Invalid reference: ${reference} in ${translation}`);
      return;
    }
    let text;
    if (outputType === "text") {
      const refText = `${reference} (${translation})`;
      const span = document.createElement("span");
      span.className = "biblelink-inline-ref";
      span.textContent = refText;
      span.style.cursor = "pointer";
      span.title = "Click or hover to show verse";
      span.addEventListener("mouseenter", () => this.showInlineReferencePopover(span, false));
      span.addEventListener("mouseleave", () => {
        setTimeout(() => {
          document.querySelectorAll(".biblelink-inline-popover").forEach((el) => el.remove());
        }, 200);
      });
      span.addEventListener("click", (e) => {
        e.stopPropagation();
        this.showInlineReferencePopover(span, false);
      });
      if (editor.replaceSelectionHTML) {
        editor.replaceSelectionHTML(span.outerHTML);
      } else {
        editor.replaceSelection(refText);
      }
    } else if (outputType === "link") {
      const refText = `${reference} (${translation})`;
      const url = this.generateBibleGatewayUrl(reference, translation);
      const a = document.createElement("a");
      a.className = "biblelink-inline-ref";
      a.textContent = refText;
      a.href = url;
      a.target = "_blank";
      a.style.cursor = "pointer";
      a.title = "Click or hover to show verse";
      a.addEventListener("mouseenter", () => this.showInlineReferencePopover(a, false));
      a.addEventListener("mouseleave", () => {
        setTimeout(() => {
          document.querySelectorAll(".biblelink-inline-popover").forEach((el) => el.remove());
        }, 200);
      });
      a.addEventListener("click", (e) => {
        this.showInlineReferencePopover(a, false);
      });
      if (editor.replaceSelectionHTML) {
        editor.replaceSelectionHTML(a.outerHTML);
      } else {
        editor.replaceSelection(`[${refText}](${url})`);
      }
    } else {
      const optionsStr = options.length > 0 ? ` [${options.join("|")}]` : "";
      text = `\`\`\`${this.settings.codeBlockLanguage}
${translation} ${reference}${optionsStr}
${verses.map((v) => v.text).join(" ")}
\`\`\``;
    }
    editor.replaceSelection(text);
  }
  formatReference(book, chapter, verse, translation) {
    let formattedBook = book;
    if (this.settings.showBookAbbr && BOOK_ABBREVIATIONS[book]) {
      formattedBook = BOOK_ABBREVIATIONS[book];
    }
    return this.settings.showTranslationAbbr ? `${formattedBook} ${chapter}:${verse} ${translation}` : `${formattedBook} ${chapter}:${verse}`;
  }
  async createVerseNote(book, chapter, verse, translation) {
    try {
      const verseData = this.db.getVerse(book, chapter, verse, translation);
      if (!verseData)
        return;
      const notePath = `Bible/${book}/${chapter}/${verse}.md`;
      const existingFile = this.app.vault.getAbstractFileByPath(notePath);
      if (existingFile)
        return;
      const dirPath = `Bible/${book}/${chapter}`;
      const dirExists = this.app.vault.getAbstractFileByPath(dirPath);
      if (!dirExists) {
        await this.createDirectoryRecursive(dirPath);
      }
      const translationInfo = this.getTranslationInfo(translation);
      const reference = this.formatReference(book, chapter, verse, translation);
      const content = `---
book: ${book}
chapter: ${chapter}
verse: ${verse}
translation: ${translation}
text: "${verseData.text.replace(/"/g, '\\"')}"
reference: "${reference}"
language: "${translationInfo.language}"
category: "${translationInfo.category}"
translation_name: "${translationInfo.name}"
created: ${new Date().toISOString()}
---

# ${reference}

${verseData.text}

*Translation: ${translationInfo.name} (${translation})*

## Metadata

- **Book**: ${book}
- **Chapter**: ${chapter}
- **Verse**: ${verse}
- **Translation**: ${translation}
- **Language**: ${translationInfo.language}
- **Category**: ${translationInfo.category}
- **Reference**: ${reference}

## Related Verses

\`\`\`dataview
LIST reference, text
FROM "Bible"
WHERE book = "${book}" AND chapter = ${chapter}
SORT verse
\`\`\`

## Cross-References

\`\`\`dataview
LIST reference, text
FROM "Bible"
WHERE contains(text, "${verseData.text.split(" ").slice(0, 3).join(" ")}")
AND file.name != this.file.name
LIMIT 5
\`\`\`
`;
      await this.app.vault.create(notePath, content);
    } catch (error) {
      console.error("Error creating verse note:", error);
    }
  }
  getTranslationInfo(abbreviation) {
    const translation = this.db.getTranslations().find((t) => t.abbreviation === abbreviation);
    if (translation) {
      const knownTranslation = this.getKnownTranslation(abbreviation);
      return {
        name: translation.name,
        language: (knownTranslation == null ? void 0 : knownTranslation.language) || "unknown",
        category: (knownTranslation == null ? void 0 : knownTranslation.category) || "Unknown"
      };
    }
    return {
      name: abbreviation,
      language: "unknown",
      category: "Unknown"
    };
  }
  getKnownTranslation(abbreviation) {
    const knownTranslations = {
      "ASV": { name: "American Standard Version (1901)", language: "en", category: "English" },
      "KJV": { name: "King James Version", language: "en", category: "English" },
      "WEB": { name: "World English Bible", language: "en", category: "English" },
      "YLT": { name: "Young's Literal Translation (1898)", language: "en", category: "English" },
      "BBE": { name: "Bible in Basic English (1949/1964)", language: "en", category: "English" },
      "BSB": { name: "Berean Standard Bible", language: "en", category: "English" },
      "CPDV": { name: "Catholic Public Domain Version", language: "en", category: "English" },
      "SpaRV": { name: "La Santa Biblia Reina-Valera (1909)", language: "es", category: "Spanish" },
      "Vulgate": { name: "Latin Vulgate", language: "la", category: "Latin" },
      "Byz": { name: "Byzantine Textform (Greek)", language: "grc", category: "Greek" },
      "WLC": { name: "Westminster Leningrad Codex", language: "hbo", category: "Hebrew" }
    };
    return knownTranslations[abbreviation] || null;
  }
  async createDirectoryRecursive(dirPath) {
    const parts = dirPath.split("/");
    let currentPath = "";
    for (const part of parts) {
      currentPath = currentPath ? `${currentPath}/${part}` : part;
      const exists = this.app.vault.getAbstractFileByPath(currentPath);
      if (!exists) {
        try {
          await this.app.vault.createFolder(currentPath);
        } catch (error) {
        }
      }
    }
  }
  registerDataviewSource() {
    const dataviewPlugin = this.app.plugins.plugins["dataview"];
    if (!dataviewPlugin) {
      console.log("[BibleLink] Dataview plugin not found, skipping Dataview integration");
      return;
    }
    try {
      console.log("[BibleLink] Dataview plugin found, exposing API for DataviewJS access");
      console.log("[BibleLink] Use BibleLinkAPI or BibleLinkPlugin in DataviewJS queries");
    } catch (error) {
      console.error("[BibleLink] Failed to initialize Dataview integration:", error);
    }
  }
  handleDataviewQuery(query) {
    try {
      console.log("[BibleLink] Processing Dataview query:", query);
      const parsedQuery = this.parseDataviewQuery(query);
      console.log("[BibleLink] Parsed query:", parsedQuery);
      let results = this.getAllVersesWithMetadata();
      if (parsedQuery.where) {
        results = this.applyWhereConditions(results, parsedQuery.where);
      }
      if (parsedQuery.sort) {
        results = this.applySort(results, parsedQuery.sort);
      }
      if (parsedQuery.limit) {
        results = results.slice(0, parsedQuery.limit);
      }
      console.log(`[BibleLink] Query returned ${results.length} results`);
      return results;
    } catch (error) {
      console.error("[BibleLink] Dataview query error:", error);
      return [];
    }
  }
  parseDataviewQuery(query) {
    const result = {};
    const whereMatch = query.match(/WHERE\s+(.+?)(?:\s+SORT|\s+LIMIT|$)/i);
    if (whereMatch) {
      result.where = this.parseWhereConditions(whereMatch[1]);
    }
    const sortMatch = query.match(/SORT\s+(.+?)(?:\s+LIMIT|$)/i);
    if (sortMatch) {
      result.sort = this.parseSortConditions(sortMatch[1]);
    }
    const limitMatch = query.match(/LIMIT\s+(\d+)/i);
    if (limitMatch) {
      result.limit = parseInt(limitMatch[1]);
    }
    return result;
  }
  parseWhereConditions(conditions) {
    const parsedConditions = [];
    const andParts = conditions.split(/\s+AND\s+/i);
    for (const part of andParts) {
      const eqMatch = part.match(/(\w+)\s*=\s*"([^"]+)"/i);
      if (eqMatch) {
        parsedConditions.push({
          type: "equals",
          field: eqMatch[1].toLowerCase(),
          value: eqMatch[2]
        });
        continue;
      }
      const numMatch = part.match(/(\w+)\s*=\s*(\d+)/i);
      if (numMatch) {
        parsedConditions.push({
          type: "equals",
          field: numMatch[1].toLowerCase(),
          value: parseInt(numMatch[2])
        });
        continue;
      }
      const containsMatch = part.match(/contains\((\w+),\s*"([^"]+)"\)/i);
      if (containsMatch) {
        parsedConditions.push({
          type: "contains",
          field: containsMatch[1].toLowerCase(),
          value: containsMatch[2]
        });
        continue;
      }
      const gtMatch = part.match(/(\w+)\s*>\s*(\d+)/i);
      if (gtMatch) {
        parsedConditions.push({
          type: "greater_than",
          field: gtMatch[1].toLowerCase(),
          value: parseInt(gtMatch[2])
        });
        continue;
      }
      const ltMatch = part.match(/(\w+)\s*<\s*(\d+)/i);
      if (ltMatch) {
        parsedConditions.push({
          type: "less_than",
          field: ltMatch[1].toLowerCase(),
          value: parseInt(ltMatch[2])
        });
        continue;
      }
    }
    return parsedConditions;
  }
  parseSortConditions(sortClause) {
    const sorts = [];
    const parts = sortClause.split(",").map((p) => p.trim());
    for (const part of parts) {
      const descMatch = part.match(/(\w+)\s+DESC/i);
      if (descMatch) {
        sorts.push({ field: descMatch[1].toLowerCase(), direction: "desc" });
        continue;
      }
      const ascMatch = part.match(/(\w+)\s+ASC/i);
      if (ascMatch) {
        sorts.push({ field: ascMatch[1].toLowerCase(), direction: "asc" });
        continue;
      }
      const fieldMatch = part.match(/(\w+)/i);
      if (fieldMatch) {
        sorts.push({ field: fieldMatch[1].toLowerCase(), direction: "asc" });
      }
    }
    return sorts;
  }
  getAllVersesWithMetadata() {
    const results = [];
    for (const translation of this.db.getTranslations()) {
      for (const book of this.db.getBooks()) {
        const chapters = this.db.getChaptersForBook(book, translation.abbreviation);
        for (const chapter of chapters) {
          const verses = this.db.getVersesForChapter(book, chapter, translation.abbreviation);
          for (const verseNum of verses) {
            const verseData = this.db.getVerse(book, chapter, verseNum, translation.abbreviation);
            if (verseData) {
              const text = verseData.text;
              const wordCount = text.split(/\s+/).length;
              const charCount = text.length;
              results.push({
                book: verseData.book,
                chapter: verseData.chapter,
                verse: verseData.verse,
                text,
                translation: translation.abbreviation,
                translation_name: translation.name,
                reference: `${verseData.book} ${verseData.chapter}:${verseData.verse}`,
                word_count: wordCount,
                char_count: charCount,
                is_jesus_word: this.isJesusWord(text),
                has_red_letter: this.hasRedLetterWords(text),
                testament: this.getTestament(verseData.book),
                book_category: this.getBookCategory(verseData.book)
              });
            }
          }
        }
      }
    }
    return results;
  }
  applyWhereConditions(verses, conditions) {
    return verses.filter((verse) => {
      return conditions.every((condition) => {
        const fieldValue = verse[condition.field];
        switch (condition.type) {
          case "equals":
            return fieldValue === condition.value;
          case "contains":
            return typeof fieldValue === "string" && fieldValue.toLowerCase().includes(condition.value.toLowerCase());
          case "greater_than":
            return typeof fieldValue === "number" && fieldValue > condition.value;
          case "less_than":
            return typeof fieldValue === "number" && fieldValue < condition.value;
          default:
            return true;
        }
      });
    });
  }
  applySort(verses, sorts) {
    return [...verses].sort((a, b) => {
      for (const sort of sorts) {
        const aVal = a[sort.field];
        const bVal = b[sort.field];
        let comparison = 0;
        if (typeof aVal === "string" && typeof bVal === "string") {
          comparison = aVal.localeCompare(bVal);
        } else if (typeof aVal === "number" && typeof bVal === "number") {
          comparison = aVal - bVal;
        } else {
          comparison = String(aVal).localeCompare(String(bVal));
        }
        if (comparison !== 0) {
          return sort.direction === "desc" ? -comparison : comparison;
        }
      }
      return 0;
    });
  }
  getTestament(book) {
    const oldTestamentBooks = [
      "Genesis",
      "Exodus",
      "Leviticus",
      "Numbers",
      "Deuteronomy",
      "Joshua",
      "Judges",
      "Ruth",
      "1 Samuel",
      "2 Samuel",
      "1 Kings",
      "2 Kings",
      "1 Chronicles",
      "2 Chronicles",
      "Ezra",
      "Nehemiah",
      "Esther",
      "Job",
      "Psalms",
      "Proverbs",
      "Ecclesiastes",
      "Song of Solomon",
      "Isaiah",
      "Jeremiah",
      "Lamentations",
      "Ezekiel",
      "Daniel",
      "Hosea",
      "Joel",
      "Amos",
      "Obadiah",
      "Jonah",
      "Micah",
      "Nahum",
      "Habakkuk",
      "Zephaniah",
      "Haggai",
      "Zechariah",
      "Malachi"
    ];
    return oldTestamentBooks.includes(book) ? "Old Testament" : "New Testament";
  }
  getBookCategory(book) {
    const categories = {
      "Genesis": "Law",
      "Exodus": "Law",
      "Leviticus": "Law",
      "Numbers": "Law",
      "Deuteronomy": "Law",
      "Joshua": "Historical",
      "Judges": "Historical",
      "Ruth": "Historical",
      "1 Samuel": "Historical",
      "2 Samuel": "Historical",
      "1 Kings": "Historical",
      "2 Kings": "Historical",
      "1 Chronicles": "Historical",
      "2 Chronicles": "Historical",
      "Ezra": "Historical",
      "Nehemiah": "Historical",
      "Esther": "Historical",
      "Job": "Wisdom",
      "Psalms": "Wisdom",
      "Proverbs": "Wisdom",
      "Ecclesiastes": "Wisdom",
      "Song of Solomon": "Wisdom",
      "Isaiah": "Prophetic",
      "Jeremiah": "Prophetic",
      "Lamentations": "Prophetic",
      "Ezekiel": "Prophetic",
      "Daniel": "Prophetic",
      "Hosea": "Prophetic",
      "Joel": "Prophetic",
      "Amos": "Prophetic",
      "Obadiah": "Prophetic",
      "Jonah": "Prophetic",
      "Micah": "Prophetic",
      "Nahum": "Prophetic",
      "Habakkuk": "Prophetic",
      "Zephaniah": "Prophetic",
      "Haggai": "Prophetic",
      "Zechariah": "Prophetic",
      "Malachi": "Prophetic",
      "Matthew": "Gospel",
      "Mark": "Gospel",
      "Luke": "Gospel",
      "John": "Gospel",
      "Acts": "Historical",
      "Romans": "Epistle",
      "1 Corinthians": "Epistle",
      "2 Corinthians": "Epistle",
      "Galatians": "Epistle",
      "Ephesians": "Epistle",
      "Philippians": "Epistle",
      "Colossians": "Epistle",
      "1 Thessalonians": "Epistle",
      "2 Thessalonians": "Epistle",
      "1 Timothy": "Epistle",
      "2 Timothy": "Epistle",
      "Titus": "Epistle",
      "Philemon": "Epistle",
      "Hebrews": "Epistle",
      "James": "Epistle",
      "1 Peter": "Epistle",
      "2 Peter": "Epistle",
      "1 John": "Epistle",
      "2 John": "Epistle",
      "3 John": "Epistle",
      "Jude": "Epistle",
      "Revelation": "Apocalyptic"
    };
    return categories[book] || "Unknown";
  }
  hasRedLetterWords(text) {
    const jesusIndicators = [
      "I am",
      "verily",
      "truly",
      "amen",
      "father",
      "kingdom",
      "heaven",
      "parable",
      "disciple",
      "follow me",
      "come unto me",
      "my father"
    ];
    const lowerText = text.toLowerCase();
    return jesusIndicators.some((indicator) => lowerText.includes(indicator.toLowerCase()));
  }
  queryVerses(book, chapter, translation) {
    let results = this.getAllVersesWithMetadata();
    if (book) {
      results = results.filter((v) => v.book === book);
    }
    if (chapter) {
      results = results.filter((v) => v.chapter === chapter);
    }
    if (translation) {
      results = results.filter((v) => v.translation === translation);
    }
    return results.slice(0, 1e3);
  }
  isJesusWord(word) {
    const jesusWords = ["Jesus", "Christ", "Lord", "Master", "Rabbi", "Teacher"];
    return jesusWords.some((w) => word.includes(w));
  }
  generateBibleGatewayUrl(reference, translation) {
    const translationMap = {
      "KJV": "KJV",
      "ASV": "ASV",
      "WEB": "WEB",
      "YLT": "YLT",
      "BBE": "BBE",
      "BSB": "BSB",
      "CPDV": "CPDV",
      "SpaRV": "RVR1909",
      "Vulgate": "VULGATE",
      "Byz": "BYZ",
      "WLC": "WLC"
    };
    const bibleGatewayTranslation = translationMap[translation] || translation;
    const encodedReference = encodeURIComponent(reference);
    return `https://www.biblegateway.com/passage/?search=${encodedReference}&version=${bibleGatewayTranslation}`;
  }
};
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL3htbDJqcy9saWIvZGVmYXVsdHMuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1V0aWxpdHkuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERPTUltcGxlbWVudGF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxET01FcnJvckhhbmRsZXIuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERPTVN0cmluZ0xpc3QuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERPTUNvbmZpZ3VyYXRpb24uanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL05vZGVUeXBlLmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxBdHRyaWJ1dGUuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTE5hbWVkTm9kZU1hcC5qcyIsICJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRWxlbWVudC5qcyIsICJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MQ2hhcmFjdGVyRGF0YS5qcyIsICJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MQ0RhdGEuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTENvbW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERlY2xhcmF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEVERBdHRMaXN0LmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEVERFbnRpdHkuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERUREVsZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERURE5vdGF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEb2NUeXBlLmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxSYXcuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFRleHQuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbi5qcyIsICJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRHVtbXkuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTE5vZGVMaXN0LmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9Eb2N1bWVudFBvc2l0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxOb2RlLmpzIiwgIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxTdHJpbmdpZmllci5qcyIsICJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvV3JpdGVyU3RhdGUuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFdyaXRlckJhc2UuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFN0cmluZ1dyaXRlci5qcyIsICJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRG9jdW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERvY3VtZW50Q0IuanMiLCAibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFN0cmVhbVdyaXRlci5qcyIsICJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL3htbDJqcy9saWIvYnVpbGRlci5qcyIsICJub2RlX21vZHVsZXMvc2F4L2xpYi9zYXguanMiLCAibm9kZV9tb2R1bGVzL3htbDJqcy9saWIvYm9tLmpzIiwgIm5vZGVfbW9kdWxlcy94bWwyanMvbGliL3Byb2Nlc3NvcnMuanMiLCAibm9kZV9tb2R1bGVzL3htbDJqcy9saWIvcGFyc2VyLmpzIiwgIm5vZGVfbW9kdWxlcy94bWwyanMvbGliL3htbDJqcy5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvZGF0YWJhc2UudHMiLCAic3JjL3NlbGVjdG9yLnRzIiwgInNyYy9zZXR0aW5ncy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgZXhwb3J0cy5kZWZhdWx0cyA9IHtcbiAgICBcIjAuMVwiOiB7XG4gICAgICBleHBsaWNpdENoYXJrZXk6IGZhbHNlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgIG5vcm1hbGl6ZTogdHJ1ZSxcbiAgICAgIG5vcm1hbGl6ZVRhZ3M6IGZhbHNlLFxuICAgICAgYXR0cmtleTogXCJAXCIsXG4gICAgICBjaGFya2V5OiBcIiNcIixcbiAgICAgIGV4cGxpY2l0QXJyYXk6IGZhbHNlLFxuICAgICAgaWdub3JlQXR0cnM6IGZhbHNlLFxuICAgICAgbWVyZ2VBdHRyczogZmFsc2UsXG4gICAgICBleHBsaWNpdFJvb3Q6IGZhbHNlLFxuICAgICAgdmFsaWRhdG9yOiBudWxsLFxuICAgICAgeG1sbnM6IGZhbHNlLFxuICAgICAgZXhwbGljaXRDaGlsZHJlbjogZmFsc2UsXG4gICAgICBjaGlsZGtleTogJ0BAJyxcbiAgICAgIGNoYXJzQXNDaGlsZHJlbjogZmFsc2UsXG4gICAgICBpbmNsdWRlV2hpdGVDaGFyczogZmFsc2UsXG4gICAgICBhc3luYzogZmFsc2UsXG4gICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICBhdHRyTmFtZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICBhdHRyVmFsdWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgdGFnTmFtZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICB2YWx1ZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICBlbXB0eVRhZzogJydcbiAgICB9LFxuICAgIFwiMC4yXCI6IHtcbiAgICAgIGV4cGxpY2l0Q2hhcmtleTogZmFsc2UsXG4gICAgICB0cmltOiBmYWxzZSxcbiAgICAgIG5vcm1hbGl6ZTogZmFsc2UsXG4gICAgICBub3JtYWxpemVUYWdzOiBmYWxzZSxcbiAgICAgIGF0dHJrZXk6IFwiJFwiLFxuICAgICAgY2hhcmtleTogXCJfXCIsXG4gICAgICBleHBsaWNpdEFycmF5OiB0cnVlLFxuICAgICAgaWdub3JlQXR0cnM6IGZhbHNlLFxuICAgICAgbWVyZ2VBdHRyczogZmFsc2UsXG4gICAgICBleHBsaWNpdFJvb3Q6IHRydWUsXG4gICAgICB2YWxpZGF0b3I6IG51bGwsXG4gICAgICB4bWxuczogZmFsc2UsXG4gICAgICBleHBsaWNpdENoaWxkcmVuOiBmYWxzZSxcbiAgICAgIHByZXNlcnZlQ2hpbGRyZW5PcmRlcjogZmFsc2UsXG4gICAgICBjaGlsZGtleTogJyQkJyxcbiAgICAgIGNoYXJzQXNDaGlsZHJlbjogZmFsc2UsXG4gICAgICBpbmNsdWRlV2hpdGVDaGFyczogZmFsc2UsXG4gICAgICBhc3luYzogZmFsc2UsXG4gICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICBhdHRyTmFtZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICBhdHRyVmFsdWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgdGFnTmFtZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICB2YWx1ZVByb2Nlc3NvcnM6IG51bGwsXG4gICAgICByb290TmFtZTogJ3Jvb3QnLFxuICAgICAgeG1sZGVjOiB7XG4gICAgICAgICd2ZXJzaW9uJzogJzEuMCcsXG4gICAgICAgICdlbmNvZGluZyc6ICdVVEYtOCcsXG4gICAgICAgICdzdGFuZGFsb25lJzogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGRvY3R5cGU6IG51bGwsXG4gICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICdwcmV0dHknOiB0cnVlLFxuICAgICAgICAnaW5kZW50JzogJyAgJyxcbiAgICAgICAgJ25ld2xpbmUnOiAnXFxuJ1xuICAgICAgfSxcbiAgICAgIGhlYWRsZXNzOiBmYWxzZSxcbiAgICAgIGNodW5rU2l6ZTogMTAwMDAsXG4gICAgICBlbXB0eVRhZzogJycsXG4gICAgICBjZGF0YTogZmFsc2VcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIGFzc2lnbiwgZ2V0VmFsdWUsIGlzQXJyYXksIGlzRW1wdHksIGlzRnVuY3Rpb24sIGlzT2JqZWN0LCBpc1BsYWluT2JqZWN0LFxuICAgIHNsaWNlID0gW10uc2xpY2UsXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGFzc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpLCBrZXksIGxlbiwgc291cmNlLCBzb3VyY2VzLCB0YXJnZXQ7XG4gICAgdGFyZ2V0ID0gYXJndW1lbnRzWzBdLCBzb3VyY2VzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgaWYgKGlzRnVuY3Rpb24oT2JqZWN0LmFzc2lnbikpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gc291cmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuICAgICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgICAgICBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gISF2YWwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gIH07XG5cbiAgaXNPYmplY3QgPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgcmVmO1xuICAgIHJldHVybiAhIXZhbCAmJiAoKHJlZiA9IHR5cGVvZiB2YWwpID09PSAnZnVuY3Rpb24nIHx8IHJlZiA9PT0gJ29iamVjdCcpO1xuICB9O1xuXG4gIGlzQXJyYXkgPSBmdW5jdGlvbih2YWwpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihBcnJheS5pc0FycmF5KSkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH1cbiAgfTtcblxuICBpc0VtcHR5ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIGtleTtcbiAgICBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4gIXZhbC5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoa2V5IGluIHZhbCkge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbCh2YWwsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgaXNQbGFpbk9iamVjdCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciBjdG9yLCBwcm90bztcbiAgICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiAocHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsKSkgJiYgKGN0b3IgPSBwcm90by5jb25zdHJ1Y3RvcikgJiYgKHR5cGVvZiBjdG9yID09PSAnZnVuY3Rpb24nKSAmJiAoY3RvciBpbnN0YW5jZW9mIGN0b3IpICYmIChGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjdG9yKSA9PT0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoT2JqZWN0KSk7XG4gIH07XG5cbiAgZ2V0VmFsdWUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoaXNGdW5jdGlvbihvYmoudmFsdWVPZikpIHtcbiAgICAgIHJldHVybiBvYmoudmFsdWVPZigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cy5hc3NpZ24gPSBhc3NpZ247XG5cbiAgbW9kdWxlLmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbiAgbW9kdWxlLmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuICBtb2R1bGUuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuICBtb2R1bGUuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcblxuICBtb2R1bGUuZXhwb3J0cy5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtcblxuICBtb2R1bGUuZXhwb3J0cy5nZXRWYWx1ZSA9IGdldFZhbHVlO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxET01JbXBsZW1lbnRhdGlvbjtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERPTUltcGxlbWVudGF0aW9uID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTERPTUltcGxlbWVudGF0aW9uKCkge31cblxuICAgIFhNTERPTUltcGxlbWVudGF0aW9uLnByb3RvdHlwZS5oYXNGZWF0dXJlID0gZnVuY3Rpb24oZmVhdHVyZSwgdmVyc2lvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIFhNTERPTUltcGxlbWVudGF0aW9uLnByb3RvdHlwZS5jcmVhdGVEb2N1bWVudFR5cGUgPSBmdW5jdGlvbihxdWFsaWZpZWROYW1lLCBwdWJsaWNJZCwgc3lzdGVtSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH07XG5cbiAgICBYTUxET01JbXBsZW1lbnRhdGlvbi5wcm90b3R5cGUuY3JlYXRlRG9jdW1lbnQgPSBmdW5jdGlvbihuYW1lc3BhY2VVUkksIHF1YWxpZmllZE5hbWUsIGRvY3R5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH07XG5cbiAgICBYTUxET01JbXBsZW1lbnRhdGlvbi5wcm90b3R5cGUuY3JlYXRlSFRNTERvY3VtZW50ID0gZnVuY3Rpb24odGl0bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH07XG5cbiAgICBYTUxET01JbXBsZW1lbnRhdGlvbi5wcm90b3R5cGUuZ2V0RmVhdHVyZSA9IGZ1bmN0aW9uKGZlYXR1cmUsIHZlcnNpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRE9NSW1wbGVtZW50YXRpb247XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MRE9NRXJyb3JIYW5kbGVyO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRE9NRXJyb3JIYW5kbGVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTERPTUVycm9ySGFuZGxlcigpIHt9XG5cbiAgICBYTUxET01FcnJvckhhbmRsZXIucHJvdG90eXBlLmhhbmRsZUVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxET01FcnJvckhhbmRsZXI7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MRE9NU3RyaW5nTGlzdDtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERPTVN0cmluZ0xpc3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MRE9NU3RyaW5nTGlzdChhcnIpIHtcbiAgICAgIHRoaXMuYXJyID0gYXJyIHx8IFtdO1xuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxET01TdHJpbmdMaXN0LnByb3RvdHlwZSwgJ2xlbmd0aCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFyci5sZW5ndGg7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxET01TdHJpbmdMaXN0LnByb3RvdHlwZS5pdGVtID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiB0aGlzLmFycltpbmRleF0gfHwgbnVsbDtcbiAgICB9O1xuXG4gICAgWE1MRE9NU3RyaW5nTGlzdC5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmFyci5pbmRleE9mKHN0cikgIT09IC0xO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRE9NU3RyaW5nTGlzdDtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxET01Db25maWd1cmF0aW9uLCBYTUxET01FcnJvckhhbmRsZXIsIFhNTERPTVN0cmluZ0xpc3Q7XG5cbiAgWE1MRE9NRXJyb3JIYW5kbGVyID0gcmVxdWlyZSgnLi9YTUxET01FcnJvckhhbmRsZXInKTtcblxuICBYTUxET01TdHJpbmdMaXN0ID0gcmVxdWlyZSgnLi9YTUxET01TdHJpbmdMaXN0Jyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxET01Db25maWd1cmF0aW9uID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTERPTUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgICB2YXIgY2xvbmVkU2VsZjtcbiAgICAgIHRoaXMuZGVmYXVsdFBhcmFtcyA9IHtcbiAgICAgICAgXCJjYW5vbmljYWwtZm9ybVwiOiBmYWxzZSxcbiAgICAgICAgXCJjZGF0YS1zZWN0aW9uc1wiOiBmYWxzZSxcbiAgICAgICAgXCJjb21tZW50c1wiOiBmYWxzZSxcbiAgICAgICAgXCJkYXRhdHlwZS1ub3JtYWxpemF0aW9uXCI6IGZhbHNlLFxuICAgICAgICBcImVsZW1lbnQtY29udGVudC13aGl0ZXNwYWNlXCI6IHRydWUsXG4gICAgICAgIFwiZW50aXRpZXNcIjogdHJ1ZSxcbiAgICAgICAgXCJlcnJvci1oYW5kbGVyXCI6IG5ldyBYTUxET01FcnJvckhhbmRsZXIoKSxcbiAgICAgICAgXCJpbmZvc2V0XCI6IHRydWUsXG4gICAgICAgIFwidmFsaWRhdGUtaWYtc2NoZW1hXCI6IGZhbHNlLFxuICAgICAgICBcIm5hbWVzcGFjZXNcIjogdHJ1ZSxcbiAgICAgICAgXCJuYW1lc3BhY2UtZGVjbGFyYXRpb25zXCI6IHRydWUsXG4gICAgICAgIFwibm9ybWFsaXplLWNoYXJhY3RlcnNcIjogZmFsc2UsXG4gICAgICAgIFwic2NoZW1hLWxvY2F0aW9uXCI6ICcnLFxuICAgICAgICBcInNjaGVtYS10eXBlXCI6ICcnLFxuICAgICAgICBcInNwbGl0LWNkYXRhLXNlY3Rpb25zXCI6IHRydWUsXG4gICAgICAgIFwidmFsaWRhdGVcIjogZmFsc2UsXG4gICAgICAgIFwid2VsbC1mb3JtZWRcIjogdHJ1ZVxuICAgICAgfTtcbiAgICAgIHRoaXMucGFyYW1zID0gY2xvbmVkU2VsZiA9IE9iamVjdC5jcmVhdGUodGhpcy5kZWZhdWx0UGFyYW1zKTtcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRE9NQ29uZmlndXJhdGlvbi5wcm90b3R5cGUsICdwYXJhbWV0ZXJOYW1lcycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgWE1MRE9NU3RyaW5nTGlzdChPYmplY3Qua2V5cyh0aGlzLmRlZmF1bHRQYXJhbXMpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTERPTUNvbmZpZ3VyYXRpb24ucHJvdG90eXBlLmdldFBhcmFtZXRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICh0aGlzLnBhcmFtcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXNbbmFtZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRE9NQ29uZmlndXJhdGlvbi5wcm90b3R5cGUuY2FuU2V0UGFyYW1ldGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBYTUxET01Db25maWd1cmF0aW9uLnByb3RvdHlwZS5zZXRQYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zW25hbWVdID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVsZXRlIHRoaXMucGFyYW1zW25hbWVdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRE9NQ29uZmlndXJhdGlvbjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIEVsZW1lbnQ6IDEsXG4gICAgQXR0cmlidXRlOiAyLFxuICAgIFRleHQ6IDMsXG4gICAgQ0RhdGE6IDQsXG4gICAgRW50aXR5UmVmZXJlbmNlOiA1LFxuICAgIEVudGl0eURlY2xhcmF0aW9uOiA2LFxuICAgIFByb2Nlc3NpbmdJbnN0cnVjdGlvbjogNyxcbiAgICBDb21tZW50OiA4LFxuICAgIERvY3VtZW50OiA5LFxuICAgIERvY1R5cGU6IDEwLFxuICAgIERvY3VtZW50RnJhZ21lbnQ6IDExLFxuICAgIE5vdGF0aW9uRGVjbGFyYXRpb246IDEyLFxuICAgIERlY2xhcmF0aW9uOiAyMDEsXG4gICAgUmF3OiAyMDIsXG4gICAgQXR0cmlidXRlRGVjbGFyYXRpb246IDIwMyxcbiAgICBFbGVtZW50RGVjbGFyYXRpb246IDIwNCxcbiAgICBEdW1teTogMjA1XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxBdHRyaWJ1dGUsIFhNTE5vZGU7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MQXR0cmlidXRlID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTEF0dHJpYnV0ZShwYXJlbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLnBhcmVudC5vcHRpb25zO1xuICAgICAgICB0aGlzLnN0cmluZ2lmeSA9IHRoaXMucGFyZW50LnN0cmluZ2lmeTtcbiAgICAgIH1cbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBhdHRyaWJ1dGUgbmFtZS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5uYW1lKG5hbWUpO1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmF0dFZhbHVlKHZhbHVlKTtcbiAgICAgIHRoaXMudHlwZSA9IE5vZGVUeXBlLkF0dHJpYnV0ZTtcbiAgICAgIHRoaXMuaXNJZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zY2hlbWFUeXBlSW5mbyA9IG51bGw7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUsICdub2RlVHlwZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MQXR0cmlidXRlLnByb3RvdHlwZSwgJ293bmVyRWxlbWVudCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxBdHRyaWJ1dGUucHJvdG90eXBlLCAndGV4dENvbnRlbnQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID0gdmFsdWUgfHwgJyc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MQXR0cmlidXRlLnByb3RvdHlwZSwgJ25hbWVzcGFjZVVSSScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxBdHRyaWJ1dGUucHJvdG90eXBlLCAncHJlZml4Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUsICdsb2NhbE5hbWUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUsICdzcGVjaWZpZWQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxBdHRyaWJ1dGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuYXR0cmlidXRlKHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUuZGVidWdJbmZvID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgbmFtZSA9IG5hbWUgfHwgdGhpcy5uYW1lO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gXCJwYXJlbnQ6IDxcIiArIHRoaXMucGFyZW50Lm5hbWUgKyBcIj5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcImF0dHJpYnV0ZToge1wiICsgbmFtZSArIFwifSwgcGFyZW50OiA8XCIgKyB0aGlzLnBhcmVudC5uYW1lICsgXCI+XCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTEF0dHJpYnV0ZS5wcm90b3R5cGUuaXNFcXVhbE5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICBpZiAobm9kZS5uYW1lc3BhY2VVUkkgIT09IHRoaXMubmFtZXNwYWNlVVJJKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnByZWZpeCAhPT0gdGhpcy5wcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUubG9jYWxOYW1lICE9PSB0aGlzLmxvY2FsTmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS52YWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTEF0dHJpYnV0ZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxOYW1lZE5vZGVNYXA7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxOYW1lZE5vZGVNYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MTmFtZWROb2RlTWFwKG5vZGVzKSB7XG4gICAgICB0aGlzLm5vZGVzID0gbm9kZXM7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUsICdsZW5ndGgnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5ub2RlcykubGVuZ3RoIHx8IDA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxOYW1lZE5vZGVNYXAucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlcyA9IG51bGw7XG4gICAgfTtcblxuICAgIFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUuZ2V0TmFtZWRJdGVtID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZXNbbmFtZV07XG4gICAgfTtcblxuICAgIFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUuc2V0TmFtZWRJdGVtID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIG9sZE5vZGU7XG4gICAgICBvbGROb2RlID0gdGhpcy5ub2Rlc1tub2RlLm5vZGVOYW1lXTtcbiAgICAgIHRoaXMubm9kZXNbbm9kZS5ub2RlTmFtZV0gPSBub2RlO1xuICAgICAgcmV0dXJuIG9sZE5vZGUgfHwgbnVsbDtcbiAgICB9O1xuXG4gICAgWE1MTmFtZWROb2RlTWFwLnByb3RvdHlwZS5yZW1vdmVOYW1lZEl0ZW0gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgb2xkTm9kZTtcbiAgICAgIG9sZE5vZGUgPSB0aGlzLm5vZGVzW25hbWVdO1xuICAgICAgZGVsZXRlIHRoaXMubm9kZXNbbmFtZV07XG4gICAgICByZXR1cm4gb2xkTm9kZSB8fCBudWxsO1xuICAgIH07XG5cbiAgICBYTUxOYW1lZE5vZGVNYXAucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZXNbT2JqZWN0LmtleXModGhpcy5ub2RlcylbaW5kZXhdXSB8fCBudWxsO1xuICAgIH07XG5cbiAgICBYTUxOYW1lZE5vZGVNYXAucHJvdG90eXBlLmdldE5hbWVkSXRlbU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH07XG5cbiAgICBYTUxOYW1lZE5vZGVNYXAucHJvdG90eXBlLnNldE5hbWVkSXRlbU5TID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcblxuICAgIFhNTE5hbWVkTm9kZU1hcC5wcm90b3R5cGUucmVtb3ZlTmFtZWRJdGVtTlMgPSBmdW5jdGlvbihuYW1lc3BhY2VVUkksIGxvY2FsTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxOYW1lZE5vZGVNYXA7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFhNTEF0dHJpYnV0ZSwgWE1MRWxlbWVudCwgWE1MTmFtZWROb2RlTWFwLCBYTUxOb2RlLCBnZXRWYWx1ZSwgaXNGdW5jdGlvbiwgaXNPYmplY3QsIHJlZixcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIHJlZiA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLCBpc09iamVjdCA9IHJlZi5pc09iamVjdCwgaXNGdW5jdGlvbiA9IHJlZi5pc0Z1bmN0aW9uLCBnZXRWYWx1ZSA9IHJlZi5nZXRWYWx1ZTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MQXR0cmlidXRlID0gcmVxdWlyZSgnLi9YTUxBdHRyaWJ1dGUnKTtcblxuICBYTUxOYW1lZE5vZGVNYXAgPSByZXF1aXJlKCcuL1hNTE5hbWVkTm9kZU1hcCcpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRWxlbWVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTEVsZW1lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MRWxlbWVudChwYXJlbnQsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgIHZhciBjaGlsZCwgaiwgbGVuLCByZWYxO1xuICAgICAgWE1MRWxlbWVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGVsZW1lbnQgbmFtZS4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubmFtZSA9IHRoaXMuc3RyaW5naWZ5Lm5hbWUobmFtZSk7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5FbGVtZW50O1xuICAgICAgdGhpcy5hdHRyaWJzID0ge307XG4gICAgICB0aGlzLnNjaGVtYVR5cGVJbmZvID0gbnVsbDtcbiAgICAgIGlmIChhdHRyaWJ1dGVzICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGUoYXR0cmlidXRlcyk7XG4gICAgICB9XG4gICAgICBpZiAocGFyZW50LnR5cGUgPT09IE5vZGVUeXBlLkRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMuaXNSb290ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kb2N1bWVudE9iamVjdCA9IHBhcmVudDtcbiAgICAgICAgcGFyZW50LnJvb3RPYmplY3QgPSB0aGlzO1xuICAgICAgICBpZiAocGFyZW50LmNoaWxkcmVuKSB7XG4gICAgICAgICAgcmVmMSA9IHBhcmVudC5jaGlsZHJlbjtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IHJlZjFbal07XG4gICAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuRG9jVHlwZSkge1xuICAgICAgICAgICAgICBjaGlsZC5uYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRWxlbWVudC5wcm90b3R5cGUsICd0YWdOYW1lJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ25hbWVzcGFjZVVSSScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ3ByZWZpeCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2xvY2FsTmFtZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRWxlbWVudC5wcm90b3R5cGUsICdpZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2NsYXNzTmFtZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2NsYXNzTGlzdCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2F0dHJpYnV0ZXMnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuYXR0cmlidXRlTWFwIHx8ICF0aGlzLmF0dHJpYnV0ZU1hcC5ub2Rlcykge1xuICAgICAgICAgIHRoaXMuYXR0cmlidXRlTWFwID0gbmV3IFhNTE5hbWVkTm9kZU1hcCh0aGlzLmF0dHJpYnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZU1hcDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXR0LCBhdHROYW1lLCBjbG9uZWRTZWxmLCByZWYxO1xuICAgICAgY2xvbmVkU2VsZiA9IE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgICBpZiAoY2xvbmVkU2VsZi5pc1Jvb3QpIHtcbiAgICAgICAgY2xvbmVkU2VsZi5kb2N1bWVudE9iamVjdCA9IG51bGw7XG4gICAgICB9XG4gICAgICBjbG9uZWRTZWxmLmF0dHJpYnMgPSB7fTtcbiAgICAgIHJlZjEgPSB0aGlzLmF0dHJpYnM7XG4gICAgICBmb3IgKGF0dE5hbWUgaW4gcmVmMSkge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYxLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgIGF0dCA9IHJlZjFbYXR0TmFtZV07XG4gICAgICAgIGNsb25lZFNlbGYuYXR0cmlic1thdHROYW1lXSA9IGF0dC5jbG9uZSgpO1xuICAgICAgfVxuICAgICAgY2xvbmVkU2VsZi5jaGlsZHJlbiA9IFtdO1xuICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgIHZhciBjbG9uZWRDaGlsZDtcbiAgICAgICAgY2xvbmVkQ2hpbGQgPSBjaGlsZC5jbG9uZSgpO1xuICAgICAgICBjbG9uZWRDaGlsZC5wYXJlbnQgPSBjbG9uZWRTZWxmO1xuICAgICAgICByZXR1cm4gY2xvbmVkU2VsZi5jaGlsZHJlbi5wdXNoKGNsb25lZENoaWxkKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNsb25lZFNlbGY7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgYXR0TmFtZSwgYXR0VmFsdWU7XG4gICAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgICAgICBmb3IgKGF0dE5hbWUgaW4gbmFtZSkge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG5hbWUsIGF0dE5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgICBhdHRWYWx1ZSA9IG5hbWVbYXR0TmFtZV07XG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGUoYXR0TmFtZSwgYXR0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5rZWVwTnVsbEF0dHJpYnV0ZXMgJiYgKHZhbHVlID09IG51bGwpKSB7XG4gICAgICAgICAgdGhpcy5hdHRyaWJzW25hbWVdID0gbmV3IFhNTEF0dHJpYnV0ZSh0aGlzLCBuYW1lLCBcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5hdHRyaWJzW25hbWVdID0gbmV3IFhNTEF0dHJpYnV0ZSh0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgYXR0TmFtZSwgaiwgbGVuO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGF0dHJpYnV0ZSBuYW1lLiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgbmFtZSA9IGdldFZhbHVlKG5hbWUpO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZSkpIHtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gbmFtZS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGF0dE5hbWUgPSBuYW1lW2pdO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmF0dHJpYnNbYXR0TmFtZV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmF0dHJpYnNbbmFtZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5lbGVtZW50KHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmF0dCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5hID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICh0aGlzLmF0dHJpYnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlic1tuYW1lXS52YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOb2RlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgaWYgKHRoaXMuYXR0cmlicy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJzW25hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5vZGUgPSBmdW5jdGlvbihuZXdBdHRyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZU5vZGUgPSBmdW5jdGlvbihvbGRBdHRyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWdOYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBxdWFsaWZpZWROYW1lLCB2YWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEF0dHJpYnV0ZU5vZGVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5vZGVOUyA9IGZ1bmN0aW9uKG5ld0F0dHIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnMuaGFzT3duUHJvcGVydHkobmFtZSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmhhc0F0dHJpYnV0ZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuc2V0SWRBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCBpc0lkKSB7XG4gICAgICBpZiAodGhpcy5hdHRyaWJzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnNbbmFtZV0uaXNJZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpc0lkO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5zZXRJZEF0dHJpYnV0ZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUsIGlzSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuc2V0SWRBdHRyaWJ1dGVOb2RlID0gZnVuY3Rpb24oaWRBdHRyLCBpc0lkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWdOYW1lID0gZnVuY3Rpb24odGFnbmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5VGFnTmFtZU5TID0gZnVuY3Rpb24obmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IGZ1bmN0aW9uKGNsYXNzTmFtZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuaXNFcXVhbE5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgaSwgaiwgcmVmMTtcbiAgICAgIGlmICghWE1MRWxlbWVudC5fX3N1cGVyX18uaXNFcXVhbE5vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKS5pc0VxdWFsTm9kZShub2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5uYW1lc3BhY2VVUkkgIT09IHRoaXMubmFtZXNwYWNlVVJJKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnByZWZpeCAhPT0gdGhpcy5wcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUubG9jYWxOYW1lICE9PSB0aGlzLmxvY2FsTmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5hdHRyaWJzLmxlbmd0aCAhPT0gdGhpcy5hdHRyaWJzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSBqID0gMCwgcmVmMSA9IHRoaXMuYXR0cmlicy5sZW5ndGggLSAxOyAwIDw9IHJlZjEgPyBqIDw9IHJlZjEgOiBqID49IHJlZjE7IGkgPSAwIDw9IHJlZjEgPyArK2ogOiAtLWopIHtcbiAgICAgICAgaWYgKCF0aGlzLmF0dHJpYnNbaV0uaXNFcXVhbE5vZGUobm9kZS5hdHRyaWJzW2ldKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxFbGVtZW50O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxDaGFyYWN0ZXJEYXRhLCBYTUxOb2RlLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MQ2hhcmFjdGVyRGF0YSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTENoYXJhY3RlckRhdGEsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MQ2hhcmFjdGVyRGF0YShwYXJlbnQpIHtcbiAgICAgIFhNTENoYXJhY3RlckRhdGEuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIHRoaXMudmFsdWUgPSAnJztcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUsICdkYXRhJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9IHZhbHVlIHx8ICcnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLCAnbGVuZ3RoJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUubGVuZ3RoO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLCAndGV4dENvbnRlbnQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID0gdmFsdWUgfHwgJyc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxDaGFyYWN0ZXJEYXRhLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgfTtcblxuICAgIFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLnN1YnN0cmluZ0RhdGEgPSBmdW5jdGlvbihvZmZzZXQsIGNvdW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLmFwcGVuZERhdGEgPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUuaW5zZXJ0RGF0YSA9IGZ1bmN0aW9uKG9mZnNldCwgYXJnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLmRlbGV0ZURhdGEgPSBmdW5jdGlvbihvZmZzZXQsIGNvdW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLnJlcGxhY2VEYXRhID0gZnVuY3Rpb24ob2Zmc2V0LCBjb3VudCwgYXJnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTENoYXJhY3RlckRhdGEucHJvdG90eXBlLmlzRXF1YWxOb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKCFYTUxDaGFyYWN0ZXJEYXRhLl9fc3VwZXJfXy5pc0VxdWFsTm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLmlzRXF1YWxOb2RlKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmRhdGEgIT09IHRoaXMuZGF0YSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTENoYXJhY3RlckRhdGE7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxDRGF0YSwgWE1MQ2hhcmFjdGVyRGF0YSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIFhNTENoYXJhY3RlckRhdGEgPSByZXF1aXJlKCcuL1hNTENoYXJhY3RlckRhdGEnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTENEYXRhID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MQ0RhdGEsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MQ0RhdGEocGFyZW50LCB0ZXh0KSB7XG4gICAgICBYTUxDRGF0YS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIENEQVRBIHRleHQuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSBcIiNjZGF0YS1zZWN0aW9uXCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5DRGF0YTtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnN0cmluZ2lmeS5jZGF0YSh0ZXh0KTtcbiAgICB9XG5cbiAgICBYTUxDRGF0YS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxDRGF0YS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5jZGF0YSh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MQ0RhdGE7XG5cbiAgfSkoWE1MQ2hhcmFjdGVyRGF0YSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxDaGFyYWN0ZXJEYXRhLCBYTUxDb21tZW50LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MQ2hhcmFjdGVyRGF0YSA9IHJlcXVpcmUoJy4vWE1MQ2hhcmFjdGVyRGF0YScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MQ29tbWVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTENvbW1lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MQ29tbWVudChwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTENvbW1lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmICh0ZXh0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjb21tZW50IHRleHQuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSBcIiNjb21tZW50XCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5Db21tZW50O1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmNvbW1lbnQodGV4dCk7XG4gICAgfVxuXG4gICAgWE1MQ29tbWVudC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxDb21tZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLmNvbW1lbnQodGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTENvbW1lbnQ7XG5cbiAgfSkoWE1MQ2hhcmFjdGVyRGF0YSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxEZWNsYXJhdGlvbiwgWE1MTm9kZSwgaXNPYmplY3QsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBpc09iamVjdCA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLmlzT2JqZWN0O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERlY2xhcmF0aW9uID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MRGVjbGFyYXRpb24sIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MRGVjbGFyYXRpb24ocGFyZW50LCB2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgdmFyIHJlZjtcbiAgICAgIFhNTERlY2xhcmF0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAoaXNPYmplY3QodmVyc2lvbikpIHtcbiAgICAgICAgcmVmID0gdmVyc2lvbiwgdmVyc2lvbiA9IHJlZi52ZXJzaW9uLCBlbmNvZGluZyA9IHJlZi5lbmNvZGluZywgc3RhbmRhbG9uZSA9IHJlZi5zdGFuZGFsb25lO1xuICAgICAgfVxuICAgICAgaWYgKCF2ZXJzaW9uKSB7XG4gICAgICAgIHZlcnNpb24gPSAnMS4wJztcbiAgICAgIH1cbiAgICAgIHRoaXMudHlwZSA9IE5vZGVUeXBlLkRlY2xhcmF0aW9uO1xuICAgICAgdGhpcy52ZXJzaW9uID0gdGhpcy5zdHJpbmdpZnkueG1sVmVyc2lvbih2ZXJzaW9uKTtcbiAgICAgIGlmIChlbmNvZGluZyAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuZW5jb2RpbmcgPSB0aGlzLnN0cmluZ2lmeS54bWxFbmNvZGluZyhlbmNvZGluZyk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhbmRhbG9uZSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhbmRhbG9uZSA9IHRoaXMuc3RyaW5naWZ5LnhtbFN0YW5kYWxvbmUoc3RhbmRhbG9uZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MRGVjbGFyYXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuZGVjbGFyYXRpb24odGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERlY2xhcmF0aW9uO1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MRFREQXR0TGlzdCwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERUREF0dExpc3QgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEVERBdHRMaXN0LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERUREF0dExpc3QocGFyZW50LCBlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICBYTUxEVERBdHRMaXN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAoZWxlbWVudE5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBlbGVtZW50IG5hbWUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICBpZiAoYXR0cmlidXRlTmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGF0dHJpYnV0ZSBuYW1lLiBcIiArIHRoaXMuZGVidWdJbmZvKGVsZW1lbnROYW1lKSk7XG4gICAgICB9XG4gICAgICBpZiAoIWF0dHJpYnV0ZVR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBEVEQgYXR0cmlidXRlIHR5cGUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oZWxlbWVudE5hbWUpKTtcbiAgICAgIH1cbiAgICAgIGlmICghZGVmYXVsdFZhbHVlVHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBhdHRyaWJ1dGUgZGVmYXVsdC4gXCIgKyB0aGlzLmRlYnVnSW5mbyhlbGVtZW50TmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGRlZmF1bHRWYWx1ZVR5cGUuaW5kZXhPZignIycpICE9PSAwKSB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZVR5cGUgPSAnIycgKyBkZWZhdWx0VmFsdWVUeXBlO1xuICAgICAgfVxuICAgICAgaWYgKCFkZWZhdWx0VmFsdWVUeXBlLm1hdGNoKC9eKCNSRVFVSVJFRHwjSU1QTElFRHwjRklYRUR8I0RFRkFVTFQpJC8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGVmYXVsdCB2YWx1ZSB0eXBlOyBleHBlY3RlZDogI1JFUVVJUkVELCAjSU1QTElFRCwgI0ZJWEVEIG9yICNERUZBVUxULiBcIiArIHRoaXMuZGVidWdJbmZvKGVsZW1lbnROYW1lKSk7XG4gICAgICB9XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlICYmICFkZWZhdWx0VmFsdWVUeXBlLm1hdGNoKC9eKCNGSVhFRHwjREVGQVVMVCkkLykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGVmYXVsdCB2YWx1ZSBvbmx5IGFwcGxpZXMgdG8gI0ZJWEVEIG9yICNERUZBVUxULiBcIiArIHRoaXMuZGVidWdJbmZvKGVsZW1lbnROYW1lKSk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsZW1lbnROYW1lID0gdGhpcy5zdHJpbmdpZnkubmFtZShlbGVtZW50TmFtZSk7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5BdHRyaWJ1dGVEZWNsYXJhdGlvbjtcbiAgICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9IHRoaXMuc3RyaW5naWZ5Lm5hbWUoYXR0cmlidXRlTmFtZSk7XG4gICAgICB0aGlzLmF0dHJpYnV0ZVR5cGUgPSB0aGlzLnN0cmluZ2lmeS5kdGRBdHRUeXBlKGF0dHJpYnV0ZVR5cGUpO1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmR0ZEF0dERlZmF1bHQoZGVmYXVsdFZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGVmYXVsdFZhbHVlVHlwZSA9IGRlZmF1bHRWYWx1ZVR5cGU7XG4gICAgfVxuXG4gICAgWE1MRFREQXR0TGlzdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kdGRBdHRMaXN0KHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEVERBdHRMaXN0O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MRFRERW50aXR5LCBYTUxOb2RlLCBpc09iamVjdCxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9VdGlsaXR5JykuaXNPYmplY3Q7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRFRERW50aXR5ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MRFRERW50aXR5LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERUREVudGl0eShwYXJlbnQsIHBlLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgWE1MRFRERW50aXR5Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGVudGl0eSBuYW1lLiBcIiArIHRoaXMuZGVidWdJbmZvKG5hbWUpKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGVudGl0eSB2YWx1ZS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICB0aGlzLnBlID0gISFwZTtcbiAgICAgIHRoaXMubmFtZSA9IHRoaXMuc3RyaW5naWZ5Lm5hbWUobmFtZSk7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5FbnRpdHlEZWNsYXJhdGlvbjtcbiAgICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnN0cmluZ2lmeS5kdGRFbnRpdHlWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMuaW50ZXJuYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF2YWx1ZS5wdWJJRCAmJiAhdmFsdWUuc3lzSUQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQdWJsaWMgYW5kL29yIHN5c3RlbSBpZGVudGlmaWVycyBhcmUgcmVxdWlyZWQgZm9yIGFuIGV4dGVybmFsIGVudGl0eS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlLnB1YklEICYmICF2YWx1ZS5zeXNJRCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5c3RlbSBpZGVudGlmaWVyIGlzIHJlcXVpcmVkIGZvciBhIHB1YmxpYyBleHRlcm5hbCBlbnRpdHkuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW50ZXJuYWwgPSBmYWxzZTtcbiAgICAgICAgaWYgKHZhbHVlLnB1YklEICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLnB1YklEID0gdGhpcy5zdHJpbmdpZnkuZHRkUHViSUQodmFsdWUucHViSUQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZS5zeXNJRCAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5zeXNJRCA9IHRoaXMuc3RyaW5naWZ5LmR0ZFN5c0lEKHZhbHVlLnN5c0lEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUubkRhdGEgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMubkRhdGEgPSB0aGlzLnN0cmluZ2lmeS5kdGRORGF0YSh2YWx1ZS5uRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGUgJiYgdGhpcy5uRGF0YSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdGF0aW9uIGRlY2xhcmF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIGEgcGFyYW1ldGVyIGVudGl0eS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRFRERW50aXR5LnByb3RvdHlwZSwgJ3B1YmxpY0lkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHViSUQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRFRERW50aXR5LnByb3RvdHlwZSwgJ3N5c3RlbUlkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3lzSUQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRFRERW50aXR5LnByb3RvdHlwZSwgJ25vdGF0aW9uTmFtZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5EYXRhIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRFRERW50aXR5LnByb3RvdHlwZSwgJ2lucHV0RW5jb2RpbmcnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEVERFbnRpdHkucHJvdG90eXBlLCAneG1sRW5jb2RpbmcnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEVERFbnRpdHkucHJvdG90eXBlLCAneG1sVmVyc2lvbicsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgWE1MRFRERW50aXR5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLmR0ZEVudGl0eSh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRFRERW50aXR5O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MRFRERWxlbWVudCwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERUREVsZW1lbnQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEVERFbGVtZW50LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERUREVsZW1lbnQocGFyZW50LCBuYW1lLCB2YWx1ZSkge1xuICAgICAgWE1MRFRERWxlbWVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBlbGVtZW50IG5hbWUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gJygjUENEQVRBKSc7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSAnKCcgKyB2YWx1ZS5qb2luKCcsJykgKyAnKSc7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5uYW1lKG5hbWUpO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRWxlbWVudERlY2xhcmF0aW9uO1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmR0ZEVsZW1lbnRWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgWE1MRFRERWxlbWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kdGRFbGVtZW50KHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEVERFbGVtZW50O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MRFRETm90YXRpb24sIFhNTE5vZGUsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEVEROb3RhdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERURE5vdGF0aW9uLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERURE5vdGF0aW9uKHBhcmVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICAgIFhNTERURE5vdGF0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIG5vdGF0aW9uIG5hbWUuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWx1ZS5wdWJJRCAmJiAhdmFsdWUuc3lzSUQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHVibGljIG9yIHN5c3RlbSBpZGVudGlmaWVycyBhcmUgcmVxdWlyZWQgZm9yIGFuIGV4dGVybmFsIGVudGl0eS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5uYW1lKG5hbWUpO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuTm90YXRpb25EZWNsYXJhdGlvbjtcbiAgICAgIGlmICh2YWx1ZS5wdWJJRCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucHViSUQgPSB0aGlzLnN0cmluZ2lmeS5kdGRQdWJJRCh2YWx1ZS5wdWJJRCk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUuc3lzSUQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnN5c0lEID0gdGhpcy5zdHJpbmdpZnkuZHRkU3lzSUQodmFsdWUuc3lzSUQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEVEROb3RhdGlvbi5wcm90b3R5cGUsICdwdWJsaWNJZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1YklEO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERURE5vdGF0aW9uLnByb3RvdHlwZSwgJ3N5c3RlbUlkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3lzSUQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxEVEROb3RhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5kdGROb3RhdGlvbih0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRFRETm90YXRpb247XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxEVERBdHRMaXN0LCBYTUxEVERFbGVtZW50LCBYTUxEVERFbnRpdHksIFhNTERURE5vdGF0aW9uLCBYTUxEb2NUeXBlLCBYTUxOYW1lZE5vZGVNYXAsIFhNTE5vZGUsIGlzT2JqZWN0LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgaXNPYmplY3QgPSByZXF1aXJlKCcuL1V0aWxpdHknKS5pc09iamVjdDtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MRFREQXR0TGlzdCA9IHJlcXVpcmUoJy4vWE1MRFREQXR0TGlzdCcpO1xuXG4gIFhNTERUREVudGl0eSA9IHJlcXVpcmUoJy4vWE1MRFRERW50aXR5Jyk7XG5cbiAgWE1MRFRERWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRFRERWxlbWVudCcpO1xuXG4gIFhNTERURE5vdGF0aW9uID0gcmVxdWlyZSgnLi9YTUxEVEROb3RhdGlvbicpO1xuXG4gIFhNTE5hbWVkTm9kZU1hcCA9IHJlcXVpcmUoJy4vWE1MTmFtZWROb2RlTWFwJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEb2NUeXBlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MRG9jVHlwZSwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxEb2NUeXBlKHBhcmVudCwgcHViSUQsIHN5c0lEKSB7XG4gICAgICB2YXIgY2hpbGQsIGksIGxlbiwgcmVmLCByZWYxLCByZWYyO1xuICAgICAgWE1MRG9jVHlwZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRG9jVHlwZTtcbiAgICAgIGlmIChwYXJlbnQuY2hpbGRyZW4pIHtcbiAgICAgICAgcmVmID0gcGFyZW50LmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gY2hpbGQubmFtZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5kb2N1bWVudE9iamVjdCA9IHBhcmVudDtcbiAgICAgIGlmIChpc09iamVjdChwdWJJRCkpIHtcbiAgICAgICAgcmVmMSA9IHB1YklELCBwdWJJRCA9IHJlZjEucHViSUQsIHN5c0lEID0gcmVmMS5zeXNJRDtcbiAgICAgIH1cbiAgICAgIGlmIChzeXNJRCA9PSBudWxsKSB7XG4gICAgICAgIHJlZjIgPSBbcHViSUQsIHN5c0lEXSwgc3lzSUQgPSByZWYyWzBdLCBwdWJJRCA9IHJlZjJbMV07XG4gICAgICB9XG4gICAgICBpZiAocHViSUQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnB1YklEID0gdGhpcy5zdHJpbmdpZnkuZHRkUHViSUQocHViSUQpO1xuICAgICAgfVxuICAgICAgaWYgKHN5c0lEICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zeXNJRCA9IHRoaXMuc3RyaW5naWZ5LmR0ZFN5c0lEKHN5c0lEKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jVHlwZS5wcm90b3R5cGUsICdlbnRpdGllcycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCBub2RlcywgcmVmO1xuICAgICAgICBub2RlcyA9IHt9O1xuICAgICAgICByZWYgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgICBpZiAoKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkVudGl0eURlY2xhcmF0aW9uKSAmJiAhY2hpbGQucGUpIHtcbiAgICAgICAgICAgIG5vZGVzW2NoaWxkLm5hbWVdID0gY2hpbGQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWE1MTmFtZWROb2RlTWFwKG5vZGVzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2NUeXBlLnByb3RvdHlwZSwgJ25vdGF0aW9ucycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCBub2RlcywgcmVmO1xuICAgICAgICBub2RlcyA9IHt9O1xuICAgICAgICByZWYgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuTm90YXRpb25EZWNsYXJhdGlvbikge1xuICAgICAgICAgICAgbm9kZXNbY2hpbGQubmFtZV0gPSBjaGlsZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBYTUxOYW1lZE5vZGVNYXAobm9kZXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY1R5cGUucHJvdG90eXBlLCAncHVibGljSWQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wdWJJRDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2NUeXBlLnByb3RvdHlwZSwgJ3N5c3RlbUlkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3lzSUQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jVHlwZS5wcm90b3R5cGUsICdpbnRlcm5hbFN1YnNldCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmVsZW1lbnQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRERWxlbWVudCh0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmF0dExpc3QgPSBmdW5jdGlvbihlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxEVERBdHRMaXN0KHRoaXMsIGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5lbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRERW50aXR5KHRoaXMsIGZhbHNlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLnBFbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRERW50aXR5KHRoaXMsIHRydWUsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUubm90YXRpb24gPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRETm90YXRpb24odGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLmRvY1R5cGUodGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUuZWxlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5hdHQgPSBmdW5jdGlvbihlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRMaXN0KGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5lbnQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZW50aXR5KG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUucGVudCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5wRW50aXR5KG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUubm90ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vdGF0aW9uKG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJvb3QoKSB8fCB0aGlzLmRvY3VtZW50T2JqZWN0O1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5pc0VxdWFsTm9kZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmICghWE1MRG9jVHlwZS5fX3N1cGVyX18uaXNFcXVhbE5vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKS5pc0VxdWFsTm9kZShub2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5uYW1lICE9PSB0aGlzLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUucHVibGljSWQgIT09IHRoaXMucHVibGljSWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuc3lzdGVtSWQgIT09IHRoaXMuc3lzdGVtSWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEb2NUeXBlO1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MTm9kZSwgWE1MUmF3LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MUmF3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MUmF3LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFJhdyhwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTFJhdy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJhdyB0ZXh0LiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuUmF3O1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LnJhdyh0ZXh0KTtcbiAgICB9XG5cbiAgICBYTUxSYXcucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MUmF3LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnJhdyh0aGlzLCB0aGlzLm9wdGlvbnMud3JpdGVyLmZpbHRlck9wdGlvbnMob3B0aW9ucykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MUmF3O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MQ2hhcmFjdGVyRGF0YSwgWE1MVGV4dCxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIFhNTENoYXJhY3RlckRhdGEgPSByZXF1aXJlKCcuL1hNTENoYXJhY3RlckRhdGEnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTFRleHQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxUZXh0LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFRleHQocGFyZW50LCB0ZXh0KSB7XG4gICAgICBYTUxUZXh0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAodGV4dCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZWxlbWVudCB0ZXh0LiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5uYW1lID0gXCIjdGV4dFwiO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuVGV4dDtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnN0cmluZ2lmeS50ZXh0KHRleHQpO1xuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxUZXh0LnByb3RvdHlwZSwgJ2lzRWxlbWVudENvbnRlbnRXaGl0ZXNwYWNlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTFRleHQucHJvdG90eXBlLCAnd2hvbGVUZXh0Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5leHQsIHByZXYsIHN0cjtcbiAgICAgICAgc3RyID0gJyc7XG4gICAgICAgIHByZXYgPSB0aGlzLnByZXZpb3VzU2libGluZztcbiAgICAgICAgd2hpbGUgKHByZXYpIHtcbiAgICAgICAgICBzdHIgPSBwcmV2LmRhdGEgKyBzdHI7XG4gICAgICAgICAgcHJldiA9IHByZXYucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIHN0ciArPSB0aGlzLmRhdGE7XG4gICAgICAgIG5leHQgPSB0aGlzLm5leHRTaWJsaW5nO1xuICAgICAgICB3aGlsZSAobmV4dCkge1xuICAgICAgICAgIHN0ciA9IHN0ciArIG5leHQuZGF0YTtcbiAgICAgICAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgWE1MVGV4dC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxUZXh0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnRleHQodGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgWE1MVGV4dC5wcm90b3R5cGUuc3BsaXRUZXh0ID0gZnVuY3Rpb24ob2Zmc2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTFRleHQucHJvdG90eXBlLnJlcGxhY2VXaG9sZVRleHQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxUZXh0O1xuXG4gIH0pKFhNTENoYXJhY3RlckRhdGEpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MQ2hhcmFjdGVyRGF0YSwgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MQ2hhcmFjdGVyRGF0YSA9IHJlcXVpcmUoJy4vWE1MQ2hhcmFjdGVyRGF0YScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbihwYXJlbnQsIHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgaW5zdHJ1Y3Rpb24gdGFyZ2V0LiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuUHJvY2Vzc2luZ0luc3RydWN0aW9uO1xuICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLnN0cmluZ2lmeS5pbnNUYXJnZXQodGFyZ2V0KTtcbiAgICAgIHRoaXMubmFtZSA9IHRoaXMudGFyZ2V0O1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnN0cmluZ2lmeS5pbnNWYWx1ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgfTtcblxuICAgIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24odGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICB9O1xuXG4gICAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLnByb3RvdHlwZS5pc0VxdWFsTm9kZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmICghWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLl9fc3VwZXJfXy5pc0VxdWFsTm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLmlzRXF1YWxOb2RlKG5vZGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnRhcmdldCAhPT0gdGhpcy50YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb247XG5cbiAgfSkoWE1MQ2hhcmFjdGVyRGF0YSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBYTUxEdW1teSwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTER1bW15ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MRHVtbXksIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MRHVtbXkocGFyZW50KSB7XG4gICAgICBYTUxEdW1teS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRHVtbXk7XG4gICAgfVxuXG4gICAgWE1MRHVtbXkucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MRHVtbXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRHVtbXk7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTE5vZGVMaXN0O1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MTm9kZUxpc3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MTm9kZUxpc3Qobm9kZXMpIHtcbiAgICAgIHRoaXMubm9kZXMgPSBub2RlcztcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZUxpc3QucHJvdG90eXBlLCAnbGVuZ3RoJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXMubGVuZ3RoIHx8IDA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxOb2RlTGlzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGVzID0gbnVsbDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZUxpc3QucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZXNbaW5kZXhdIHx8IG51bGw7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxOb2RlTGlzdDtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIERpc2Nvbm5lY3RlZDogMSxcbiAgICBQcmVjZWRpbmc6IDIsXG4gICAgRm9sbG93aW5nOiA0LFxuICAgIENvbnRhaW5zOiA4LFxuICAgIENvbnRhaW5lZEJ5OiAxNixcbiAgICBJbXBsZW1lbnRhdGlvblNwZWNpZmljOiAzMlxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBEb2N1bWVudFBvc2l0aW9uLCBOb2RlVHlwZSwgWE1MQ0RhdGEsIFhNTENvbW1lbnQsIFhNTERlY2xhcmF0aW9uLCBYTUxEb2NUeXBlLCBYTUxEdW1teSwgWE1MRWxlbWVudCwgWE1MTmFtZWROb2RlTWFwLCBYTUxOb2RlLCBYTUxOb2RlTGlzdCwgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLCBYTUxSYXcsIFhNTFRleHQsIGdldFZhbHVlLCBpc0VtcHR5LCBpc0Z1bmN0aW9uLCBpc09iamVjdCwgcmVmMSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgcmVmMSA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLCBpc09iamVjdCA9IHJlZjEuaXNPYmplY3QsIGlzRnVuY3Rpb24gPSByZWYxLmlzRnVuY3Rpb24sIGlzRW1wdHkgPSByZWYxLmlzRW1wdHksIGdldFZhbHVlID0gcmVmMS5nZXRWYWx1ZTtcblxuICBYTUxFbGVtZW50ID0gbnVsbDtcblxuICBYTUxDRGF0YSA9IG51bGw7XG5cbiAgWE1MQ29tbWVudCA9IG51bGw7XG5cbiAgWE1MRGVjbGFyYXRpb24gPSBudWxsO1xuXG4gIFhNTERvY1R5cGUgPSBudWxsO1xuXG4gIFhNTFJhdyA9IG51bGw7XG5cbiAgWE1MVGV4dCA9IG51bGw7XG5cbiAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gbnVsbDtcblxuICBYTUxEdW1teSA9IG51bGw7XG5cbiAgTm9kZVR5cGUgPSBudWxsO1xuXG4gIFhNTE5vZGVMaXN0ID0gbnVsbDtcblxuICBYTUxOYW1lZE5vZGVNYXAgPSBudWxsO1xuXG4gIERvY3VtZW50UG9zaXRpb24gPSBudWxsO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MTm9kZSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBYTUxOb2RlKHBhcmVudDEpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50MTtcbiAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLnBhcmVudC5vcHRpb25zO1xuICAgICAgICB0aGlzLnN0cmluZ2lmeSA9IHRoaXMucGFyZW50LnN0cmluZ2lmeTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgICAgdGhpcy5iYXNlVVJJID0gbnVsbDtcbiAgICAgIGlmICghWE1MRWxlbWVudCkge1xuICAgICAgICBYTUxFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxFbGVtZW50Jyk7XG4gICAgICAgIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuICAgICAgICBYTUxDb21tZW50ID0gcmVxdWlyZSgnLi9YTUxDb21tZW50Jyk7XG4gICAgICAgIFhNTERlY2xhcmF0aW9uID0gcmVxdWlyZSgnLi9YTUxEZWNsYXJhdGlvbicpO1xuICAgICAgICBYTUxEb2NUeXBlID0gcmVxdWlyZSgnLi9YTUxEb2NUeXBlJyk7XG4gICAgICAgIFhNTFJhdyA9IHJlcXVpcmUoJy4vWE1MUmF3Jyk7XG4gICAgICAgIFhNTFRleHQgPSByZXF1aXJlKCcuL1hNTFRleHQnKTtcbiAgICAgICAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gcmVxdWlyZSgnLi9YTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24nKTtcbiAgICAgICAgWE1MRHVtbXkgPSByZXF1aXJlKCcuL1hNTER1bW15Jyk7XG4gICAgICAgIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuICAgICAgICBYTUxOb2RlTGlzdCA9IHJlcXVpcmUoJy4vWE1MTm9kZUxpc3QnKTtcbiAgICAgICAgWE1MTmFtZWROb2RlTWFwID0gcmVxdWlyZSgnLi9YTUxOYW1lZE5vZGVNYXAnKTtcbiAgICAgICAgRG9jdW1lbnRQb3NpdGlvbiA9IHJlcXVpcmUoJy4vRG9jdW1lbnRQb3NpdGlvbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ25vZGVOYW1lJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ25vZGVUeXBlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ25vZGVWYWx1ZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAncGFyZW50Tm9kZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ2NoaWxkTm9kZXMnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2hpbGROb2RlTGlzdCB8fCAhdGhpcy5jaGlsZE5vZGVMaXN0Lm5vZGVzKSB7XG4gICAgICAgICAgdGhpcy5jaGlsZE5vZGVMaXN0ID0gbmV3IFhNTE5vZGVMaXN0KHRoaXMuY2hpbGRyZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkTm9kZUxpc3Q7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdmaXJzdENoaWxkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bMF0gfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ2xhc3RDaGlsZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ3ByZXZpb3VzU2libGluZycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmNoaWxkcmVuW2kgLSAxXSB8fCBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnbmV4dFNpYmxpbmcnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5jaGlsZHJlbltpICsgMV0gfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ293bmVyRG9jdW1lbnQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudCgpIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICd0ZXh0Q29udGVudCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGlsZCwgaiwgbGVuLCByZWYyLCBzdHI7XG4gICAgICAgIGlmICh0aGlzLm5vZGVUeXBlID09PSBOb2RlVHlwZS5FbGVtZW50IHx8IHRoaXMubm9kZVR5cGUgPT09IE5vZGVUeXBlLkRvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICBzdHIgPSAnJztcbiAgICAgICAgICByZWYyID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYyLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IHJlZjJbal07XG4gICAgICAgICAgICBpZiAoY2hpbGQudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgc3RyICs9IGNoaWxkLnRleHRDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5zZXRQYXJlbnQgPSBmdW5jdGlvbihwYXJlbnQpIHtcbiAgICAgIHZhciBjaGlsZCwgaiwgbGVuLCByZWYyLCByZXN1bHRzO1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHBhcmVudC5vcHRpb25zO1xuICAgICAgICB0aGlzLnN0cmluZ2lmeSA9IHBhcmVudC5zdHJpbmdpZnk7XG4gICAgICB9XG4gICAgICByZWYyID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjIubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgY2hpbGQgPSByZWYyW2pdO1xuICAgICAgICByZXN1bHRzLnB1c2goY2hpbGQuc2V0UGFyZW50KHRoaXMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5lbGVtZW50ID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgdmFyIGNoaWxkTm9kZSwgaXRlbSwgaiwgaywga2V5LCBsYXN0Q2hpbGQsIGxlbiwgbGVuMSwgcmVmMiwgcmVmMywgdmFsO1xuICAgICAgbGFzdENoaWxkID0gbnVsbDtcbiAgICAgIGlmIChhdHRyaWJ1dGVzID09PSBudWxsICYmICh0ZXh0ID09IG51bGwpKSB7XG4gICAgICAgIHJlZjIgPSBbe30sIG51bGxdLCBhdHRyaWJ1dGVzID0gcmVmMlswXSwgdGV4dCA9IHJlZjJbMV07XG4gICAgICB9XG4gICAgICBpZiAoYXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGF0dHJpYnV0ZXMgPSBnZXRWYWx1ZShhdHRyaWJ1dGVzKTtcbiAgICAgIGlmICghaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgcmVmMyA9IFthdHRyaWJ1dGVzLCB0ZXh0XSwgdGV4dCA9IHJlZjNbMF0sIGF0dHJpYnV0ZXMgPSByZWYzWzFdO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gZ2V0VmFsdWUobmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkge1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSBuYW1lLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgaXRlbSA9IG5hbWVbal07XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KG5hbWUuYXBwbHkoKSk7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICAgIGZvciAoa2V5IGluIG5hbWUpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChuYW1lLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICB2YWwgPSBuYW1lW2tleV07XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsKSkge1xuICAgICAgICAgICAgdmFsID0gdmFsLmFwcGx5KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydEF0dEtleSAmJiBrZXkuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0QXR0S2V5KSA9PT0gMCkge1xuICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5hdHRyaWJ1dGUoa2V5LnN1YnN0cih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0QXR0S2V5Lmxlbmd0aCksIHZhbCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLnNlcGFyYXRlQXJyYXlJdGVtcyAmJiBBcnJheS5pc0FycmF5KHZhbCkgJiYgaXNFbXB0eSh2YWwpKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmR1bW15KCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh2YWwpICYmIGlzRW1wdHkodmFsKSkge1xuICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGtleSk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmtlZXBOdWxsTm9kZXMgJiYgKHZhbCA9PSBudWxsKSkge1xuICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5kdW1teSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5zZXBhcmF0ZUFycmF5SXRlbXMgJiYgQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4xID0gdmFsLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICAgICAgICBpdGVtID0gdmFsW2tdO1xuICAgICAgICAgICAgICBjaGlsZE5vZGUgPSB7fTtcbiAgICAgICAgICAgICAgY2hpbGROb2RlW2tleV0gPSBpdGVtO1xuICAgICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmVsZW1lbnQoY2hpbGROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkgJiYga2V5LmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkpID09PSAwKSB7XG4gICAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZWxlbWVudCh2YWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGtleSk7XG4gICAgICAgICAgICAgIGxhc3RDaGlsZC5lbGVtZW50KHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZWxlbWVudChrZXksIHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMua2VlcE51bGxOb2RlcyAmJiB0ZXh0ID09PSBudWxsKSB7XG4gICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZHVtbXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkgJiYgbmFtZS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRUZXh0S2V5KSA9PT0gMCkge1xuICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMudGV4dCh0ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydENEYXRhS2V5ICYmIG5hbWUuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0Q0RhdGFLZXkpID09PSAwKSB7XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5jZGF0YSh0ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydENvbW1lbnRLZXkgJiYgbmFtZS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRDb21tZW50S2V5KSA9PT0gMCkge1xuICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuY29tbWVudCh0ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydFJhd0tleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydFJhd0tleSkgPT09IDApIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLnJhdyh0ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydFBJS2V5ICYmIG5hbWUuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UElLZXkpID09PSAwKSB7XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5pbnN0cnVjdGlvbihuYW1lLnN1YnN0cih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UElLZXkubGVuZ3RoKSwgdGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5ub2RlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobGFzdENoaWxkID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGNyZWF0ZSBhbnkgZWxlbWVudHMgd2l0aDogXCIgKyBuYW1lICsgXCIuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGFzdENoaWxkO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbnNlcnRCZWZvcmUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgY2hpbGQsIGksIG5ld0NoaWxkLCByZWZDaGlsZCwgcmVtb3ZlZDtcbiAgICAgIGlmIChuYW1lICE9IG51bGwgPyBuYW1lLnR5cGUgOiB2b2lkIDApIHtcbiAgICAgICAgbmV3Q2hpbGQgPSBuYW1lO1xuICAgICAgICByZWZDaGlsZCA9IGF0dHJpYnV0ZXM7XG4gICAgICAgIG5ld0NoaWxkLnNldFBhcmVudCh0aGlzKTtcbiAgICAgICAgaWYgKHJlZkNoaWxkKSB7XG4gICAgICAgICAgaSA9IGNoaWxkcmVuLmluZGV4T2YocmVmQ2hpbGQpO1xuICAgICAgICAgIHJlbW92ZWQgPSBjaGlsZHJlbi5zcGxpY2UoaSk7XG4gICAgICAgICAgY2hpbGRyZW4ucHVzaChuZXdDaGlsZCk7XG4gICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3Q2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdDaGlsZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmlzUm9vdCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBpbnNlcnQgZWxlbWVudHMgYXQgcm9vdCBsZXZlbC4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICAgIHJlbW92ZWQgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaSk7XG4gICAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmluc2VydEFmdGVyID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBpbnNlcnQgZWxlbWVudHMgYXQgcm9vdCBsZXZlbC4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgIHJlbW92ZWQgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaSArIDEpO1xuICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5lbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCByZWYyO1xuICAgICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCByZW1vdmUgdGhlIHJvb3QgZWxlbWVudC4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgW10uc3BsaWNlLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCBbaSwgaSAtIGkgKyAxXS5jb25jYXQocmVmMiA9IFtdKSksIHJlZjI7XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgY2hpbGQsIHJlZjI7XG4gICAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgIH1cbiAgICAgIGF0dHJpYnV0ZXMgfHwgKGF0dHJpYnV0ZXMgPSB7fSk7XG4gICAgICBhdHRyaWJ1dGVzID0gZ2V0VmFsdWUoYXR0cmlidXRlcyk7XG4gICAgICBpZiAoIWlzT2JqZWN0KGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIHJlZjIgPSBbYXR0cmlidXRlcywgdGV4dF0sIHRleHQgPSByZWYyWzBdLCBhdHRyaWJ1dGVzID0gcmVmMlsxXTtcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gbmV3IFhNTEVsZW1lbnQodGhpcywgbmFtZSwgYXR0cmlidXRlcyk7XG4gICAgICBpZiAodGV4dCAhPSBudWxsKSB7XG4gICAgICAgIGNoaWxkLnRleHQodGV4dCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZDtcbiAgICAgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gbmV3IFhNTFRleHQodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jZGF0YSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxDRGF0YSh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MQ29tbWVudCh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmNvbW1lbnRCZWZvcmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkpO1xuICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5jb21tZW50KHZhbHVlKTtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCByZW1vdmVkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jb21tZW50QWZ0ZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkgKyAxKTtcbiAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuY29tbWVudCh2YWx1ZSk7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZDtcbiAgICAgIGNoaWxkID0gbmV3IFhNTFJhdyh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmR1bW15ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxEdW1teSh0aGlzKTtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaW5zdHJ1Y3Rpb24gPSBmdW5jdGlvbih0YXJnZXQsIHZhbHVlKSB7XG4gICAgICB2YXIgaW5zVGFyZ2V0LCBpbnNWYWx1ZSwgaW5zdHJ1Y3Rpb24sIGosIGxlbjtcbiAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCkge1xuICAgICAgICB0YXJnZXQgPSBnZXRWYWx1ZSh0YXJnZXQpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgdmFsdWUgPSBnZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHRhcmdldC5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGluc1RhcmdldCA9IHRhcmdldFtqXTtcbiAgICAgICAgICB0aGlzLmluc3RydWN0aW9uKGluc1RhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICBmb3IgKGluc1RhcmdldCBpbiB0YXJnZXQpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbCh0YXJnZXQsIGluc1RhcmdldCkpIGNvbnRpbnVlO1xuICAgICAgICAgIGluc1ZhbHVlID0gdGFyZ2V0W2luc1RhcmdldF07XG4gICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbihpbnNUYXJnZXQsIGluc1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseSgpO1xuICAgICAgICB9XG4gICAgICAgIGluc3RydWN0aW9uID0gbmV3IFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbih0aGlzLCB0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGluc3RydWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbnN0cnVjdGlvbkJlZm9yZSA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgcmVtb3ZlZDtcbiAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpKTtcbiAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaW5zdHJ1Y3Rpb25BZnRlciA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgcmVtb3ZlZDtcbiAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpICsgMSk7XG4gICAgICBjaGlsZCA9IHRoaXMucGFyZW50Lmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmRlY2xhcmF0aW9uID0gZnVuY3Rpb24odmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpIHtcbiAgICAgIHZhciBkb2MsIHhtbGRlYztcbiAgICAgIGRvYyA9IHRoaXMuZG9jdW1lbnQoKTtcbiAgICAgIHhtbGRlYyA9IG5ldyBYTUxEZWNsYXJhdGlvbihkb2MsIHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKTtcbiAgICAgIGlmIChkb2MuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRvYy5jaGlsZHJlbi51bnNoaWZ0KHhtbGRlYyk7XG4gICAgICB9IGVsc2UgaWYgKGRvYy5jaGlsZHJlblswXS50eXBlID09PSBOb2RlVHlwZS5EZWNsYXJhdGlvbikge1xuICAgICAgICBkb2MuY2hpbGRyZW5bMF0gPSB4bWxkZWM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2MuY2hpbGRyZW4udW5zaGlmdCh4bWxkZWMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvYy5yb290KCkgfHwgZG9jO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5kdGQgPSBmdW5jdGlvbihwdWJJRCwgc3lzSUQpIHtcbiAgICAgIHZhciBjaGlsZCwgZG9jLCBkb2N0eXBlLCBpLCBqLCBrLCBsZW4sIGxlbjEsIHJlZjIsIHJlZjM7XG4gICAgICBkb2MgPSB0aGlzLmRvY3VtZW50KCk7XG4gICAgICBkb2N0eXBlID0gbmV3IFhNTERvY1R5cGUoZG9jLCBwdWJJRCwgc3lzSUQpO1xuICAgICAgcmVmMiA9IGRvYy5jaGlsZHJlbjtcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWYyLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICBjaGlsZCA9IHJlZjJbaV07XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBOb2RlVHlwZS5Eb2NUeXBlKSB7XG4gICAgICAgICAgZG9jLmNoaWxkcmVuW2ldID0gZG9jdHlwZTtcbiAgICAgICAgICByZXR1cm4gZG9jdHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVmMyA9IGRvYy5jaGlsZHJlbjtcbiAgICAgIGZvciAoaSA9IGsgPSAwLCBsZW4xID0gcmVmMy5sZW5ndGg7IGsgPCBsZW4xOyBpID0gKytrKSB7XG4gICAgICAgIGNoaWxkID0gcmVmM1tpXTtcbiAgICAgICAgaWYgKGNoaWxkLmlzUm9vdCkge1xuICAgICAgICAgIGRvYy5jaGlsZHJlbi5zcGxpY2UoaSwgMCwgZG9jdHlwZSk7XG4gICAgICAgICAgcmV0dXJuIGRvY3R5cGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGRvYy5jaGlsZHJlbi5wdXNoKGRvY3R5cGUpO1xuICAgICAgcmV0dXJuIGRvY3R5cGU7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnVwID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5pc1Jvb3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHJvb3Qgbm9kZSBoYXMgbm8gcGFyZW50LiBVc2UgZG9jKCkgaWYgeW91IG5lZWQgdG8gZ2V0IHRoZSBkb2N1bWVudCBvYmplY3QuXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucGFyZW50O1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIG5vZGUgPSB0aGlzO1xuICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gTm9kZVR5cGUuRG9jdW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZS5yb290T2JqZWN0O1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUuaXNSb290KSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmRvY3VtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIG5vZGUgPSB0aGlzO1xuICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gTm9kZVR5cGUuRG9jdW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQoKS5lbmQob3B0aW9ucyk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAoaSA8IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSBhdCB0aGUgZmlyc3Qgbm9kZS4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5jaGlsZHJlbltpIC0gMV07XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAoaSA9PT0gLTEgfHwgaSA9PT0gdGhpcy5wYXJlbnQuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IGF0IHRoZSBsYXN0IG5vZGUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQuY2hpbGRyZW5baSArIDFdO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbXBvcnREb2N1bWVudCA9IGZ1bmN0aW9uKGRvYykge1xuICAgICAgdmFyIGNsb25lZFJvb3Q7XG4gICAgICBjbG9uZWRSb290ID0gZG9jLnJvb3QoKS5jbG9uZSgpO1xuICAgICAgY2xvbmVkUm9vdC5wYXJlbnQgPSB0aGlzO1xuICAgICAgY2xvbmVkUm9vdC5pc1Jvb3QgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjbG9uZWRSb290KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5kZWJ1Z0luZm8gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgcmVmMiwgcmVmMztcbiAgICAgIG5hbWUgPSBuYW1lIHx8IHRoaXMubmFtZTtcbiAgICAgIGlmICgobmFtZSA9PSBudWxsKSAmJiAhKChyZWYyID0gdGhpcy5wYXJlbnQpICE9IG51bGwgPyByZWYyLm5hbWUgOiB2b2lkIDApKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfSBlbHNlIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFwicGFyZW50OiA8XCIgKyB0aGlzLnBhcmVudC5uYW1lICsgXCI+XCI7XG4gICAgICB9IGVsc2UgaWYgKCEoKHJlZjMgPSB0aGlzLnBhcmVudCkgIT0gbnVsbCA/IHJlZjMubmFtZSA6IHZvaWQgMCkpIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZTogPFwiICsgbmFtZSArIFwiPlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZTogPFwiICsgbmFtZSArIFwiPiwgcGFyZW50OiA8XCIgKyB0aGlzLnBhcmVudC5uYW1lICsgXCI+XCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmVsZSA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLm5vZCA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnR4dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZGF0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNkYXRhKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuY29tID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbW1lbnQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbnMgPSBmdW5jdGlvbih0YXJnZXQsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbih0YXJnZXQsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZG9jID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5kb2N1bWVudCgpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5kZWMgPSBmdW5jdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVjbGFyYXRpb24odmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5lID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUubiA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2RhdGEodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbW1lbnQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5yID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnJhdyh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmkgPSBmdW5jdGlvbih0YXJnZXQsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbih0YXJnZXQsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudXAoKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaW1wb3J0WE1MQnVpbGRlciA9IGZ1bmN0aW9uKGRvYykge1xuICAgICAgcmV0dXJuIHRoaXMuaW1wb3J0RG9jdW1lbnQoZG9jKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUucmVwbGFjZUNoaWxkID0gZnVuY3Rpb24obmV3Q2hpbGQsIG9sZENoaWxkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24ob2xkQ2hpbGQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQgPSBmdW5jdGlvbihuZXdDaGlsZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5oYXNDaGlsZE5vZGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggIT09IDA7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmNsb25lTm9kZSA9IGZ1bmN0aW9uKGRlZXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24oZmVhdHVyZSwgdmVyc2lvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmhhc0F0dHJpYnV0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnMubGVuZ3RoICE9PSAwO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICB2YXIgcmVmLCByZXM7XG4gICAgICByZWYgPSB0aGlzO1xuICAgICAgaWYgKHJlZiA9PT0gb3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZG9jdW1lbnQoKSAhPT0gb3RoZXIuZG9jdW1lbnQoKSkge1xuICAgICAgICByZXMgPSBEb2N1bWVudFBvc2l0aW9uLkRpc2Nvbm5lY3RlZCB8IERvY3VtZW50UG9zaXRpb24uSW1wbGVtZW50YXRpb25TcGVjaWZpYztcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcbiAgICAgICAgICByZXMgfD0gRG9jdW1lbnRQb3NpdGlvbi5QcmVjZWRpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzIHw9IERvY3VtZW50UG9zaXRpb24uRm9sbG93aW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9IGVsc2UgaWYgKHJlZi5pc0FuY2VzdG9yKG90aGVyKSkge1xuICAgICAgICByZXR1cm4gRG9jdW1lbnRQb3NpdGlvbi5Db250YWlucyB8IERvY3VtZW50UG9zaXRpb24uUHJlY2VkaW5nO1xuICAgICAgfSBlbHNlIGlmIChyZWYuaXNEZXNjZW5kYW50KG90aGVyKSkge1xuICAgICAgICByZXR1cm4gRG9jdW1lbnRQb3NpdGlvbi5Db250YWlucyB8IERvY3VtZW50UG9zaXRpb24uRm9sbG93aW5nO1xuICAgICAgfSBlbHNlIGlmIChyZWYuaXNQcmVjZWRpbmcob3RoZXIpKSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudFBvc2l0aW9uLlByZWNlZGluZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudFBvc2l0aW9uLkZvbGxvd2luZztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaXNTYW1lTm9kZSA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmxvb2t1cFByZWZpeCA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pc0RlZmF1bHROYW1lc3BhY2UgPSBmdW5jdGlvbihuYW1lc3BhY2VVUkkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUubG9va3VwTmFtZXNwYWNlVVJJID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmlzRXF1YWxOb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGksIGosIHJlZjI7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPT0gdGhpcy5ub2RlVHlwZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IGogPSAwLCByZWYyID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxOyAwIDw9IHJlZjIgPyBqIDw9IHJlZjIgOiBqID49IHJlZjI7IGkgPSAwIDw9IHJlZjIgPyArK2ogOiAtLWopIHtcbiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmlzRXF1YWxOb2RlKG5vZGUuY2hpbGRyZW5baV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZ2V0RmVhdHVyZSA9IGZ1bmN0aW9uKGZlYXR1cmUsIHZlcnNpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuc2V0VXNlckRhdGEgPSBmdW5jdGlvbihrZXksIGRhdGEsIGhhbmRsZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihvdGhlcikge1xuICAgICAgaWYgKCFvdGhlcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3RoZXIgPT09IHRoaXMgfHwgdGhpcy5pc0Rlc2NlbmRhbnQob3RoZXIpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pc0Rlc2NlbmRhbnQgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgY2hpbGQsIGlzRGVzY2VuZGFudENoaWxkLCBqLCBsZW4sIHJlZjI7XG4gICAgICByZWYyID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjIubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgY2hpbGQgPSByZWYyW2pdO1xuICAgICAgICBpZiAobm9kZSA9PT0gY2hpbGQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpc0Rlc2NlbmRhbnRDaGlsZCA9IGNoaWxkLmlzRGVzY2VuZGFudChub2RlKTtcbiAgICAgICAgaWYgKGlzRGVzY2VuZGFudENoaWxkKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaXNBbmNlc3RvciA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlLmlzRGVzY2VuZGFudCh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaXNQcmVjZWRpbmcgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgbm9kZVBvcywgdGhpc1BvcztcbiAgICAgIG5vZGVQb3MgPSB0aGlzLnRyZWVQb3NpdGlvbihub2RlKTtcbiAgICAgIHRoaXNQb3MgPSB0aGlzLnRyZWVQb3NpdGlvbih0aGlzKTtcbiAgICAgIGlmIChub2RlUG9zID09PSAtMSB8fCB0aGlzUG9zID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9kZVBvcyA8IHRoaXNQb3M7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmlzRm9sbG93aW5nID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIG5vZGVQb3MsIHRoaXNQb3M7XG4gICAgICBub2RlUG9zID0gdGhpcy50cmVlUG9zaXRpb24obm9kZSk7XG4gICAgICB0aGlzUG9zID0gdGhpcy50cmVlUG9zaXRpb24odGhpcyk7XG4gICAgICBpZiAobm9kZVBvcyA9PT0gLTEgfHwgdGhpc1BvcyA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5vZGVQb3MgPiB0aGlzUG9zO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS50cmVlUG9zaXRpb24gPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgZm91bmQsIHBvcztcbiAgICAgIHBvcyA9IDA7XG4gICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgdGhpcy5mb3JlYWNoVHJlZU5vZGUodGhpcy5kb2N1bWVudCgpLCBmdW5jdGlvbihjaGlsZE5vZGUpIHtcbiAgICAgICAgcG9zKys7XG4gICAgICAgIGlmICghZm91bmQgJiYgY2hpbGROb2RlID09PSBub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZm9yZWFjaFRyZWVOb2RlID0gZnVuY3Rpb24obm9kZSwgZnVuYykge1xuICAgICAgdmFyIGNoaWxkLCBqLCBsZW4sIHJlZjIsIHJlcztcbiAgICAgIG5vZGUgfHwgKG5vZGUgPSB0aGlzLmRvY3VtZW50KCkpO1xuICAgICAgcmVmMiA9IG5vZGUuY2hpbGRyZW47XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYyLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGNoaWxkID0gcmVmMltqXTtcbiAgICAgICAgaWYgKHJlcyA9IGZ1bmMoY2hpbGQpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgPSB0aGlzLmZvcmVhY2hUcmVlTm9kZShjaGlsZCwgZnVuYyk7XG4gICAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTE5vZGU7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MU3RyaW5naWZpZXIsXG4gICAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MU3RyaW5naWZpZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MU3RyaW5naWZpZXIob3B0aW9ucykge1xuICAgICAgdGhpcy5hc3NlcnRMZWdhbE5hbWUgPSBiaW5kKHRoaXMuYXNzZXJ0TGVnYWxOYW1lLCB0aGlzKTtcbiAgICAgIHRoaXMuYXNzZXJ0TGVnYWxDaGFyID0gYmluZCh0aGlzLmFzc2VydExlZ2FsQ2hhciwgdGhpcyk7XG4gICAgICB2YXIga2V5LCByZWYsIHZhbHVlO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy52ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy52ZXJzaW9uID0gJzEuMCc7XG4gICAgICB9XG4gICAgICByZWYgPSBvcHRpb25zLnN0cmluZ2lmeSB8fCB7fTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHJlZltrZXldO1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUubmFtZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsTmFtZSgnJyArIHZhbCB8fCAnJyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKHRoaXMudGV4dEVzY2FwZSgnJyArIHZhbCB8fCAnJykpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuY2RhdGEgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKCddXT4nLCAnXV1dXT48IVtDREFUQVs+Jyk7XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIodmFsKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIGlmICh2YWwubWF0Y2goLy0tLykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tbWVudCB0ZXh0IGNhbm5vdCBjb250YWluIGRvdWJsZS1oeXBlbjogXCIgKyB2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKHZhbCk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gJycgKyB2YWwgfHwgJyc7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5hdHRWYWx1ZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcih0aGlzLmF0dEVzY2FwZSh2YWwgPSAnJyArIHZhbCB8fCAnJykpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuaW5zVGFyZ2V0ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKCcnICsgdmFsIHx8ICcnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmluc1ZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgdmFsID0gJycgKyB2YWwgfHwgJyc7XG4gICAgICBpZiAodmFsLm1hdGNoKC9cXD8+LykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwcm9jZXNzaW5nIGluc3RydWN0aW9uIHZhbHVlOiBcIiArIHZhbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIodmFsKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLnhtbFZlcnNpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIGlmICghdmFsLm1hdGNoKC8xXFwuWzAtOV0rLykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2ZXJzaW9uIG51bWJlcjogXCIgKyB2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLnhtbEVuY29kaW5nID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgdmFsID0gJycgKyB2YWwgfHwgJyc7XG4gICAgICBpZiAoIXZhbC5tYXRjaCgvXltBLVphLXpdKD86W0EtWmEtejAtOS5fLV0pKiQvKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGVuY29kaW5nOiBcIiArIHZhbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIodmFsKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLnhtbFN0YW5kYWxvbmUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiBcInllc1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwibm9cIjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZFB1YklEID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKCcnICsgdmFsIHx8ICcnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZFN5c0lEID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKCcnICsgdmFsIHx8ICcnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZEVsZW1lbnRWYWx1ZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcignJyArIHZhbCB8fCAnJyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRBdHRUeXBlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0TGVnYWxDaGFyKCcnICsgdmFsIHx8ICcnKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZEF0dERlZmF1bHQgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIoJycgKyB2YWwgfHwgJycpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuZHRkRW50aXR5VmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIoJycgKyB2YWwgfHwgJycpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuZHRkTkRhdGEgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIoJycgKyB2YWwgfHwgJycpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuY29udmVydEF0dEtleSA9ICdAJztcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5jb252ZXJ0UElLZXkgPSAnPyc7XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuY29udmVydFRleHRLZXkgPSAnI3RleHQnO1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbnZlcnRDRGF0YUtleSA9ICcjY2RhdGEnO1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbnZlcnRDb21tZW50S2V5ID0gJyNjb21tZW50JztcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5jb252ZXJ0UmF3S2V5ID0gJyNyYXcnO1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmFzc2VydExlZ2FsQ2hhciA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgdmFyIHJlZ2V4LCByZXM7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgICAgcmVnZXggPSAnJztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudmVyc2lvbiA9PT0gJzEuMCcpIHtcbiAgICAgICAgcmVnZXggPSAvW1xcMC1cXHgwOFxceDBCXFxmXFx4MEUtXFx4MUZcXHVGRkZFXFx1RkZGRl18W1xcdUQ4MDAtXFx1REJGRl0oPyFbXFx1REMwMC1cXHVERkZGXSl8KD86W15cXHVEODAwLVxcdURCRkZdfF4pW1xcdURDMDAtXFx1REZGRl0vO1xuICAgICAgICBpZiAocmVzID0gc3RyLm1hdGNoKHJlZ2V4KSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2hhcmFjdGVyIGluIHN0cmluZzogXCIgKyBzdHIgKyBcIiBhdCBpbmRleCBcIiArIHJlcy5pbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnZlcnNpb24gPT09ICcxLjEnKSB7XG4gICAgICAgIHJlZ2V4ID0gL1tcXDBcXHVGRkZFXFx1RkZGRl18W1xcdUQ4MDAtXFx1REJGRl0oPyFbXFx1REMwMC1cXHVERkZGXSl8KD86W15cXHVEODAwLVxcdURCRkZdfF4pW1xcdURDMDAtXFx1REZGRl0vO1xuICAgICAgICBpZiAocmVzID0gc3RyLm1hdGNoKHJlZ2V4KSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2hhcmFjdGVyIGluIHN0cmluZzogXCIgKyBzdHIgKyBcIiBhdCBpbmRleCBcIiArIHJlcy5pbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5hc3NlcnRMZWdhbE5hbWUgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHZhciByZWdleDtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gICAgICB0aGlzLmFzc2VydExlZ2FsQ2hhcihzdHIpO1xuICAgICAgcmVnZXggPSAvXihbOkEtWl9hLXpcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMENcXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXXxbXFx1RDgwMC1cXHVEQjdGXVtcXHVEQzAwLVxcdURGRkZdKShbXFx4MkRcXC4wLTpBLVpfYS16XFx4QjdcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMENcXHUyMDBEXFx1MjAzRlxcdTIwNDBcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdfFtcXHVEODAwLVxcdURCN0ZdW1xcdURDMDAtXFx1REZGRl0pKiQvO1xuICAgICAgaWYgKCFzdHIubWF0Y2gocmVnZXgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2hhcmFjdGVyIGluIG5hbWVcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUudGV4dEVzY2FwZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgdmFyIGFtcHJlZ2V4O1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgIH1cbiAgICAgIGFtcHJlZ2V4ID0gdGhpcy5vcHRpb25zLm5vRG91YmxlRW5jb2RpbmcgPyAvKD8hJlxcUys7KSYvZyA6IC8mL2c7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoYW1wcmVnZXgsICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7JykucmVwbGFjZSgvXFxyL2csICcmI3hEOycpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuYXR0RXNjYXBlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICB2YXIgYW1wcmVnZXg7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbikge1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgICAgYW1wcmVnZXggPSB0aGlzLm9wdGlvbnMubm9Eb3VibGVFbmNvZGluZyA/IC8oPyEmXFxTKzspJi9nIDogLyYvZztcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZShhbXByZWdleCwgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKS5yZXBsYWNlKC9cXHQvZywgJyYjeDk7JykucmVwbGFjZSgvXFxuL2csICcmI3hBOycpLnJlcGxhY2UoL1xcci9nLCAnJiN4RDsnKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTFN0cmluZ2lmaWVyO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgTm9uZTogMCxcbiAgICBPcGVuVGFnOiAxLFxuICAgIEluc2lkZVRhZzogMixcbiAgICBDbG9zZVRhZzogM1xuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgV3JpdGVyU3RhdGUsIFhNTENEYXRhLCBYTUxDb21tZW50LCBYTUxEVERBdHRMaXN0LCBYTUxEVERFbGVtZW50LCBYTUxEVERFbnRpdHksIFhNTERURE5vdGF0aW9uLCBYTUxEZWNsYXJhdGlvbiwgWE1MRG9jVHlwZSwgWE1MRHVtbXksIFhNTEVsZW1lbnQsIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgWE1MUmF3LCBYTUxUZXh0LCBYTUxXcml0ZXJCYXNlLCBhc3NpZ24sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGFzc2lnbiA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLmFzc2lnbjtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBYTUxEZWNsYXJhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRGVjbGFyYXRpb24nKTtcblxuICBYTUxEb2NUeXBlID0gcmVxdWlyZSgnLi9YTUxEb2NUeXBlJyk7XG5cbiAgWE1MQ0RhdGEgPSByZXF1aXJlKCcuL1hNTENEYXRhJyk7XG5cbiAgWE1MQ29tbWVudCA9IHJlcXVpcmUoJy4vWE1MQ29tbWVudCcpO1xuXG4gIFhNTEVsZW1lbnQgPSByZXF1aXJlKCcuL1hNTEVsZW1lbnQnKTtcblxuICBYTUxSYXcgPSByZXF1aXJlKCcuL1hNTFJhdycpO1xuXG4gIFhNTFRleHQgPSByZXF1aXJlKCcuL1hNTFRleHQnKTtcblxuICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSByZXF1aXJlKCcuL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbicpO1xuXG4gIFhNTER1bW15ID0gcmVxdWlyZSgnLi9YTUxEdW1teScpO1xuXG4gIFhNTERUREF0dExpc3QgPSByZXF1aXJlKCcuL1hNTERUREF0dExpc3QnKTtcblxuICBYTUxEVERFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxEVERFbGVtZW50Jyk7XG5cbiAgWE1MRFRERW50aXR5ID0gcmVxdWlyZSgnLi9YTUxEVERFbnRpdHknKTtcblxuICBYTUxEVEROb3RhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRFRETm90YXRpb24nKTtcblxuICBXcml0ZXJTdGF0ZSA9IHJlcXVpcmUoJy4vV3JpdGVyU3RhdGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTFdyaXRlckJhc2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MV3JpdGVyQmFzZShvcHRpb25zKSB7XG4gICAgICB2YXIga2V5LCByZWYsIHZhbHVlO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICByZWYgPSBvcHRpb25zLndyaXRlciB8fCB7fTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHJlZltrZXldO1xuICAgICAgICB0aGlzW1wiX1wiICsga2V5XSA9IHRoaXNba2V5XTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuZmlsdGVyT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBmaWx0ZXJlZE9wdGlvbnMsIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgcmVmNCwgcmVmNSwgcmVmNjtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICBvcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgZmlsdGVyZWRPcHRpb25zID0ge1xuICAgICAgICB3cml0ZXI6IHRoaXNcbiAgICAgIH07XG4gICAgICBmaWx0ZXJlZE9wdGlvbnMucHJldHR5ID0gb3B0aW9ucy5wcmV0dHkgfHwgZmFsc2U7XG4gICAgICBmaWx0ZXJlZE9wdGlvbnMuYWxsb3dFbXB0eSA9IG9wdGlvbnMuYWxsb3dFbXB0eSB8fCBmYWxzZTtcbiAgICAgIGZpbHRlcmVkT3B0aW9ucy5pbmRlbnQgPSAocmVmID0gb3B0aW9ucy5pbmRlbnQpICE9IG51bGwgPyByZWYgOiAnICAnO1xuICAgICAgZmlsdGVyZWRPcHRpb25zLm5ld2xpbmUgPSAocmVmMSA9IG9wdGlvbnMubmV3bGluZSkgIT0gbnVsbCA/IHJlZjEgOiAnXFxuJztcbiAgICAgIGZpbHRlcmVkT3B0aW9ucy5vZmZzZXQgPSAocmVmMiA9IG9wdGlvbnMub2Zmc2V0KSAhPSBudWxsID8gcmVmMiA6IDA7XG4gICAgICBmaWx0ZXJlZE9wdGlvbnMuZG9udFByZXR0eVRleHROb2RlcyA9IChyZWYzID0gKHJlZjQgPSBvcHRpb25zLmRvbnRQcmV0dHlUZXh0Tm9kZXMpICE9IG51bGwgPyByZWY0IDogb3B0aW9ucy5kb250cHJldHR5dGV4dG5vZGVzKSAhPSBudWxsID8gcmVmMyA6IDA7XG4gICAgICBmaWx0ZXJlZE9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCA9IChyZWY1ID0gKHJlZjYgPSBvcHRpb25zLnNwYWNlQmVmb3JlU2xhc2gpICE9IG51bGwgPyByZWY2IDogb3B0aW9ucy5zcGFjZWJlZm9yZXNsYXNoKSAhPSBudWxsID8gcmVmNSA6ICcnO1xuICAgICAgaWYgKGZpbHRlcmVkT3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoID09PSB0cnVlKSB7XG4gICAgICAgIGZpbHRlcmVkT3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoID0gJyAnO1xuICAgICAgfVxuICAgICAgZmlsdGVyZWRPcHRpb25zLnN1cHByZXNzUHJldHR5Q291bnQgPSAwO1xuICAgICAgZmlsdGVyZWRPcHRpb25zLnVzZXIgPSB7fTtcbiAgICAgIGZpbHRlcmVkT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICByZXR1cm4gZmlsdGVyZWRPcHRpb25zO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5pbmRlbnQgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIGluZGVudExldmVsO1xuICAgICAgaWYgKCFvcHRpb25zLnByZXR0eSB8fCBvcHRpb25zLnN1cHByZXNzUHJldHR5Q291bnQpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnByZXR0eSkge1xuICAgICAgICBpbmRlbnRMZXZlbCA9IChsZXZlbCB8fCAwKSArIG9wdGlvbnMub2Zmc2V0ICsgMTtcbiAgICAgICAgaWYgKGluZGVudExldmVsID4gMCkge1xuICAgICAgICAgIHJldHVybiBuZXcgQXJyYXkoaW5kZW50TGV2ZWwpLmpvaW4ob3B0aW9ucy5pbmRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJyc7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmVuZGxpbmUgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgaWYgKCFvcHRpb25zLnByZXR0eSB8fCBvcHRpb25zLnN1cHByZXNzUHJldHR5Q291bnQpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubmV3bGluZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuYXR0cmlidXRlID0gZnVuY3Rpb24oYXR0LCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5BdHRyaWJ1dGUoYXR0LCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByID0gJyAnICsgYXR0Lm5hbWUgKyAnPVwiJyArIGF0dC52YWx1ZSArICdcIic7XG4gICAgICB0aGlzLmNsb3NlQXR0cmlidXRlKGF0dCwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmNkYXRhID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPCFbQ0RBVEFbJztcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICByICs9IG5vZGUudmFsdWU7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICByICs9ICddXT4nICsgdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSArICc8IS0tICc7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgciArPSBub2RlLnZhbHVlO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgciArPSAnIC0tPicgKyB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICB0aGlzLmNsb3NlTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuZGVjbGFyYXRpb24gPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSArICc8P3htbCc7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgciArPSAnIHZlcnNpb249XCInICsgbm9kZS52ZXJzaW9uICsgJ1wiJztcbiAgICAgIGlmIChub2RlLmVuY29kaW5nICE9IG51bGwpIHtcbiAgICAgICAgciArPSAnIGVuY29kaW5nPVwiJyArIG5vZGUuZW5jb2RpbmcgKyAnXCInO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuc3RhbmRhbG9uZSAhPSBudWxsKSB7XG4gICAgICAgIHIgKz0gJyBzdGFuZGFsb25lPVwiJyArIG5vZGUuc3RhbmRhbG9uZSArICdcIic7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICByICs9IG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICc/Pic7XG4gICAgICByICs9IHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5kb2NUeXBlID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCByLCByZWY7XG4gICAgICBsZXZlbCB8fCAobGV2ZWwgPSAwKTtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICByID0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgciArPSAnPCFET0NUWVBFICcgKyBub2RlLnJvb3QoKS5uYW1lO1xuICAgICAgaWYgKG5vZGUucHViSUQgJiYgbm9kZS5zeXNJRCkge1xuICAgICAgICByICs9ICcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCIgXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUuc3lzSUQpIHtcbiAgICAgICAgciArPSAnIFNZU1RFTSBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgciArPSAnIFsnO1xuICAgICAgICByICs9IHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICAgIHJlZiA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmW2ldO1xuICAgICAgICAgIHIgKz0gdGhpcy53cml0ZUNoaWxkTm9kZShjaGlsZCwgb3B0aW9ucywgbGV2ZWwgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgIHIgKz0gJ10nO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgciArPSBvcHRpb25zLnNwYWNlQmVmb3JlU2xhc2ggKyAnPic7XG4gICAgICByICs9IHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5lbGVtZW50ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciBhdHQsIGNoaWxkLCBjaGlsZE5vZGVDb3VudCwgZmlyc3RDaGlsZE5vZGUsIGksIGosIGxlbiwgbGVuMSwgbmFtZSwgcHJldHR5U3VwcHJlc3NlZCwgciwgcmVmLCByZWYxLCByZWYyO1xuICAgICAgbGV2ZWwgfHwgKGxldmVsID0gMCk7XG4gICAgICBwcmV0dHlTdXBwcmVzc2VkID0gZmFsc2U7XG4gICAgICByID0gJyc7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciArPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPCcgKyBub2RlLm5hbWU7XG4gICAgICByZWYgPSBub2RlLmF0dHJpYnM7XG4gICAgICBmb3IgKG5hbWUgaW4gcmVmKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwgbmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICBhdHQgPSByZWZbbmFtZV07XG4gICAgICAgIHIgKz0gdGhpcy5hdHRyaWJ1dGUoYXR0LCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICB9XG4gICAgICBjaGlsZE5vZGVDb3VudCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgZmlyc3RDaGlsZE5vZGUgPSBjaGlsZE5vZGVDb3VudCA9PT0gMCA/IG51bGwgOiBub2RlLmNoaWxkcmVuWzBdO1xuICAgICAgaWYgKGNoaWxkTm9kZUNvdW50ID09PSAwIHx8IG5vZGUuY2hpbGRyZW4uZXZlcnkoZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gKGUudHlwZSA9PT0gTm9kZVR5cGUuVGV4dCB8fCBlLnR5cGUgPT09IE5vZGVUeXBlLlJhdykgJiYgZS52YWx1ZSA9PT0gJyc7XG4gICAgICB9KSkge1xuICAgICAgICBpZiAob3B0aW9ucy5hbGxvd0VtcHR5KSB7XG4gICAgICAgICAgciArPSAnPic7XG4gICAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICAgIHIgKz0gJzwvJyArIG5vZGUubmFtZSArICc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICAgIHIgKz0gb3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJy8+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wcmV0dHkgJiYgY2hpbGROb2RlQ291bnQgPT09IDEgJiYgKGZpcnN0Q2hpbGROb2RlLnR5cGUgPT09IE5vZGVUeXBlLlRleHQgfHwgZmlyc3RDaGlsZE5vZGUudHlwZSA9PT0gTm9kZVR5cGUuUmF3KSAmJiAoZmlyc3RDaGlsZE5vZGUudmFsdWUgIT0gbnVsbCkpIHtcbiAgICAgICAgciArPSAnPic7XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICAgIG9wdGlvbnMuc3VwcHJlc3NQcmV0dHlDb3VudCsrO1xuICAgICAgICBwcmV0dHlTdXBwcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgciArPSB0aGlzLndyaXRlQ2hpbGROb2RlKGZpcnN0Q2hpbGROb2RlLCBvcHRpb25zLCBsZXZlbCArIDEpO1xuICAgICAgICBvcHRpb25zLnN1cHByZXNzUHJldHR5Q291bnQtLTtcbiAgICAgICAgcHJldHR5U3VwcHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgIHIgKz0gJzwvJyArIG5vZGUubmFtZSArICc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAob3B0aW9ucy5kb250UHJldHR5VGV4dE5vZGVzKSB7XG4gICAgICAgICAgcmVmMSA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY2hpbGQgPSByZWYxW2ldO1xuICAgICAgICAgICAgaWYgKChjaGlsZC50eXBlID09PSBOb2RlVHlwZS5UZXh0IHx8IGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLlJhdykgJiYgKGNoaWxkLnZhbHVlICE9IG51bGwpKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuc3VwcHJlc3NQcmV0dHlDb3VudCsrO1xuICAgICAgICAgICAgICBwcmV0dHlTdXBwcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHIgKz0gJz4nICsgdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgICAgcmVmMiA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYyLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmMltqXTtcbiAgICAgICAgICByICs9IHRoaXMud3JpdGVDaGlsZE5vZGUoY2hpbGQsIG9wdGlvbnMsIGxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICByICs9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSArICc8LycgKyBub2RlLm5hbWUgKyAnPic7XG4gICAgICAgIGlmIChwcmV0dHlTdXBwcmVzc2VkKSB7XG4gICAgICAgICAgb3B0aW9ucy5zdXBwcmVzc1ByZXR0eUNvdW50LS07XG4gICAgICAgIH1cbiAgICAgICAgciArPSB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS53cml0ZUNoaWxkTm9kZSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICBzd2l0Y2ggKG5vZGUudHlwZSkge1xuICAgICAgICBjYXNlIE5vZGVUeXBlLkNEYXRhOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNkYXRhKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Db21tZW50OlxuICAgICAgICAgIHJldHVybiB0aGlzLmNvbW1lbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLkVsZW1lbnQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuUmF3OlxuICAgICAgICAgIHJldHVybiB0aGlzLnJhdyhub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuVGV4dDpcbiAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0KG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Qcm9jZXNzaW5nSW5zdHJ1Y3Rpb246XG4gICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc2luZ0luc3RydWN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5EdW1teTpcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuRGVjbGFyYXRpb246XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGVjbGFyYXRpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLkRvY1R5cGU6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZG9jVHlwZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuQXR0cmlidXRlRGVjbGFyYXRpb246XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZHRkQXR0TGlzdChub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuRWxlbWVudERlY2xhcmF0aW9uOlxuICAgICAgICAgIHJldHVybiB0aGlzLmR0ZEVsZW1lbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLkVudGl0eURlY2xhcmF0aW9uOlxuICAgICAgICAgIHJldHVybiB0aGlzLmR0ZEVudGl0eShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuTm90YXRpb25EZWNsYXJhdGlvbjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5kdGROb3RhdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBYTUwgbm9kZSB0eXBlOiBcIiArIG5vZGUuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLnByb2Nlc3NpbmdJbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICByID0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpICsgJzw/JztcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICByICs9IG5vZGUudGFyZ2V0O1xuICAgICAgaWYgKG5vZGUudmFsdWUpIHtcbiAgICAgICAgciArPSAnICcgKyBub2RlLnZhbHVlO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgciArPSBvcHRpb25zLnNwYWNlQmVmb3JlU2xhc2ggKyAnPz4nO1xuICAgICAgciArPSB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICB0aGlzLmNsb3NlTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgciArPSBub2RlLnZhbHVlO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgciArPSB0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICB0aGlzLmNsb3NlTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICByID0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgIHIgKz0gbm9kZS52YWx1ZTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmR0ZEF0dExpc3QgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSArICc8IUFUVExJU1QnO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgIHIgKz0gJyAnICsgbm9kZS5lbGVtZW50TmFtZSArICcgJyArIG5vZGUuYXR0cmlidXRlTmFtZSArICcgJyArIG5vZGUuYXR0cmlidXRlVHlwZTtcbiAgICAgIGlmIChub2RlLmRlZmF1bHRWYWx1ZVR5cGUgIT09ICcjREVGQVVMVCcpIHtcbiAgICAgICAgciArPSAnICcgKyBub2RlLmRlZmF1bHRWYWx1ZVR5cGU7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgciArPSAnIFwiJyArIG5vZGUuZGVmYXVsdFZhbHVlICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gb3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJz4nICsgdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmR0ZEVsZW1lbnQgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgciA9IHRoaXMuaW5kZW50KG5vZGUsIG9wdGlvbnMsIGxldmVsKSArICc8IUVMRU1FTlQnO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgIHIgKz0gJyAnICsgbm9kZS5uYW1lICsgJyAnICsgbm9kZS52YWx1ZTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gb3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJz4nICsgdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmR0ZEVudGl0eSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICByID0gdGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpICsgJzwhRU5USVRZJztcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICBpZiAobm9kZS5wZSkge1xuICAgICAgICByICs9ICcgJSc7XG4gICAgICB9XG4gICAgICByICs9ICcgJyArIG5vZGUubmFtZTtcbiAgICAgIGlmIChub2RlLnZhbHVlKSB7XG4gICAgICAgIHIgKz0gJyBcIicgKyBub2RlLnZhbHVlICsgJ1wiJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChub2RlLnB1YklEICYmIG5vZGUuc3lzSUQpIHtcbiAgICAgICAgICByICs9ICcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCIgXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5zeXNJRCkge1xuICAgICAgICAgIHIgKz0gJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUubkRhdGEpIHtcbiAgICAgICAgICByICs9ICcgTkRBVEEgJyArIG5vZGUubkRhdGE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHIgKz0gb3B0aW9ucy5zcGFjZUJlZm9yZVNsYXNoICsgJz4nICsgdGhpcy5lbmRsaW5lKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgdGhpcy5jbG9zZU5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmR0ZE5vdGF0aW9uID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgdGhpcy5vcGVuTm9kZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgIHIgPSB0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkgKyAnPCFOT1RBVElPTic7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgciArPSAnICcgKyBub2RlLm5hbWU7XG4gICAgICBpZiAobm9kZS5wdWJJRCAmJiBub2RlLnN5c0lEKSB7XG4gICAgICAgIHIgKz0gJyBQVUJMSUMgXCInICsgbm9kZS5wdWJJRCArICdcIiBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5wdWJJRCkge1xuICAgICAgICByICs9ICcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCInO1xuICAgICAgfSBlbHNlIGlmIChub2RlLnN5c0lEKSB7XG4gICAgICAgIHIgKz0gJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICB9XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICByICs9IG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxXcml0ZXJCYXNlLnByb3RvdHlwZS5vcGVuTm9kZSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7fTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmNsb3NlTm9kZSA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7fTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLm9wZW5BdHRyaWJ1dGUgPSBmdW5jdGlvbihhdHQsIG9wdGlvbnMsIGxldmVsKSB7fTtcblxuICAgIFhNTFdyaXRlckJhc2UucHJvdG90eXBlLmNsb3NlQXR0cmlidXRlID0gZnVuY3Rpb24oYXR0LCBvcHRpb25zLCBsZXZlbCkge307XG5cbiAgICByZXR1cm4gWE1MV3JpdGVyQmFzZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxTdHJpbmdXcml0ZXIsIFhNTFdyaXRlckJhc2UsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBYTUxXcml0ZXJCYXNlID0gcmVxdWlyZSgnLi9YTUxXcml0ZXJCYXNlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxTdHJpbmdXcml0ZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxTdHJpbmdXcml0ZXIsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MU3RyaW5nV3JpdGVyKG9wdGlvbnMpIHtcbiAgICAgIFhNTFN0cmluZ1dyaXRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBYTUxTdHJpbmdXcml0ZXIucHJvdG90eXBlLmRvY3VtZW50ID0gZnVuY3Rpb24oZG9jLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY2hpbGQsIGksIGxlbiwgciwgcmVmO1xuICAgICAgb3B0aW9ucyA9IHRoaXMuZmlsdGVyT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgIHIgPSAnJztcbiAgICAgIHJlZiA9IGRvYy5jaGlsZHJlbjtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgciArPSB0aGlzLndyaXRlQ2hpbGROb2RlKGNoaWxkLCBvcHRpb25zLCAwKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnByZXR0eSAmJiByLnNsaWNlKC1vcHRpb25zLm5ld2xpbmUubGVuZ3RoKSA9PT0gb3B0aW9ucy5uZXdsaW5lKSB7XG4gICAgICAgIHIgPSByLnNsaWNlKDAsIC1vcHRpb25zLm5ld2xpbmUubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MU3RyaW5nV3JpdGVyO1xuXG4gIH0pKFhNTFdyaXRlckJhc2UpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgWE1MRE9NQ29uZmlndXJhdGlvbiwgWE1MRE9NSW1wbGVtZW50YXRpb24sIFhNTERvY3VtZW50LCBYTUxOb2RlLCBYTUxTdHJpbmdXcml0ZXIsIFhNTFN0cmluZ2lmaWVyLCBpc1BsYWluT2JqZWN0LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgaXNQbGFpbk9iamVjdCA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLmlzUGxhaW5PYmplY3Q7XG5cbiAgWE1MRE9NSW1wbGVtZW50YXRpb24gPSByZXF1aXJlKCcuL1hNTERPTUltcGxlbWVudGF0aW9uJyk7XG5cbiAgWE1MRE9NQ29uZmlndXJhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRE9NQ29uZmlndXJhdGlvbicpO1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcblxuICBYTUxTdHJpbmdpZmllciA9IHJlcXVpcmUoJy4vWE1MU3RyaW5naWZpZXInKTtcblxuICBYTUxTdHJpbmdXcml0ZXIgPSByZXF1aXJlKCcuL1hNTFN0cmluZ1dyaXRlcicpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRG9jdW1lbnQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEb2N1bWVudCwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxEb2N1bWVudChvcHRpb25zKSB7XG4gICAgICBYTUxEb2N1bWVudC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBudWxsKTtcbiAgICAgIHRoaXMubmFtZSA9IFwiI2RvY3VtZW50XCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5Eb2N1bWVudDtcbiAgICAgIHRoaXMuZG9jdW1lbnRVUkkgPSBudWxsO1xuICAgICAgdGhpcy5kb21Db25maWcgPSBuZXcgWE1MRE9NQ29uZmlndXJhdGlvbigpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIGlmICghb3B0aW9ucy53cml0ZXIpIHtcbiAgICAgICAgb3B0aW9ucy53cml0ZXIgPSBuZXcgWE1MU3RyaW5nV3JpdGVyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgdGhpcy5zdHJpbmdpZnkgPSBuZXcgWE1MU3RyaW5naWZpZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ2ltcGxlbWVudGF0aW9uJywge1xuICAgICAgdmFsdWU6IG5ldyBYTUxET01JbXBsZW1lbnRhdGlvbigpXG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAnZG9jdHlwZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCByZWY7XG4gICAgICAgIHJlZiA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmW2ldO1xuICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBOb2RlVHlwZS5Eb2NUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ2RvY3VtZW50RWxlbWVudCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3RPYmplY3QgfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICdpbnB1dEVuY29kaW5nJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAnc3RyaWN0RXJyb3JDaGVja2luZycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICd4bWxFbmNvZGluZycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCAhPT0gMCAmJiB0aGlzLmNoaWxkcmVuWzBdLnR5cGUgPT09IE5vZGVUeXBlLkRlY2xhcmF0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bMF0uZW5jb2Rpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICd4bWxTdGFuZGFsb25lJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoICE9PSAwICYmIHRoaXMuY2hpbGRyZW5bMF0udHlwZSA9PT0gTm9kZVR5cGUuRGVjbGFyYXRpb24pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlblswXS5zdGFuZGFsb25lID09PSAneWVzJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxEb2N1bWVudC5wcm90b3R5cGUsICd4bWxWZXJzaW9uJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoICE9PSAwICYmIHRoaXMuY2hpbGRyZW5bMF0udHlwZSA9PT0gTm9kZVR5cGUuRGVjbGFyYXRpb24pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlblswXS52ZXJzaW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBcIjEuMFwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAnVVJMJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRVUkk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAnb3JpZ2luJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRG9jdW1lbnQucHJvdG90eXBlLCAnY29tcGF0TW9kZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ2NoYXJhY3RlclNldCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTERvY3VtZW50LnByb3RvdHlwZSwgJ2NvbnRlbnRUeXBlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24od3JpdGVyKSB7XG4gICAgICB2YXIgd3JpdGVyT3B0aW9ucztcbiAgICAgIHdyaXRlck9wdGlvbnMgPSB7fTtcbiAgICAgIGlmICghd3JpdGVyKSB7XG4gICAgICAgIHdyaXRlciA9IHRoaXMub3B0aW9ucy53cml0ZXI7XG4gICAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qod3JpdGVyKSkge1xuICAgICAgICB3cml0ZXJPcHRpb25zID0gd3JpdGVyO1xuICAgICAgICB3cml0ZXIgPSB0aGlzLm9wdGlvbnMud3JpdGVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyaXRlci5kb2N1bWVudCh0aGlzLCB3cml0ZXIuZmlsdGVyT3B0aW9ucyh3cml0ZXJPcHRpb25zKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLmRvY3VtZW50KHRoaXMsIHRoaXMub3B0aW9ucy53cml0ZXIuZmlsdGVyT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24odGFnTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlVGV4dE5vZGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVDb21tZW50ID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlQ0RBVEFTZWN0aW9uID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0LCBkYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbnRpdHlSZWZlcmVuY2UgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGZ1bmN0aW9uKHRhZ25hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGUgPSBmdW5jdGlvbihpbXBvcnRlZE5vZGUsIGRlZXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnROUyA9IGZ1bmN0aW9uKG5hbWVzcGFjZVVSSSwgcXVhbGlmaWVkTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlQXR0cmlidXRlTlMgPSBmdW5jdGlvbihuYW1lc3BhY2VVUkksIHF1YWxpZmllZE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMgPSBmdW5jdGlvbihuYW1lc3BhY2VVUkksIGxvY2FsTmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudEJ5SWQgPSBmdW5jdGlvbihlbGVtZW50SWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmFkb3B0Tm9kZSA9IGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUubm9ybWFsaXplRG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLnJlbmFtZU5vZGUgPSBmdW5jdGlvbihub2RlLCBuYW1lc3BhY2VVUkksIHF1YWxpZmllZE5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBmdW5jdGlvbihjbGFzc05hbWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SW50ZXJmYWNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVSYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlTm9kZUl0ZXJhdG9yID0gZnVuY3Rpb24ocm9vdCwgd2hhdFRvU2hvdywgZmlsdGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVUcmVlV2Fsa2VyID0gZnVuY3Rpb24ocm9vdCwgd2hhdFRvU2hvdywgZmlsdGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEb2N1bWVudDtcblxuICB9KShYTUxOb2RlKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFdyaXRlclN0YXRlLCBYTUxBdHRyaWJ1dGUsIFhNTENEYXRhLCBYTUxDb21tZW50LCBYTUxEVERBdHRMaXN0LCBYTUxEVERFbGVtZW50LCBYTUxEVERFbnRpdHksIFhNTERURE5vdGF0aW9uLCBYTUxEZWNsYXJhdGlvbiwgWE1MRG9jVHlwZSwgWE1MRG9jdW1lbnQsIFhNTERvY3VtZW50Q0IsIFhNTEVsZW1lbnQsIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgWE1MUmF3LCBYTUxTdHJpbmdXcml0ZXIsIFhNTFN0cmluZ2lmaWVyLCBYTUxUZXh0LCBnZXRWYWx1ZSwgaXNGdW5jdGlvbiwgaXNPYmplY3QsIGlzUGxhaW5PYmplY3QsIHJlZixcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgcmVmID0gcmVxdWlyZSgnLi9VdGlsaXR5JyksIGlzT2JqZWN0ID0gcmVmLmlzT2JqZWN0LCBpc0Z1bmN0aW9uID0gcmVmLmlzRnVuY3Rpb24sIGlzUGxhaW5PYmplY3QgPSByZWYuaXNQbGFpbk9iamVjdCwgZ2V0VmFsdWUgPSByZWYuZ2V0VmFsdWU7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MRG9jdW1lbnQgPSByZXF1aXJlKCcuL1hNTERvY3VtZW50Jyk7XG5cbiAgWE1MRWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRWxlbWVudCcpO1xuXG4gIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuXG4gIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcblxuICBYTUxSYXcgPSByZXF1aXJlKCcuL1hNTFJhdycpO1xuXG4gIFhNTFRleHQgPSByZXF1aXJlKCcuL1hNTFRleHQnKTtcblxuICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSByZXF1aXJlKCcuL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbicpO1xuXG4gIFhNTERlY2xhcmF0aW9uID0gcmVxdWlyZSgnLi9YTUxEZWNsYXJhdGlvbicpO1xuXG4gIFhNTERvY1R5cGUgPSByZXF1aXJlKCcuL1hNTERvY1R5cGUnKTtcblxuICBYTUxEVERBdHRMaXN0ID0gcmVxdWlyZSgnLi9YTUxEVERBdHRMaXN0Jyk7XG5cbiAgWE1MRFRERW50aXR5ID0gcmVxdWlyZSgnLi9YTUxEVERFbnRpdHknKTtcblxuICBYTUxEVERFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxEVERFbGVtZW50Jyk7XG5cbiAgWE1MRFRETm90YXRpb24gPSByZXF1aXJlKCcuL1hNTERURE5vdGF0aW9uJyk7XG5cbiAgWE1MQXR0cmlidXRlID0gcmVxdWlyZSgnLi9YTUxBdHRyaWJ1dGUnKTtcblxuICBYTUxTdHJpbmdpZmllciA9IHJlcXVpcmUoJy4vWE1MU3RyaW5naWZpZXInKTtcblxuICBYTUxTdHJpbmdXcml0ZXIgPSByZXF1aXJlKCcuL1hNTFN0cmluZ1dyaXRlcicpO1xuXG4gIFdyaXRlclN0YXRlID0gcmVxdWlyZSgnLi9Xcml0ZXJTdGF0ZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRG9jdW1lbnRDQiA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBYTUxEb2N1bWVudENCKG9wdGlvbnMsIG9uRGF0YSwgb25FbmQpIHtcbiAgICAgIHZhciB3cml0ZXJPcHRpb25zO1xuICAgICAgdGhpcy5uYW1lID0gXCI/eG1sXCI7XG4gICAgICB0aGlzLnR5cGUgPSBOb2RlVHlwZS5Eb2N1bWVudDtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICB3cml0ZXJPcHRpb25zID0ge307XG4gICAgICBpZiAoIW9wdGlvbnMud3JpdGVyKSB7XG4gICAgICAgIG9wdGlvbnMud3JpdGVyID0gbmV3IFhNTFN0cmluZ1dyaXRlcigpO1xuICAgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KG9wdGlvbnMud3JpdGVyKSkge1xuICAgICAgICB3cml0ZXJPcHRpb25zID0gb3B0aW9ucy53cml0ZXI7XG4gICAgICAgIG9wdGlvbnMud3JpdGVyID0gbmV3IFhNTFN0cmluZ1dyaXRlcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHRoaXMud3JpdGVyID0gb3B0aW9ucy53cml0ZXI7XG4gICAgICB0aGlzLndyaXRlck9wdGlvbnMgPSB0aGlzLndyaXRlci5maWx0ZXJPcHRpb25zKHdyaXRlck9wdGlvbnMpO1xuICAgICAgdGhpcy5zdHJpbmdpZnkgPSBuZXcgWE1MU3RyaW5naWZpZXIob3B0aW9ucyk7XG4gICAgICB0aGlzLm9uRGF0YUNhbGxiYWNrID0gb25EYXRhIHx8IGZ1bmN0aW9uKCkge307XG4gICAgICB0aGlzLm9uRW5kQ2FsbGJhY2sgPSBvbkVuZCB8fCBmdW5jdGlvbigpIHt9O1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG51bGw7XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCA9IC0xO1xuICAgICAgdGhpcy5vcGVuVGFncyA9IHt9O1xuICAgICAgdGhpcy5kb2N1bWVudFN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZG9jdW1lbnRDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgfVxuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuY3JlYXRlQ2hpbGROb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGF0dCwgYXR0TmFtZSwgYXR0cmlidXRlcywgY2hpbGQsIGksIGxlbiwgcmVmMSwgcmVmMjtcbiAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuQ0RhdGE6XG4gICAgICAgICAgdGhpcy5jZGF0YShub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Db21tZW50OlxuICAgICAgICAgIHRoaXMuY29tbWVudChub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5FbGVtZW50OlxuICAgICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgICByZWYxID0gbm9kZS5hdHRyaWJzO1xuICAgICAgICAgIGZvciAoYXR0TmFtZSBpbiByZWYxKSB7XG4gICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYxLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgICAgICBhdHQgPSByZWYxW2F0dE5hbWVdO1xuICAgICAgICAgICAgYXR0cmlidXRlc1thdHROYW1lXSA9IGF0dC52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5ub2RlKG5vZGUubmFtZSwgYXR0cmlidXRlcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuRHVtbXk6XG4gICAgICAgICAgdGhpcy5kdW1teSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLlJhdzpcbiAgICAgICAgICB0aGlzLnJhdyhub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5UZXh0OlxuICAgICAgICAgIHRoaXMudGV4dChub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Qcm9jZXNzaW5nSW5zdHJ1Y3Rpb246XG4gICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbihub2RlLnRhcmdldCwgbm9kZS52YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBYTUwgbm9kZSB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBKUyBvYmplY3Q6IFwiICsgbm9kZS5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgIH1cbiAgICAgIHJlZjIgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmMi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjaGlsZCA9IHJlZjJbaV07XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hpbGROb2RlKGNoaWxkKTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdW1teSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgcmVmMTtcbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBub2RlIG5hbWUuXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucm9vdCAmJiB0aGlzLmN1cnJlbnRMZXZlbCA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG9jdW1lbnQgY2FuIG9ubHkgaGF2ZSBvbmUgcm9vdCBub2RlLiBcIiArIHRoaXMuZGVidWdJbmZvKG5hbWUpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgIGlmIChhdHRyaWJ1dGVzID09IG51bGwpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgfVxuICAgICAgYXR0cmlidXRlcyA9IGdldFZhbHVlKGF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKCFpc09iamVjdChhdHRyaWJ1dGVzKSkge1xuICAgICAgICByZWYxID0gW2F0dHJpYnV0ZXMsIHRleHRdLCB0ZXh0ID0gcmVmMVswXSwgYXR0cmlidXRlcyA9IHJlZjFbMV07XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnJlbnROb2RlID0gbmV3IFhNTEVsZW1lbnQodGhpcywgbmFtZSwgYXR0cmlidXRlcyk7XG4gICAgICB0aGlzLmN1cnJlbnROb2RlLmNoaWxkcmVuID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCsrO1xuICAgICAgdGhpcy5vcGVuVGFnc1t0aGlzLmN1cnJlbnRMZXZlbF0gPSB0aGlzLmN1cnJlbnROb2RlO1xuICAgICAgaWYgKHRleHQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnRleHQodGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZWxlbWVudCA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCBvbGRWYWxpZGF0aW9uRmxhZywgcmVmMSwgcm9vdDtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlICYmIHRoaXMuY3VycmVudE5vZGUudHlwZSA9PT0gTm9kZVR5cGUuRG9jVHlwZSkge1xuICAgICAgICB0aGlzLmR0ZEVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWUpIHx8IGlzT2JqZWN0KG5hbWUpIHx8IGlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgICBvbGRWYWxpZGF0aW9uRmxhZyA9IHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb247XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbiA9IHRydWU7XG4gICAgICAgICAgcm9vdCA9IG5ldyBYTUxEb2N1bWVudCh0aGlzLm9wdGlvbnMpLmVsZW1lbnQoJ1RFTVBfUk9PVCcpO1xuICAgICAgICAgIHJvb3QuZWxlbWVudChuYW1lKTtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uID0gb2xkVmFsaWRhdGlvbkZsYWc7XG4gICAgICAgICAgcmVmMSA9IHJvb3QuY2hpbGRyZW47XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY2hpbGQgPSByZWYxW2ldO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDaGlsZE5vZGUoY2hpbGQpO1xuICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgdGhpcy51cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5hdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGF0dE5hbWUsIGF0dFZhbHVlO1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnROb2RlIHx8IHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXR0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbW1lZGlhdGVseSBhZnRlciBhbiBlbGUoKSBjYWxsIGluIGNhbGxiYWNrIG1vZGUuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gZ2V0VmFsdWUobmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgICAgZm9yIChhdHROYW1lIGluIG5hbWUpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChuYW1lLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgICAgYXR0VmFsdWUgPSBuYW1lW2F0dE5hbWVdO1xuICAgICAgICAgIHRoaXMuYXR0cmlidXRlKGF0dE5hbWUsIGF0dFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMua2VlcE51bGxBdHRyaWJ1dGVzICYmICh2YWx1ZSA9PSBudWxsKSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUuYXR0cmlic1tuYW1lXSA9IG5ldyBYTUxBdHRyaWJ1dGUodGhpcywgbmFtZSwgXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUuYXR0cmlic1tuYW1lXSA9IG5ldyBYTUxBdHRyaWJ1dGUodGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MVGV4dCh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci50ZXh0KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5jZGF0YSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MQ0RhdGEodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuY2RhdGEobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTENvbW1lbnQodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuY29tbWVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxSYXcodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIucmF3KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5pbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHZhciBpLCBpbnNUYXJnZXQsIGluc1ZhbHVlLCBsZW4sIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBpZiAodGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0ID0gZ2V0VmFsdWUodGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHZhbHVlID0gZ2V0VmFsdWUodmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSB0YXJnZXQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBpbnNUYXJnZXQgPSB0YXJnZXRbaV07XG4gICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbihpbnNUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgZm9yIChpbnNUYXJnZXQgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwodGFyZ2V0LCBpbnNUYXJnZXQpKSBjb250aW51ZTtcbiAgICAgICAgICBpbnNWYWx1ZSA9IHRhcmdldFtpbnNUYXJnZXRdO1xuICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24oaW5zVGFyZ2V0LCBpbnNWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUuYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbmV3IFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbih0aGlzLCB0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIucHJvY2Vzc2luZ0luc3RydWN0aW9uKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kZWNsYXJhdGlvbiA9IGZ1bmN0aW9uKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIGlmICh0aGlzLmRvY3VtZW50U3RhcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkZWNsYXJhdGlvbigpIG11c3QgYmUgdGhlIGZpcnN0IG5vZGUuXCIpO1xuICAgICAgfVxuICAgICAgbm9kZSA9IG5ldyBYTUxEZWNsYXJhdGlvbih0aGlzLCB2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kZWNsYXJhdGlvbihub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZG9jdHlwZSA9IGZ1bmN0aW9uKHJvb3QsIHB1YklELCBzeXNJRCkge1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgaWYgKHJvb3QgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJvb3Qgbm9kZSBuYW1lLlwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJvb3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZHRkKCkgbXVzdCBjb21lIGJlZm9yZSB0aGUgcm9vdCBub2RlLlwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBuZXcgWE1MRG9jVHlwZSh0aGlzLCBwdWJJRCwgc3lzSUQpO1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZS5yb290Tm9kZU5hbWUgPSByb290O1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50TGV2ZWwrKztcbiAgICAgIHRoaXMub3BlblRhZ3NbdGhpcy5jdXJyZW50TGV2ZWxdID0gdGhpcy5jdXJyZW50Tm9kZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdGRFbGVtZW50ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxEVERFbGVtZW50KHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZEVsZW1lbnQobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmF0dExpc3QgPSBmdW5jdGlvbihlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MRFREQXR0TGlzdCh0aGlzLCBlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZEF0dExpc3Qobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVudGl0eSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MRFRERW50aXR5KHRoaXMsIGZhbHNlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGRFbnRpdHkobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLnBFbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERUREVudGl0eSh0aGlzLCB0cnVlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGRFbnRpdHkobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm5vdGF0aW9uID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxEVEROb3RhdGlvbih0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGROb3RhdGlvbihub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRMZXZlbCA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGRvY3VtZW50IG5vZGUgaGFzIG5vIHBhcmVudC5cIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZSkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgIHRoaXMuY2xvc2VOb2RlKHRoaXMuY3VycmVudE5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub3Blbk5vZGUodGhpcy5jdXJyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNsb3NlTm9kZSh0aGlzLm9wZW5UYWdzW3RoaXMuY3VycmVudExldmVsXSk7XG4gICAgICB9XG4gICAgICBkZWxldGUgdGhpcy5vcGVuVGFnc1t0aGlzLmN1cnJlbnRMZXZlbF07XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbC0tO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgd2hpbGUgKHRoaXMuY3VycmVudExldmVsID49IDApIHtcbiAgICAgICAgdGhpcy51cCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMub25FbmQoKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub3BlbkN1cnJlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4gPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVuTm9kZSh0aGlzLmN1cnJlbnROb2RlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub3Blbk5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICB2YXIgYXR0LCBjaHVuaywgbmFtZSwgcmVmMTtcbiAgICAgIGlmICghbm9kZS5pc09wZW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLnJvb3QgJiYgdGhpcy5jdXJyZW50TGV2ZWwgPT09IDAgJiYgbm9kZS50eXBlID09PSBOb2RlVHlwZS5FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5yb290ID0gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICBjaHVuayA9ICcnO1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSBOb2RlVHlwZS5FbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgICAgICBjaHVuayA9IHRoaXMud3JpdGVyLmluZGVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKSArICc8JyArIG5vZGUubmFtZTtcbiAgICAgICAgICByZWYxID0gbm9kZS5hdHRyaWJzO1xuICAgICAgICAgIGZvciAobmFtZSBpbiByZWYxKSB7XG4gICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYxLCBuYW1lKSkgY29udGludWU7XG4gICAgICAgICAgICBhdHQgPSByZWYxW25hbWVdO1xuICAgICAgICAgICAgY2h1bmsgKz0gdGhpcy53cml0ZXIuYXR0cmlidXRlKGF0dCwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNodW5rICs9IChub2RlLmNoaWxkcmVuID8gJz4nIDogJy8+JykgKyB0aGlzLndyaXRlci5lbmRsaW5lKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpO1xuICAgICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLndyaXRlck9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgICAgIGNodW5rID0gdGhpcy53cml0ZXIuaW5kZW50KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpICsgJzwhRE9DVFlQRSAnICsgbm9kZS5yb290Tm9kZU5hbWU7XG4gICAgICAgICAgaWYgKG5vZGUucHViSUQgJiYgbm9kZS5zeXNJRCkge1xuICAgICAgICAgICAgY2h1bmsgKz0gJyBQVUJMSUMgXCInICsgbm9kZS5wdWJJRCArICdcIiBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUuc3lzSUQpIHtcbiAgICAgICAgICAgIGNodW5rICs9ICcgU1lTVEVNIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgY2h1bmsgKz0gJyBbJztcbiAgICAgICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkluc2lkZVRhZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgICAgICBjaHVuayArPSAnPic7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNodW5rICs9IHRoaXMud3JpdGVyLmVuZGxpbmUobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkRhdGEoY2h1bmssIHRoaXMuY3VycmVudExldmVsKTtcbiAgICAgICAgcmV0dXJuIG5vZGUuaXNPcGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuY2xvc2VOb2RlID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGNodW5rO1xuICAgICAgaWYgKCFub2RlLmlzQ2xvc2VkKSB7XG4gICAgICAgIGNodW5rID0gJyc7XG4gICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSBOb2RlVHlwZS5FbGVtZW50KSB7XG4gICAgICAgICAgY2h1bmsgPSB0aGlzLndyaXRlci5pbmRlbnQobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCkgKyAnPC8nICsgbm9kZS5uYW1lICsgJz4nICsgdGhpcy53cml0ZXIuZW5kbGluZShub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaHVuayA9IHRoaXMud3JpdGVyLmluZGVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKSArICddPicgKyB0aGlzLndyaXRlci5lbmRsaW5lKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdGVyT3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk5vbmU7XG4gICAgICAgIHRoaXMub25EYXRhKGNodW5rLCB0aGlzLmN1cnJlbnRMZXZlbCk7XG4gICAgICAgIHJldHVybiBub2RlLmlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24oY2h1bmssIGxldmVsKSB7XG4gICAgICB0aGlzLmRvY3VtZW50U3RhcnRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcy5vbkRhdGFDYWxsYmFjayhjaHVuaywgbGV2ZWwgKyAxKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMub25FbmRDYWxsYmFjaygpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kZWJ1Z0luZm8gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwibm9kZTogPFwiICsgbmFtZSArIFwiPlwiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5lbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUubm9kID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudHh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kYXQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2RhdGEodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5jb20gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmlucyA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kZWMgPSBmdW5jdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVjbGFyYXRpb24odmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdGQgPSBmdW5jdGlvbihyb290LCBwdWJJRCwgc3lzSUQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRvY3R5cGUocm9vdCwgcHViSUQsIHN5c0lEKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZSA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm4gPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNkYXRhKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21tZW50KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5yYXcodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5pID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmF0dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUgJiYgdGhpcy5jdXJyZW50Tm9kZS50eXBlID09PSBOb2RlVHlwZS5Eb2NUeXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5hID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZSAmJiB0aGlzLmN1cnJlbnROb2RlLnR5cGUgPT09IE5vZGVUeXBlLkRvY1R5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0TGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVudCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5wZW50ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBFbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5ub3QgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMubm90YXRpb24obmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRG9jdW1lbnRDQjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBOb2RlVHlwZSwgV3JpdGVyU3RhdGUsIFhNTFN0cmVhbVdyaXRlciwgWE1MV3JpdGVyQmFzZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIFhNTFdyaXRlckJhc2UgPSByZXF1aXJlKCcuL1hNTFdyaXRlckJhc2UnKTtcblxuICBXcml0ZXJTdGF0ZSA9IHJlcXVpcmUoJy4vV3JpdGVyU3RhdGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTFN0cmVhbVdyaXRlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTFN0cmVhbVdyaXRlciwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxTdHJlYW1Xcml0ZXIoc3RyZWFtLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLnN0cmVhbSA9IHN0cmVhbTtcbiAgICAgIFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmVuZGxpbmUgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgaWYgKG5vZGUuaXNMYXN0Um9vdE5vZGUgJiYgb3B0aW9ucy5zdGF0ZSA9PT0gV3JpdGVyU3RhdGUuQ2xvc2VUYWcpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uZW5kbGluZS5jYWxsKHRoaXMsIG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kb2N1bWVudCA9IGZ1bmN0aW9uKGRvYywgb3B0aW9ucykge1xuICAgICAgdmFyIGNoaWxkLCBpLCBqLCBrLCBsZW4sIGxlbjEsIHJlZiwgcmVmMSwgcmVzdWx0cztcbiAgICAgIHJlZiA9IGRvYy5jaGlsZHJlbjtcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XG4gICAgICAgIGNoaWxkID0gcmVmW2ldO1xuICAgICAgICBjaGlsZC5pc0xhc3RSb290Tm9kZSA9IGkgPT09IGRvYy5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IHRoaXMuZmlsdGVyT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgIHJlZjEgPSBkb2MuY2hpbGRyZW47XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGsgPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGsgPCBsZW4xOyBrKyspIHtcbiAgICAgICAgY2hpbGQgPSByZWYxW2tdO1xuICAgICAgICByZXN1bHRzLnB1c2godGhpcy53cml0ZUNoaWxkTm9kZShjaGlsZCwgb3B0aW9ucywgMCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuYXR0cmlidXRlID0gZnVuY3Rpb24oYXR0LCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uYXR0cmlidXRlLmNhbGwodGhpcywgYXR0LCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmNkYXRhID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZShYTUxTdHJlYW1Xcml0ZXIuX19zdXBlcl9fLmNkYXRhLmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5jb21tZW50ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZShYTUxTdHJlYW1Xcml0ZXIuX19zdXBlcl9fLmNvbW1lbnQuY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmRlY2xhcmF0aW9uID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZShYTUxTdHJlYW1Xcml0ZXIuX19zdXBlcl9fLmRlY2xhcmF0aW9uLmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kb2NUeXBlID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciBjaGlsZCwgaiwgbGVuLCByZWY7XG4gICAgICBsZXZlbCB8fCAobGV2ZWwgPSAwKTtcbiAgICAgIHRoaXMub3Blbk5vZGUobm9kZSwgb3B0aW9ucywgbGV2ZWwpO1xuICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLk9wZW5UYWc7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLmluZGVudChub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJzwhRE9DVFlQRSAnICsgbm9kZS5yb290KCkubmFtZSk7XG4gICAgICBpZiAobm9kZS5wdWJJRCAmJiBub2RlLnN5c0lEKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCIgXCInICsgbm9kZS5zeXNJRCArICdcIicpO1xuICAgICAgfSBlbHNlIGlmIChub2RlLnN5c0lEKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCcgU1lTVEVNIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInKTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBbJyk7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgICByZWYgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZltqXTtcbiAgICAgICAgICB0aGlzLndyaXRlQ2hpbGROb2RlKGNoaWxkLCBvcHRpb25zLCBsZXZlbCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJ10nKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICc+Jyk7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5lbGVtZW50ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHZhciBhdHQsIGNoaWxkLCBjaGlsZE5vZGVDb3VudCwgZmlyc3RDaGlsZE5vZGUsIGosIGxlbiwgbmFtZSwgcHJldHR5U3VwcHJlc3NlZCwgcmVmLCByZWYxO1xuICAgICAgbGV2ZWwgfHwgKGxldmVsID0gMCk7XG4gICAgICB0aGlzLm9wZW5Ob2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpICsgJzwnICsgbm9kZS5uYW1lKTtcbiAgICAgIHJlZiA9IG5vZGUuYXR0cmlicztcbiAgICAgIGZvciAobmFtZSBpbiByZWYpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBuYW1lKSkgY29udGludWU7XG4gICAgICAgIGF0dCA9IHJlZltuYW1lXTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGUoYXR0LCBvcHRpb25zLCBsZXZlbCk7XG4gICAgICB9XG4gICAgICBjaGlsZE5vZGVDb3VudCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgZmlyc3RDaGlsZE5vZGUgPSBjaGlsZE5vZGVDb3VudCA9PT0gMCA/IG51bGwgOiBub2RlLmNoaWxkcmVuWzBdO1xuICAgICAgaWYgKGNoaWxkTm9kZUNvdW50ID09PSAwIHx8IG5vZGUuY2hpbGRyZW4uZXZlcnkoZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gKGUudHlwZSA9PT0gTm9kZVR5cGUuVGV4dCB8fCBlLnR5cGUgPT09IE5vZGVUeXBlLlJhdykgJiYgZS52YWx1ZSA9PT0gJyc7XG4gICAgICB9KSkge1xuICAgICAgICBpZiAob3B0aW9ucy5hbGxvd0VtcHR5KSB7XG4gICAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJz4nKTtcbiAgICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJzwvJyArIG5vZGUubmFtZSArICc+Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKG9wdGlvbnMuc3BhY2VCZWZvcmVTbGFzaCArICcvPicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucHJldHR5ICYmIGNoaWxkTm9kZUNvdW50ID09PSAxICYmIChmaXJzdENoaWxkTm9kZS50eXBlID09PSBOb2RlVHlwZS5UZXh0IHx8IGZpcnN0Q2hpbGROb2RlLnR5cGUgPT09IE5vZGVUeXBlLlJhdykgJiYgKGZpcnN0Q2hpbGROb2RlLnZhbHVlICE9IG51bGwpKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCc+Jyk7XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7XG4gICAgICAgIG9wdGlvbnMuc3VwcHJlc3NQcmV0dHlDb3VudCsrO1xuICAgICAgICBwcmV0dHlTdXBwcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy53cml0ZUNoaWxkTm9kZShmaXJzdENoaWxkTm9kZSwgb3B0aW9ucywgbGV2ZWwgKyAxKTtcbiAgICAgICAgb3B0aW9ucy5zdXBwcmVzc1ByZXR0eUNvdW50LS07XG4gICAgICAgIHByZXR0eVN1cHByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgb3B0aW9ucy5zdGF0ZSA9IFdyaXRlclN0YXRlLkNsb3NlVGFnO1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnPC8nICsgbm9kZS5uYW1lICsgJz4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCc+JyArIHRoaXMuZW5kbGluZShub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgICAgICBvcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgICByZWYxID0gbm9kZS5jaGlsZHJlbjtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmMVtqXTtcbiAgICAgICAgICB0aGlzLndyaXRlQ2hpbGROb2RlKGNoaWxkLCBvcHRpb25zLCBsZXZlbCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5pbmRlbnQobm9kZSwgb3B0aW9ucywgbGV2ZWwpICsgJzwvJyArIG5vZGUubmFtZSArICc+Jyk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLmVuZGxpbmUobm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICAgIG9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5Ob25lO1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2VOb2RlKG5vZGUsIG9wdGlvbnMsIGxldmVsKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18ucHJvY2Vzc2luZ0luc3RydWN0aW9uLmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18ucmF3LmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24obm9kZSwgb3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZShYTUxTdHJlYW1Xcml0ZXIuX19zdXBlcl9fLnRleHQuY2FsbCh0aGlzLCBub2RlLCBvcHRpb25zLCBsZXZlbCkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmR0ZEF0dExpc3QgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uZHRkQXR0TGlzdC5jYWxsKHRoaXMsIG5vZGUsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuZHRkRWxlbWVudCA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUoWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5kdGRFbGVtZW50LmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kdGRFbnRpdHkgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uZHRkRW50aXR5LmNhbGwodGhpcywgbm9kZSwgb3B0aW9ucywgbGV2ZWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kdGROb3RhdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIG9wdGlvbnMsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUoWE1MU3RyZWFtV3JpdGVyLl9fc3VwZXJfXy5kdGROb3RhdGlvbi5jYWxsKHRoaXMsIG5vZGUsIG9wdGlvbnMsIGxldmVsKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxTdHJlYW1Xcml0ZXI7XG5cbiAgfSkoWE1MV3JpdGVyQmFzZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBXcml0ZXJTdGF0ZSwgWE1MRE9NSW1wbGVtZW50YXRpb24sIFhNTERvY3VtZW50LCBYTUxEb2N1bWVudENCLCBYTUxTdHJlYW1Xcml0ZXIsIFhNTFN0cmluZ1dyaXRlciwgYXNzaWduLCBpc0Z1bmN0aW9uLCByZWY7XG5cbiAgcmVmID0gcmVxdWlyZSgnLi9VdGlsaXR5JyksIGFzc2lnbiA9IHJlZi5hc3NpZ24sIGlzRnVuY3Rpb24gPSByZWYuaXNGdW5jdGlvbjtcblxuICBYTUxET01JbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRE9NSW1wbGVtZW50YXRpb24nKTtcblxuICBYTUxEb2N1bWVudCA9IHJlcXVpcmUoJy4vWE1MRG9jdW1lbnQnKTtcblxuICBYTUxEb2N1bWVudENCID0gcmVxdWlyZSgnLi9YTUxEb2N1bWVudENCJyk7XG5cbiAgWE1MU3RyaW5nV3JpdGVyID0gcmVxdWlyZSgnLi9YTUxTdHJpbmdXcml0ZXInKTtcblxuICBYTUxTdHJlYW1Xcml0ZXIgPSByZXF1aXJlKCcuL1hNTFN0cmVhbVdyaXRlcicpO1xuXG4gIE5vZGVUeXBlID0gcmVxdWlyZSgnLi9Ob2RlVHlwZScpO1xuXG4gIFdyaXRlclN0YXRlID0gcmVxdWlyZSgnLi9Xcml0ZXJTdGF0ZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHhtbGRlYywgZG9jdHlwZSwgb3B0aW9ucykge1xuICAgIHZhciBkb2MsIHJvb3Q7XG4gICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUm9vdCBlbGVtZW50IG5lZWRzIGEgbmFtZS5cIik7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIHhtbGRlYywgZG9jdHlwZSwgb3B0aW9ucyk7XG4gICAgZG9jID0gbmV3IFhNTERvY3VtZW50KG9wdGlvbnMpO1xuICAgIHJvb3QgPSBkb2MuZWxlbWVudChuYW1lKTtcbiAgICBpZiAoIW9wdGlvbnMuaGVhZGxlc3MpIHtcbiAgICAgIGRvYy5kZWNsYXJhdGlvbihvcHRpb25zKTtcbiAgICAgIGlmICgob3B0aW9ucy5wdWJJRCAhPSBudWxsKSB8fCAob3B0aW9ucy5zeXNJRCAhPSBudWxsKSkge1xuICAgICAgICBkb2MuZHRkKG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcm9vdDtcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cy5iZWdpbiA9IGZ1bmN0aW9uKG9wdGlvbnMsIG9uRGF0YSwgb25FbmQpIHtcbiAgICB2YXIgcmVmMTtcbiAgICBpZiAoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgcmVmMSA9IFtvcHRpb25zLCBvbkRhdGFdLCBvbkRhdGEgPSByZWYxWzBdLCBvbkVuZCA9IHJlZjFbMV07XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmIChvbkRhdGEpIHtcbiAgICAgIHJldHVybiBuZXcgWE1MRG9jdW1lbnRDQihvcHRpb25zLCBvbkRhdGEsIG9uRW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBYTUxEb2N1bWVudChvcHRpb25zKTtcbiAgICB9XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHMuc3RyaW5nV3JpdGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgWE1MU3RyaW5nV3JpdGVyKG9wdGlvbnMpO1xuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzLnN0cmVhbVdyaXRlciA9IGZ1bmN0aW9uKHN0cmVhbSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgWE1MU3RyZWFtV3JpdGVyKHN0cmVhbSwgb3B0aW9ucyk7XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHMuaW1wbGVtZW50YXRpb24gPSBuZXcgWE1MRE9NSW1wbGVtZW50YXRpb24oKTtcblxuICBtb2R1bGUuZXhwb3J0cy5ub2RlVHlwZSA9IE5vZGVUeXBlO1xuXG4gIG1vZHVsZS5leHBvcnRzLndyaXRlclN0YXRlID0gV3JpdGVyU3RhdGU7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCAiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIHZhciBidWlsZGVyLCBkZWZhdWx0cywgZXNjYXBlQ0RBVEEsIHJlcXVpcmVzQ0RBVEEsIHdyYXBDREFUQSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgYnVpbGRlciA9IHJlcXVpcmUoJ3htbGJ1aWxkZXInKTtcblxuICBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKS5kZWZhdWx0cztcblxuICByZXF1aXJlc0NEQVRBID0gZnVuY3Rpb24oZW50cnkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiICYmIChlbnRyeS5pbmRleE9mKCcmJykgPj0gMCB8fCBlbnRyeS5pbmRleE9mKCc+JykgPj0gMCB8fCBlbnRyeS5pbmRleE9mKCc8JykgPj0gMCk7XG4gIH07XG5cbiAgd3JhcENEQVRBID0gZnVuY3Rpb24oZW50cnkpIHtcbiAgICByZXR1cm4gXCI8IVtDREFUQVtcIiArIChlc2NhcGVDREFUQShlbnRyeSkpICsgXCJdXT5cIjtcbiAgfTtcblxuICBlc2NhcGVDREFUQSA9IGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgcmV0dXJuIGVudHJ5LnJlcGxhY2UoJ11dPicsICddXV1dPjwhW0NEQVRBWz4nKTtcbiAgfTtcblxuICBleHBvcnRzLkJ1aWxkZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gQnVpbGRlcihvcHRzKSB7XG4gICAgICB2YXIga2V5LCByZWYsIHZhbHVlO1xuICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICByZWYgPSBkZWZhdWx0c1tcIjAuMlwiXTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHJlZltrZXldO1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gb3B0cykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvcHRzLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSBvcHRzW2tleV07XG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQnVpbGRlci5wcm90b3R5cGUuYnVpbGRPYmplY3QgPSBmdW5jdGlvbihyb290T2JqKSB7XG4gICAgICB2YXIgYXR0cmtleSwgY2hhcmtleSwgcmVuZGVyLCByb290RWxlbWVudCwgcm9vdE5hbWU7XG4gICAgICBhdHRya2V5ID0gdGhpcy5vcHRpb25zLmF0dHJrZXk7XG4gICAgICBjaGFya2V5ID0gdGhpcy5vcHRpb25zLmNoYXJrZXk7XG4gICAgICBpZiAoKE9iamVjdC5rZXlzKHJvb3RPYmopLmxlbmd0aCA9PT0gMSkgJiYgKHRoaXMub3B0aW9ucy5yb290TmFtZSA9PT0gZGVmYXVsdHNbJzAuMiddLnJvb3ROYW1lKSkge1xuICAgICAgICByb290TmFtZSA9IE9iamVjdC5rZXlzKHJvb3RPYmopWzBdO1xuICAgICAgICByb290T2JqID0gcm9vdE9ialtyb290TmFtZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290TmFtZSA9IHRoaXMub3B0aW9ucy5yb290TmFtZTtcbiAgICAgIH1cbiAgICAgIHJlbmRlciA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZWxlbWVudCwgb2JqKSB7XG4gICAgICAgICAgdmFyIGF0dHIsIGNoaWxkLCBlbnRyeSwgaW5kZXgsIGtleSwgdmFsdWU7XG4gICAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5jZGF0YSAmJiByZXF1aXJlc0NEQVRBKG9iaikpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC5yYXcod3JhcENEQVRBKG9iaikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZWxlbWVudC50eHQob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgZm9yIChpbmRleCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwob2JqLCBpbmRleCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICBjaGlsZCA9IG9ialtpbmRleF07XG4gICAgICAgICAgICAgIGZvciAoa2V5IGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgZW50cnkgPSBjaGlsZFtrZXldO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSByZW5kZXIoZWxlbWVudC5lbGUoa2V5KSwgZW50cnkpLnVwKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9iaiwga2V5KSkgY29udGludWU7XG4gICAgICAgICAgICAgIGNoaWxkID0gb2JqW2tleV07XG4gICAgICAgICAgICAgIGlmIChrZXkgPT09IGF0dHJrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGF0dHIgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjaGlsZFthdHRyXTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuYXR0KGF0dHIsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBjaGFya2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuY2RhdGEgJiYgcmVxdWlyZXNDREFUQShjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnJhdyh3cmFwQ0RBVEEoY2hpbGQpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQudHh0KGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGluZGV4IGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChjaGlsZCwgaW5kZXgpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgIGVudHJ5ID0gY2hpbGRbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuY2RhdGEgJiYgcmVxdWlyZXNDREFUQShlbnRyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5lbGUoa2V5KS5yYXcod3JhcENEQVRBKGVudHJ5KSkudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5lbGUoa2V5LCBlbnRyeSkudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IHJlbmRlcihlbGVtZW50LmVsZShrZXkpLCBlbnRyeSkudXAoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNoaWxkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHJlbmRlcihlbGVtZW50LmVsZShrZXkpLCBjaGlsZCkudXAoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkID09PSAnc3RyaW5nJyAmJiBfdGhpcy5vcHRpb25zLmNkYXRhICYmIHJlcXVpcmVzQ0RBVEEoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5lbGUoa2V5KS5yYXcod3JhcENEQVRBKGNoaWxkKSkudXAoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSAnJztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmVsZShrZXksIGNoaWxkLnRvU3RyaW5nKCkpLnVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICByb290RWxlbWVudCA9IGJ1aWxkZXIuY3JlYXRlKHJvb3ROYW1lLCB0aGlzLm9wdGlvbnMueG1sZGVjLCB0aGlzLm9wdGlvbnMuZG9jdHlwZSwge1xuICAgICAgICBoZWFkbGVzczogdGhpcy5vcHRpb25zLmhlYWRsZXNzLFxuICAgICAgICBhbGxvd1N1cnJvZ2F0ZUNoYXJzOiB0aGlzLm9wdGlvbnMuYWxsb3dTdXJyb2dhdGVDaGFyc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVuZGVyKHJvb3RFbGVtZW50LCByb290T2JqKS5lbmQodGhpcy5vcHRpb25zLnJlbmRlck9wdHMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQnVpbGRlcjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIjsoZnVuY3Rpb24gKHNheCkgeyAvLyB3cmFwcGVyIGZvciBub24tbm9kZSBlbnZzXG4gIHNheC5wYXJzZXIgPSBmdW5jdGlvbiAoc3RyaWN0LCBvcHQpIHsgcmV0dXJuIG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpIH1cbiAgc2F4LlNBWFBhcnNlciA9IFNBWFBhcnNlclxuICBzYXguU0FYU3RyZWFtID0gU0FYU3RyZWFtXG4gIHNheC5jcmVhdGVTdHJlYW0gPSBjcmVhdGVTdHJlYW1cblxuICAvLyBXaGVuIHdlIHBhc3MgdGhlIE1BWF9CVUZGRVJfTEVOR1RIIHBvc2l0aW9uLCBzdGFydCBjaGVja2luZyBmb3IgYnVmZmVyIG92ZXJydW5zLlxuICAvLyBXaGVuIHdlIGNoZWNrLCBzY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBmb3IgTUFYX0JVRkZFUl9MRU5HVEggLSAobWF4KGJ1ZmZlciBsZW5ndGhzKSksXG4gIC8vIHNpbmNlIHRoYXQncyB0aGUgZWFybGllc3QgdGhhdCBhIGJ1ZmZlciBvdmVycnVuIGNvdWxkIG9jY3VyLiAgVGhpcyB3YXksIGNoZWNrcyBhcmVcbiAgLy8gYXMgcmFyZSBhcyByZXF1aXJlZCwgYnV0IGFzIG9mdGVuIGFzIG5lY2Vzc2FyeSB0byBlbnN1cmUgbmV2ZXIgY3Jvc3NpbmcgdGhpcyBib3VuZC5cbiAgLy8gRnVydGhlcm1vcmUsIGJ1ZmZlcnMgYXJlIG9ubHkgdGVzdGVkIGF0IG1vc3Qgb25jZSBwZXIgd3JpdGUoKSwgc28gcGFzc2luZyBhIHZlcnlcbiAgLy8gbGFyZ2Ugc3RyaW5nIGludG8gd3JpdGUoKSBtaWdodCBoYXZlIHVuZGVzaXJhYmxlIGVmZmVjdHMsIGJ1dCB0aGlzIGlzIG1hbmFnZWFibGUgYnlcbiAgLy8gdGhlIGNhbGxlciwgc28gaXQgaXMgYXNzdW1lZCB0byBiZSBzYWZlLiAgVGh1cywgYSBjYWxsIHRvIHdyaXRlKCkgbWF5LCBpbiB0aGUgZXh0cmVtZVxuICAvLyBlZGdlIGNhc2UsIHJlc3VsdCBpbiBjcmVhdGluZyBhdCBtb3N0IG9uZSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBzdHJpbmcgcGFzc2VkIGluLlxuICAvLyBTZXQgdG8gSW5maW5pdHkgdG8gaGF2ZSB1bmxpbWl0ZWQgYnVmZmVycy5cbiAgc2F4Lk1BWF9CVUZGRVJfTEVOR1RIID0gNjQgKiAxMDI0XG5cbiAgdmFyIGJ1ZmZlcnMgPSBbXG4gICAgJ2NvbW1lbnQnLCAnc2dtbERlY2wnLCAndGV4dE5vZGUnLCAndGFnTmFtZScsICdkb2N0eXBlJyxcbiAgICAncHJvY0luc3ROYW1lJywgJ3Byb2NJbnN0Qm9keScsICdlbnRpdHknLCAnYXR0cmliTmFtZScsXG4gICAgJ2F0dHJpYlZhbHVlJywgJ2NkYXRhJywgJ3NjcmlwdCdcbiAgXVxuXG4gIHNheC5FVkVOVFMgPSBbXG4gICAgJ3RleHQnLFxuICAgICdwcm9jZXNzaW5naW5zdHJ1Y3Rpb24nLFxuICAgICdzZ21sZGVjbGFyYXRpb24nLFxuICAgICdkb2N0eXBlJyxcbiAgICAnY29tbWVudCcsXG4gICAgJ29wZW50YWdzdGFydCcsXG4gICAgJ2F0dHJpYnV0ZScsXG4gICAgJ29wZW50YWcnLFxuICAgICdjbG9zZXRhZycsXG4gICAgJ29wZW5jZGF0YScsXG4gICAgJ2NkYXRhJyxcbiAgICAnY2xvc2VjZGF0YScsXG4gICAgJ2Vycm9yJyxcbiAgICAnZW5kJyxcbiAgICAncmVhZHknLFxuICAgICdzY3JpcHQnLFxuICAgICdvcGVubmFtZXNwYWNlJyxcbiAgICAnY2xvc2VuYW1lc3BhY2UnXG4gIF1cblxuICBmdW5jdGlvbiBTQVhQYXJzZXIgKHN0cmljdCwgb3B0KSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgIHJldHVybiBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KVxuICAgIH1cblxuICAgIHZhciBwYXJzZXIgPSB0aGlzXG4gICAgY2xlYXJCdWZmZXJzKHBhcnNlcilcbiAgICBwYXJzZXIucSA9IHBhcnNlci5jID0gJydcbiAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IHNheC5NQVhfQlVGRkVSX0xFTkdUSFxuICAgIHBhcnNlci5vcHQgPSBvcHQgfHwge31cbiAgICBwYXJzZXIub3B0Lmxvd2VyY2FzZSA9IHBhcnNlci5vcHQubG93ZXJjYXNlIHx8IHBhcnNlci5vcHQubG93ZXJjYXNldGFnc1xuICAgIHBhcnNlci5sb29zZUNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSA/ICd0b0xvd2VyQ2FzZScgOiAndG9VcHBlckNhc2UnXG4gICAgcGFyc2VyLnRhZ3MgPSBbXVxuICAgIHBhcnNlci5jbG9zZWQgPSBwYXJzZXIuY2xvc2VkUm9vdCA9IHBhcnNlci5zYXdSb290ID0gZmFsc2VcbiAgICBwYXJzZXIudGFnID0gcGFyc2VyLmVycm9yID0gbnVsbFxuICAgIHBhcnNlci5zdHJpY3QgPSAhIXN0cmljdFxuICAgIHBhcnNlci5ub3NjcmlwdCA9ICEhKHN0cmljdCB8fCBwYXJzZXIub3B0Lm5vc2NyaXB0KVxuICAgIHBhcnNlci5zdGF0ZSA9IFMuQkVHSU5cbiAgICBwYXJzZXIuc3RyaWN0RW50aXRpZXMgPSBwYXJzZXIub3B0LnN0cmljdEVudGl0aWVzXG4gICAgcGFyc2VyLkVOVElUSUVTID0gcGFyc2VyLnN0cmljdEVudGl0aWVzID8gT2JqZWN0LmNyZWF0ZShzYXguWE1MX0VOVElUSUVTKSA6IE9iamVjdC5jcmVhdGUoc2F4LkVOVElUSUVTKVxuICAgIHBhcnNlci5hdHRyaWJMaXN0ID0gW11cblxuICAgIC8vIG5hbWVzcGFjZXMgZm9ybSBhIHByb3RvdHlwZSBjaGFpbi5cbiAgICAvLyBpdCBhbHdheXMgcG9pbnRzIGF0IHRoZSBjdXJyZW50IHRhZyxcbiAgICAvLyB3aGljaCBwcm90b3MgdG8gaXRzIHBhcmVudCB0YWcuXG4gICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgIHBhcnNlci5ucyA9IE9iamVjdC5jcmVhdGUocm9vdE5TKVxuICAgIH1cblxuICAgIC8vIGRpc2FsbG93IHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZXMgaWYgbm90IG90aGVyd2lzZSBjb25maWd1cmVkXG4gICAgLy8gYW5kIHN0cmljdCBtb2RlIGlzIHRydWVcbiAgICBpZiAocGFyc2VyLm9wdC51bnF1b3RlZEF0dHJpYnV0ZVZhbHVlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBwYXJzZXIub3B0LnVucXVvdGVkQXR0cmlidXRlVmFsdWVzID0gIXN0cmljdDtcbiAgICB9XG5cbiAgICAvLyBtb3N0bHkganVzdCBmb3IgZXJyb3IgcmVwb3J0aW5nXG4gICAgcGFyc2VyLnRyYWNrUG9zaXRpb24gPSBwYXJzZXIub3B0LnBvc2l0aW9uICE9PSBmYWxzZVxuICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgcGFyc2VyLnBvc2l0aW9uID0gcGFyc2VyLmxpbmUgPSBwYXJzZXIuY29sdW1uID0gMFxuICAgIH1cbiAgICBlbWl0KHBhcnNlciwgJ29ucmVhZHknKVxuICB9XG5cbiAgaWYgKCFPYmplY3QuY3JlYXRlKSB7XG4gICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBmdW5jdGlvbiBGICgpIHt9XG4gICAgICBGLnByb3RvdHlwZSA9IG9cbiAgICAgIHZhciBuZXdmID0gbmV3IEYoKVxuICAgICAgcmV0dXJuIG5ld2ZcbiAgICB9XG4gIH1cblxuICBpZiAoIU9iamVjdC5rZXlzKSB7XG4gICAgT2JqZWN0LmtleXMgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGEgPSBbXVxuICAgICAgZm9yICh2YXIgaSBpbiBvKSBpZiAoby5oYXNPd25Qcm9wZXJ0eShpKSkgYS5wdXNoKGkpXG4gICAgICByZXR1cm4gYVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrQnVmZmVyTGVuZ3RoIChwYXJzZXIpIHtcbiAgICB2YXIgbWF4QWxsb3dlZCA9IE1hdGgubWF4KHNheC5NQVhfQlVGRkVSX0xFTkdUSCwgMTApXG4gICAgdmFyIG1heEFjdHVhbCA9IDBcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1ZmZlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbGVuID0gcGFyc2VyW2J1ZmZlcnNbaV1dLmxlbmd0aFxuICAgICAgaWYgKGxlbiA+IG1heEFsbG93ZWQpIHtcbiAgICAgICAgLy8gVGV4dC9jZGF0YSBub2RlcyBjYW4gZ2V0IGJpZywgYW5kIHNpbmNlIHRoZXkncmUgYnVmZmVyZWQsXG4gICAgICAgIC8vIHdlIGNhbiBnZXQgaGVyZSB1bmRlciBub3JtYWwgY29uZGl0aW9ucy5cbiAgICAgICAgLy8gQXZvaWQgaXNzdWVzIGJ5IGVtaXR0aW5nIHRoZSB0ZXh0IG5vZGUgbm93LFxuICAgICAgICAvLyBzbyBhdCBsZWFzdCBpdCB3b24ndCBnZXQgYW55IGJpZ2dlci5cbiAgICAgICAgc3dpdGNoIChidWZmZXJzW2ldKSB7XG4gICAgICAgICAgY2FzZSAndGV4dE5vZGUnOlxuICAgICAgICAgICAgY2xvc2VUZXh0KHBhcnNlcilcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdjZGF0YSc6XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNkYXRhJywgcGFyc2VyLmNkYXRhKVxuICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gJydcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdzY3JpcHQnOlxuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25zY3JpcHQnLCBwYXJzZXIuc2NyaXB0KVxuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCA9ICcnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGVycm9yKHBhcnNlciwgJ01heCBidWZmZXIgbGVuZ3RoIGV4Y2VlZGVkOiAnICsgYnVmZmVyc1tpXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWF4QWN0dWFsID0gTWF0aC5tYXgobWF4QWN0dWFsLCBsZW4pXG4gICAgfVxuICAgIC8vIHNjaGVkdWxlIHRoZSBuZXh0IGNoZWNrIGZvciB0aGUgZWFybGllc3QgcG9zc2libGUgYnVmZmVyIG92ZXJydW4uXG4gICAgdmFyIG0gPSBzYXguTUFYX0JVRkZFUl9MRU5HVEggLSBtYXhBY3R1YWxcbiAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IG0gKyBwYXJzZXIucG9zaXRpb25cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyQnVmZmVycyAocGFyc2VyKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcGFyc2VyW2J1ZmZlcnNbaV1dID0gJydcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaEJ1ZmZlcnMgKHBhcnNlcikge1xuICAgIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgaWYgKHBhcnNlci5jZGF0YSAhPT0gJycpIHtcbiAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2RhdGEnLCBwYXJzZXIuY2RhdGEpXG4gICAgICBwYXJzZXIuY2RhdGEgPSAnJ1xuICAgIH1cbiAgICBpZiAocGFyc2VyLnNjcmlwdCAhPT0gJycpIHtcbiAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uc2NyaXB0JywgcGFyc2VyLnNjcmlwdClcbiAgICAgIHBhcnNlci5zY3JpcHQgPSAnJ1xuICAgIH1cbiAgfVxuXG4gIFNBWFBhcnNlci5wcm90b3R5cGUgPSB7XG4gICAgZW5kOiBmdW5jdGlvbiAoKSB7IGVuZCh0aGlzKSB9LFxuICAgIHdyaXRlOiB3cml0ZSxcbiAgICByZXN1bWU6IGZ1bmN0aW9uICgpIHsgdGhpcy5lcnJvciA9IG51bGw7IHJldHVybiB0aGlzIH0sXG4gICAgY2xvc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMud3JpdGUobnVsbCkgfSxcbiAgICBmbHVzaDogZnVuY3Rpb24gKCkgeyBmbHVzaEJ1ZmZlcnModGhpcykgfVxuICB9XG5cbiAgdmFyIFN0cmVhbVxuICB0cnkge1xuICAgIFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpLlN0cmVhbVxuICB9IGNhdGNoIChleCkge1xuICAgIFN0cmVhbSA9IGZ1bmN0aW9uICgpIHt9XG4gIH1cbiAgaWYgKCFTdHJlYW0pIFN0cmVhbSA9IGZ1bmN0aW9uICgpIHt9XG5cbiAgdmFyIHN0cmVhbVdyYXBzID0gc2F4LkVWRU5UUy5maWx0ZXIoZnVuY3Rpb24gKGV2KSB7XG4gICAgcmV0dXJuIGV2ICE9PSAnZXJyb3InICYmIGV2ICE9PSAnZW5kJ1xuICB9KVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVN0cmVhbSAoc3RyaWN0LCBvcHQpIHtcbiAgICByZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdClcbiAgfVxuXG4gIGZ1bmN0aW9uIFNBWFN0cmVhbSAoc3RyaWN0LCBvcHQpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0FYU3RyZWFtKSkge1xuICAgICAgcmV0dXJuIG5ldyBTQVhTdHJlYW0oc3RyaWN0LCBvcHQpXG4gICAgfVxuXG4gICAgU3RyZWFtLmFwcGx5KHRoaXMpXG5cbiAgICB0aGlzLl9wYXJzZXIgPSBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KVxuICAgIHRoaXMud3JpdGFibGUgPSB0cnVlXG4gICAgdGhpcy5yZWFkYWJsZSA9IHRydWVcblxuICAgIHZhciBtZSA9IHRoaXNcblxuICAgIHRoaXMuX3BhcnNlci5vbmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIG1lLmVtaXQoJ2VuZCcpXG4gICAgfVxuXG4gICAgdGhpcy5fcGFyc2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXIpIHtcbiAgICAgIG1lLmVtaXQoJ2Vycm9yJywgZXIpXG5cbiAgICAgIC8vIGlmIGRpZG4ndCB0aHJvdywgdGhlbiBtZWFucyBlcnJvciB3YXMgaGFuZGxlZC5cbiAgICAgIC8vIGdvIGFoZWFkIGFuZCBjbGVhciBlcnJvciwgc28gd2UgY2FuIHdyaXRlIGFnYWluLlxuICAgICAgbWUuX3BhcnNlci5lcnJvciA9IG51bGxcbiAgICB9XG5cbiAgICB0aGlzLl9kZWNvZGVyID0gbnVsbFxuXG4gICAgc3RyZWFtV3JhcHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZSwgJ29uJyArIGV2LCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBtZS5fcGFyc2VyWydvbicgKyBldl1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoaCkge1xuICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgbWUucmVtb3ZlQWxsTGlzdGVuZXJzKGV2KVxuICAgICAgICAgICAgbWUuX3BhcnNlclsnb24nICsgZXZdID0gaFxuICAgICAgICAgICAgcmV0dXJuIGhcbiAgICAgICAgICB9XG4gICAgICAgICAgbWUub24oZXYsIGgpXG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIFNBWFN0cmVhbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0cmVhbS5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IFNBWFN0cmVhbVxuICAgIH1cbiAgfSlcblxuICBTQVhTdHJlYW0ucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIEJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgdHlwZW9mIEJ1ZmZlci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSB7XG4gICAgICBpZiAoIXRoaXMuX2RlY29kZXIpIHtcbiAgICAgICAgdmFyIFNEID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXInKS5TdHJpbmdEZWNvZGVyXG4gICAgICAgIHRoaXMuX2RlY29kZXIgPSBuZXcgU0QoJ3V0ZjgnKVxuICAgICAgfVxuICAgICAgZGF0YSA9IHRoaXMuX2RlY29kZXIud3JpdGUoZGF0YSlcbiAgICB9XG5cbiAgICB0aGlzLl9wYXJzZXIud3JpdGUoZGF0YS50b1N0cmluZygpKVxuICAgIHRoaXMuZW1pdCgnZGF0YScsIGRhdGEpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIFNBWFN0cmVhbS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgdGhpcy53cml0ZShjaHVuaylcbiAgICB9XG4gICAgdGhpcy5fcGFyc2VyLmVuZCgpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIFNBWFN0cmVhbS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGhhbmRsZXIpIHtcbiAgICB2YXIgbWUgPSB0aGlzXG4gICAgaWYgKCFtZS5fcGFyc2VyWydvbicgKyBldl0gJiYgc3RyZWFtV3JhcHMuaW5kZXhPZihldikgIT09IC0xKSB7XG4gICAgICBtZS5fcGFyc2VyWydvbicgKyBldl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IFthcmd1bWVudHNbMF1dIDogQXJyYXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuICAgICAgICBhcmdzLnNwbGljZSgwLCAwLCBldilcbiAgICAgICAgbWUuZW1pdC5hcHBseShtZSwgYXJncylcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKG1lLCBldiwgaGFuZGxlcilcbiAgfVxuXG4gIC8vIHRoaXMgcmVhbGx5IG5lZWRzIHRvIGJlIHJlcGxhY2VkIHdpdGggY2hhcmFjdGVyIGNsYXNzZXMuXG4gIC8vIFhNTCBhbGxvd3MgYWxsIG1hbm5lciBvZiByaWRpY3Vsb3VzIG51bWJlcnMgYW5kIGRpZ2l0cy5cbiAgdmFyIENEQVRBID0gJ1tDREFUQVsnXG4gIHZhciBET0NUWVBFID0gJ0RPQ1RZUEUnXG4gIHZhciBYTUxfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSdcbiAgdmFyIFhNTE5TX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zLydcbiAgdmFyIHJvb3ROUyA9IHsgeG1sOiBYTUxfTkFNRVNQQUNFLCB4bWxuczogWE1MTlNfTkFNRVNQQUNFIH1cblxuICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLyNOVC1OYW1lU3RhcnRDaGFyXG4gIC8vIFRoaXMgaW1wbGVtZW50YXRpb24gd29ya3Mgb24gc3RyaW5ncywgYSBzaW5nbGUgY2hhcmFjdGVyIGF0IGEgdGltZVxuICAvLyBhcyBzdWNoLCBpdCBjYW5ub3QgZXZlciBzdXBwb3J0IGFzdHJhbC1wbGFuZSBjaGFyYWN0ZXJzICgxMDAwMC1FRkZGRilcbiAgLy8gd2l0aG91dCBhIHNpZ25pZmljYW50IGJyZWFraW5nIGNoYW5nZSB0byBlaXRoZXIgdGhpcyAgcGFyc2VyLCBvciB0aGVcbiAgLy8gSmF2YVNjcmlwdCBsYW5ndWFnZS4gIEltcGxlbWVudGF0aW9uIG9mIGFuIGVtb2ppLWNhcGFibGUgeG1sIHBhcnNlclxuICAvLyBpcyBsZWZ0IGFzIGFuIGV4ZXJjaXNlIGZvciB0aGUgcmVhZGVyLlxuICB2YXIgbmFtZVN0YXJ0ID0gL1s6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRF0vXG5cbiAgdmFyIG5hbWVCb2R5ID0gL1s6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRFxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDAuXFxkLV0vXG5cbiAgdmFyIGVudGl0eVN0YXJ0ID0gL1sjOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdL1xuICB2YXIgZW50aXR5Qm9keSA9IC9bIzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS9cblxuICBmdW5jdGlvbiBpc1doaXRlc3BhY2UgKGMpIHtcbiAgICByZXR1cm4gYyA9PT0gJyAnIHx8IGMgPT09ICdcXG4nIHx8IGMgPT09ICdcXHInIHx8IGMgPT09ICdcXHQnXG4gIH1cblxuICBmdW5jdGlvbiBpc1F1b3RlIChjKSB7XG4gICAgcmV0dXJuIGMgPT09ICdcIicgfHwgYyA9PT0gJ1xcJydcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXR0cmliRW5kIChjKSB7XG4gICAgcmV0dXJuIGMgPT09ICc+JyB8fCBpc1doaXRlc3BhY2UoYylcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTWF0Y2ggKHJlZ2V4LCBjKSB7XG4gICAgcmV0dXJuIHJlZ2V4LnRlc3QoYylcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdE1hdGNoIChyZWdleCwgYykge1xuICAgIHJldHVybiAhaXNNYXRjaChyZWdleCwgYylcbiAgfVxuXG4gIHZhciBTID0gMFxuICBzYXguU1RBVEUgPSB7XG4gICAgQkVHSU46IFMrKywgLy8gbGVhZGluZyBieXRlIG9yZGVyIG1hcmsgb3Igd2hpdGVzcGFjZVxuICAgIEJFR0lOX1dISVRFU1BBQ0U6IFMrKywgLy8gbGVhZGluZyB3aGl0ZXNwYWNlXG4gICAgVEVYVDogUysrLCAvLyBnZW5lcmFsIHN0dWZmXG4gICAgVEVYVF9FTlRJVFk6IFMrKywgLy8gJmFtcCBhbmQgc3VjaC5cbiAgICBPUEVOX1dBS0E6IFMrKywgLy8gPFxuICAgIFNHTUxfREVDTDogUysrLCAvLyA8IUJMQVJHXG4gICAgU0dNTF9ERUNMX1FVT1RFRDogUysrLCAvLyA8IUJMQVJHIGZvbyBcImJhclxuICAgIERPQ1RZUEU6IFMrKywgLy8gPCFET0NUWVBFXG4gICAgRE9DVFlQRV9RVU9URUQ6IFMrKywgLy8gPCFET0NUWVBFIFwiLy9ibGFoXG4gICAgRE9DVFlQRV9EVEQ6IFMrKywgLy8gPCFET0NUWVBFIFwiLy9ibGFoXCIgWyAuLi5cbiAgICBET0NUWVBFX0RURF9RVU9URUQ6IFMrKywgLy8gPCFET0NUWVBFIFwiLy9ibGFoXCIgWyBcImZvb1xuICAgIENPTU1FTlRfU1RBUlRJTkc6IFMrKywgLy8gPCEtXG4gICAgQ09NTUVOVDogUysrLCAvLyA8IS0tXG4gICAgQ09NTUVOVF9FTkRJTkc6IFMrKywgLy8gPCEtLSBibGFoIC1cbiAgICBDT01NRU5UX0VOREVEOiBTKyssIC8vIDwhLS0gYmxhaCAtLVxuICAgIENEQVRBOiBTKyssIC8vIDwhW0NEQVRBWyBzb21ldGhpbmdcbiAgICBDREFUQV9FTkRJTkc6IFMrKywgLy8gXVxuICAgIENEQVRBX0VORElOR18yOiBTKyssIC8vIF1dXG4gICAgUFJPQ19JTlNUOiBTKyssIC8vIDw/aGlcbiAgICBQUk9DX0lOU1RfQk9EWTogUysrLCAvLyA8P2hpIHRoZXJlXG4gICAgUFJPQ19JTlNUX0VORElORzogUysrLCAvLyA8P2hpIFwidGhlcmVcIiA/XG4gICAgT1BFTl9UQUc6IFMrKywgLy8gPHN0cm9uZ1xuICAgIE9QRU5fVEFHX1NMQVNIOiBTKyssIC8vIDxzdHJvbmcgL1xuICAgIEFUVFJJQjogUysrLCAvLyA8YVxuICAgIEFUVFJJQl9OQU1FOiBTKyssIC8vIDxhIGZvb1xuICAgIEFUVFJJQl9OQU1FX1NBV19XSElURTogUysrLCAvLyA8YSBmb28gX1xuICAgIEFUVFJJQl9WQUxVRTogUysrLCAvLyA8YSBmb289XG4gICAgQVRUUklCX1ZBTFVFX1FVT1RFRDogUysrLCAvLyA8YSBmb289XCJiYXJcbiAgICBBVFRSSUJfVkFMVUVfQ0xPU0VEOiBTKyssIC8vIDxhIGZvbz1cImJhclwiXG4gICAgQVRUUklCX1ZBTFVFX1VOUVVPVEVEOiBTKyssIC8vIDxhIGZvbz1iYXJcbiAgICBBVFRSSUJfVkFMVUVfRU5USVRZX1E6IFMrKywgLy8gPGZvbyBiYXI9XCImcXVvdDtcIlxuICAgIEFUVFJJQl9WQUxVRV9FTlRJVFlfVTogUysrLCAvLyA8Zm9vIGJhcj0mcXVvdFxuICAgIENMT1NFX1RBRzogUysrLCAvLyA8L2FcbiAgICBDTE9TRV9UQUdfU0FXX1dISVRFOiBTKyssIC8vIDwvYSAgID5cbiAgICBTQ1JJUFQ6IFMrKywgLy8gPHNjcmlwdD4gLi4uXG4gICAgU0NSSVBUX0VORElORzogUysrIC8vIDxzY3JpcHQ+IC4uLiA8XG4gIH1cblxuICBzYXguWE1MX0VOVElUSUVTID0ge1xuICAgICdhbXAnOiAnJicsXG4gICAgJ2d0JzogJz4nLFxuICAgICdsdCc6ICc8JyxcbiAgICAncXVvdCc6ICdcIicsXG4gICAgJ2Fwb3MnOiBcIidcIlxuICB9XG5cbiAgc2F4LkVOVElUSUVTID0ge1xuICAgICdhbXAnOiAnJicsXG4gICAgJ2d0JzogJz4nLFxuICAgICdsdCc6ICc8JyxcbiAgICAncXVvdCc6ICdcIicsXG4gICAgJ2Fwb3MnOiBcIidcIixcbiAgICAnQUVsaWcnOiAxOTgsXG4gICAgJ0FhY3V0ZSc6IDE5MyxcbiAgICAnQWNpcmMnOiAxOTQsXG4gICAgJ0FncmF2ZSc6IDE5MixcbiAgICAnQXJpbmcnOiAxOTcsXG4gICAgJ0F0aWxkZSc6IDE5NSxcbiAgICAnQXVtbCc6IDE5NixcbiAgICAnQ2NlZGlsJzogMTk5LFxuICAgICdFVEgnOiAyMDgsXG4gICAgJ0VhY3V0ZSc6IDIwMSxcbiAgICAnRWNpcmMnOiAyMDIsXG4gICAgJ0VncmF2ZSc6IDIwMCxcbiAgICAnRXVtbCc6IDIwMyxcbiAgICAnSWFjdXRlJzogMjA1LFxuICAgICdJY2lyYyc6IDIwNixcbiAgICAnSWdyYXZlJzogMjA0LFxuICAgICdJdW1sJzogMjA3LFxuICAgICdOdGlsZGUnOiAyMDksXG4gICAgJ09hY3V0ZSc6IDIxMSxcbiAgICAnT2NpcmMnOiAyMTIsXG4gICAgJ09ncmF2ZSc6IDIxMCxcbiAgICAnT3NsYXNoJzogMjE2LFxuICAgICdPdGlsZGUnOiAyMTMsXG4gICAgJ091bWwnOiAyMTQsXG4gICAgJ1RIT1JOJzogMjIyLFxuICAgICdVYWN1dGUnOiAyMTgsXG4gICAgJ1VjaXJjJzogMjE5LFxuICAgICdVZ3JhdmUnOiAyMTcsXG4gICAgJ1V1bWwnOiAyMjAsXG4gICAgJ1lhY3V0ZSc6IDIyMSxcbiAgICAnYWFjdXRlJzogMjI1LFxuICAgICdhY2lyYyc6IDIyNixcbiAgICAnYWVsaWcnOiAyMzAsXG4gICAgJ2FncmF2ZSc6IDIyNCxcbiAgICAnYXJpbmcnOiAyMjksXG4gICAgJ2F0aWxkZSc6IDIyNyxcbiAgICAnYXVtbCc6IDIyOCxcbiAgICAnY2NlZGlsJzogMjMxLFxuICAgICdlYWN1dGUnOiAyMzMsXG4gICAgJ2VjaXJjJzogMjM0LFxuICAgICdlZ3JhdmUnOiAyMzIsXG4gICAgJ2V0aCc6IDI0MCxcbiAgICAnZXVtbCc6IDIzNSxcbiAgICAnaWFjdXRlJzogMjM3LFxuICAgICdpY2lyYyc6IDIzOCxcbiAgICAnaWdyYXZlJzogMjM2LFxuICAgICdpdW1sJzogMjM5LFxuICAgICdudGlsZGUnOiAyNDEsXG4gICAgJ29hY3V0ZSc6IDI0MyxcbiAgICAnb2NpcmMnOiAyNDQsXG4gICAgJ29ncmF2ZSc6IDI0MixcbiAgICAnb3NsYXNoJzogMjQ4LFxuICAgICdvdGlsZGUnOiAyNDUsXG4gICAgJ291bWwnOiAyNDYsXG4gICAgJ3N6bGlnJzogMjIzLFxuICAgICd0aG9ybic6IDI1NCxcbiAgICAndWFjdXRlJzogMjUwLFxuICAgICd1Y2lyYyc6IDI1MSxcbiAgICAndWdyYXZlJzogMjQ5LFxuICAgICd1dW1sJzogMjUyLFxuICAgICd5YWN1dGUnOiAyNTMsXG4gICAgJ3l1bWwnOiAyNTUsXG4gICAgJ2NvcHknOiAxNjksXG4gICAgJ3JlZyc6IDE3NCxcbiAgICAnbmJzcCc6IDE2MCxcbiAgICAnaWV4Y2wnOiAxNjEsXG4gICAgJ2NlbnQnOiAxNjIsXG4gICAgJ3BvdW5kJzogMTYzLFxuICAgICdjdXJyZW4nOiAxNjQsXG4gICAgJ3llbic6IDE2NSxcbiAgICAnYnJ2YmFyJzogMTY2LFxuICAgICdzZWN0JzogMTY3LFxuICAgICd1bWwnOiAxNjgsXG4gICAgJ29yZGYnOiAxNzAsXG4gICAgJ2xhcXVvJzogMTcxLFxuICAgICdub3QnOiAxNzIsXG4gICAgJ3NoeSc6IDE3MyxcbiAgICAnbWFjcic6IDE3NSxcbiAgICAnZGVnJzogMTc2LFxuICAgICdwbHVzbW4nOiAxNzcsXG4gICAgJ3N1cDEnOiAxODUsXG4gICAgJ3N1cDInOiAxNzgsXG4gICAgJ3N1cDMnOiAxNzksXG4gICAgJ2FjdXRlJzogMTgwLFxuICAgICdtaWNybyc6IDE4MSxcbiAgICAncGFyYSc6IDE4MixcbiAgICAnbWlkZG90JzogMTgzLFxuICAgICdjZWRpbCc6IDE4NCxcbiAgICAnb3JkbSc6IDE4NixcbiAgICAncmFxdW8nOiAxODcsXG4gICAgJ2ZyYWMxNCc6IDE4OCxcbiAgICAnZnJhYzEyJzogMTg5LFxuICAgICdmcmFjMzQnOiAxOTAsXG4gICAgJ2lxdWVzdCc6IDE5MSxcbiAgICAndGltZXMnOiAyMTUsXG4gICAgJ2RpdmlkZSc6IDI0NyxcbiAgICAnT0VsaWcnOiAzMzgsXG4gICAgJ29lbGlnJzogMzM5LFxuICAgICdTY2Fyb24nOiAzNTIsXG4gICAgJ3NjYXJvbic6IDM1MyxcbiAgICAnWXVtbCc6IDM3NixcbiAgICAnZm5vZic6IDQwMixcbiAgICAnY2lyYyc6IDcxMCxcbiAgICAndGlsZGUnOiA3MzIsXG4gICAgJ0FscGhhJzogOTEzLFxuICAgICdCZXRhJzogOTE0LFxuICAgICdHYW1tYSc6IDkxNSxcbiAgICAnRGVsdGEnOiA5MTYsXG4gICAgJ0Vwc2lsb24nOiA5MTcsXG4gICAgJ1pldGEnOiA5MTgsXG4gICAgJ0V0YSc6IDkxOSxcbiAgICAnVGhldGEnOiA5MjAsXG4gICAgJ0lvdGEnOiA5MjEsXG4gICAgJ0thcHBhJzogOTIyLFxuICAgICdMYW1iZGEnOiA5MjMsXG4gICAgJ011JzogOTI0LFxuICAgICdOdSc6IDkyNSxcbiAgICAnWGknOiA5MjYsXG4gICAgJ09taWNyb24nOiA5MjcsXG4gICAgJ1BpJzogOTI4LFxuICAgICdSaG8nOiA5MjksXG4gICAgJ1NpZ21hJzogOTMxLFxuICAgICdUYXUnOiA5MzIsXG4gICAgJ1Vwc2lsb24nOiA5MzMsXG4gICAgJ1BoaSc6IDkzNCxcbiAgICAnQ2hpJzogOTM1LFxuICAgICdQc2knOiA5MzYsXG4gICAgJ09tZWdhJzogOTM3LFxuICAgICdhbHBoYSc6IDk0NSxcbiAgICAnYmV0YSc6IDk0NixcbiAgICAnZ2FtbWEnOiA5NDcsXG4gICAgJ2RlbHRhJzogOTQ4LFxuICAgICdlcHNpbG9uJzogOTQ5LFxuICAgICd6ZXRhJzogOTUwLFxuICAgICdldGEnOiA5NTEsXG4gICAgJ3RoZXRhJzogOTUyLFxuICAgICdpb3RhJzogOTUzLFxuICAgICdrYXBwYSc6IDk1NCxcbiAgICAnbGFtYmRhJzogOTU1LFxuICAgICdtdSc6IDk1NixcbiAgICAnbnUnOiA5NTcsXG4gICAgJ3hpJzogOTU4LFxuICAgICdvbWljcm9uJzogOTU5LFxuICAgICdwaSc6IDk2MCxcbiAgICAncmhvJzogOTYxLFxuICAgICdzaWdtYWYnOiA5NjIsXG4gICAgJ3NpZ21hJzogOTYzLFxuICAgICd0YXUnOiA5NjQsXG4gICAgJ3Vwc2lsb24nOiA5NjUsXG4gICAgJ3BoaSc6IDk2NixcbiAgICAnY2hpJzogOTY3LFxuICAgICdwc2knOiA5NjgsXG4gICAgJ29tZWdhJzogOTY5LFxuICAgICd0aGV0YXN5bSc6IDk3NyxcbiAgICAndXBzaWgnOiA5NzgsXG4gICAgJ3Bpdic6IDk4MixcbiAgICAnZW5zcCc6IDgxOTQsXG4gICAgJ2Vtc3AnOiA4MTk1LFxuICAgICd0aGluc3AnOiA4MjAxLFxuICAgICd6d25qJzogODIwNCxcbiAgICAnendqJzogODIwNSxcbiAgICAnbHJtJzogODIwNixcbiAgICAncmxtJzogODIwNyxcbiAgICAnbmRhc2gnOiA4MjExLFxuICAgICdtZGFzaCc6IDgyMTIsXG4gICAgJ2xzcXVvJzogODIxNixcbiAgICAncnNxdW8nOiA4MjE3LFxuICAgICdzYnF1byc6IDgyMTgsXG4gICAgJ2xkcXVvJzogODIyMCxcbiAgICAncmRxdW8nOiA4MjIxLFxuICAgICdiZHF1byc6IDgyMjIsXG4gICAgJ2RhZ2dlcic6IDgyMjQsXG4gICAgJ0RhZ2dlcic6IDgyMjUsXG4gICAgJ2J1bGwnOiA4MjI2LFxuICAgICdoZWxsaXAnOiA4MjMwLFxuICAgICdwZXJtaWwnOiA4MjQwLFxuICAgICdwcmltZSc6IDgyNDIsXG4gICAgJ1ByaW1lJzogODI0MyxcbiAgICAnbHNhcXVvJzogODI0OSxcbiAgICAncnNhcXVvJzogODI1MCxcbiAgICAnb2xpbmUnOiA4MjU0LFxuICAgICdmcmFzbCc6IDgyNjAsXG4gICAgJ2V1cm8nOiA4MzY0LFxuICAgICdpbWFnZSc6IDg0NjUsXG4gICAgJ3dlaWVycCc6IDg0NzIsXG4gICAgJ3JlYWwnOiA4NDc2LFxuICAgICd0cmFkZSc6IDg0ODIsXG4gICAgJ2FsZWZzeW0nOiA4NTAxLFxuICAgICdsYXJyJzogODU5MixcbiAgICAndWFycic6IDg1OTMsXG4gICAgJ3JhcnInOiA4NTk0LFxuICAgICdkYXJyJzogODU5NSxcbiAgICAnaGFycic6IDg1OTYsXG4gICAgJ2NyYXJyJzogODYyOSxcbiAgICAnbEFycic6IDg2NTYsXG4gICAgJ3VBcnInOiA4NjU3LFxuICAgICdyQXJyJzogODY1OCxcbiAgICAnZEFycic6IDg2NTksXG4gICAgJ2hBcnInOiA4NjYwLFxuICAgICdmb3JhbGwnOiA4NzA0LFxuICAgICdwYXJ0JzogODcwNixcbiAgICAnZXhpc3QnOiA4NzA3LFxuICAgICdlbXB0eSc6IDg3MDksXG4gICAgJ25hYmxhJzogODcxMSxcbiAgICAnaXNpbic6IDg3MTIsXG4gICAgJ25vdGluJzogODcxMyxcbiAgICAnbmknOiA4NzE1LFxuICAgICdwcm9kJzogODcxOSxcbiAgICAnc3VtJzogODcyMSxcbiAgICAnbWludXMnOiA4NzIyLFxuICAgICdsb3dhc3QnOiA4NzI3LFxuICAgICdyYWRpYyc6IDg3MzAsXG4gICAgJ3Byb3AnOiA4NzMzLFxuICAgICdpbmZpbic6IDg3MzQsXG4gICAgJ2FuZyc6IDg3MzYsXG4gICAgJ2FuZCc6IDg3NDMsXG4gICAgJ29yJzogODc0NCxcbiAgICAnY2FwJzogODc0NSxcbiAgICAnY3VwJzogODc0NixcbiAgICAnaW50JzogODc0NyxcbiAgICAndGhlcmU0JzogODc1NixcbiAgICAnc2ltJzogODc2NCxcbiAgICAnY29uZyc6IDg3NzMsXG4gICAgJ2FzeW1wJzogODc3NixcbiAgICAnbmUnOiA4ODAwLFxuICAgICdlcXVpdic6IDg4MDEsXG4gICAgJ2xlJzogODgwNCxcbiAgICAnZ2UnOiA4ODA1LFxuICAgICdzdWInOiA4ODM0LFxuICAgICdzdXAnOiA4ODM1LFxuICAgICduc3ViJzogODgzNixcbiAgICAnc3ViZSc6IDg4MzgsXG4gICAgJ3N1cGUnOiA4ODM5LFxuICAgICdvcGx1cyc6IDg4NTMsXG4gICAgJ290aW1lcyc6IDg4NTUsXG4gICAgJ3BlcnAnOiA4ODY5LFxuICAgICdzZG90JzogODkwMSxcbiAgICAnbGNlaWwnOiA4OTY4LFxuICAgICdyY2VpbCc6IDg5NjksXG4gICAgJ2xmbG9vcic6IDg5NzAsXG4gICAgJ3JmbG9vcic6IDg5NzEsXG4gICAgJ2xhbmcnOiA5MDAxLFxuICAgICdyYW5nJzogOTAwMixcbiAgICAnbG96JzogOTY3NCxcbiAgICAnc3BhZGVzJzogOTgyNCxcbiAgICAnY2x1YnMnOiA5ODI3LFxuICAgICdoZWFydHMnOiA5ODI5LFxuICAgICdkaWFtcyc6IDk4MzBcbiAgfVxuXG4gIE9iamVjdC5rZXlzKHNheC5FTlRJVElFUykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGUgPSBzYXguRU5USVRJRVNba2V5XVxuICAgIHZhciBzID0gdHlwZW9mIGUgPT09ICdudW1iZXInID8gU3RyaW5nLmZyb21DaGFyQ29kZShlKSA6IGVcbiAgICBzYXguRU5USVRJRVNba2V5XSA9IHNcbiAgfSlcblxuICBmb3IgKHZhciBzIGluIHNheC5TVEFURSkge1xuICAgIHNheC5TVEFURVtzYXguU1RBVEVbc11dID0gc1xuICB9XG5cbiAgLy8gc2hvcnRoYW5kXG4gIFMgPSBzYXguU1RBVEVcblxuICBmdW5jdGlvbiBlbWl0IChwYXJzZXIsIGV2ZW50LCBkYXRhKSB7XG4gICAgcGFyc2VyW2V2ZW50XSAmJiBwYXJzZXJbZXZlbnRdKGRhdGEpXG4gIH1cblxuICBmdW5jdGlvbiBlbWl0Tm9kZSAocGFyc2VyLCBub2RlVHlwZSwgZGF0YSkge1xuICAgIGlmIChwYXJzZXIudGV4dE5vZGUpIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgZW1pdChwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VUZXh0IChwYXJzZXIpIHtcbiAgICBwYXJzZXIudGV4dE5vZGUgPSB0ZXh0b3B0cyhwYXJzZXIub3B0LCBwYXJzZXIudGV4dE5vZGUpXG4gICAgaWYgKHBhcnNlci50ZXh0Tm9kZSkgZW1pdChwYXJzZXIsICdvbnRleHQnLCBwYXJzZXIudGV4dE5vZGUpXG4gICAgcGFyc2VyLnRleHROb2RlID0gJydcbiAgfVxuXG4gIGZ1bmN0aW9uIHRleHRvcHRzIChvcHQsIHRleHQpIHtcbiAgICBpZiAob3B0LnRyaW0pIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgIGlmIChvcHQubm9ybWFsaXplKSB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrL2csICcgJylcbiAgICByZXR1cm4gdGV4dFxuICB9XG5cbiAgZnVuY3Rpb24gZXJyb3IgKHBhcnNlciwgZXIpIHtcbiAgICBjbG9zZVRleHQocGFyc2VyKVxuICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgZXIgKz0gJ1xcbkxpbmU6ICcgKyBwYXJzZXIubGluZSArXG4gICAgICAgICdcXG5Db2x1bW46ICcgKyBwYXJzZXIuY29sdW1uICtcbiAgICAgICAgJ1xcbkNoYXI6ICcgKyBwYXJzZXIuY1xuICAgIH1cbiAgICBlciA9IG5ldyBFcnJvcihlcilcbiAgICBwYXJzZXIuZXJyb3IgPSBlclxuICAgIGVtaXQocGFyc2VyLCAnb25lcnJvcicsIGVyKVxuICAgIHJldHVybiBwYXJzZXJcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZCAocGFyc2VyKSB7XG4gICAgaWYgKHBhcnNlci5zYXdSb290ICYmICFwYXJzZXIuY2xvc2VkUm9vdCkgc3RyaWN0RmFpbChwYXJzZXIsICdVbmNsb3NlZCByb290IHRhZycpXG4gICAgaWYgKChwYXJzZXIuc3RhdGUgIT09IFMuQkVHSU4pICYmXG4gICAgICAocGFyc2VyLnN0YXRlICE9PSBTLkJFR0lOX1dISVRFU1BBQ0UpICYmXG4gICAgICAocGFyc2VyLnN0YXRlICE9PSBTLlRFWFQpKSB7XG4gICAgICBlcnJvcihwYXJzZXIsICdVbmV4cGVjdGVkIGVuZCcpXG4gICAgfVxuICAgIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgcGFyc2VyLmMgPSAnJ1xuICAgIHBhcnNlci5jbG9zZWQgPSB0cnVlXG4gICAgZW1pdChwYXJzZXIsICdvbmVuZCcpXG4gICAgU0FYUGFyc2VyLmNhbGwocGFyc2VyLCBwYXJzZXIuc3RyaWN0LCBwYXJzZXIub3B0KVxuICAgIHJldHVybiBwYXJzZXJcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0cmljdEZhaWwgKHBhcnNlciwgbWVzc2FnZSkge1xuICAgIGlmICh0eXBlb2YgcGFyc2VyICE9PSAnb2JqZWN0JyB8fCAhKHBhcnNlciBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIGNhbGwgdG8gc3RyaWN0RmFpbCcpXG4gICAgfVxuICAgIGlmIChwYXJzZXIuc3RyaWN0KSB7XG4gICAgICBlcnJvcihwYXJzZXIsIG1lc3NhZ2UpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbmV3VGFnIChwYXJzZXIpIHtcbiAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHBhcnNlci50YWdOYW1lID0gcGFyc2VyLnRhZ05hbWVbcGFyc2VyLmxvb3NlQ2FzZV0oKVxuICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICB2YXIgdGFnID0gcGFyc2VyLnRhZyA9IHsgbmFtZTogcGFyc2VyLnRhZ05hbWUsIGF0dHJpYnV0ZXM6IHt9IH1cblxuICAgIC8vIHdpbGwgYmUgb3ZlcnJpZGRlbiBpZiB0YWcgY29udGFpbHMgYW4geG1sbnM9XCJmb29cIiBvciB4bWxuczpmb289XCJiYXJcIlxuICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICB0YWcubnMgPSBwYXJlbnQubnNcbiAgICB9XG4gICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMFxuICAgIGVtaXROb2RlKHBhcnNlciwgJ29ub3BlbnRhZ3N0YXJ0JywgdGFnKVxuICB9XG5cbiAgZnVuY3Rpb24gcW5hbWUgKG5hbWUsIGF0dHJpYnV0ZSkge1xuICAgIHZhciBpID0gbmFtZS5pbmRleE9mKCc6JylcbiAgICB2YXIgcXVhbE5hbWUgPSBpIDwgMCA/IFsgJycsIG5hbWUgXSA6IG5hbWUuc3BsaXQoJzonKVxuICAgIHZhciBwcmVmaXggPSBxdWFsTmFtZVswXVxuICAgIHZhciBsb2NhbCA9IHF1YWxOYW1lWzFdXG5cbiAgICAvLyA8eCBcInhtbG5zXCI9XCJodHRwOi8vZm9vXCI+XG4gICAgaWYgKGF0dHJpYnV0ZSAmJiBuYW1lID09PSAneG1sbnMnKSB7XG4gICAgICBwcmVmaXggPSAneG1sbnMnXG4gICAgICBsb2NhbCA9ICcnXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcHJlZml4OiBwcmVmaXgsIGxvY2FsOiBsb2NhbCB9XG4gIH1cblxuICBmdW5jdGlvbiBhdHRyaWIgKHBhcnNlcikge1xuICAgIGlmICghcGFyc2VyLnN0cmljdCkge1xuICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliTmFtZVtwYXJzZXIubG9vc2VDYXNlXSgpXG4gICAgfVxuXG4gICAgaWYgKHBhcnNlci5hdHRyaWJMaXN0LmluZGV4T2YocGFyc2VyLmF0dHJpYk5hbWUpICE9PSAtMSB8fFxuICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KHBhcnNlci5hdHRyaWJOYW1lKSkge1xuICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci5hdHRyaWJOYW1lLCB0cnVlKVxuICAgICAgdmFyIHByZWZpeCA9IHFuLnByZWZpeFxuICAgICAgdmFyIGxvY2FsID0gcW4ubG9jYWxcblxuICAgICAgaWYgKHByZWZpeCA9PT0gJ3htbG5zJykge1xuICAgICAgICAvLyBuYW1lc3BhY2UgYmluZGluZyBhdHRyaWJ1dGUuIHB1c2ggdGhlIGJpbmRpbmcgaW50byBzY29wZVxuICAgICAgICBpZiAobG9jYWwgPT09ICd4bWwnICYmIHBhcnNlci5hdHRyaWJWYWx1ZSAhPT0gWE1MX05BTUVTUEFDRSkge1xuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLFxuICAgICAgICAgICAgJ3htbDogcHJlZml4IG11c3QgYmUgYm91bmQgdG8gJyArIFhNTF9OQU1FU1BBQ0UgKyAnXFxuJyArXG4gICAgICAgICAgICAnQWN0dWFsOiAnICsgcGFyc2VyLmF0dHJpYlZhbHVlKVxuICAgICAgICB9IGVsc2UgaWYgKGxvY2FsID09PSAneG1sbnMnICYmIHBhcnNlci5hdHRyaWJWYWx1ZSAhPT0gWE1MTlNfTkFNRVNQQUNFKSB7XG4gICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsXG4gICAgICAgICAgICAneG1sbnM6IHByZWZpeCBtdXN0IGJlIGJvdW5kIHRvICcgKyBYTUxOU19OQU1FU1BBQ0UgKyAnXFxuJyArXG4gICAgICAgICAgICAnQWN0dWFsOiAnICsgcGFyc2VyLmF0dHJpYlZhbHVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0YWcgPSBwYXJzZXIudGFnXG4gICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlclxuICAgICAgICAgIGlmICh0YWcubnMgPT09IHBhcmVudC5ucykge1xuICAgICAgICAgICAgdGFnLm5zID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQubnMpXG4gICAgICAgICAgfVxuICAgICAgICAgIHRhZy5uc1tsb2NhbF0gPSBwYXJzZXIuYXR0cmliVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBkZWZlciBvbmF0dHJpYnV0ZSBldmVudHMgdW50aWwgYWxsIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIHNlZW5cbiAgICAgIC8vIHNvIGFueSBuZXcgYmluZGluZ3MgY2FuIHRha2UgZWZmZWN0LiBwcmVzZXJ2ZSBhdHRyaWJ1dGUgb3JkZXJcbiAgICAgIC8vIHNvIGRlZmVycmVkIGV2ZW50cyBjYW4gYmUgZW1pdHRlZCBpbiBkb2N1bWVudCBvcmRlclxuICAgICAgcGFyc2VyLmF0dHJpYkxpc3QucHVzaChbcGFyc2VyLmF0dHJpYk5hbWUsIHBhcnNlci5hdHRyaWJWYWx1ZV0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGluIG5vbi14bWxucyBtb2RlLCB3ZSBjYW4gZW1pdCB0aGUgZXZlbnQgcmlnaHQgYXdheVxuICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW3BhcnNlci5hdHRyaWJOYW1lXSA9IHBhcnNlci5hdHRyaWJWYWx1ZVxuICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25hdHRyaWJ1dGUnLCB7XG4gICAgICAgIG5hbWU6IHBhcnNlci5hdHRyaWJOYW1lLFxuICAgICAgICB2YWx1ZTogcGFyc2VyLmF0dHJpYlZhbHVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5UYWcgKHBhcnNlciwgc2VsZkNsb3NpbmcpIHtcbiAgICBpZiAocGFyc2VyLm9wdC54bWxucykge1xuICAgICAgLy8gZW1pdCBuYW1lc3BhY2UgYmluZGluZyBldmVudHNcbiAgICAgIHZhciB0YWcgPSBwYXJzZXIudGFnXG5cbiAgICAgIC8vIGFkZCBuYW1lc3BhY2UgaW5mbyB0byB0YWdcbiAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci50YWdOYW1lKVxuICAgICAgdGFnLnByZWZpeCA9IHFuLnByZWZpeFxuICAgICAgdGFnLmxvY2FsID0gcW4ubG9jYWxcbiAgICAgIHRhZy51cmkgPSB0YWcubnNbcW4ucHJlZml4XSB8fCAnJ1xuXG4gICAgICBpZiAodGFnLnByZWZpeCAmJiAhdGFnLnVyaSkge1xuICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1VuYm91bmQgbmFtZXNwYWNlIHByZWZpeDogJyArXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocGFyc2VyLnRhZ05hbWUpKVxuICAgICAgICB0YWcudXJpID0gcW4ucHJlZml4XG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICAgIGlmICh0YWcubnMgJiYgcGFyZW50Lm5zICE9PSB0YWcubnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGFnLm5zKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25vcGVubmFtZXNwYWNlJywge1xuICAgICAgICAgICAgcHJlZml4OiBwLFxuICAgICAgICAgICAgdXJpOiB0YWcubnNbcF1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBoYW5kbGUgZGVmZXJyZWQgb25hdHRyaWJ1dGUgZXZlbnRzXG4gICAgICAvLyBOb3RlOiBkbyBub3QgYXBwbHkgZGVmYXVsdCBucyB0byBhdHRyaWJ1dGVzOlxuICAgICAgLy8gICBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLW5hbWVzLyNkZWZhdWx0aW5nXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgbnYgPSBwYXJzZXIuYXR0cmliTGlzdFtpXVxuICAgICAgICB2YXIgbmFtZSA9IG52WzBdXG4gICAgICAgIHZhciB2YWx1ZSA9IG52WzFdXG4gICAgICAgIHZhciBxdWFsTmFtZSA9IHFuYW1lKG5hbWUsIHRydWUpXG4gICAgICAgIHZhciBwcmVmaXggPSBxdWFsTmFtZS5wcmVmaXhcbiAgICAgICAgdmFyIGxvY2FsID0gcXVhbE5hbWUubG9jYWxcbiAgICAgICAgdmFyIHVyaSA9IHByZWZpeCA9PT0gJycgPyAnJyA6ICh0YWcubnNbcHJlZml4XSB8fCAnJylcbiAgICAgICAgdmFyIGEgPSB7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgcHJlZml4OiBwcmVmaXgsXG4gICAgICAgICAgbG9jYWw6IGxvY2FsLFxuICAgICAgICAgIHVyaTogdXJpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGVyZSdzIGFueSBhdHRyaWJ1dGVzIHdpdGggYW4gdW5kZWZpbmVkIG5hbWVzcGFjZSxcbiAgICAgICAgLy8gdGhlbiBmYWlsIG9uIHRoZW0gbm93LlxuICAgICAgICBpZiAocHJlZml4ICYmIHByZWZpeCAhPT0gJ3htbG5zJyAmJiAhdXJpKSB7XG4gICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6ICcgK1xuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJlZml4KSlcbiAgICAgICAgICBhLnVyaSA9IHByZWZpeFxuICAgICAgICB9XG4gICAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1tuYW1lXSA9IGFcbiAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25hdHRyaWJ1dGUnLCBhKVxuICAgICAgfVxuICAgICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMFxuICAgIH1cblxuICAgIHBhcnNlci50YWcuaXNTZWxmQ2xvc2luZyA9ICEhc2VsZkNsb3NpbmdcblxuICAgIC8vIHByb2Nlc3MgdGhlIHRhZ1xuICAgIHBhcnNlci5zYXdSb290ID0gdHJ1ZVxuICAgIHBhcnNlci50YWdzLnB1c2gocGFyc2VyLnRhZylcbiAgICBlbWl0Tm9kZShwYXJzZXIsICdvbm9wZW50YWcnLCBwYXJzZXIudGFnKVxuICAgIGlmICghc2VsZkNsb3NpbmcpIHtcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgPHNjcmlwdD4gaW4gbm9uLXN0cmljdCBtb2RlLlxuICAgICAgaWYgKCFwYXJzZXIubm9zY3JpcHQgJiYgcGFyc2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NjcmlwdCcpIHtcbiAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgfVxuICAgICAgcGFyc2VyLnRhZyA9IG51bGxcbiAgICAgIHBhcnNlci50YWdOYW1lID0gJydcbiAgICB9XG4gICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlVGFnIChwYXJzZXIpIHtcbiAgICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1dlaXJkIGVtcHR5IGNsb3NlIHRhZy4nKVxuICAgICAgcGFyc2VyLnRleHROb2RlICs9ICc8Lz4nXG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChwYXJzZXIuc2NyaXB0KSB7XG4gICAgICBpZiAocGFyc2VyLnRhZ05hbWUgIT09ICdzY3JpcHQnKSB7XG4gICAgICAgIHBhcnNlci5zY3JpcHQgKz0gJzwvJyArIHBhcnNlci50YWdOYW1lICsgJz4nXG4gICAgICAgIHBhcnNlci50YWdOYW1lID0gJydcbiAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbnNjcmlwdCcsIHBhcnNlci5zY3JpcHQpXG4gICAgICBwYXJzZXIuc2NyaXB0ID0gJydcbiAgICB9XG5cbiAgICAvLyBmaXJzdCBtYWtlIHN1cmUgdGhhdCB0aGUgY2xvc2luZyB0YWcgYWN0dWFsbHkgZXhpc3RzLlxuICAgIC8vIDxhPjxiPjwvYz48L2I+PC9hPiB3aWxsIGNsb3NlIGV2ZXJ5dGhpbmcsIG90aGVyd2lzZS5cbiAgICB2YXIgdCA9IHBhcnNlci50YWdzLmxlbmd0aFxuICAgIHZhciB0YWdOYW1lID0gcGFyc2VyLnRhZ05hbWVcbiAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHtcbiAgICAgIHRhZ05hbWUgPSB0YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKClcbiAgICB9XG4gICAgdmFyIGNsb3NlVG8gPSB0YWdOYW1lXG4gICAgd2hpbGUgKHQtLSkge1xuICAgICAgdmFyIGNsb3NlID0gcGFyc2VyLnRhZ3NbdF1cbiAgICAgIGlmIChjbG9zZS5uYW1lICE9PSBjbG9zZVRvKSB7XG4gICAgICAgIC8vIGZhaWwgdGhlIGZpcnN0IHRpbWUgaW4gc3RyaWN0IG1vZGVcbiAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbmV4cGVjdGVkIGNsb3NlIHRhZycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRpZG4ndCBmaW5kIGl0LiAgd2UgYWxyZWFkeSBmYWlsZWQgZm9yIHN0cmljdCwgc28ganVzdCBhYm9ydC5cbiAgICBpZiAodCA8IDApIHtcbiAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5tYXRjaGVkIGNsb3NpbmcgdGFnOiAnICsgcGFyc2VyLnRhZ05hbWUpXG4gICAgICBwYXJzZXIudGV4dE5vZGUgKz0gJzwvJyArIHBhcnNlci50YWdOYW1lICsgJz4nXG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBwYXJzZXIudGFnTmFtZSA9IHRhZ05hbWVcbiAgICB2YXIgcyA9IHBhcnNlci50YWdzLmxlbmd0aFxuICAgIHdoaWxlIChzLS0gPiB0KSB7XG4gICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZyA9IHBhcnNlci50YWdzLnBvcCgpXG4gICAgICBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWcubmFtZVxuICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jbG9zZXRhZycsIHBhcnNlci50YWdOYW1lKVxuXG4gICAgICB2YXIgeCA9IHt9XG4gICAgICBmb3IgKHZhciBpIGluIHRhZy5ucykge1xuICAgICAgICB4W2ldID0gdGFnLm5zW2ldXG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zICYmIHRhZy5ucyAhPT0gcGFyZW50Lm5zKSB7XG4gICAgICAgIC8vIHJlbW92ZSBuYW1lc3BhY2UgYmluZGluZ3MgaW50cm9kdWNlZCBieSB0YWdcbiAgICAgICAgT2JqZWN0LmtleXModGFnLm5zKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgdmFyIG4gPSB0YWcubnNbcF1cbiAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNsb3NlbmFtZXNwYWNlJywgeyBwcmVmaXg6IHAsIHVyaTogbiB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodCA9PT0gMCkgcGFyc2VyLmNsb3NlZFJvb3QgPSB0cnVlXG4gICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBwYXJzZXIuYXR0cmliTmFtZSA9ICcnXG4gICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMFxuICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VFbnRpdHkgKHBhcnNlcikge1xuICAgIHZhciBlbnRpdHkgPSBwYXJzZXIuZW50aXR5XG4gICAgdmFyIGVudGl0eUxDID0gZW50aXR5LnRvTG93ZXJDYXNlKClcbiAgICB2YXIgbnVtXG4gICAgdmFyIG51bVN0ciA9ICcnXG5cbiAgICBpZiAocGFyc2VyLkVOVElUSUVTW2VudGl0eV0pIHtcbiAgICAgIHJldHVybiBwYXJzZXIuRU5USVRJRVNbZW50aXR5XVxuICAgIH1cbiAgICBpZiAocGFyc2VyLkVOVElUSUVTW2VudGl0eUxDXSkge1xuICAgICAgcmV0dXJuIHBhcnNlci5FTlRJVElFU1tlbnRpdHlMQ11cbiAgICB9XG4gICAgZW50aXR5ID0gZW50aXR5TENcbiAgICBpZiAoZW50aXR5LmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICBpZiAoZW50aXR5LmNoYXJBdCgxKSA9PT0gJ3gnKSB7XG4gICAgICAgIGVudGl0eSA9IGVudGl0eS5zbGljZSgyKVxuICAgICAgICBudW0gPSBwYXJzZUludChlbnRpdHksIDE2KVxuICAgICAgICBudW1TdHIgPSBudW0udG9TdHJpbmcoMTYpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMSlcbiAgICAgICAgbnVtID0gcGFyc2VJbnQoZW50aXR5LCAxMClcbiAgICAgICAgbnVtU3RyID0gbnVtLnRvU3RyaW5nKDEwKVxuICAgICAgfVxuICAgIH1cbiAgICBlbnRpdHkgPSBlbnRpdHkucmVwbGFjZSgvXjArLywgJycpXG4gICAgaWYgKGlzTmFOKG51bSkgfHwgbnVtU3RyLnRvTG93ZXJDYXNlKCkgIT09IGVudGl0eSkge1xuICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGNoYXJhY3RlciBlbnRpdHknKVxuICAgICAgcmV0dXJuICcmJyArIHBhcnNlci5lbnRpdHkgKyAnOydcbiAgICB9XG5cbiAgICByZXR1cm4gU3RyaW5nLmZyb21Db2RlUG9pbnQobnVtKVxuICB9XG5cbiAgZnVuY3Rpb24gYmVnaW5XaGl0ZVNwYWNlIChwYXJzZXIsIGMpIHtcbiAgICBpZiAoYyA9PT0gJzwnKSB7XG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fV0FLQVxuICAgICAgcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb24gPSBwYXJzZXIucG9zaXRpb25cbiAgICB9IGVsc2UgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgIC8vIGhhdmUgdG8gcHJvY2VzcyB0aGlzIGFzIGEgdGV4dCBub2RlLlxuICAgICAgLy8gd2VpcmQsIGJ1dCBoYXBwZW5zLlxuICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdOb24td2hpdGVzcGFjZSBiZWZvcmUgZmlyc3QgdGFnLicpXG4gICAgICBwYXJzZXIudGV4dE5vZGUgPSBjXG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGFyQXQgKGNodW5rLCBpKSB7XG4gICAgdmFyIHJlc3VsdCA9ICcnXG4gICAgaWYgKGkgPCBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdCA9IGNodW5rLmNoYXJBdChpKVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBmdW5jdGlvbiB3cml0ZSAoY2h1bmspIHtcbiAgICB2YXIgcGFyc2VyID0gdGhpc1xuICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICB0aHJvdyB0aGlzLmVycm9yXG4gICAgfVxuICAgIGlmIChwYXJzZXIuY2xvc2VkKSB7XG4gICAgICByZXR1cm4gZXJyb3IocGFyc2VyLFxuICAgICAgICAnQ2Fubm90IHdyaXRlIGFmdGVyIGNsb3NlLiBBc3NpZ24gYW4gb25yZWFkeSBoYW5kbGVyLicpXG4gICAgfVxuICAgIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGVuZChwYXJzZXIpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2h1bmsgPT09ICdvYmplY3QnKSB7XG4gICAgICBjaHVuayA9IGNodW5rLnRvU3RyaW5nKClcbiAgICB9XG4gICAgdmFyIGkgPSAwXG4gICAgdmFyIGMgPSAnJ1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjID0gY2hhckF0KGNodW5rLCBpKyspXG4gICAgICBwYXJzZXIuYyA9IGNcblxuICAgICAgaWYgKCFjKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICBwYXJzZXIucG9zaXRpb24rK1xuICAgICAgICBpZiAoYyA9PT0gJ1xcbicpIHtcbiAgICAgICAgICBwYXJzZXIubGluZSsrXG4gICAgICAgICAgcGFyc2VyLmNvbHVtbiA9IDBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJzZXIuY29sdW1uKytcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHBhcnNlci5zdGF0ZSkge1xuICAgICAgICBjYXNlIFMuQkVHSU46XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5CRUdJTl9XSElURVNQQUNFXG4gICAgICAgICAgaWYgKGMgPT09ICdcXHVGRUZGJykge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgYmVnaW5XaGl0ZVNwYWNlKHBhcnNlciwgYylcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5CRUdJTl9XSElURVNQQUNFOlxuICAgICAgICAgIGJlZ2luV2hpdGVTcGFjZShwYXJzZXIsIGMpXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuVEVYVDpcbiAgICAgICAgICBpZiAocGFyc2VyLnNhd1Jvb3QgJiYgIXBhcnNlci5jbG9zZWRSb290KSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRpID0gaSAtIDFcbiAgICAgICAgICAgIHdoaWxlIChjICYmIGMgIT09ICc8JyAmJiBjICE9PSAnJicpIHtcbiAgICAgICAgICAgICAgYyA9IGNoYXJBdChjaHVuaywgaSsrKVxuICAgICAgICAgICAgICBpZiAoYyAmJiBwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHBhcnNlci5wb3NpdGlvbisrXG4gICAgICAgICAgICAgICAgaWYgKGMgPT09ICdcXG4nKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZXIubGluZSsrXG4gICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uID0gMFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uKytcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBjaHVuay5zdWJzdHJpbmcoc3RhcnRpLCBpIC0gMSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGMgPT09ICc8JyAmJiAhKHBhcnNlci5zYXdSb290ICYmIHBhcnNlci5jbG9zZWRSb290ICYmICFwYXJzZXIuc3RyaWN0KSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0FcbiAgICAgICAgICAgIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uID0gcGFyc2VyLnBvc2l0aW9uXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghaXNXaGl0ZXNwYWNlKGMpICYmICghcGFyc2VyLnNhd1Jvb3QgfHwgcGFyc2VyLmNsb3NlZFJvb3QpKSB7XG4gICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVGV4dCBkYXRhIG91dHNpZGUgb2Ygcm9vdCBub2RlLicpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyA9PT0gJyYnKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVF9FTlRJVFlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlNDUklQVDpcbiAgICAgICAgICAvLyBvbmx5IG5vbi1zdHJpY3RcbiAgICAgICAgICBpZiAoYyA9PT0gJzwnKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVF9FTkRJTkdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlNDUklQVF9FTkRJTkc6XG4gICAgICAgICAgaWYgKGMgPT09ICcvJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSAnPCcgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5PUEVOX1dBS0E6XG4gICAgICAgICAgLy8gZWl0aGVyIGEgLywgPywgISwgb3IgdGV4dCBpcyBjb21pbmcgbmV4dC5cbiAgICAgICAgICBpZiAoYyA9PT0gJyEnKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTFxuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gJydcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgLy8gd2FpdCBmb3IgaXQuLi5cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBjXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnLycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0xPU0VfVEFHXG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUXG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3ROYW1lID0gcGFyc2VyLnByb2NJbnN0Qm9keSA9ICcnXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5lbmNvZGVkIDwnKVxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgd2FzIHNvbWUgd2hpdGVzcGFjZSwgdGhlbiBhZGQgdGhhdCBpbi5cbiAgICAgICAgICAgIGlmIChwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiArIDEgPCBwYXJzZXIucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgdmFyIHBhZCA9IHBhcnNlci5wb3NpdGlvbiAtIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uXG4gICAgICAgICAgICAgIGMgPSBuZXcgQXJyYXkocGFkKS5qb2luKCcgJykgKyBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gJzwnICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlNHTUxfREVDTDpcbiAgICAgICAgICBpZiAocGFyc2VyLnNnbWxEZWNsICsgYyA9PT0gJy0tJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UXG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSAnJ1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHBhcnNlci5kb2N0eXBlICYmIHBhcnNlci5kb2N0eXBlICE9PSB0cnVlICYmIHBhcnNlci5zZ21sRGVjbCkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURFxuICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gJzwhJyArIHBhcnNlci5zZ21sRGVjbCArIGNcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmICgocGFyc2VyLnNnbWxEZWNsICsgYykudG9VcHBlckNhc2UoKSA9PT0gQ0RBVEEpIHtcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29ub3BlbmNkYXRhJylcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSAnJ1xuICAgICAgICAgIH0gZWxzZSBpZiAoKHBhcnNlci5zZ21sRGVjbCArIGMpLnRvVXBwZXJDYXNlKCkgPT09IERPQ1RZUEUpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRVxuICAgICAgICAgICAgaWYgKHBhcnNlci5kb2N0eXBlIHx8IHBhcnNlci5zYXdSb290KSB7XG4gICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLFxuICAgICAgICAgICAgICAgICdJbmFwcHJvcHJpYXRlbHkgbG9jYXRlZCBkb2N0eXBlIGRlY2xhcmF0aW9uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uc2dtbGRlY2xhcmF0aW9uJywgcGFyc2VyLnNnbWxEZWNsKVxuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0xfUVVPVEVEXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgKz0gY1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5TR01MX0RFQ0xfUVVPVEVEOlxuICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0xcbiAgICAgICAgICAgIHBhcnNlci5xID0gJydcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGNcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5ET0NUWVBFOlxuICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25kb2N0eXBlJywgcGFyc2VyLmRvY3R5cGUpXG4gICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSA9IHRydWUgLy8ganVzdCByZW1lbWJlciB0aGF0IHdlIHNhdyBpdC5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgICAgaWYgKGMgPT09ICdbJykge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX1FVT1RFRFxuICAgICAgICAgICAgICBwYXJzZXIucSA9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuRE9DVFlQRV9RVU9URUQ6XG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgcGFyc2VyLnEgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkRPQ1RZUEVfRFREOlxuICAgICAgICAgIGlmIChjID09PSAnXScpIHtcbiAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJzwnKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fV0FLQVxuICAgICAgICAgICAgcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb24gPSBwYXJzZXIucG9zaXRpb25cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERfUVVPVEVEXG4gICAgICAgICAgICBwYXJzZXIucSA9IGNcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5ET0NUWVBFX0RURF9RVU9URUQ6XG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURFxuICAgICAgICAgICAgcGFyc2VyLnEgPSAnJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DT01NRU5UOlxuICAgICAgICAgIGlmIChjID09PSAnLScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVF9FTkRJTkdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DT01NRU5UX0VORElORzpcbiAgICAgICAgICBpZiAoYyA9PT0gJy0nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRfRU5ERURcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gdGV4dG9wdHMocGFyc2VyLm9wdCwgcGFyc2VyLmNvbW1lbnQpXG4gICAgICAgICAgICBpZiAocGFyc2VyLmNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jb21tZW50JywgcGFyc2VyLmNvbW1lbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9ICcnXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9ICctJyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DT01NRU5UX0VOREVEOlxuICAgICAgICAgIGlmIChjICE9PSAnPicpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnTWFsZm9ybWVkIGNvbW1lbnQnKVxuICAgICAgICAgICAgLy8gYWxsb3cgPCEtLSBibGFoIC0tIGJsb28gLS0+IGluIG5vbi1zdHJpY3QgbW9kZSxcbiAgICAgICAgICAgIC8vIHdoaWNoIGlzIGEgY29tbWVudCBvZiBcIiBibGFoIC0tIGJsb28gXCJcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9ICctLScgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlci5kb2N0eXBlICYmIHBhcnNlci5kb2N0eXBlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DREFUQTpcbiAgICAgICAgICBpZiAoYyA9PT0gJ10nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBX0VORElOR1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkc6XG4gICAgICAgICAgaWYgKGMgPT09ICddJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkdfMlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gJ10nICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkdfMjpcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBpZiAocGFyc2VyLmNkYXRhKSB7XG4gICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2RhdGEnLCBwYXJzZXIuY2RhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNsb3NlY2RhdGEnKVxuICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJ10nKSB7XG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gJ10nXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSAnXV0nICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5QUk9DX0lOU1Q6XG4gICAgICAgICAgaWYgKGMgPT09ICc/Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfRU5ESU5HXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0JPRFlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlBST0NfSU5TVF9CT0RZOlxuICAgICAgICAgIGlmICghcGFyc2VyLnByb2NJbnN0Qm9keSAmJiBpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0VORElOR1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3RCb2R5ICs9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuUFJPQ19JTlNUX0VORElORzpcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbnByb2Nlc3NpbmdpbnN0cnVjdGlvbicsIHtcbiAgICAgICAgICAgICAgbmFtZTogcGFyc2VyLnByb2NJbnN0TmFtZSxcbiAgICAgICAgICAgICAgYm9keTogcGFyc2VyLnByb2NJbnN0Qm9keVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgPSBwYXJzZXIucHJvY0luc3RCb2R5ID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3RCb2R5ICs9ICc/JyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0JPRFlcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuT1BFTl9UQUc6XG4gICAgICAgICAgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSArPSBjXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1RhZyhwYXJzZXIpXG4gICAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnLycpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgY2hhcmFjdGVyIGluIHRhZyBuYW1lJylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5PUEVOX1RBR19TTEFTSDpcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlciwgdHJ1ZSlcbiAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdGb3J3YXJkLXNsYXNoIGluIG9wZW5pbmcgdGFnIG5vdCBmb2xsb3dlZCBieSA+JylcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQjpcbiAgICAgICAgICAvLyBoYXZlbid0IHJlYWQgdGhlIGF0dHJpYnV0ZSBuYW1lIHlldC5cbiAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICcvJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSFxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGNcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FOlxuICAgICAgICAgIGlmIChjID09PSAnPScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnQXR0cmlidXRlIHdpdGhvdXQgdmFsdWUnKVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gcGFyc2VyLmF0dHJpYk5hbWVcbiAgICAgICAgICAgIGF0dHJpYihwYXJzZXIpXG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRV9TQVdfV0hJVEVcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSArPSBjXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FX1NBV19XSElURTpcbiAgICAgICAgICBpZiAoYyA9PT0gJz0nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0F0dHJpYnV0ZSB3aXRob3V0IHZhbHVlJylcbiAgICAgICAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1twYXJzZXIuYXR0cmliTmFtZV0gPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uYXR0cmlidXRlJywge1xuICAgICAgICAgICAgICBuYW1lOiBwYXJzZXIuYXR0cmliTmFtZSxcbiAgICAgICAgICAgICAgdmFsdWU6ICcnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSAnJ1xuICAgICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gY1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgYXR0cmlidXRlIG5hbWUnKVxuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUU6XG4gICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5xID0gY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfUVVPVEVEXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghcGFyc2VyLm9wdC51bnF1b3RlZEF0dHJpYnV0ZVZhbHVlcykge1xuICAgICAgICAgICAgICBlcnJvcihwYXJzZXIsICdVbnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWUnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URURcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX1FVT1RFRDpcbiAgICAgICAgICBpZiAoYyAhPT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgIGlmIChjID09PSAnJicpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfRU5USVRZX1FcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSArPSBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBhdHRyaWIocGFyc2VyKVxuICAgICAgICAgIHBhcnNlci5xID0gJydcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9DTE9TRURcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfQ0xPU0VEOlxuICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJy8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIXG4gICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnTm8gd2hpdGVzcGFjZSBiZXR3ZWVuIGF0dHJpYnV0ZXMnKVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgYXR0cmlidXRlIG5hbWUnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ6XG4gICAgICAgICAgaWYgKCFpc0F0dHJpYkVuZChjKSkge1xuICAgICAgICAgICAgaWYgKGMgPT09ICcmJykge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlICs9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGF0dHJpYihwYXJzZXIpXG4gICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNMT1NFX1RBRzpcbiAgICAgICAgICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vdE1hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9ICc8LycgKyBjXG4gICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgdGFnbmFtZSBpbiBjbG9zaW5nIHRhZy4nKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgY2xvc2VUYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lICs9IGNcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gJzwvJyArIHBhcnNlci50YWdOYW1lXG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgdGFnbmFtZSBpbiBjbG9zaW5nIHRhZycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBR19TQVdfV0hJVEVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ0xPU0VfVEFHX1NBV19XSElURTpcbiAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBjbG9zZVRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBjaGFyYWN0ZXJzIGluIGNsb3NpbmcgdGFnJylcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1E6XG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1U6XG4gICAgICAgICAgdmFyIHJldHVyblN0YXRlXG4gICAgICAgICAgdmFyIGJ1ZmZlclxuICAgICAgICAgIHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgICAgICAgIHJldHVyblN0YXRlID0gUy5URVhUXG4gICAgICAgICAgICAgIGJ1ZmZlciA9ICd0ZXh0Tm9kZSdcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgICAgICAgICAgcmV0dXJuU3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9RVU9URURcbiAgICAgICAgICAgICAgYnVmZmVyID0gJ2F0dHJpYlZhbHVlJ1xuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VOlxuICAgICAgICAgICAgICByZXR1cm5TdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVEXG4gICAgICAgICAgICAgIGJ1ZmZlciA9ICdhdHRyaWJWYWx1ZSdcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYyA9PT0gJzsnKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkRW50aXR5ID0gcGFyc2VFbnRpdHkocGFyc2VyKVxuICAgICAgICAgICAgaWYgKHBhcnNlci5vcHQudW5wYXJzZWRFbnRpdGllcyAmJiAhT2JqZWN0LnZhbHVlcyhzYXguWE1MX0VOVElUSUVTKS5pbmNsdWRlcyhwYXJzZWRFbnRpdHkpKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgPSAnJ1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZVxuICAgICAgICAgICAgICBwYXJzZXIud3JpdGUocGFyc2VkRW50aXR5KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcl0gKz0gcGFyc2VkRW50aXR5XG4gICAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgPSAnJ1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChwYXJzZXIuZW50aXR5Lmxlbmd0aCA/IGVudGl0eUJvZHkgOiBlbnRpdHlTdGFydCwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgKz0gY1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgY2hhcmFjdGVyIGluIGVudGl0eSBuYW1lJylcbiAgICAgICAgICAgIHBhcnNlcltidWZmZXJdICs9ICcmJyArIHBhcnNlci5lbnRpdHkgKyBjXG4gICAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBkZWZhdWx0OiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHBhcnNlciwgJ1Vua25vd24gc3RhdGU6ICcgKyBwYXJzZXIuc3RhdGUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIHdoaWxlXG5cbiAgICBpZiAocGFyc2VyLnBvc2l0aW9uID49IHBhcnNlci5idWZmZXJDaGVja1Bvc2l0aW9uKSB7XG4gICAgICBjaGVja0J1ZmZlckxlbmd0aChwYXJzZXIpXG4gICAgfVxuICAgIHJldHVybiBwYXJzZXJcbiAgfVxuXG4gIC8qISBodHRwOi8vbXRocy5iZS9mcm9tY29kZXBvaW50IHYwLjEuMCBieSBAbWF0aGlhcyAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBpZiAoIVN0cmluZy5mcm9tQ29kZVBvaW50KSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlXG4gICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yXG4gICAgICB2YXIgZnJvbUNvZGVQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIE1BWF9TSVpFID0gMHg0MDAwXG4gICAgICAgIHZhciBjb2RlVW5pdHMgPSBbXVxuICAgICAgICB2YXIgaGlnaFN1cnJvZ2F0ZVxuICAgICAgICB2YXIgbG93U3Vycm9nYXRlXG4gICAgICAgIHZhciBpbmRleCA9IC0xXG4gICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGNvZGVQb2ludCA9IE51bWJlcihhcmd1bWVudHNbaW5kZXhdKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc0Zpbml0ZShjb2RlUG9pbnQpIHx8IC8vIGBOYU5gLCBgK0luZmluaXR5YCwgb3IgYC1JbmZpbml0eWBcbiAgICAgICAgICAgIGNvZGVQb2ludCA8IDAgfHwgLy8gbm90IGEgdmFsaWQgVW5pY29kZSBjb2RlIHBvaW50XG4gICAgICAgICAgICBjb2RlUG9pbnQgPiAweDEwRkZGRiB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgIGZsb29yKGNvZGVQb2ludCkgIT09IGNvZGVQb2ludCAvLyBub3QgYW4gaW50ZWdlclxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcignSW52YWxpZCBjb2RlIHBvaW50OiAnICsgY29kZVBvaW50KVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29kZVBvaW50IDw9IDB4RkZGRikgeyAvLyBCTVAgY29kZSBwb2ludFxuICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goY29kZVBvaW50KVxuICAgICAgICAgIH0gZWxzZSB7IC8vIEFzdHJhbCBjb2RlIHBvaW50OyBzcGxpdCBpbiBzdXJyb2dhdGUgaGFsdmVzXG4gICAgICAgICAgICAvLyBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nI3N1cnJvZ2F0ZS1mb3JtdWxhZVxuICAgICAgICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgICAgICAgIGhpZ2hTdXJyb2dhdGUgPSAoY29kZVBvaW50ID4+IDEwKSArIDB4RDgwMFxuICAgICAgICAgICAgbG93U3Vycm9nYXRlID0gKGNvZGVQb2ludCAlIDB4NDAwKSArIDB4REMwMFxuICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goaGlnaFN1cnJvZ2F0ZSwgbG93U3Vycm9nYXRlKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW5kZXggKyAxID09PSBsZW5ndGggfHwgY29kZVVuaXRzLmxlbmd0aCA+IE1BWF9TSVpFKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNvZGVVbml0cylcbiAgICAgICAgICAgIGNvZGVVbml0cy5sZW5ndGggPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcsICdmcm9tQ29kZVBvaW50Jywge1xuICAgICAgICAgIHZhbHVlOiBmcm9tQ29kZVBvaW50LFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgU3RyaW5nLmZyb21Db2RlUG9pbnQgPSBmcm9tQ29kZVBvaW50XG4gICAgICB9XG4gICAgfSgpKVxuICB9XG59KSh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyB0aGlzLnNheCA9IHt9IDogZXhwb3J0cylcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgZXhwb3J0cy5zdHJpcEJPTSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmIChzdHJbMF0gPT09ICdcXHVGRUZGJykge1xuICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwgIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgcHJlZml4TWF0Y2g7XG5cbiAgcHJlZml4TWF0Y2ggPSBuZXcgUmVnRXhwKC8oPyF4bWxucyleLio6Lyk7XG5cbiAgZXhwb3J0cy5ub3JtYWxpemUgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gIH07XG5cbiAgZXhwb3J0cy5maXJzdENoYXJMb3dlckNhc2UgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xuICB9O1xuXG4gIGV4cG9ydHMuc3RyaXBQcmVmaXggPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UocHJlZml4TWF0Y2gsICcnKTtcbiAgfTtcblxuICBleHBvcnRzLnBhcnNlTnVtYmVycyA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmICghaXNOYU4oc3RyKSkge1xuICAgICAgc3RyID0gc3RyICUgMSA9PT0gMCA/IHBhcnNlSW50KHN0ciwgMTApIDogcGFyc2VGbG9hdChzdHIpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9O1xuXG4gIGV4cG9ydHMucGFyc2VCb29sZWFucyA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGlmICgvXig/OnRydWV8ZmFsc2UpJC9pLnRlc3Qoc3RyKSkge1xuICAgICAgc3RyID0gc3RyLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIGJvbSwgZGVmYXVsdHMsIGV2ZW50cywgaXNFbXB0eSwgcHJvY2Vzc0l0ZW0sIHByb2Nlc3NvcnMsIHNheCwgc2V0SW1tZWRpYXRlLFxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgc2F4ID0gcmVxdWlyZSgnc2F4Jyk7XG5cbiAgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5cbiAgYm9tID0gcmVxdWlyZSgnLi9ib20nKTtcblxuICBwcm9jZXNzb3JzID0gcmVxdWlyZSgnLi9wcm9jZXNzb3JzJyk7XG5cbiAgc2V0SW1tZWRpYXRlID0gcmVxdWlyZSgndGltZXJzJykuc2V0SW1tZWRpYXRlO1xuXG4gIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpLmRlZmF1bHRzO1xuXG4gIGlzRW1wdHkgPSBmdW5jdGlvbih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IFwib2JqZWN0XCIgJiYgKHRoaW5nICE9IG51bGwpICYmIE9iamVjdC5rZXlzKHRoaW5nKS5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgcHJvY2Vzc0l0ZW0gPSBmdW5jdGlvbihwcm9jZXNzb3JzLCBpdGVtLCBrZXkpIHtcbiAgICB2YXIgaSwgbGVuLCBwcm9jZXNzO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IHByb2Nlc3NvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHByb2Nlc3MgPSBwcm9jZXNzb3JzW2ldO1xuICAgICAgaXRlbSA9IHByb2Nlc3MoaXRlbSwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG4gIH07XG5cbiAgZXhwb3J0cy5QYXJzZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChQYXJzZXIsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gUGFyc2VyKG9wdHMpIHtcbiAgICAgIHRoaXMucGFyc2VTdHJpbmdQcm9taXNlID0gYmluZCh0aGlzLnBhcnNlU3RyaW5nUHJvbWlzZSwgdGhpcyk7XG4gICAgICB0aGlzLnBhcnNlU3RyaW5nID0gYmluZCh0aGlzLnBhcnNlU3RyaW5nLCB0aGlzKTtcbiAgICAgIHRoaXMucmVzZXQgPSBiaW5kKHRoaXMucmVzZXQsIHRoaXMpO1xuICAgICAgdGhpcy5hc3NpZ25PclB1c2ggPSBiaW5kKHRoaXMuYXNzaWduT3JQdXNoLCB0aGlzKTtcbiAgICAgIHRoaXMucHJvY2Vzc0FzeW5jID0gYmluZCh0aGlzLnByb2Nlc3NBc3luYywgdGhpcyk7XG4gICAgICB2YXIga2V5LCByZWYsIHZhbHVlO1xuICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIGV4cG9ydHMuUGFyc2VyKSkge1xuICAgICAgICByZXR1cm4gbmV3IGV4cG9ydHMuUGFyc2VyKG9wdHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICByZWYgPSBkZWZhdWx0c1tcIjAuMlwiXTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHJlZltrZXldO1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gb3B0cykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvcHRzLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSBvcHRzW2tleV07XG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnhtbG5zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy54bWxuc2tleSA9IHRoaXMub3B0aW9ucy5hdHRya2V5ICsgXCJuc1wiO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub3JtYWxpemVUYWdzKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzLnVuc2hpZnQocHJvY2Vzc29ycy5ub3JtYWxpemUpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cblxuICAgIFBhcnNlci5wcm90b3R5cGUucHJvY2Vzc0FzeW5jID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2h1bmssIGVycjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZy5sZW5ndGggPD0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZSkge1xuICAgICAgICAgIGNodW5rID0gdGhpcy5yZW1haW5pbmc7XG4gICAgICAgICAgdGhpcy5yZW1haW5pbmcgPSAnJztcbiAgICAgICAgICB0aGlzLnNheFBhcnNlciA9IHRoaXMuc2F4UGFyc2VyLndyaXRlKGNodW5rKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zYXhQYXJzZXIuY2xvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaHVuayA9IHRoaXMucmVtYWluaW5nLnN1YnN0cigwLCB0aGlzLm9wdGlvbnMuY2h1bmtTaXplKTtcbiAgICAgICAgICB0aGlzLnJlbWFpbmluZyA9IHRoaXMucmVtYWluaW5nLnN1YnN0cih0aGlzLm9wdGlvbnMuY2h1bmtTaXplLCB0aGlzLnJlbWFpbmluZy5sZW5ndGgpO1xuICAgICAgICAgIHRoaXMuc2F4UGFyc2VyID0gdGhpcy5zYXhQYXJzZXIud3JpdGUoY2h1bmspO1xuICAgICAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUodGhpcy5wcm9jZXNzQXN5bmMpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcjEpIHtcbiAgICAgICAgZXJyID0gZXJyb3IxO1xuICAgICAgICBpZiAoIXRoaXMuc2F4UGFyc2VyLmVyclRocm93bikge1xuICAgICAgICAgIHRoaXMuc2F4UGFyc2VyLmVyclRocm93biA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZW1pdChlcnIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFBhcnNlci5wcm90b3R5cGUuYXNzaWduT3JQdXNoID0gZnVuY3Rpb24ob2JqLCBrZXksIG5ld1ZhbHVlKSB7XG4gICAgICBpZiAoIShrZXkgaW4gb2JqKSkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5leHBsaWNpdEFycmF5KSB7XG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldID0gbmV3VmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldID0gW25ld1ZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEob2JqW2tleV0gaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IFtvYmpba2V5XV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9ialtrZXldLnB1c2gobmV3VmFsdWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBQYXJzZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXR0cmtleSwgY2hhcmtleSwgb250ZXh0LCBzdGFjaztcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLnNheFBhcnNlciA9IHNheC5wYXJzZXIodGhpcy5vcHRpb25zLnN0cmljdCwge1xuICAgICAgICB0cmltOiBmYWxzZSxcbiAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICAgICAgeG1sbnM6IHRoaXMub3B0aW9ucy54bWxuc1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNheFBhcnNlci5lcnJUaHJvd24gPSBmYWxzZTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9uZXJyb3IgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgX3RoaXMuc2F4UGFyc2VyLnJlc3VtZSgpO1xuICAgICAgICAgIGlmICghX3RoaXMuc2F4UGFyc2VyLmVyclRocm93bikge1xuICAgICAgICAgICAgX3RoaXMuc2F4UGFyc2VyLmVyclRocm93biA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9uZW5kID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIV90aGlzLnNheFBhcnNlci5lbmRlZCkge1xuICAgICAgICAgICAgX3RoaXMuc2F4UGFyc2VyLmVuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5lbWl0KFwiZW5kXCIsIF90aGlzLnJlc3VsdE9iamVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLnNheFBhcnNlci5lbmRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5FWFBMSUNJVF9DSEFSS0VZID0gdGhpcy5vcHRpb25zLmV4cGxpY2l0Q2hhcmtleTtcbiAgICAgIHRoaXMucmVzdWx0T2JqZWN0ID0gbnVsbDtcbiAgICAgIHN0YWNrID0gW107XG4gICAgICBhdHRya2V5ID0gdGhpcy5vcHRpb25zLmF0dHJrZXk7XG4gICAgICBjaGFya2V5ID0gdGhpcy5vcHRpb25zLmNoYXJrZXk7XG4gICAgICB0aGlzLnNheFBhcnNlci5vbm9wZW50YWcgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICB2YXIga2V5LCBuZXdWYWx1ZSwgb2JqLCBwcm9jZXNzZWRLZXksIHJlZjtcbiAgICAgICAgICBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIG9ialtjaGFya2V5XSA9IFwiXCI7XG4gICAgICAgICAgaWYgKCFfdGhpcy5vcHRpb25zLmlnbm9yZUF0dHJzKSB7XG4gICAgICAgICAgICByZWYgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiByZWYpIHtcbiAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgaWYgKCEoYXR0cmtleSBpbiBvYmopICYmICFfdGhpcy5vcHRpb25zLm1lcmdlQXR0cnMpIHtcbiAgICAgICAgICAgICAgICBvYmpbYXR0cmtleV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5ld1ZhbHVlID0gX3RoaXMub3B0aW9ucy5hdHRyVmFsdWVQcm9jZXNzb3JzID8gcHJvY2Vzc0l0ZW0oX3RoaXMub3B0aW9ucy5hdHRyVmFsdWVQcm9jZXNzb3JzLCBub2RlLmF0dHJpYnV0ZXNba2V5XSwga2V5KSA6IG5vZGUuYXR0cmlidXRlc1trZXldO1xuICAgICAgICAgICAgICBwcm9jZXNzZWRLZXkgPSBfdGhpcy5vcHRpb25zLmF0dHJOYW1lUHJvY2Vzc29ycyA/IHByb2Nlc3NJdGVtKF90aGlzLm9wdGlvbnMuYXR0ck5hbWVQcm9jZXNzb3JzLCBrZXkpIDoga2V5O1xuICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5tZXJnZUF0dHJzKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXNzaWduT3JQdXNoKG9iaiwgcHJvY2Vzc2VkS2V5LCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2JqW2F0dHJrZXldW3Byb2Nlc3NlZEtleV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBvYmpbXCIjbmFtZVwiXSA9IF90aGlzLm9wdGlvbnMudGFnTmFtZVByb2Nlc3NvcnMgPyBwcm9jZXNzSXRlbShfdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzLCBub2RlLm5hbWUpIDogbm9kZS5uYW1lO1xuICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnhtbG5zKSB7XG4gICAgICAgICAgICBvYmpbX3RoaXMub3B0aW9ucy54bWxuc2tleV0gPSB7XG4gICAgICAgICAgICAgIHVyaTogbm9kZS51cmksXG4gICAgICAgICAgICAgIGxvY2FsOiBub2RlLmxvY2FsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RhY2sucHVzaChvYmopO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLnNheFBhcnNlci5vbmNsb3NldGFnID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgY2RhdGEsIGVtcHR5U3RyLCBrZXksIG5vZGUsIG5vZGVOYW1lLCBvYmosIG9iakNsb25lLCBvbGQsIHMsIHhwYXRoO1xuICAgICAgICAgIG9iaiA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgIG5vZGVOYW1lID0gb2JqW1wiI25hbWVcIl07XG4gICAgICAgICAgaWYgKCFfdGhpcy5vcHRpb25zLmV4cGxpY2l0Q2hpbGRyZW4gfHwgIV90aGlzLm9wdGlvbnMucHJlc2VydmVDaGlsZHJlbk9yZGVyKSB7XG4gICAgICAgICAgICBkZWxldGUgb2JqW1wiI25hbWVcIl07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvYmouY2RhdGEgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNkYXRhID0gb2JqLmNkYXRhO1xuICAgICAgICAgICAgZGVsZXRlIG9iai5jZGF0YTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcyA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgIGlmIChvYmpbY2hhcmtleV0ubWF0Y2goL15cXHMqJC8pICYmICFjZGF0YSkge1xuICAgICAgICAgICAgZW1wdHlTdHIgPSBvYmpbY2hhcmtleV07XG4gICAgICAgICAgICBkZWxldGUgb2JqW2NoYXJrZXldO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy50cmltKSB7XG4gICAgICAgICAgICAgIG9ialtjaGFya2V5XSA9IG9ialtjaGFya2V5XS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5ub3JtYWxpemUpIHtcbiAgICAgICAgICAgICAgb2JqW2NoYXJrZXldID0gb2JqW2NoYXJrZXldLnJlcGxhY2UoL1xcc3syLH0vZywgXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9ialtjaGFya2V5XSA9IF90aGlzLm9wdGlvbnMudmFsdWVQcm9jZXNzb3JzID8gcHJvY2Vzc0l0ZW0oX3RoaXMub3B0aW9ucy52YWx1ZVByb2Nlc3NvcnMsIG9ialtjaGFya2V5XSwgbm9kZU5hbWUpIDogb2JqW2NoYXJrZXldO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAxICYmIGNoYXJrZXkgaW4gb2JqICYmICFfdGhpcy5FWFBMSUNJVF9DSEFSS0VZKSB7XG4gICAgICAgICAgICAgIG9iaiA9IG9ialtjaGFya2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzRW1wdHkob2JqKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLmVtcHR5VGFnID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIG9iaiA9IF90aGlzLm9wdGlvbnMuZW1wdHlUYWcoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9iaiA9IF90aGlzLm9wdGlvbnMuZW1wdHlUYWcgIT09ICcnID8gX3RoaXMub3B0aW9ucy5lbXB0eVRhZyA6IGVtcHR5U3RyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy52YWxpZGF0b3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgeHBhdGggPSBcIi9cIiArICgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBpLCBsZW4sIHJlc3VsdHM7XG4gICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gc3RhY2subGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBub2RlID0gc3RhY2tbaV07XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG5vZGVbXCIjbmFtZVwiXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9KSgpKS5jb25jYXQobm9kZU5hbWUpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgZXJyO1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmogPSBfdGhpcy5vcHRpb25zLnZhbGlkYXRvcih4cGF0aCwgcyAmJiBzW25vZGVOYW1lXSwgb2JqKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IxKSB7XG4gICAgICAgICAgICAgICAgZXJyID0gZXJyb3IxO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZXhwbGljaXRDaGlsZHJlbiAmJiAhX3RoaXMub3B0aW9ucy5tZXJnZUF0dHJzICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLm9wdGlvbnMucHJlc2VydmVDaGlsZHJlbk9yZGVyKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5hdHRya2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIG5vZGVbX3RoaXMub3B0aW9ucy5hdHRya2V5XSA9IG9ialtfdGhpcy5vcHRpb25zLmF0dHJrZXldO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbX3RoaXMub3B0aW9ucy5hdHRya2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIV90aGlzLm9wdGlvbnMuY2hhcnNBc0NoaWxkcmVuICYmIF90aGlzLm9wdGlvbnMuY2hhcmtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBub2RlW190aGlzLm9wdGlvbnMuY2hhcmtleV0gPSBvYmpbX3RoaXMub3B0aW9ucy5jaGFya2V5XTtcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqW190aGlzLm9wdGlvbnMuY2hhcmtleV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGVbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0gPSBvYmo7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgb2JqID0gbm9kZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocykge1xuICAgICAgICAgICAgICBzW190aGlzLm9wdGlvbnMuY2hpbGRrZXldID0gc1tfdGhpcy5vcHRpb25zLmNoaWxka2V5XSB8fCBbXTtcbiAgICAgICAgICAgICAgb2JqQ2xvbmUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvYmosIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG9iakNsb25lW2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzW190aGlzLm9wdGlvbnMuY2hpbGRrZXldLnB1c2gob2JqQ2xvbmUpO1xuICAgICAgICAgICAgICBkZWxldGUgb2JqW1wiI25hbWVcIl07XG4gICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMSAmJiBjaGFya2V5IGluIG9iaiAmJiAhX3RoaXMuRVhQTElDSVRfQ0hBUktFWSkge1xuICAgICAgICAgICAgICAgIG9iaiA9IG9ialtjaGFya2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFzc2lnbk9yUHVzaChzLCBub2RlTmFtZSwgb2JqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZXhwbGljaXRSb290KSB7XG4gICAgICAgICAgICAgIG9sZCA9IG9iajtcbiAgICAgICAgICAgICAgb2JqID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgICAgb2JqW25vZGVOYW1lXSA9IG9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLnJlc3VsdE9iamVjdCA9IG9iajtcbiAgICAgICAgICAgIF90aGlzLnNheFBhcnNlci5lbmRlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZW1pdChcImVuZFwiLCBfdGhpcy5yZXN1bHRPYmplY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgb250ZXh0ID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgICAgdmFyIGNoYXJDaGlsZCwgcztcbiAgICAgICAgICBzID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIHNbY2hhcmtleV0gKz0gdGV4dDtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmV4cGxpY2l0Q2hpbGRyZW4gJiYgX3RoaXMub3B0aW9ucy5wcmVzZXJ2ZUNoaWxkcmVuT3JkZXIgJiYgX3RoaXMub3B0aW9ucy5jaGFyc0FzQ2hpbGRyZW4gJiYgKF90aGlzLm9wdGlvbnMuaW5jbHVkZVdoaXRlQ2hhcnMgfHwgdGV4dC5yZXBsYWNlKC9cXFxcbi9nLCAnJykudHJpbSgpICE9PSAnJykpIHtcbiAgICAgICAgICAgICAgc1tfdGhpcy5vcHRpb25zLmNoaWxka2V5XSA9IHNbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0gfHwgW107XG4gICAgICAgICAgICAgIGNoYXJDaGlsZCA9IHtcbiAgICAgICAgICAgICAgICAnI25hbWUnOiAnX190ZXh0X18nXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGNoYXJDaGlsZFtjaGFya2V5XSA9IHRleHQ7XG4gICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICAgIGNoYXJDaGlsZFtjaGFya2V5XSA9IGNoYXJDaGlsZFtjaGFya2V5XS5yZXBsYWNlKC9cXHN7Mix9L2csIFwiIFwiKS50cmltKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc1tfdGhpcy5vcHRpb25zLmNoaWxka2V5XS5wdXNoKGNoYXJDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9udGV4dCA9IG9udGV4dDtcbiAgICAgIHJldHVybiB0aGlzLnNheFBhcnNlci5vbmNkYXRhID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgICAgdmFyIHM7XG4gICAgICAgICAgcyA9IG9udGV4dCh0ZXh0KTtcbiAgICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgcmV0dXJuIHMuY2RhdGEgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgIH07XG5cbiAgICBQYXJzZXIucHJvdG90eXBlLnBhcnNlU3RyaW5nID0gZnVuY3Rpb24oc3RyLCBjYikge1xuICAgICAgdmFyIGVycjtcbiAgICAgIGlmICgoY2IgIT0gbnVsbCkgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5vbihcImVuZFwiLCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgIHJldHVybiBjYihlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ciA9IHN0ci50b1N0cmluZygpO1xuICAgICAgICBpZiAoc3RyLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJlbmRcIiwgbnVsbCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gYm9tLnN0cmlwQk9NKHN0cik7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXN5bmMpIHtcbiAgICAgICAgICB0aGlzLnJlbWFpbmluZyA9IHN0cjtcbiAgICAgICAgICBzZXRJbW1lZGlhdGUodGhpcy5wcm9jZXNzQXN5bmMpO1xuICAgICAgICAgIHJldHVybiB0aGlzLnNheFBhcnNlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zYXhQYXJzZXIud3JpdGUoc3RyKS5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IxKSB7XG4gICAgICAgIGVyciA9IGVycm9yMTtcbiAgICAgICAgaWYgKCEodGhpcy5zYXhQYXJzZXIuZXJyVGhyb3duIHx8IHRoaXMuc2F4UGFyc2VyLmVuZGVkKSkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgIHJldHVybiB0aGlzLnNheFBhcnNlci5lcnJUaHJvd24gPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2F4UGFyc2VyLmVuZGVkKSB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFBhcnNlci5wcm90b3R5cGUucGFyc2VTdHJpbmdQcm9taXNlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMucGFyc2VTdHJpbmcoc3RyLCBmdW5jdGlvbihlcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhcnNlcjtcblxuICB9KShldmVudHMpO1xuXG4gIGV4cG9ydHMucGFyc2VTdHJpbmcgPSBmdW5jdGlvbihzdHIsIGEsIGIpIHtcbiAgICB2YXIgY2IsIG9wdGlvbnMsIHBhcnNlcjtcbiAgICBpZiAoYiAhPSBudWxsKSB7XG4gICAgICBpZiAodHlwZW9mIGIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2IgPSBiO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvcHRpb25zID0gYTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNiID0gYTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcGFyc2VyID0gbmV3IGV4cG9ydHMuUGFyc2VyKG9wdGlvbnMpO1xuICAgIHJldHVybiBwYXJzZXIucGFyc2VTdHJpbmcoc3RyLCBjYik7XG4gIH07XG5cbiAgZXhwb3J0cy5wYXJzZVN0cmluZ1Byb21pc2UgPSBmdW5jdGlvbihzdHIsIGEpIHtcbiAgICB2YXIgb3B0aW9ucywgcGFyc2VyO1xuICAgIGlmICh0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9wdGlvbnMgPSBhO1xuICAgIH1cbiAgICBwYXJzZXIgPSBuZXcgZXhwb3J0cy5QYXJzZXIob3B0aW9ucyk7XG4gICAgcmV0dXJuIHBhcnNlci5wYXJzZVN0cmluZ1Byb21pc2Uoc3RyKTtcbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIGJ1aWxkZXIsIGRlZmF1bHRzLCBwYXJzZXIsIHByb2Nlc3NvcnMsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxuICBidWlsZGVyID0gcmVxdWlyZSgnLi9idWlsZGVyJyk7XG5cbiAgcGFyc2VyID0gcmVxdWlyZSgnLi9wYXJzZXInKTtcblxuICBwcm9jZXNzb3JzID0gcmVxdWlyZSgnLi9wcm9jZXNzb3JzJyk7XG5cbiAgZXhwb3J0cy5kZWZhdWx0cyA9IGRlZmF1bHRzLmRlZmF1bHRzO1xuXG4gIGV4cG9ydHMucHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG5cbiAgZXhwb3J0cy5WYWxpZGF0aW9uRXJyb3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChWYWxpZGF0aW9uRXJyb3IsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UpIHtcbiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIFZhbGlkYXRpb25FcnJvcjtcblxuICB9KShFcnJvcik7XG5cbiAgZXhwb3J0cy5CdWlsZGVyID0gYnVpbGRlci5CdWlsZGVyO1xuXG4gIGV4cG9ydHMuUGFyc2VyID0gcGFyc2VyLlBhcnNlcjtcblxuICBleHBvcnRzLnBhcnNlU3RyaW5nID0gcGFyc2VyLnBhcnNlU3RyaW5nO1xuXG4gIGV4cG9ydHMucGFyc2VTdHJpbmdQcm9taXNlID0gcGFyc2VyLnBhcnNlU3RyaW5nUHJvbWlzZTtcblxufSkuY2FsbCh0aGlzKTtcbiIsICJpbXBvcnQgeyBQbHVnaW4sIEVkaXRvciwgTm90aWNlLCBUQWJzdHJhY3RGaWxlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJpYmxlRGF0YWJhc2UgfSBmcm9tICcuL2RhdGFiYXNlJztcbmltcG9ydCB7IEJpYmxlU2VsZWN0b3JNb2RhbCB9IGZyb20gJy4vc2VsZWN0b3InO1xuaW1wb3J0IHsgQmlibGVMaW5rU2V0dGluZ1RhYiwgQmlibGVMaW5rU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbi8vIEJvb2sgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5jb25zdCBCT09LX0FCQlJFVklBVElPTlM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgJ0dlbmVzaXMnOiAnR2VuJywgJ0V4b2R1cyc6ICdFeG8nLCAnTGV2aXRpY3VzJzogJ0xldicsICdOdW1iZXJzJzogJ051bScsICdEZXV0ZXJvbm9teSc6ICdEZXUnLFxuICAgICdKb3NodWEnOiAnSm9zJywgJ0p1ZGdlcyc6ICdKZGcnLCAnUnV0aCc6ICdSdXQnLCAnMSBTYW11ZWwnOiAnMVNhJywgJzIgU2FtdWVsJzogJzJTYScsXG4gICAgJzEgS2luZ3MnOiAnMUtpJywgJzIgS2luZ3MnOiAnMktpJywgJzEgQ2hyb25pY2xlcyc6ICcxQ2gnLCAnMiBDaHJvbmljbGVzJzogJzJDaCcsXG4gICAgJ0V6cmEnOiAnRXpyJywgJ05laGVtaWFoJzogJ05laCcsICdFc3RoZXInOiAnRXN0JywgJ0pvYic6ICdKb2InLCAnUHNhbG1zJzogJ1BzYScsXG4gICAgJ1Byb3ZlcmJzJzogJ1BybycsICdFY2NsZXNpYXN0ZXMnOiAnRWNjJywgJ1Nvbmcgb2YgU29sb21vbic6ICdTbmcnLCAnSXNhaWFoJzogJ0lzYScsXG4gICAgJ0plcmVtaWFoJzogJ0plcicsICdMYW1lbnRhdGlvbnMnOiAnTGFtJywgJ0V6ZWtpZWwnOiAnRXprJywgJ0RhbmllbCc6ICdEYW4nLFxuICAgICdIb3NlYSc6ICdIb3MnLCAnSm9lbCc6ICdKb2wnLCAnQW1vcyc6ICdBbW8nLCAnT2JhZGlhaCc6ICdPYmEnLCAnSm9uYWgnOiAnSm9uJyxcbiAgICAnTWljYWgnOiAnTWljJywgJ05haHVtJzogJ05haCcsICdIYWJha2t1ayc6ICdIYWInLCAnWmVwaGFuaWFoJzogJ1plcCcsICdIYWdnYWknOiAnSGFnJyxcbiAgICAnWmVjaGFyaWFoJzogJ1plYycsICdNYWxhY2hpJzogJ01hbCcsICdNYXR0aGV3JzogJ01hdCcsICdNYXJrJzogJ01yaycsICdMdWtlJzogJ0x1aycsXG4gICAgJ0pvaG4nOiAnSmhuJywgJ0FjdHMnOiAnQWN0JywgJ1JvbWFucyc6ICdSb20nLCAnMSBDb3JpbnRoaWFucyc6ICcxQ28nLCAnMiBDb3JpbnRoaWFucyc6ICcyQ28nLFxuICAgICdHYWxhdGlhbnMnOiAnR2FsJywgJ0VwaGVzaWFucyc6ICdFcGgnLCAnUGhpbGlwcGlhbnMnOiAnUGhwJywgJ0NvbG9zc2lhbnMnOiAnQ29sJyxcbiAgICAnMSBUaGVzc2Fsb25pYW5zJzogJzFUaCcsICcyIFRoZXNzYWxvbmlhbnMnOiAnMlRoJywgJzEgVGltb3RoeSc6ICcxVGknLCAnMiBUaW1vdGh5JzogJzJUaScsXG4gICAgJ1RpdHVzJzogJ1RpdCcsICdQaGlsZW1vbic6ICdQaG0nLCAnSGVicmV3cyc6ICdIZWInLCAnSmFtZXMnOiAnSmFzJywgJzEgUGV0ZXInOiAnMVBlJyxcbiAgICAnMiBQZXRlcic6ICcyUGUnLCAnMSBKb2huJzogJzFKbicsICcyIEpvaG4nOiAnMkpuJywgJzMgSm9obic6ICczSm4nLCAnSnVkZSc6ICdKdWQnLFxuICAgICdSZXZlbGF0aW9uJzogJ1Jldidcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpYmxlTGlua1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEJpYmxlTGlua1NldHRpbmdzO1xuICAgIGRiOiBCaWJsZURhdGFiYXNlO1xuICAgIHByaXZhdGUgaXNGaXJzdExvYWQgPSB0cnVlO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZVxuICAgICAgICB0aGlzLmRiID0gbmV3IEJpYmxlRGF0YWJhc2UodGhpcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsaXplIGRhdGFiYXNlIGFuZCBBU1YgZGF0YSBpZiBmaXJzdCBsb2FkXG4gICAgICAgIGlmICh0aGlzLmlzRmlyc3RMb2FkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdyB3ZWxjb21lIG5vdGljZVxuICAgICAgICAgICAgbmV3IE5vdGljZSgnV2VsY29tZSB0byBCaWJsZUxpbmshIEFTViBCaWJsZSBpcyByZWFkeS4gVXNlIFwiSW5zZXJ0IEJpYmxlIFJlZmVyZW5jZVwiIGNvbW1hbmQgdG8gZ2V0IHN0YXJ0ZWQuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLmluaXRpYWxpemUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4cG9zZSBwbHVnaW4gaW5zdGFuY2UgZ2xvYmFsbHkgZm9yIERhdGF2aWV3SlMgYWNjZXNzXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5CaWJsZUxpbmtQbHVnaW4gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBleHBvc2UgYSBjb252ZW5pZW50IEFQSSBvYmplY3RcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLkJpYmxlTGlua0FQSSA9IHtcbiAgICAgICAgICAgIGdldEFsbFZlcnNlczogKCkgPT4gdGhpcy5nZXRBbGxWZXJzZXNXaXRoTWV0YWRhdGEoKSxcbiAgICAgICAgICAgIHF1ZXJ5VmVyc2VzOiAoYm9vaz86IHN0cmluZywgY2hhcHRlcj86IG51bWJlciwgdHJhbnNsYXRpb24/OiBzdHJpbmcpID0+IHRoaXMucXVlcnlWZXJzZXMoYm9vaywgY2hhcHRlciwgdHJhbnNsYXRpb24pLFxuICAgICAgICAgICAgZ2V0VHJhbnNsYXRpb25zOiAoKSA9PiB0aGlzLmRiLmdldFRyYW5zbGF0aW9ucygpLFxuICAgICAgICAgICAgZ2V0Qm9va3M6ICgpID0+IHRoaXMuZGIuZ2V0Qm9va3MoKSxcbiAgICAgICAgICAgIGdldENoYXB0ZXJzRm9yQm9vazogKGJvb2s6IHN0cmluZywgdHJhbnNsYXRpb246IHN0cmluZykgPT4gdGhpcy5kYi5nZXRDaGFwdGVyc0ZvckJvb2soYm9vaywgdHJhbnNsYXRpb24pLFxuICAgICAgICAgICAgZ2V0VmVyc2VzRm9yQ2hhcHRlcjogKGJvb2s6IHN0cmluZywgY2hhcHRlcjogbnVtYmVyLCB0cmFuc2xhdGlvbjogc3RyaW5nKSA9PiB0aGlzLmRiLmdldFZlcnNlc0ZvckNoYXB0ZXIoYm9vaywgY2hhcHRlciwgdHJhbnNsYXRpb24pLFxuICAgICAgICAgICAgZ2V0VmVyc2U6IChib29rOiBzdHJpbmcsIGNoYXB0ZXI6IG51bWJlciwgdmVyc2U6IG51bWJlciwgdHJhbnNsYXRpb246IHN0cmluZykgPT4gdGhpcy5kYi5nZXRWZXJzZShib29rLCBjaGFwdGVyLCB2ZXJzZSwgdHJhbnNsYXRpb24pLFxuICAgICAgICAgICAgLy8gRXhwb3NlIHRoZSBwbHVnaW4gaW5zdGFuY2UgZm9yIGRpcmVjdCBhY2Nlc3NcbiAgICAgICAgICAgIHBsdWdpbjogdGhpc1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFBhcnNlIHJlZmVyZW5jZSAoc3VwcG9ydHMgXCJCb29rIENoYXB0ZXI6VmVyc2VcIiwgXCJCb29rIENoYXB0ZXI6VmVyc2UtVmVyc2VcIiwgXCJCb29rIENoYXB0ZXJcIiwgYW5kIFwiQm9vayBDaGFwdGVyOlZlcnNlLUJvb2sgQ2hhcHRlcjpWZXJzZVwiKVxuICAgICAgICBjb25zdCBwYXJzZVJlZmVyZW5jZSA9IChyZWY6IHN0cmluZyk6IHsgYm9vazogc3RyaW5nOyBjaGFwdGVyOiBudW1iZXI7IHZlcnNlPzogbnVtYmVyOyB9IHwgbnVsbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHJlZi5tYXRjaCgvXiguKz8pXFxzKyhcXGQrKSg/OjooXFxkKykpPyQvKTtcbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBbLCBib29rLCBjaGFwdGVyLCB2ZXJzZV0gPSBtYXRjaDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYm9vazogYm9vay50cmltKCksXG4gICAgICAgICAgICAgICAgY2hhcHRlcjogcGFyc2VJbnQoY2hhcHRlciksXG4gICAgICAgICAgICAgICAgdmVyc2U6IHZlcnNlID8gcGFyc2VJbnQodmVyc2UpIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIGNvZGUgYmxvY2sgcHJvY2Vzc29yIHdpdGggY3VycmVudCBzZXR0aW5nc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IodGhpcy5zZXR0aW5ncy5jb2RlQmxvY2tMYW5ndWFnZSwgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ29kZUJsb2NrKHNvdXJjZSwgZWwsIGN0eCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIGNvbW1hbmQgZm9yIG5vcm1hbCByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LWJpYmxlLXJlZmVyZW5jZScsXG4gICAgICAgICAgICBuYW1lOiAnSW5zZXJ0IEJpYmxlIFJlZmVyZW5jZScsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IEJpYmxlU2VsZWN0b3JNb2RhbChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIChyZWZlcmVuY2U6IHN0cmluZywgdHJhbnNsYXRpb246IHN0cmluZywgb3V0cHV0VHlwZTogJ3RleHQnIHwgJ2xpbmsnIHwgJ2NvZGVibG9jaycsIG9wdGlvbnM6IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc2VydEJpYmxlUmVmZXJlbmNlKGVkaXRvciwgcmVmZXJlbmNlLCB0cmFuc2xhdGlvbiwgb3V0cHV0VHlwZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuYXR0YWNoSW5saW5lUG9wb3ZlckhhbmRsZXJzKCksIDEwMCk7IC8vIEF0dGFjaCBwb3BvdmVyIGhhbmRsZXJzIGFmdGVyIGluc2VydGlvblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKS5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHNob3J0Y3V0IGNvbW1hbmRzXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVNob3J0Y3V0cykge1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclNob3J0Y3V0Q29tbWFuZHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBCaWJsZUxpbmtTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAgICAgLy8gUmVnaXN0ZXIgRGF0YXZpZXcgc291cmNlIGlmIGF2YWlsYWJsZVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRGF0YXZpZXdTb3VyY2UoKTtcblxuICAgICAgICAvLyBBZGQgQ1NTIGZvciBzdHlsaW5nXG4gICAgICAgIHRoaXMuYWRkU3R5bGVzKCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHN0eWxlcyB0byBlbnN1cmUgdGhleSdyZSBjdXJyZW50XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG5cbiAgICAgICAgLy8gVGVzdCBzZXR0aW5ncyBwZXJzaXN0ZW5jZVxuICAgICAgICB0aGlzLnRlc3RTZXR0aW5nc1BlcnNpc3RlbmNlKCk7XG5cbiAgICAgICAgLy8gQXR0YWNoIHBvcG92ZXIgaGFuZGxlcnMgZ2xvYmFsbHkgb24gbG9hZFxuICAgICAgICB0aGlzLmF0dGFjaElubGluZVBvcG92ZXJIYW5kbGVycygpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdCaWJsZUxpbmsgcGx1Z2luIGxvYWRlZCcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdGVzdFNldHRpbmdzUGVyc2lzdGVuY2UoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBbdGVzdFNldHRpbmdzUGVyc2lzdGVuY2VdIEN1cnJlbnQgc2V0dGluZ3M6Jywge1xuICAgICAgICAgICAgZGVmYXVsdFRyYW5zbGF0aW9uOiB0aGlzLnNldHRpbmdzLmRlZmF1bHRUcmFuc2xhdGlvbixcbiAgICAgICAgICAgIG91dHB1dFR5cGU6IHRoaXMuc2V0dGluZ3Mub3V0cHV0VHlwZSxcbiAgICAgICAgICAgIG1vZGFsT3V0cHV0VHlwZTogdGhpcy5zZXR0aW5ncy5tb2RhbE91dHB1dFR5cGUsXG4gICAgICAgICAgICBtb2RhbE9wdGlvbnM6IHRoaXMuc2V0dGluZ3MubW9kYWxPcHRpb25zLFxuICAgICAgICAgICAgY29kZUJsb2NrQmFja2dyb3VuZENvbG9yOiB0aGlzLnNldHRpbmdzLmNvZGVCbG9ja0JhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIGNvZGVCbG9ja1RleHRDb2xvcjogdGhpcy5zZXR0aW5ncy5jb2RlQmxvY2tUZXh0Q29sb3JcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHNldHRpbmdzIGZpbGUgZXhpc3RzXG4gICAgICAgIGNvbnN0IHNldHRpbmdzUGF0aCA9IHBhdGguam9pbih0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmJhc2VQYXRoLCAnLm9ic2lkaWFuJywgJ3BsdWdpbnMnLCAnb2JzaWRpYW4tYmlibGVsaW5rJywgJ2RhdGEnLCAnc2V0dGluZ3MuanNvbicpO1xuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhzZXR0aW5nc1BhdGgpKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKHNldHRpbmdzUGF0aCwgJ3V0ZjgnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBbdGVzdFNldHRpbmdzUGVyc2lzdGVuY2VdIFNldHRpbmdzIGZpbGUgZXhpc3RzIGFuZCBjb250YWluczonLCBjb250ZW50LnNsaWNlKDAsIDUwMCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tCaWJsZUxpbmtdIFt0ZXN0U2V0dGluZ3NQZXJzaXN0ZW5jZV0gU2V0dGluZ3MgZmlsZSBkb2VzIG5vdCBleGlzdCB5ZXQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG9udW5sb2FkKCkge1xuICAgICAgICBpZiAodGhpcy5kYikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDbGVhbiB1cCBnbG9iYWwgQVBJXG4gICAgICAgIGlmICgod2luZG93IGFzIGFueSkuQmlibGVMaW5rQVBJKSB7XG4gICAgICAgICAgICBkZWxldGUgKHdpbmRvdyBhcyBhbnkpLkJpYmxlTGlua0FQSTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLkJpYmxlTGlua1BsdWdpbikge1xuICAgICAgICAgICAgZGVsZXRlICh3aW5kb3cgYXMgYW55KS5CaWJsZUxpbmtQbHVnaW47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdCaWJsZUxpbmsgcGx1Z2luIHVubG9hZGVkJyk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3NQYXRoID0gcGF0aC5qb2luKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuYmFzZVBhdGgsICcub2JzaWRpYW4nLCAncGx1Z2lucycsICdvYnNpZGlhbi1iaWJsZWxpbmsnLCAnZGF0YScsICdzZXR0aW5ncy5qc29uJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0JpYmxlTGlua10gW2xvYWRTZXR0aW5nc10gTG9hZGluZyBzZXR0aW5ncyBmcm9tOiAke3NldHRpbmdzUGF0aH1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoc2V0dGluZ3NQYXRoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoc2V0dGluZ3NQYXRoLCAndXRmOCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQmlibGVMaW5rXSBbbG9hZFNldHRpbmdzXSBTZXR0aW5ncyBmaWxlIGZvdW5kLiBGaXJzdCAyMDAgY2hhcnM6YCwgY29udGVudC5zbGljZSgwLCAyMDApKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzYXZlZFNldHRpbmdzID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgc2F2ZWRTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtCaWJsZUxpbmtdIFtsb2FkU2V0dGluZ3NdIExvYWRlZCBzZXR0aW5ncyBzdWNjZXNzZnVsbHlgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tCaWJsZUxpbmtdIFtsb2FkU2V0dGluZ3NdIE5vIHNldHRpbmdzIGZpbGUgZm91bmQsIHVzaW5nIGRlZmF1bHRzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNhdmUgZGVmYXVsdCBzZXR0aW5ncyB0byBjcmVhdGUgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBbbG9hZFNldHRpbmdzXSBDcmVhdGVkIGRlZmF1bHQgc2V0dGluZ3MgZmlsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0JpYmxlTGlua10gW2xvYWRTZXR0aW5nc10gRXJyb3IgbG9hZGluZyBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgZGF0YSBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBkYXRhRGlyID0gcGF0aC5qb2luKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuYmFzZVBhdGgsICcub2JzaWRpYW4nLCAncGx1Z2lucycsICdvYnNpZGlhbi1iaWJsZWxpbmsnLCAnZGF0YScpO1xuICAgICAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGRhdGFEaXIpKSB7XG4gICAgICAgICAgICAgICAgZnMubWtkaXJTeW5jKGRhdGFEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nc1BhdGggPSBwYXRoLmpvaW4oZGF0YURpciwgJ3NldHRpbmdzLmpzb24nKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmdzLCBudWxsLCAyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQmlibGVMaW5rXSBbc2F2ZVNldHRpbmdzXSBTYXZpbmcgc2V0dGluZ3MgdG86ICR7c2V0dGluZ3NQYXRofWApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtCaWJsZUxpbmtdIFtzYXZlU2V0dGluZ3NdIFNldHRpbmdzIChmaXJzdCAyMDAgY2hhcnMpOmAsIGNvbnRlbnQuc2xpY2UoMCwgMjAwKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoc2V0dGluZ3NQYXRoLCBjb250ZW50LCAndXRmOCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtCaWJsZUxpbmtdIFtzYXZlU2V0dGluZ3NdIFNldHRpbmdzIHNhdmVkIHN1Y2Nlc3NmdWxseWApO1xuXG4gICAgICAgICAgICAvLyBOb3RlOiBDb2RlIGJsb2NrIHByb2Nlc3NvciBpcyByZWdpc3RlcmVkIGluIG9ubG9hZCgpIGFuZCB3aWxsIGJlIHJlLXJlZ2lzdGVyZWQgb24gcGx1Z2luIHJlbG9hZFxuICAgICAgICAgICAgLy8gTm8gbmVlZCB0byB1bnJlZ2lzdGVyL3JlZ2lzdGVyIGhlcmUgc2luY2Ugd2UncmUgdXNpbmcgb3VyIG93biBzZXR0aW5ncyBzeXN0ZW1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHN0eWxlcyB3aGVuIHNldHRpbmdzIGNoYW5nZVxuICAgICAgICAgICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaWJsZUxpbmtdIFtzYXZlU2V0dGluZ3NdIEVycm9yIHNhdmluZyBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncycpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVTdHlsZXMoKSB7XG4gICAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBzdHlsZXMgaWYgdGhleSBleGlzdFxuICAgICAgICBjb25zdCBleGlzdGluZ1N0eWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpYmxlbGluay1zdHlsZXMnKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nU3R5bGUpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nU3R5bGUucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIHN0eWxlLmlkID0gJ2JpYmxlbGluay1zdHlsZXMnO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIC5iaWJsZS1yZWZlcmVuY2Uge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAke3RoaXMuc2V0dGluZ3MuY29kZUJsb2NrVGV4dENvbG9yfTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuc2V0dGluZ3MuY29kZUJsb2NrQmFja2dyb3VuZENvbG9yfTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwIDJweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLmJpYmxlLXJlZmVyZW5jZS5zaW1wbGUge1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuYmlibGUtcmVmZXJlbmNlLmRldGFpbGVkIHtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuYmlibGUtcmVmZXJlbmNlLmN1c3RvbSB7XG4gICAgICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuYmlibGUtdmVyc2UtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDFlbSAwO1xuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5iaWJsZS12ZXJzZS1yZWZlcmVuY2Uge1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuYmlibGUtdmVyc2UtdGV4dCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMC41ZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5iaWJsZS12ZXJzZS10ZXh0IHN1cCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICR7dGhpcy5zZXR0aW5ncy5jb2RlQmxvY2tWZXJzZU51bWJlckNvbG9yfTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IHN1cGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAucmVkLWxldHRlci10ZXh0IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1yZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuY2hhcHRlci1udW1iZXIge1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41ZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5iaWJsZS12ZXJzZS1saW5rIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxZW07XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5iaWJsZS12ZXJzZS1saW5rIGEge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5iaWJsZS12ZXJzZS1saW5rIGE6aG92ZXIge1xuICAgICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBCaWJsZUxpbmsgY2hhcHRlci92ZXJzZSBncmlkIHN0eWxlcyAqL1xuICAgICAgICAgICAgLmJpYmxlbGluay1jaGFwdGVyLWdyaWQsIC5iaWJsZWxpbmstdmVyc2UtZ3JpZCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1jaGFwdGVyLWJ0biwgLmJpYmxlbGluay12ZXJzZS1idG4ge1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnMsIGNvbG9yIDAuMnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLWNoYXB0ZXItYnRuLnNlbGVjdGVkLCAuYmlibGVsaW5rLXZlcnNlLWJ0bi5zZWxlY3RlZCB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBJbmxpbmUgcmVmZXJlbmNlIHBvcG92ZXIgc3R5bGVzICovXG4gICAgICAgICAgICAuYmlibGVsaW5rLWlubGluZS1yZWYge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstaW5saW5lLXJlZjpob3ZlciB7XG4gICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1pbmxpbmUtcG9wb3ZlciB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgICAgICAgICAgICBjb2xvcjogIzIyMjtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjE1KTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDM1MHB4O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgLyogUHJlc2VydmUgbGluZSBicmVha3MgKi9cbiAgICAgICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NDb2RlQmxvY2soc291cmNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBhbnkpIHtcbiAgICAgICAgLy8gQXBwbHkgY29kZSBibG9jayBzdHlsaW5nIGJhc2VkIG9uIHNldHRpbmdzXG4gICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuc2V0dGluZ3MuY29kZUJsb2NrQmFja2dyb3VuZENvbG9yO1xuICAgICAgICBlbC5zdHlsZS5jb2xvciA9IHRoaXMuc2V0dGluZ3MuY29kZUJsb2NrVGV4dENvbG9yO1xuICAgICAgICBcbiAgICAgICAgLy8gUGFyc2UgdGhlIGNvZGUgYmxvY2sgcGFyYW1ldGVyc1xuICAgICAgICBjb25zdCBsaW5lcyA9IHNvdXJjZS50cmltKCkuc3BsaXQoJ1xcbicpO1xuICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZmlyc3RMaW5lID0gbGluZXNbMF0udHJpbSgpO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGZpcnN0TGluZS5zcGxpdCgnICcpLmZpbHRlcihwID0+IHAubGVuZ3RoID4gMCk7IC8vIEZpbHRlciBvdXQgZW1wdHkgc3RyaW5nc1xuICAgICAgICBcbiAgICAgICAgLy8gUGFyc2Ugb3B0aW9uc1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgdmVyc2U6IGZhbHNlLFxuICAgICAgICAgICAgY2hhcHRlcjogZmFsc2UsXG4gICAgICAgICAgICByZWRUZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIGxpbms6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRmluZCB3aGVyZSB0aGUgYWN0dWFsIHJlZmVyZW5jZSBzdGFydHNcbiAgICAgICAgbGV0IHRyYW5zbGF0aW9uSW5kZXggPSAwO1xuICAgICAgICBsZXQgcmVmZXJlbmNlU3RhcnRJbmRleCA9IDE7XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIG9wdGlvbnMgYXMgZGlyZWN0IGFyZ3VtZW50cyBhZnRlciAnYmlibGUnXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKFsndmVyc2UnLCAnY2hhcHRlcicsICdyZWQtdGV4dCcsICdsaW5rJ10uaW5jbHVkZXMocGFydCkpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndmVyc2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy52ZXJzZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2hhcHRlcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNoYXB0ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlZC10ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucmVkVGV4dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGluayc6XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uSW5kZXggPSBpICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbHNvIGNoZWNrIGZvciBvcHRpb25zIGluIHNxdWFyZSBicmFja2V0cyBhdCB0aGUgZW5kXG4gICAgICAgIGNvbnN0IGxhc3RQYXJ0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCByZWZlcmVuY2VFbmRJbmRleCA9IHBhcnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxhc3RQYXJ0LnN0YXJ0c1dpdGgoJ1snKSAmJiBsYXN0UGFydC5lbmRzV2l0aCgnXScpKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zU3RyID0gbGFzdFBhcnQuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgICAgLy8gU3VwcG9ydCBib3RoIGNvbW1hIGFuZCBwaXBlIHNlcGFyYXRvcnNcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNMaXN0ID0gb3B0aW9uc1N0ci5zcGxpdCgvWyx8XS8pLm1hcChvID0+IG8udHJpbSgpKS5maWx0ZXIobyA9PiBvLmxlbmd0aCA+IDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBvcHRpb25zLnZlcnNlID0gb3B0aW9ucy52ZXJzZSB8fCBvcHRpb25zTGlzdC5pbmNsdWRlcygndmVyc2UnKTtcbiAgICAgICAgICAgIG9wdGlvbnMuY2hhcHRlciA9IG9wdGlvbnMuY2hhcHRlciB8fCBvcHRpb25zTGlzdC5pbmNsdWRlcygnY2hhcHRlcicpO1xuICAgICAgICAgICAgb3B0aW9ucy5yZWRUZXh0ID0gb3B0aW9ucy5yZWRUZXh0IHx8IG9wdGlvbnNMaXN0LmluY2x1ZGVzKCdyZWQtdGV4dCcpO1xuICAgICAgICAgICAgb3B0aW9ucy5saW5rID0gb3B0aW9ucy5saW5rIHx8IG9wdGlvbnNMaXN0LmluY2x1ZGVzKCdsaW5rJyk7XG4gICAgICAgICAgICByZWZlcmVuY2VFbmRJbmRleC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uSW5kZXggPj0gcmVmZXJlbmNlRW5kSW5kZXgpIHtcbiAgICAgICAgICAgIGVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW52YWxpZCBmb3JtYXQuIFVzZTogYGBgYmlibGUgW29wdGlvbjEsb3B0aW9uMl0gVFJBTlNMQVRJT04gUkVGRVJFTkNFYGBgIG9yIGBgYGJpYmxlIFRSQU5TTEFUSU9OIFJFRkVSRU5DRSBbb3B0aW9uMSxvcHRpb24yXWBgYCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeHRyYWN0IHRyYW5zbGF0aW9uIGFuZCByZWZlcmVuY2VcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSBwYXJ0c1t0cmFuc2xhdGlvbkluZGV4XTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlVGV4dCA9IHBhcnRzLnNsaWNlKHRyYW5zbGF0aW9uSW5kZXggKyAxLCByZWZlcmVuY2VFbmRJbmRleCkuam9pbignICcpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBjcm9zcy1jaGFwdGVyL2Jvb2sgcmVmZXJlbmNlXG4gICAgICAgIGNvbnN0IGNyb3NzUmVmTWF0Y2ggPSByZWZlcmVuY2VUZXh0Lm1hdGNoKC9eKC4rPylcXHMrKFxcZCspOihcXGQrKS0oLis/KVxccysoXFxkKyk6KFxcZCspJC8pO1xuICAgICAgICBsZXQgdmVyc2VzOiB7IGNoYXB0ZXI6IG51bWJlcjsgdmVyc2U6IG51bWJlcjsgdGV4dDogc3RyaW5nOyB9W10gPSBbXTtcblxuICAgICAgICBpZiAoY3Jvc3NSZWZNYXRjaCkge1xuICAgICAgICAgICAgLy8gQ3Jvc3MgcmVmZXJlbmNlIChlLmcuLCBcIjEgQ29yaW50aGlhbnMgMToyLTEgQ29yaW50aGlhbnMgMzo0XCIpXG4gICAgICAgICAgICBjb25zdCBbLCBzdGFydEJvb2ssIHN0YXJ0Q2hhcHRlciwgc3RhcnRWZXJzZSwgZW5kQm9vaywgZW5kQ2hhcHRlciwgZW5kVmVyc2VdID0gY3Jvc3NSZWZNYXRjaDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0Q2hhcHRlck51bSA9IHBhcnNlSW50KHN0YXJ0Q2hhcHRlcik7XG4gICAgICAgICAgICBjb25zdCBzdGFydFZlcnNlTnVtID0gcGFyc2VJbnQoc3RhcnRWZXJzZSk7XG4gICAgICAgICAgICBjb25zdCBlbmRDaGFwdGVyTnVtID0gcGFyc2VJbnQoZW5kQ2hhcHRlcik7XG4gICAgICAgICAgICBjb25zdCBlbmRWZXJzZU51bSA9IHBhcnNlSW50KGVuZFZlcnNlKTtcblxuICAgICAgICAgICAgLy8gSWYgYm9va3MgYXJlIGRpZmZlcmVudCwgc2hvdyBlcnJvciAoZm9yIG5vdyB3ZSBvbmx5IHN1cHBvcnQgY3Jvc3MtY2hhcHRlciBpbiBzYW1lIGJvb2spXG4gICAgICAgICAgICBpZiAoc3RhcnRCb29rICE9PSBlbmRCb29rKSB7XG4gICAgICAgICAgICAgICAgZWwuY3JlYXRlU3Bhbih7IHRleHQ6ICdDcm9zcy1ib29rIHJlZmVyZW5jZXMgYXJlIG5vdCBzdXBwb3J0ZWQgeWV0LicgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb2xsZWN0IHZlcnNlcyBmcm9tIGFsbCBjaGFwdGVyc1xuICAgICAgICAgICAgZm9yIChsZXQgY2hhcHRlciA9IHN0YXJ0Q2hhcHRlck51bTsgY2hhcHRlciA8PSBlbmRDaGFwdGVyTnVtOyBjaGFwdGVyKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGNoYXB0ZXIgPT09IHN0YXJ0Q2hhcHRlck51bSA/IHN0YXJ0VmVyc2VOdW0gOiAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGNoYXB0ZXIgPT09IGVuZENoYXB0ZXJOdW0gPyBlbmRWZXJzZU51bSA6IDk5OTsgLy8gVXNlIGhpZ2ggbnVtYmVyIHRvIGdldCBhbGwgdmVyc2VzXG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCB2ZXJzZSA9IHN0YXJ0OyB2ZXJzZSA8PSBlbmQ7IHZlcnNlKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyc2VEYXRhID0gdGhpcy5kYi5nZXRWZXJzZShzdGFydEJvb2ssIGNoYXB0ZXIsIHZlcnNlLCB0cmFuc2xhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ZXJzZURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNlcy5wdXNoKHsgY2hhcHRlciwgdmVyc2UsIHRleHQ6IHZlcnNlRGF0YS50ZXh0IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmVyc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgSW52YWxpZCByZWZlcmVuY2U6ICR7cmVmZXJlbmNlVGV4dH0gaW4gJHt0cmFuc2xhdGlvbn1gIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lciB3aXRoIGFwcHJvcHJpYXRlIGNsYXNzZXNcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgICAgIGNsczogYGJpYmxlLXZlcnNlLWNvbnRhaW5lciR7b3B0aW9ucy5yZWRUZXh0ID8gJyByZWQtbGV0dGVyJyA6ICcnfSR7b3B0aW9ucy5jaGFwdGVyID8gJyBzaG93LWNoYXB0ZXInIDogJyd9JHtvcHRpb25zLnZlcnNlID8gJyBzaG93LXZlcnNlJyA6ICcnfWBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgcmVmZXJlbmNlIGhlYWRlclxuICAgICAgICAgICAgY29uc3QgcmVmID0gYCR7c3RhcnRCb29rfSAke3N0YXJ0Q2hhcHRlck51bX06JHtzdGFydFZlcnNlTnVtfS0ke2VuZENoYXB0ZXJOdW19OiR7ZW5kVmVyc2VOdW19ICgke3RyYW5zbGF0aW9ufSlgO1xuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiByZWYgKyAnOiAnLCBjbHM6ICdiaWJsZS12ZXJzZS1yZWZlcmVuY2UnIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgdmVyc2VzXG4gICAgICAgICAgICBjb25zdCB2ZXJzZUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdiaWJsZS12ZXJzZS10ZXh0JyB9KTtcbiAgICAgICAgICAgIGxldCBsYXN0Q2hhcHRlciA9IC0xO1xuXG4gICAgICAgICAgICB2ZXJzZXMuZm9yRWFjaCgodmVyc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jaGFwdGVyICYmIHZlcnNlLmNoYXB0ZXIgIT09IGxhc3RDaGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBjaGFwdGVyIG51bWJlciB3aGVuIGNoYXB0ZXIgY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICB2ZXJzZUNvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogYENoYXB0ZXIgJHt2ZXJzZS5jaGFwdGVyfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdjaGFwdGVyLW51bWJlcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RDaGFwdGVyID0gdmVyc2UuY2hhcHRlcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy52ZXJzZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdmVyc2UgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cCA9IHZlcnNlQ29udGFpbmVyLmNyZWF0ZUVsKCdzdXAnLCB7IHRleHQ6IHZlcnNlLnZlcnNlLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN1cC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjNlbSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgcHJvY2Vzc2luZyBydWxlcyBmaXJzdFxuICAgICAgICAgICAgICAgIGxldCBwcm9jZXNzZWRUZXh0ID0gdGhpcy5kYi5hcHBseVByb2Nlc3NpbmdSdWxlcyh2ZXJzZS50ZXh0LCB0cmFuc2xhdGlvbik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyB0ZXh0IGZvciByZWQgbGV0dGVyIGlmIGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZWRUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gcHJvY2Vzc2VkVGV4dC5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgICAgICB3b3Jkcy5mb3JFYWNoKCh3b3JkLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0plc3VzV29yZCA9IHRoaXMuaXNKZXN1c1dvcmQod29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZUNvbnRhaW5lci5jcmVhdGVTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB3b3JkICsgKGkgPCB3b3Jkcy5sZW5ndGggLSAxID8gJyAnIDogJycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsczogaXNKZXN1c1dvcmQgPyAncmVkLWxldHRlci10ZXh0JyA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgc3BhbiB0aGF0IGNhbiBjb250YWluIEhUTUwgZnJvbSBwcm9jZXNzaW5nIHJ1bGVzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRTcGFuID0gdmVyc2VDb250YWluZXIuY3JlYXRlU3BhbigpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5pbm5lckhUTUwgPSBwcm9jZXNzZWRUZXh0ICsgJyAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgbGluayB0byBCaWJsZSBHYXRld2F5IGlmIHJlcXVlc3RlZFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGluaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmlibGUtdmVyc2UtbGluaycgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua1RleHQgPSBgJHtzdGFydEJvb2t9ICR7c3RhcnRDaGFwdGVyTnVtfToke3N0YXJ0VmVyc2VOdW19JHtlbmRWZXJzZU51bSAhPT0gc3RhcnRWZXJzZU51bSA/ICctJyArIGVuZFZlcnNlTnVtIDogJyd9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rVXJsID0gdGhpcy5nZW5lcmF0ZUJpYmxlR2F0ZXdheVVybChsaW5rVGV4dCwgdHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBsaW5rQ29udGFpbmVyLmNyZWF0ZUVsKCdhJywge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgW0Ake2xpbmtVcmx9XWAsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGxpbmtVcmxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsaW5rLmFkZENsYXNzKCdleHRlcm5hbC1saW5rJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZWd1bGFyIHJlZmVyZW5jZSAoZS5nLiwgXCJKb2huIDM6MTZcIiBvciBcIlBzYWxtIDIzXCIpXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHJlZmVyZW5jZVRleHQubWF0Y2goL14oLis/KVxccysoXFxkKykoPzo6KFxcZCspKD86LShcXGQrKSk/KT8kLyk7XG4gICAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICAgICAgZWwuY3JlYXRlU3Bhbih7IHRleHQ6IGBJbnZhbGlkIHJlZmVyZW5jZSBmb3JtYXQ6ICR7cmVmZXJlbmNlVGV4dH1gIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgWywgYm9vaywgY2hhcHRlciwgc3RhcnRWZXJzZSwgZW5kVmVyc2VdID0gbWF0Y2g7XG4gICAgICAgICAgICBjb25zdCBzdGFydENoYXB0ZXJOdW0gPSBwYXJzZUludChjaGFwdGVyKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VmVyc2VOdW0gPSBzdGFydFZlcnNlID8gcGFyc2VJbnQoc3RhcnRWZXJzZSkgOiAxO1xuICAgICAgICAgICAgY29uc3QgZW5kVmVyc2VOdW0gPSBlbmRWZXJzZSA/IHBhcnNlSW50KGVuZFZlcnNlKSA6IHN0YXJ0VmVyc2VOdW07XG5cbiAgICAgICAgICAgIC8vIEdldCB2ZXJzZSBkYXRhXG4gICAgICAgICAgICBmb3IgKGxldCB2ID0gc3RhcnRWZXJzZU51bTsgdiA8PSBlbmRWZXJzZU51bTsgdisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2VEYXRhID0gdGhpcy5kYi5nZXRWZXJzZShib29rLCBzdGFydENoYXB0ZXJOdW0sIHYsIHRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAodmVyc2VEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNlcy5wdXNoKHsgY2hhcHRlcjogc3RhcnRDaGFwdGVyTnVtLCB2ZXJzZTogdiwgdGV4dDogdmVyc2VEYXRhLnRleHQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmVyc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgSW52YWxpZCByZWZlcmVuY2U6ICR7Ym9va30gJHtzdGFydENoYXB0ZXJOdW19OiR7c3RhcnRWZXJzZU51bX0ke2VuZFZlcnNlTnVtICE9PSBzdGFydFZlcnNlTnVtID8gJy0nICsgZW5kVmVyc2VOdW0gOiAnJ30gaW4gJHt0cmFuc2xhdGlvbn1gIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lciB3aXRoIGFwcHJvcHJpYXRlIGNsYXNzZXNcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgICAgIGNsczogYGJpYmxlLXZlcnNlLWNvbnRhaW5lciR7b3B0aW9ucy5yZWRUZXh0ID8gJyByZWQtbGV0dGVyJyA6ICcnfSR7b3B0aW9ucy5jaGFwdGVyID8gJyBzaG93LWNoYXB0ZXInIDogJyd9JHtvcHRpb25zLnZlcnNlID8gJyBzaG93LXZlcnNlJyA6ICcnfWBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgcmVmZXJlbmNlIGhlYWRlclxuICAgICAgICAgICAgY29uc3QgcmVmID0gYCR7Ym9va30gJHtzdGFydENoYXB0ZXJOdW19OiR7c3RhcnRWZXJzZU51bX0ke2VuZFZlcnNlTnVtICE9PSBzdGFydFZlcnNlTnVtID8gJy0nICsgZW5kVmVyc2VOdW0gOiAnJ30gKCR7dHJhbnNsYXRpb259KWA7XG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHJlZiArICc6ICcsIGNsczogJ2JpYmxlLXZlcnNlLXJlZmVyZW5jZScgfSk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB2ZXJzZXNcbiAgICAgICAgICAgIGNvbnN0IHZlcnNlQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2JpYmxlLXZlcnNlLXRleHQnIH0pO1xuICAgICAgICAgICAgbGV0IGxhc3RDaGFwdGVyID0gLTE7XG5cbiAgICAgICAgICAgIHZlcnNlcy5mb3JFYWNoKCh2ZXJzZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNoYXB0ZXIgJiYgdmVyc2UuY2hhcHRlciAhPT0gbGFzdENoYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGNoYXB0ZXIgbnVtYmVyIHdoZW4gY2hhcHRlciBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXB0ZXJOdW0gPSB2ZXJzZUNvbnRhaW5lci5jcmVhdGVFbCgnc3Ryb25nJywgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHZlcnNlLmNoYXB0ZXIudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ2NoYXB0ZXItbnVtYmVyJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcHRlck51bS5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RDaGFwdGVyID0gdmVyc2UuY2hhcHRlcjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy52ZXJzZSB8fCB2ZXJzZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdmVyc2UgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cCA9IHZlcnNlQ29udGFpbmVyLmNyZWF0ZUVsKCdzdXAnLCB7IHRleHQ6IHZlcnNlLnZlcnNlLnRvU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN1cC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjNlbSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgcHJvY2Vzc2luZyBydWxlcyBmaXJzdFxuICAgICAgICAgICAgICAgIGxldCBwcm9jZXNzZWRUZXh0ID0gdGhpcy5kYi5hcHBseVByb2Nlc3NpbmdSdWxlcyh2ZXJzZS50ZXh0LCB0cmFuc2xhdGlvbik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyB0ZXh0IGZvciByZWQgbGV0dGVyIGlmIGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZWRUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gcHJvY2Vzc2VkVGV4dC5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgICAgICB3b3Jkcy5mb3JFYWNoKCh3b3JkLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0plc3VzV29yZCA9IHRoaXMuaXNKZXN1c1dvcmQod29yZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZUNvbnRhaW5lci5jcmVhdGVTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB3b3JkICsgKGkgPCB3b3Jkcy5sZW5ndGggLSAxID8gJyAnIDogJycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsczogaXNKZXN1c1dvcmQgPyAncmVkLWxldHRlci10ZXh0JyA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgc3BhbiB0aGF0IGNhbiBjb250YWluIEhUTUwgZnJvbSBwcm9jZXNzaW5nIHJ1bGVzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRTcGFuID0gdmVyc2VDb250YWluZXIuY3JlYXRlU3BhbigpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5pbm5lckhUTUwgPSBwcm9jZXNzZWRUZXh0ICsgJyAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgbGluayB0byBCaWJsZSBHYXRld2F5IGlmIHJlcXVlc3RlZCAoYXQgdGhlIGJvdHRvbSlcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxpbmspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2JpYmxlLXZlcnNlLWxpbmsnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gYCR7Ym9va30gJHtzdGFydENoYXB0ZXJOdW19OiR7c3RhcnRWZXJzZU51bX0ke2VuZFZlcnNlTnVtICE9PSBzdGFydFZlcnNlTnVtID8gJy0nICsgZW5kVmVyc2VOdW0gOiAnJ31gO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtVcmwgPSB0aGlzLmdlbmVyYXRlQmlibGVHYXRld2F5VXJsKGxpbmtUZXh0LCB0cmFuc2xhdGlvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGxpbmtDb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBbQCR7bGlua1VybH1dYCxcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogbGlua1VybFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxpbmsuYWRkQ2xhc3MoJ2V4dGVybmFsLWxpbmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyU2hvcnRjdXRDb21tYW5kcygpIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5zZXR0aW5ncy5zaG9ydGN1dHMpLmZvckVhY2goKFtzaG9ydGN1dCwgcmVmZXJlbmNlXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgICAgICBpZDogYGJpYmxlLXNob3J0Y3V0LSR7c2hvcnRjdXR9YCxcbiAgICAgICAgICAgICAgICBuYW1lOiBgSW5zZXJ0ICR7cmVmZXJlbmNlfSAoJHtzaG9ydGN1dH0pYCxcbiAgICAgICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0U2hvcnRjdXRSZWZlcmVuY2UoZWRpdG9yLCByZWZlcmVuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluc2VydFNob3J0Y3V0UmVmZXJlbmNlKGVkaXRvcjogRWRpdG9yLCByZWZlcmVuY2U6IHN0cmluZykge1xuICAgICAgICAvLyBQYXJzZSB0aGUgcmVmZXJlbmNlIChlLmcuLCBcIkpvaG4gMzoxNlwiKVxuICAgICAgICBjb25zdCBtYXRjaCA9IHJlZmVyZW5jZS5tYXRjaCgvXihcXHcrKVxccysoXFxkKyk6KFxcZCspJC8pO1xuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBJbnZhbGlkIHJlZmVyZW5jZSBmb3JtYXQ6ICR7cmVmZXJlbmNlfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgWywgYm9vaywgY2hhcHRlciwgdmVyc2VdID0gbWF0Y2g7XG4gICAgICAgIGNvbnN0IGNoYXB0ZXJOdW0gPSBwYXJzZUludChjaGFwdGVyKTtcbiAgICAgICAgY29uc3QgdmVyc2VOdW0gPSBwYXJzZUludCh2ZXJzZSk7XG5cbiAgICAgICAgLy8gR2V0IHZlcnNlIGRhdGFcbiAgICAgICAgY29uc3QgdmVyc2VEYXRhID0gdGhpcy5kYi5nZXRWZXJzZShib29rLCBjaGFwdGVyTnVtLCB2ZXJzZU51bSwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0VHJhbnNsYXRpb24pO1xuICAgICAgICBpZiAoIXZlcnNlRGF0YSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVmVyc2Ugbm90IGZvdW5kOiAke3JlZmVyZW5jZX0gaW4gJHt0aGlzLnNldHRpbmdzLmRlZmF1bHRUcmFuc2xhdGlvbn1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5zZXJ0QmlibGVSZWZlcmVuY2UoZWRpdG9yLCByZWZlcmVuY2UsIHRoaXMuc2V0dGluZ3MuZGVmYXVsdFRyYW5zbGF0aW9uLCB0aGlzLnNldHRpbmdzLm91dHB1dFR5cGUsIFtdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBdHRhY2ggcG9wb3ZlciBoYW5kbGVycyB0byBhbGwgLmJpYmxlbGluay1pbmxpbmUtcmVmIGVsZW1lbnRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIEhUTUwgaW5zZXJ0aW9uIGRvZXMgbm90IHByZXNlcnZlIEpTIGV2ZW50IGhhbmRsZXJzLlxuICAgICAqL1xuICAgIHByaXZhdGUgYXR0YWNoSW5saW5lUG9wb3ZlckhhbmRsZXJzKCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmlibGVsaW5rLWlubGluZS1yZWYnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgaWYgKChlbCBhcyBIVE1MRWxlbWVudCkuZ2V0QXR0cmlidXRlKCdkYXRhLWJpYmxlbGluay1wb3BvdmVyJykgPT09ICcxJykgcmV0dXJuO1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYmlibGVsaW5rLXBvcG92ZXInLCAnMScpO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93SW5saW5lUmVmZXJlbmNlUG9wb3ZlcihlbCBhcyBIVE1MRWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dJbmxpbmVSZWZlcmVuY2VQb3BvdmVyKGVsIGFzIEhUTUxFbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJpYmxlbGluay1pbmxpbmUtcG9wb3ZlcicpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBhIHBvcG92ZXIgZm9yIGEgLmJpYmxlbGluay1pbmxpbmUtcmVmIGVsZW1lbnQuXG4gICAgICogSWYgcmVmZXJlbmNlL3RyYW5zbGF0aW9uIGFyZSBub3QgcHJvdmlkZWQsIHBhcnNlIGZyb20gdGhlIGVsZW1lbnQgdGV4dC5cbiAgICAgKiBJZiBmb3JjZSAoZnJvbSBjbGljayksIGtlZXAgdGhlIHBvcG92ZXIgb3BlbiB1bnRpbCBjbGljayBvdXRzaWRlLlxuICAgICAqL1xuICAgIHByaXZhdGUgc2hvd0lubGluZVJlZmVyZW5jZVBvcG92ZXIodGFyZ2V0OiBIVE1MRWxlbWVudCwgZm9yY2UgPSBmYWxzZSkge1xuICAgICAgICAvLyBSZW1vdmUgYW55IGV4aXN0aW5nIHBvcG92ZXJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJpYmxlbGluay1pbmxpbmUtcG9wb3ZlcicpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuXG4gICAgICAgIC8vIFRyeSB0byBwYXJzZSByZWZlcmVuY2UgYW5kIHRyYW5zbGF0aW9uIGZyb20gdGhlIGVsZW1lbnQgdGV4dFxuICAgICAgICBsZXQgdGV4dCA9IHRhcmdldC50ZXh0Q29udGVudCB8fCAnJztcbiAgICAgICAgbGV0IHJlZk1hdGNoID0gdGV4dC5tYXRjaCgvXiguKj8pIFxcKChbXildKylcXCkkLyk7XG4gICAgICAgIGlmICghcmVmTWF0Y2gpIHJldHVybjtcbiAgICAgICAgbGV0IHJlZmVyZW5jZSA9IHJlZk1hdGNoWzFdO1xuICAgICAgICBsZXQgdHJhbnNsYXRpb24gPSByZWZNYXRjaFsyXTtcblxuICAgICAgICAvLyBTdXBwb3J0IG11bHRpLXZlcnNlIChlLmcuIEpvaG4gMzoxNi0xOClcbiAgICAgICAgbGV0IG1hdGNoID0gcmVmZXJlbmNlLm1hdGNoKC9eKC4rPylcXHMrKFxcZCspKD86OihcXGQrKSg/Oi0oXFxkKykpPyk/JC8pO1xuICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IFssIGJvb2ssIGNoYXB0ZXIsIHN0YXJ0VmVyc2UsIGVuZFZlcnNlXSA9IG1hdGNoO1xuICAgICAgICBjb25zdCBjaGFwdGVyTnVtID0gcGFyc2VJbnQoY2hhcHRlcik7XG4gICAgICAgIGNvbnN0IHN0YXJ0VmVyc2VOdW0gPSBzdGFydFZlcnNlID8gcGFyc2VJbnQoc3RhcnRWZXJzZSkgOiAxO1xuICAgICAgICBjb25zdCBlbmRWZXJzZU51bSA9IGVuZFZlcnNlID8gcGFyc2VJbnQoZW5kVmVyc2UpIDogc3RhcnRWZXJzZU51bTtcbiAgICAgICAgbGV0IHZlcnNlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgdiA9IHN0YXJ0VmVyc2VOdW07IHYgPD0gZW5kVmVyc2VOdW07IHYrKykge1xuICAgICAgICAgICAgY29uc3QgdmVyc2VEYXRhID0gdGhpcy5kYi5nZXRWZXJzZShib29rLCBjaGFwdGVyTnVtLCB2LCB0cmFuc2xhdGlvbik7XG4gICAgICAgICAgICBpZiAodmVyc2VEYXRhKSB7XG4gICAgICAgICAgICAgICAgdmVyc2VzLnB1c2goYDxzcGFuIHN0eWxlPSdjb2xvcjojODg4O2ZvbnQtc2l6ZTowLjllbTsnPiR7dn08L3NwYW4+ICR7dmVyc2VEYXRhLnRleHR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZlcnNlcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgICAvLyBDcmVhdGUgcG9wb3ZlclxuICAgICAgICBjb25zdCBwb3BvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHBvcG92ZXIuY2xhc3NOYW1lID0gJ2JpYmxlbGluay1pbmxpbmUtcG9wb3Zlcic7XG4gICAgICAgIHBvcG92ZXIuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9J2ZvbnQtd2VpZ2h0OmJvbGQ7bWFyZ2luLWJvdHRvbTo0cHg7Jz4ke3JlZmVyZW5jZX0gKCR7dHJhbnNsYXRpb259KTwvZGl2PiR7dmVyc2VzLmpvaW4oJzxici8+Jyl9YDtcbiAgICAgICAgcG9wb3Zlci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHBvcG92ZXIuc3R5bGUuekluZGV4ID0gJzk5OTknO1xuICAgICAgICBwb3BvdmVyLnN0eWxlLmJhY2tncm91bmQgPSAnI2ZmZic7XG4gICAgICAgIHBvcG92ZXIuc3R5bGUuY29sb3IgPSAnIzIyMic7XG4gICAgICAgIHBvcG92ZXIuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjY2NjJztcbiAgICAgICAgcG9wb3Zlci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICAgICAgcG9wb3Zlci5zdHlsZS5wYWRkaW5nID0gJzhweCAxMnB4JztcbiAgICAgICAgcG9wb3Zlci5zdHlsZS5ib3hTaGFkb3cgPSAnMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xNSknO1xuICAgICAgICBwb3BvdmVyLnN0eWxlLm1heFdpZHRoID0gJzM1MHB4JztcbiAgICAgICAgcG9wb3Zlci5zdHlsZS5mb250U2l6ZSA9ICcxZW0nO1xuICAgICAgICBwb3BvdmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgICAgIHBvcG92ZXIuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgICAgIHBvcG92ZXIuc3R5bGUud29yZEJyZWFrID0gJ2JyZWFrLXdvcmQnO1xuXG4gICAgICAgIC8vIFBvc2l0aW9uIHBvcG92ZXIgYmVsb3cgdGhlIHRhcmdldFxuICAgICAgICBjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBwb3BvdmVyLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnQgKyB3aW5kb3cuc2Nyb2xsWH1weGA7XG4gICAgICAgIHBvcG92ZXIuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyB3aW5kb3cuc2Nyb2xsWSArIDR9cHhgO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocG9wb3Zlcik7XG5cbiAgICAgICAgLy8gUmVtb3ZlIG9uIG1vdXNlbGVhdmUgb3IgY2xpY2sgb3V0c2lkZSAodW5sZXNzIGZvcmNlL2NsaWNrZWQpXG4gICAgICAgIGNvbnN0IHJlbW92ZVBvcG92ZXIgPSAoZT86IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAocG9wb3Zlci5wYXJlbnROb2RlKSBwb3BvdmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocG9wb3Zlcik7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvY0NsaWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb25Eb2NDbGljayA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBvcG92ZXIuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSkgJiYgZS50YXJnZXQgIT09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZVBvcG92ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFmb3JjZSkge1xuICAgICAgICAgICAgcG9wb3Zlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgcmVtb3ZlUG9wb3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Eb2NDbGljayk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbnNlcnRCaWJsZVJlZmVyZW5jZShcbiAgICAgICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgICAgIHJlZmVyZW5jZTogc3RyaW5nLFxuICAgICAgICB0cmFuc2xhdGlvbjogc3RyaW5nLFxuICAgICAgICBvdXRwdXRUeXBlOiAndGV4dCcgfCAnbGluaycgfCAnY29kZWJsb2NrJyxcbiAgICAgICAgb3B0aW9uczogc3RyaW5nW11cbiAgICApIHtcbiAgICAgICAgLy8gUGFyc2UgdGhlIHJlZmVyZW5jZVxuICAgICAgICAvLyBTdXBwb3J0IGZvcm1hdHM6IEJvb2sgQ2hhcHRlcjpWZXJzZSwgQm9vayBDaGFwdGVyOlZlcnNlLVZlcnNlLCBCb29rIENoYXB0ZXI6VmVyc2UsVmVyc2UsVmVyc2VcbiAgICAgICAgbGV0IG11bHRpVmVyc2VNYXRjaCA9IHJlZmVyZW5jZS5tYXRjaCgvXiguKz8pXFxzKyhcXGQrKTooW1xcZCxcXC1dKykkLyk7IC8vIEJvb2sgQ2hhcHRlcjp2ZXJzZSx2ZXJzZSx2ZXJzZSBvciByYW5nZVxuICAgICAgICBsZXQgY3Jvc3NDaGFwdGVyTWF0Y2ggPSByZWZlcmVuY2UubWF0Y2goL14oLis/KVxccysoXFxkKyk6KFxcZCspLSguKz8pXFxzKyhcXGQrKTooXFxkKykkLyk7IC8vIEJvb2sgQ2hhcHRlcjpTdGFydFZlcnNlLUJvb2sgQ2hhcHRlcjpFbmRWZXJzZVxuICAgICAgICBsZXQgbWF0Y2ggPSByZWZlcmVuY2UubWF0Y2goL14oLis/KVxccysoXFxkKykoPzo6KFxcZCspKT8kLyk7IC8vIEJvb2sgQ2hhcHRlciBvciBCb29rIENoYXB0ZXI6VmVyc2VcbiAgICAgICAgbGV0IHZlcnNlczogeyB2ZXJzZTogbnVtYmVyOyB0ZXh0OiBzdHJpbmc7IH1bXSA9IFtdO1xuICAgICAgICBsZXQgYm9vazogc3RyaW5nLCBjaGFwdGVyTnVtOiBudW1iZXIsIHN0YXJ0VmVyc2VOdW06IG51bWJlciwgZW5kVmVyc2VOdW06IG51bWJlciB8IG51bGw7XG5cbiAgICAgICAgaWYgKGNyb3NzQ2hhcHRlck1hdGNoKSB7XG4gICAgICAgICAgICAvLyBOb3QgeWV0IHN1cHBvcnRlZCwgZmFsbGJhY2sgdG8gb2xkIGxvZ2ljXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDcm9zcy1jaGFwdGVyIHJlZmVyZW5jZXMgYXJlIG5vdCBzdXBwb3J0ZWQgeWV0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKG11bHRpVmVyc2VNYXRjaCkge1xuICAgICAgICAgICAgbGV0IHZlcnNlUGFydDtcbiAgICAgICAgICAgIFssIGJvb2ssIGNoYXB0ZXJOdW0sIHZlcnNlUGFydF0gPSBtdWx0aVZlcnNlTWF0Y2g7XG4gICAgICAgICAgICBib29rID0gYm9vay50cmltKCk7XG4gICAgICAgICAgICBjaGFwdGVyTnVtID0gcGFyc2VJbnQoY2hhcHRlck51bSk7XG4gICAgICAgICAgICAvLyBTcGxpdCBieSBjb21tYSwgaGFuZGxlIHJhbmdlc1xuICAgICAgICAgICAgbGV0IHZlcnNlTnVtYmVyczogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICAgIHZlcnNlUGFydC5zcGxpdCgnLCcpLmZvckVhY2gocGFydCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBwYXJ0LnNwbGl0KCctJykubWFwKE51bWJlcik7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHYgPSBzdGFydDsgdiA8PSBlbmQ7IHYrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2VOdW1iZXJzLnB1c2godik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzZU51bWJlcnMucHVzaChOdW1iZXIocGFydCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHZlcnNlTnVtYmVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNlRGF0YSA9IHRoaXMuZGIuZ2V0VmVyc2UoYm9vaywgY2hhcHRlck51bSwgdiwgdHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICh2ZXJzZURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2VzLnB1c2goeyB2ZXJzZTogdiwgdGV4dDogdmVyc2VEYXRhLnRleHQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBbLCBib29rLCBjaGFwdGVyTnVtLCBzdGFydFZlcnNlTnVtXSA9IG1hdGNoO1xuICAgICAgICAgICAgYm9vayA9IGJvb2sudHJpbSgpO1xuICAgICAgICAgICAgY2hhcHRlck51bSA9IHBhcnNlSW50KGNoYXB0ZXJOdW0pO1xuICAgICAgICAgICAgc3RhcnRWZXJzZU51bSA9IHN0YXJ0VmVyc2VOdW0gPyBwYXJzZUludChzdGFydFZlcnNlTnVtKSA6IDE7XG4gICAgICAgICAgICBlbmRWZXJzZU51bSA9IHN0YXJ0VmVyc2VOdW07XG4gICAgICAgICAgICBjb25zdCB2ZXJzZURhdGEgPSB0aGlzLmRiLmdldFZlcnNlKGJvb2ssIGNoYXB0ZXJOdW0sIHN0YXJ0VmVyc2VOdW0sIHRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgIGlmICh2ZXJzZURhdGEpIHtcbiAgICAgICAgICAgICAgICB2ZXJzZXMucHVzaCh7IHZlcnNlOiBzdGFydFZlcnNlTnVtLCB0ZXh0OiB2ZXJzZURhdGEudGV4dCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEludmFsaWQgcmVmZXJlbmNlIGZvcm1hdDogJHtyZWZlcmVuY2V9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmVyc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgSW52YWxpZCByZWZlcmVuY2U6ICR7cmVmZXJlbmNlfSBpbiAke3RyYW5zbGF0aW9ufWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRleHQ6IHN0cmluZztcbiAgICAgICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgLy8gSW5zZXJ0IGFzIGlubGluZSByZWZlcmVuY2Ugc3BhblxuICAgICAgICAgICAgY29uc3QgcmVmVGV4dCA9IGAke3JlZmVyZW5jZX0gKCR7dHJhbnNsYXRpb259KWA7XG4gICAgICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAnYmlibGVsaW5rLWlubGluZS1yZWYnO1xuICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHJlZlRleHQ7XG4gICAgICAgICAgICBzcGFuLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIHNwYW4udGl0bGUgPSAnQ2xpY2sgb3IgaG92ZXIgdG8gc2hvdyB2ZXJzZSc7XG4gICAgICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB0aGlzLnNob3dJbmxpbmVSZWZlcmVuY2VQb3BvdmVyKHNwYW4sIGZhbHNlKSk7XG4gICAgICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iaWJsZWxpbmstaW5saW5lLXBvcG92ZXInKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0lubGluZVJlZmVyZW5jZVBvcG92ZXIoc3BhbiwgZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBJbnNlcnQgYXMgSFRNTCBpZiBwb3NzaWJsZSwgZWxzZSBmYWxsYmFjayB0byBwbGFpbiB0ZXh0XG4gICAgICAgICAgICBpZiAoKGVkaXRvciBhcyBhbnkpLnJlcGxhY2VTZWxlY3Rpb25IVE1MKSB7XG4gICAgICAgICAgICAgICAgKGVkaXRvciBhcyBhbnkpLnJlcGxhY2VTZWxlY3Rpb25IVE1MKHNwYW4ub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVmVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob3V0cHV0VHlwZSA9PT0gJ2xpbmsnKSB7XG4gICAgICAgICAgICAvLyBJbnNlcnQgYXMgaW5saW5lIHJlZmVyZW5jZSBsaW5rIHdpdGggcG9wb3ZlclxuICAgICAgICAgICAgY29uc3QgcmVmVGV4dCA9IGAke3JlZmVyZW5jZX0gKCR7dHJhbnNsYXRpb259KWA7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmdlbmVyYXRlQmlibGVHYXRld2F5VXJsKHJlZmVyZW5jZSwgdHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIGEuY2xhc3NOYW1lID0gJ2JpYmxlbGluay1pbmxpbmUtcmVmJztcbiAgICAgICAgICAgIGEudGV4dENvbnRlbnQgPSByZWZUZXh0O1xuICAgICAgICAgICAgYS5ocmVmID0gdXJsO1xuICAgICAgICAgICAgYS50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgIGEuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgYS50aXRsZSA9ICdDbGljayBvciBob3ZlciB0byBzaG93IHZlcnNlJztcbiAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHRoaXMuc2hvd0lubGluZVJlZmVyZW5jZVBvcG92ZXIoYSwgZmFsc2UpKTtcbiAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJpYmxlbGluay1pbmxpbmUtcG9wb3ZlcicpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFsbG93IG5vcm1hbCBsaW5rIG9wZW4sIGJ1dCBhbHNvIHNob3cgcG9wb3ZlclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0lubGluZVJlZmVyZW5jZVBvcG92ZXIoYSwgZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoKGVkaXRvciBhcyBhbnkpLnJlcGxhY2VTZWxlY3Rpb25IVE1MKSB7XG4gICAgICAgICAgICAgICAgKGVkaXRvciBhcyBhbnkpLnJlcGxhY2VTZWxlY3Rpb25IVE1MKGEub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFske3JlZlRleHR9XSgke3VybH0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDb2RlIGJsb2NrIG91dHB1dFxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uc1N0ciA9IG9wdGlvbnMubGVuZ3RoID4gMCA/IGAgWyR7b3B0aW9ucy5qb2luKCd8Jyl9XWAgOiAnJztcbiAgICAgICAgICAgIHRleHQgPSBgXFxgXFxgXFxgJHt0aGlzLnNldHRpbmdzLmNvZGVCbG9ja0xhbmd1YWdlfVxcbiR7dHJhbnNsYXRpb259ICR7cmVmZXJlbmNlfSR7b3B0aW9uc1N0cn1cXG4ke3ZlcnNlcy5tYXAodiA9PiB2LnRleHQpLmpvaW4oJyAnKX1cXG5cXGBcXGBcXGBgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSB0ZXh0XG4gICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHRleHQpO1xuXG4gICAgICAgIC8vIENyZWF0ZSB2aXJ0dWFsIG5vdGUgZm9yIERhdGF2aWV3XG4gICAgICAgIC8vIHRoaXMuY3JlYXRlVmVyc2VOb3RlKGJvb2ssIGNoYXB0ZXJOdW0sIHN0YXJ0VmVyc2VOdW0sIHRyYW5zbGF0aW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdFJlZmVyZW5jZShib29rOiBzdHJpbmcsIGNoYXB0ZXI6IG51bWJlciwgdmVyc2U6IG51bWJlciwgdHJhbnNsYXRpb246IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBmb3JtYXR0ZWRCb29rID0gYm9vaztcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd0Jvb2tBYmJyICYmIEJPT0tfQUJCUkVWSUFUSU9OU1tib29rXSkge1xuICAgICAgICAgICAgZm9ybWF0dGVkQm9vayA9IEJPT0tfQUJCUkVWSUFUSU9OU1tib29rXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnNob3dUcmFuc2xhdGlvbkFiYnIgXG4gICAgICAgICAgICA/IGAke2Zvcm1hdHRlZEJvb2t9ICR7Y2hhcHRlcn06JHt2ZXJzZX0gJHt0cmFuc2xhdGlvbn1gXG4gICAgICAgICAgICA6IGAke2Zvcm1hdHRlZEJvb2t9ICR7Y2hhcHRlcn06JHt2ZXJzZX1gO1xuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZVZlcnNlTm90ZShib29rOiBzdHJpbmcsIGNoYXB0ZXI6IG51bWJlciwgdmVyc2U6IG51bWJlciwgdHJhbnNsYXRpb246IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdmVyc2VEYXRhID0gdGhpcy5kYi5nZXRWZXJzZShib29rLCBjaGFwdGVyLCB2ZXJzZSwgdHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgaWYgKCF2ZXJzZURhdGEpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHZpcnR1YWwgbm90ZSBwYXRoXG4gICAgICAgICAgICBjb25zdCBub3RlUGF0aCA9IGBCaWJsZS8ke2Jvb2t9LyR7Y2hhcHRlcn0vJHt2ZXJzZX0ubWRgO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBub3RlIGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm90ZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmlsZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgY29uc3QgZGlyUGF0aCA9IGBCaWJsZS8ke2Jvb2t9LyR7Y2hhcHRlcn1gO1xuICAgICAgICAgICAgY29uc3QgZGlyRXhpc3RzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRpclBhdGgpO1xuICAgICAgICAgICAgaWYgKCFkaXJFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZURpcmVjdG9yeVJlY3Vyc2l2ZShkaXJQYXRoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHRyYW5zbGF0aW9uIG1ldGFkYXRhXG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbkluZm8gPSB0aGlzLmdldFRyYW5zbGF0aW9uSW5mbyh0cmFuc2xhdGlvbik7XG4gICAgICAgICAgICBjb25zdCByZWZlcmVuY2UgPSB0aGlzLmZvcm1hdFJlZmVyZW5jZShib29rLCBjaGFwdGVyLCB2ZXJzZSwgdHJhbnNsYXRpb24pO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgbm90ZSBjb250ZW50IHdpdGggcmljaCBZQU1MIGZyb250bWF0dGVyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYC0tLVxuYm9vazogJHtib29rfVxuY2hhcHRlcjogJHtjaGFwdGVyfVxudmVyc2U6ICR7dmVyc2V9XG50cmFuc2xhdGlvbjogJHt0cmFuc2xhdGlvbn1cbnRleHQ6IFwiJHt2ZXJzZURhdGEudGV4dC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyl9XCJcbnJlZmVyZW5jZTogXCIke3JlZmVyZW5jZX1cIlxubGFuZ3VhZ2U6IFwiJHt0cmFuc2xhdGlvbkluZm8ubGFuZ3VhZ2V9XCJcbmNhdGVnb3J5OiBcIiR7dHJhbnNsYXRpb25JbmZvLmNhdGVnb3J5fVwiXG50cmFuc2xhdGlvbl9uYW1lOiBcIiR7dHJhbnNsYXRpb25JbmZvLm5hbWV9XCJcbmNyZWF0ZWQ6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfVxuLS0tXG5cbiMgJHtyZWZlcmVuY2V9XG5cbiR7dmVyc2VEYXRhLnRleHR9XG5cbipUcmFuc2xhdGlvbjogJHt0cmFuc2xhdGlvbkluZm8ubmFtZX0gKCR7dHJhbnNsYXRpb259KSpcblxuIyMgTWV0YWRhdGFcblxuLSAqKkJvb2sqKjogJHtib29rfVxuLSAqKkNoYXB0ZXIqKjogJHtjaGFwdGVyfVxuLSAqKlZlcnNlKio6ICR7dmVyc2V9XG4tICoqVHJhbnNsYXRpb24qKjogJHt0cmFuc2xhdGlvbn1cbi0gKipMYW5ndWFnZSoqOiAke3RyYW5zbGF0aW9uSW5mby5sYW5ndWFnZX1cbi0gKipDYXRlZ29yeSoqOiAke3RyYW5zbGF0aW9uSW5mby5jYXRlZ29yeX1cbi0gKipSZWZlcmVuY2UqKjogJHtyZWZlcmVuY2V9XG5cbiMjIFJlbGF0ZWQgVmVyc2VzXG5cblxcYFxcYFxcYGRhdGF2aWV3XG5MSVNUIHJlZmVyZW5jZSwgdGV4dFxuRlJPTSBcIkJpYmxlXCJcbldIRVJFIGJvb2sgPSBcIiR7Ym9va31cIiBBTkQgY2hhcHRlciA9ICR7Y2hhcHRlcn1cblNPUlQgdmVyc2VcblxcYFxcYFxcYFxuXG4jIyBDcm9zcy1SZWZlcmVuY2VzXG5cblxcYFxcYFxcYGRhdGF2aWV3XG5MSVNUIHJlZmVyZW5jZSwgdGV4dFxuRlJPTSBcIkJpYmxlXCJcbldIRVJFIGNvbnRhaW5zKHRleHQsIFwiJHt2ZXJzZURhdGEudGV4dC5zcGxpdCgnICcpLnNsaWNlKDAsIDMpLmpvaW4oJyAnKX1cIilcbkFORCBmaWxlLm5hbWUgIT0gdGhpcy5maWxlLm5hbWVcbkxJTUlUIDVcblxcYFxcYFxcYFxuYDtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBmaWxlXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobm90ZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB2ZXJzZSBub3RlOicsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIERvbid0IHNob3cgbm90aWNlIHRvIHVzZXIgYXMgdGhpcyBpcyBhIGJhY2tncm91bmQgb3BlcmF0aW9uXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFRyYW5zbGF0aW9uSW5mbyhhYmJyZXZpYXRpb246IHN0cmluZyk6IHsgbmFtZTogc3RyaW5nOyBsYW5ndWFnZTogc3RyaW5nOyBjYXRlZ29yeTogc3RyaW5nIH0ge1xuICAgICAgICAvLyBHZXQgZnJvbSBkYXRhYmFzZSBmaXJzdFxuICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHRoaXMuZGIuZ2V0VHJhbnNsYXRpb25zKCkuZmluZCh0ID0+IHQuYWJicmV2aWF0aW9uID09PSBhYmJyZXZpYXRpb24pO1xuICAgICAgICBpZiAodHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZXQgYWRkaXRpb25hbCBpbmZvIGZyb20gb3VyIGtub3duIHRyYW5zbGF0aW9uc1xuICAgICAgICAgICAgY29uc3Qga25vd25UcmFuc2xhdGlvbiA9IHRoaXMuZ2V0S25vd25UcmFuc2xhdGlvbihhYmJyZXZpYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0cmFuc2xhdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBrbm93blRyYW5zbGF0aW9uPy5sYW5ndWFnZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGtub3duVHJhbnNsYXRpb24/LmNhdGVnb3J5IHx8ICdVbmtub3duJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGFiYnJldmlhdGlvbixcbiAgICAgICAgICAgIGxhbmd1YWdlOiAndW5rbm93bicsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ1Vua25vd24nXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRLbm93blRyYW5zbGF0aW9uKGFiYnJldmlhdGlvbjogc3RyaW5nKTogeyBuYW1lOiBzdHJpbmc7IGxhbmd1YWdlOiBzdHJpbmc7IGNhdGVnb3J5OiBzdHJpbmcgfSB8IG51bGwge1xuICAgICAgICBjb25zdCBrbm93blRyYW5zbGF0aW9ucyA9IHtcbiAgICAgICAgICAgICdBU1YnOiB7IG5hbWU6ICdBbWVyaWNhbiBTdGFuZGFyZCBWZXJzaW9uICgxOTAxKScsIGxhbmd1YWdlOiAnZW4nLCBjYXRlZ29yeTogJ0VuZ2xpc2gnIH0sXG4gICAgICAgICAgICAnS0pWJzogeyBuYW1lOiAnS2luZyBKYW1lcyBWZXJzaW9uJywgbGFuZ3VhZ2U6ICdlbicsIGNhdGVnb3J5OiAnRW5nbGlzaCcgfSxcbiAgICAgICAgICAgICdXRUInOiB7IG5hbWU6ICdXb3JsZCBFbmdsaXNoIEJpYmxlJywgbGFuZ3VhZ2U6ICdlbicsIGNhdGVnb3J5OiAnRW5nbGlzaCcgfSxcbiAgICAgICAgICAgICdZTFQnOiB7IG5hbWU6ICdZb3VuZ1xcJ3MgTGl0ZXJhbCBUcmFuc2xhdGlvbiAoMTg5OCknLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdFbmdsaXNoJyB9LFxuICAgICAgICAgICAgJ0JCRSc6IHsgbmFtZTogJ0JpYmxlIGluIEJhc2ljIEVuZ2xpc2ggKDE5NDkvMTk2NCknLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdFbmdsaXNoJyB9LFxuICAgICAgICAgICAgJ0JTQic6IHsgbmFtZTogJ0JlcmVhbiBTdGFuZGFyZCBCaWJsZScsIGxhbmd1YWdlOiAnZW4nLCBjYXRlZ29yeTogJ0VuZ2xpc2gnIH0sXG4gICAgICAgICAgICAnQ1BEVic6IHsgbmFtZTogJ0NhdGhvbGljIFB1YmxpYyBEb21haW4gVmVyc2lvbicsIGxhbmd1YWdlOiAnZW4nLCBjYXRlZ29yeTogJ0VuZ2xpc2gnIH0sXG4gICAgICAgICAgICAnU3BhUlYnOiB7IG5hbWU6ICdMYSBTYW50YSBCaWJsaWEgUmVpbmEtVmFsZXJhICgxOTA5KScsIGxhbmd1YWdlOiAnZXMnLCBjYXRlZ29yeTogJ1NwYW5pc2gnIH0sXG4gICAgICAgICAgICAnVnVsZ2F0ZSc6IHsgbmFtZTogJ0xhdGluIFZ1bGdhdGUnLCBsYW5ndWFnZTogJ2xhJywgY2F0ZWdvcnk6ICdMYXRpbicgfSxcbiAgICAgICAgICAgICdCeXonOiB7IG5hbWU6ICdCeXphbnRpbmUgVGV4dGZvcm0gKEdyZWVrKScsIGxhbmd1YWdlOiAnZ3JjJywgY2F0ZWdvcnk6ICdHcmVlaycgfSxcbiAgICAgICAgICAgICdXTEMnOiB7IG5hbWU6ICdXZXN0bWluc3RlciBMZW5pbmdyYWQgQ29kZXgnLCBsYW5ndWFnZTogJ2hibycsIGNhdGVnb3J5OiAnSGVicmV3JyB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ga25vd25UcmFuc2xhdGlvbnNbYWJicmV2aWF0aW9uXSB8fCBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlRGlyZWN0b3J5UmVjdXJzaXZlKGRpclBhdGg6IHN0cmluZykge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGRpclBhdGguc3BsaXQoJy8nKTtcbiAgICAgICAgbGV0IGN1cnJlbnRQYXRoID0gJyc7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGggPyBgJHtjdXJyZW50UGF0aH0vJHtwYXJ0fWAgOiBwYXJ0O1xuICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb2xkZXIgbWlnaHQgYWxyZWFkeSBleGlzdCwgY29udGludWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyRGF0YXZpZXdTb3VyY2UoKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIERhdGF2aWV3IHBsdWdpbiBpcyBhdmFpbGFibGVcbiAgICAgICAgY29uc3QgZGF0YXZpZXdQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbJ2RhdGF2aWV3J107XG4gICAgICAgIGlmICghZGF0YXZpZXdQbHVnaW4pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBEYXRhdmlldyBwbHVnaW4gbm90IGZvdW5kLCBza2lwcGluZyBEYXRhdmlldyBpbnRlZ3JhdGlvbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIERhdGF2aWV3IGRvZXNuJ3Qgc3VwcG9ydCBjdXN0b20gc291cmNlcyBpbiBEUUwsIHNvIHdlJ2xsIGZvY3VzIG9uIERhdGF2aWV3SlNcbiAgICAgICAgICAgIC8vIFRoZSBwbHVnaW4gaW5zdGFuY2UgaXMgZXhwb3NlZCBnbG9iYWxseSBmb3IgRGF0YXZpZXdKUyBhY2Nlc3NcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBEYXRhdmlldyBwbHVnaW4gZm91bmQsIGV4cG9zaW5nIEFQSSBmb3IgRGF0YXZpZXdKUyBhY2Nlc3MnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBVc2UgQmlibGVMaW5rQVBJIG9yIEJpYmxlTGlua1BsdWdpbiBpbiBEYXRhdmlld0pTIHF1ZXJpZXMnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaWJsZUxpbmtdIEZhaWxlZCB0byBpbml0aWFsaXplIERhdGF2aWV3IGludGVncmF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRGF0YXZpZXdRdWVyeShxdWVyeTogc3RyaW5nKTogYW55W10ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tCaWJsZUxpbmtdIFByb2Nlc3NpbmcgRGF0YXZpZXcgcXVlcnk6JywgcXVlcnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgcXVlcnkgdG8gZXh0cmFjdCBjb21wb25lbnRzXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRRdWVyeSA9IHRoaXMucGFyc2VEYXRhdmlld1F1ZXJ5KHF1ZXJ5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBQYXJzZWQgcXVlcnk6JywgcGFyc2VkUXVlcnkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHZXQgYWxsIHZlcnNlcyB0aGF0IG1hdGNoIHRoZSBjcml0ZXJpYVxuICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSB0aGlzLmdldEFsbFZlcnNlc1dpdGhNZXRhZGF0YSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBcHBseSBXSEVSRSBjb25kaXRpb25zXG4gICAgICAgICAgICBpZiAocGFyc2VkUXVlcnkud2hlcmUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gdGhpcy5hcHBseVdoZXJlQ29uZGl0aW9ucyhyZXN1bHRzLCBwYXJzZWRRdWVyeS53aGVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFwcGx5IFNPUlRcbiAgICAgICAgICAgIGlmIChwYXJzZWRRdWVyeS5zb3J0KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHRoaXMuYXBwbHlTb3J0KHJlc3VsdHMsIHBhcnNlZFF1ZXJ5LnNvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBcHBseSBMSU1JVFxuICAgICAgICAgICAgaWYgKHBhcnNlZFF1ZXJ5LmxpbWl0KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc2xpY2UoMCwgcGFyc2VkUXVlcnkubGltaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0JpYmxlTGlua10gUXVlcnkgcmV0dXJuZWQgJHtyZXN1bHRzLmxlbmd0aH0gcmVzdWx0c2ApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaWJsZUxpbmtdIERhdGF2aWV3IHF1ZXJ5IGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcGFyc2VEYXRhdmlld1F1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiB7XG4gICAgICAgIHdoZXJlPzogYW55W107XG4gICAgICAgIHNvcnQ/OiB7IGZpZWxkOiBzdHJpbmc7IGRpcmVjdGlvbjogJ2FzYycgfCAnZGVzYycgfVtdO1xuICAgICAgICBsaW1pdD86IG51bWJlcjtcbiAgICB9IHtcbiAgICAgICAgY29uc3QgcmVzdWx0OiBhbnkgPSB7fTtcbiAgICAgICAgXG4gICAgICAgIC8vIFBhcnNlIFdIRVJFIGNsYXVzZVxuICAgICAgICBjb25zdCB3aGVyZU1hdGNoID0gcXVlcnkubWF0Y2goL1dIRVJFXFxzKyguKz8pKD86XFxzK1NPUlR8XFxzK0xJTUlUfCQpL2kpO1xuICAgICAgICBpZiAod2hlcmVNYXRjaCkge1xuICAgICAgICAgICAgcmVzdWx0LndoZXJlID0gdGhpcy5wYXJzZVdoZXJlQ29uZGl0aW9ucyh3aGVyZU1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUGFyc2UgU09SVCBjbGF1c2VcbiAgICAgICAgY29uc3Qgc29ydE1hdGNoID0gcXVlcnkubWF0Y2goL1NPUlRcXHMrKC4rPykoPzpcXHMrTElNSVR8JCkvaSk7XG4gICAgICAgIGlmIChzb3J0TWF0Y2gpIHtcbiAgICAgICAgICAgIHJlc3VsdC5zb3J0ID0gdGhpcy5wYXJzZVNvcnRDb25kaXRpb25zKHNvcnRNYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFBhcnNlIExJTUlUIGNsYXVzZVxuICAgICAgICBjb25zdCBsaW1pdE1hdGNoID0gcXVlcnkubWF0Y2goL0xJTUlUXFxzKyhcXGQrKS9pKTtcbiAgICAgICAgaWYgKGxpbWl0TWF0Y2gpIHtcbiAgICAgICAgICAgIHJlc3VsdC5saW1pdCA9IHBhcnNlSW50KGxpbWl0TWF0Y2hbMV0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgcGFyc2VXaGVyZUNvbmRpdGlvbnMoY29uZGl0aW9uczogc3RyaW5nKTogYW55W10ge1xuICAgICAgICBjb25zdCBwYXJzZWRDb25kaXRpb25zOiBhbnlbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gU3BsaXQgYnkgQU5EL09SIChzaW1wbGlmaWVkIC0gYXNzdW1lcyBBTkQgZm9yIG5vdylcbiAgICAgICAgY29uc3QgYW5kUGFydHMgPSBjb25kaXRpb25zLnNwbGl0KC9cXHMrQU5EXFxzKy9pKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBhbmRQYXJ0cykge1xuICAgICAgICAgICAgLy8gUGFyc2UgZmllbGQgPSB2YWx1ZVxuICAgICAgICAgICAgY29uc3QgZXFNYXRjaCA9IHBhcnQubWF0Y2goLyhcXHcrKVxccyo9XFxzKlwiKFteXCJdKylcIi9pKTtcbiAgICAgICAgICAgIGlmIChlcU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQ29uZGl0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2VxdWFscycsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBlcU1hdGNoWzFdLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlcU1hdGNoWzJdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFBhcnNlIGZpZWxkID0gbnVtYmVyXG4gICAgICAgICAgICBjb25zdCBudW1NYXRjaCA9IHBhcnQubWF0Y2goLyhcXHcrKVxccyo9XFxzKihcXGQrKS9pKTtcbiAgICAgICAgICAgIGlmIChudW1NYXRjaCkge1xuICAgICAgICAgICAgICAgIHBhcnNlZENvbmRpdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcXVhbHMnLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogbnVtTWF0Y2hbMV0udG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KG51bU1hdGNoWzJdKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQYXJzZSBjb250YWlucyhmaWVsZCwgXCJ2YWx1ZVwiKVxuICAgICAgICAgICAgY29uc3QgY29udGFpbnNNYXRjaCA9IHBhcnQubWF0Y2goL2NvbnRhaW5zXFwoKFxcdyspLFxccypcIihbXlwiXSspXCJcXCkvaSk7XG4gICAgICAgICAgICBpZiAoY29udGFpbnNNYXRjaCkge1xuICAgICAgICAgICAgICAgIHBhcnNlZENvbmRpdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb250YWlucycsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBjb250YWluc01hdGNoWzFdLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb250YWluc01hdGNoWzJdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFBhcnNlIGZpZWxkID4gbnVtYmVyXG4gICAgICAgICAgICBjb25zdCBndE1hdGNoID0gcGFydC5tYXRjaCgvKFxcdyspXFxzKj5cXHMqKFxcZCspL2kpO1xuICAgICAgICAgICAgaWYgKGd0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRDb25kaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ3JlYXRlcl90aGFuJyxcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGd0TWF0Y2hbMV0udG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGd0TWF0Y2hbMl0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFBhcnNlIGZpZWxkIDwgbnVtYmVyXG4gICAgICAgICAgICBjb25zdCBsdE1hdGNoID0gcGFydC5tYXRjaCgvKFxcdyspXFxzKjxcXHMqKFxcZCspL2kpO1xuICAgICAgICAgICAgaWYgKGx0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRDb25kaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbGVzc190aGFuJyxcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGx0TWF0Y2hbMV0udG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGx0TWF0Y2hbMl0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBwYXJzZWRDb25kaXRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGFyc2VTb3J0Q29uZGl0aW9ucyhzb3J0Q2xhdXNlOiBzdHJpbmcpOiB7IGZpZWxkOiBzdHJpbmc7IGRpcmVjdGlvbjogJ2FzYycgfCAnZGVzYycgfVtdIHtcbiAgICAgICAgY29uc3Qgc29ydHM6IHsgZmllbGQ6IHN0cmluZzsgZGlyZWN0aW9uOiAnYXNjJyB8ICdkZXNjJyB9W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNwbGl0IGJ5IGNvbW1hXG4gICAgICAgIGNvbnN0IHBhcnRzID0gc29ydENsYXVzZS5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIERFU0MvQVNDXG4gICAgICAgICAgICBjb25zdCBkZXNjTWF0Y2ggPSBwYXJ0Lm1hdGNoKC8oXFx3KylcXHMrREVTQy9pKTtcbiAgICAgICAgICAgIGlmIChkZXNjTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBzb3J0cy5wdXNoKHsgZmllbGQ6IGRlc2NNYXRjaFsxXS50b0xvd2VyQ2FzZSgpLCBkaXJlY3Rpb246ICdkZXNjJyB9KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYXNjTWF0Y2ggPSBwYXJ0Lm1hdGNoKC8oXFx3KylcXHMrQVNDL2kpO1xuICAgICAgICAgICAgaWYgKGFzY01hdGNoKSB7XG4gICAgICAgICAgICAgICAgc29ydHMucHVzaCh7IGZpZWxkOiBhc2NNYXRjaFsxXS50b0xvd2VyQ2FzZSgpLCBkaXJlY3Rpb246ICdhc2MnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEZWZhdWx0IHRvIEFTQ1xuICAgICAgICAgICAgY29uc3QgZmllbGRNYXRjaCA9IHBhcnQubWF0Y2goLyhcXHcrKS9pKTtcbiAgICAgICAgICAgIGlmIChmaWVsZE1hdGNoKSB7XG4gICAgICAgICAgICAgICAgc29ydHMucHVzaCh7IGZpZWxkOiBmaWVsZE1hdGNoWzFdLnRvTG93ZXJDYXNlKCksIGRpcmVjdGlvbjogJ2FzYycgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzb3J0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QWxsVmVyc2VzV2l0aE1ldGFkYXRhKCk6IGFueVtdIHtcbiAgICAgICAgY29uc3QgcmVzdWx0czogYW55W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgdHJhbnNsYXRpb24gb2YgdGhpcy5kYi5nZXRUcmFuc2xhdGlvbnMoKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBib29rIG9mIHRoaXMuZGIuZ2V0Qm9va3MoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXB0ZXJzID0gdGhpcy5kYi5nZXRDaGFwdGVyc0ZvckJvb2soYm9vaywgdHJhbnNsYXRpb24uYWJicmV2aWF0aW9uKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgY2hhcHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVyc2VzID0gdGhpcy5kYi5nZXRWZXJzZXNGb3JDaGFwdGVyKGJvb2ssIGNoYXB0ZXIsIHRyYW5zbGF0aW9uLmFiYnJldmlhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmVyc2VOdW0gb2YgdmVyc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJzZURhdGEgPSB0aGlzLmRiLmdldFZlcnNlKGJvb2ssIGNoYXB0ZXIsIHZlcnNlTnVtLCB0cmFuc2xhdGlvbi5hYmJyZXZpYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSB2ZXJzZURhdGEudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkQ291bnQgPSB0ZXh0LnNwbGl0KC9cXHMrLykubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJDb3VudCA9IHRleHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2s6IHZlcnNlRGF0YS5ib29rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyOiB2ZXJzZURhdGEuY2hhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2U6IHZlcnNlRGF0YS52ZXJzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb246IHRyYW5zbGF0aW9uLmFiYnJldmlhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25fbmFtZTogdHJhbnNsYXRpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBgJHt2ZXJzZURhdGEuYm9va30gJHt2ZXJzZURhdGEuY2hhcHRlcn06JHt2ZXJzZURhdGEudmVyc2V9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZF9jb3VudDogd29yZENvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyX2NvdW50OiBjaGFyQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBjb21wdXRlZCBmaWVsZHMgZm9yIGVhc2llciBxdWVyeWluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19qZXN1c193b3JkOiB0aGlzLmlzSmVzdXNXb3JkKHRleHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNfcmVkX2xldHRlcjogdGhpcy5oYXNSZWRMZXR0ZXJXb3Jkcyh0ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGJvb2sgY2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0YW1lbnQ6IHRoaXMuZ2V0VGVzdGFtZW50KHZlcnNlRGF0YS5ib29rKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va19jYXRlZ29yeTogdGhpcy5nZXRCb29rQ2F0ZWdvcnkodmVyc2VEYXRhLmJvb2spXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXBwbHlXaGVyZUNvbmRpdGlvbnModmVyc2VzOiBhbnlbXSwgY29uZGl0aW9uczogYW55W10pOiBhbnlbXSB7XG4gICAgICAgIHJldHVybiB2ZXJzZXMuZmlsdGVyKHZlcnNlID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjb25kaXRpb25zLmV2ZXJ5KGNvbmRpdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IHZlcnNlW2NvbmRpdGlvbi5maWVsZF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjb25kaXRpb24udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlcXVhbHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWUgPT09IGNvbmRpdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGFpbnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBmaWVsZFZhbHVlID09PSAnc3RyaW5nJyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoY29uZGl0aW9uLnZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdncmVhdGVyX3RoYW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBmaWVsZFZhbHVlID09PSAnbnVtYmVyJyAmJiBmaWVsZFZhbHVlID4gY29uZGl0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsZXNzX3RoYW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBmaWVsZFZhbHVlID09PSAnbnVtYmVyJyAmJiBmaWVsZFZhbHVlIDwgY29uZGl0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXBwbHlTb3J0KHZlcnNlczogYW55W10sIHNvcnRzOiB7IGZpZWxkOiBzdHJpbmc7IGRpcmVjdGlvbjogJ2FzYycgfCAnZGVzYycgfVtdKTogYW55W10ge1xuICAgICAgICByZXR1cm4gWy4uLnZlcnNlc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzb3J0IG9mIHNvcnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYVZhbCA9IGFbc29ydC5maWVsZF07XG4gICAgICAgICAgICAgICAgY29uc3QgYlZhbCA9IGJbc29ydC5maWVsZF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGNvbXBhcmlzb24gPSAwO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYVZhbCA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGJWYWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBhVmFsLmxvY2FsZUNvbXBhcmUoYlZhbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYVZhbCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGJWYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBhVmFsIC0gYlZhbDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gU3RyaW5nKGFWYWwpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGJWYWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvcnQuZGlyZWN0aW9uID09PSAnZGVzYycgPyAtY29tcGFyaXNvbiA6IGNvbXBhcmlzb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VGVzdGFtZW50KGJvb2s6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG9sZFRlc3RhbWVudEJvb2tzID0gW1xuICAgICAgICAgICAgJ0dlbmVzaXMnLCAnRXhvZHVzJywgJ0xldml0aWN1cycsICdOdW1iZXJzJywgJ0RldXRlcm9ub215JyxcbiAgICAgICAgICAgICdKb3NodWEnLCAnSnVkZ2VzJywgJ1J1dGgnLCAnMSBTYW11ZWwnLCAnMiBTYW11ZWwnLFxuICAgICAgICAgICAgJzEgS2luZ3MnLCAnMiBLaW5ncycsICcxIENocm9uaWNsZXMnLCAnMiBDaHJvbmljbGVzJyxcbiAgICAgICAgICAgICdFenJhJywgJ05laGVtaWFoJywgJ0VzdGhlcicsICdKb2InLCAnUHNhbG1zJyxcbiAgICAgICAgICAgICdQcm92ZXJicycsICdFY2NsZXNpYXN0ZXMnLCAnU29uZyBvZiBTb2xvbW9uJywgJ0lzYWlhaCcsXG4gICAgICAgICAgICAnSmVyZW1pYWgnLCAnTGFtZW50YXRpb25zJywgJ0V6ZWtpZWwnLCAnRGFuaWVsJyxcbiAgICAgICAgICAgICdIb3NlYScsICdKb2VsJywgJ0Ftb3MnLCAnT2JhZGlhaCcsICdKb25haCcsXG4gICAgICAgICAgICAnTWljYWgnLCAnTmFodW0nLCAnSGFiYWtrdWsnLCAnWmVwaGFuaWFoJywgJ0hhZ2dhaScsXG4gICAgICAgICAgICAnWmVjaGFyaWFoJywgJ01hbGFjaGknXG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gb2xkVGVzdGFtZW50Qm9va3MuaW5jbHVkZXMoYm9vaykgPyAnT2xkIFRlc3RhbWVudCcgOiAnTmV3IFRlc3RhbWVudCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRCb29rQ2F0ZWdvcnkoYm9vazogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgY2F0ZWdvcmllczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgIC8vIE9sZCBUZXN0YW1lbnRcbiAgICAgICAgICAgICdHZW5lc2lzJzogJ0xhdycsICdFeG9kdXMnOiAnTGF3JywgJ0xldml0aWN1cyc6ICdMYXcnLCAnTnVtYmVycyc6ICdMYXcnLCAnRGV1dGVyb25vbXknOiAnTGF3JyxcbiAgICAgICAgICAgICdKb3NodWEnOiAnSGlzdG9yaWNhbCcsICdKdWRnZXMnOiAnSGlzdG9yaWNhbCcsICdSdXRoJzogJ0hpc3RvcmljYWwnLCAnMSBTYW11ZWwnOiAnSGlzdG9yaWNhbCcsICcyIFNhbXVlbCc6ICdIaXN0b3JpY2FsJyxcbiAgICAgICAgICAgICcxIEtpbmdzJzogJ0hpc3RvcmljYWwnLCAnMiBLaW5ncyc6ICdIaXN0b3JpY2FsJywgJzEgQ2hyb25pY2xlcyc6ICdIaXN0b3JpY2FsJywgJzIgQ2hyb25pY2xlcyc6ICdIaXN0b3JpY2FsJyxcbiAgICAgICAgICAgICdFenJhJzogJ0hpc3RvcmljYWwnLCAnTmVoZW1pYWgnOiAnSGlzdG9yaWNhbCcsICdFc3RoZXInOiAnSGlzdG9yaWNhbCcsXG4gICAgICAgICAgICAnSm9iJzogJ1dpc2RvbScsICdQc2FsbXMnOiAnV2lzZG9tJywgJ1Byb3ZlcmJzJzogJ1dpc2RvbScsICdFY2NsZXNpYXN0ZXMnOiAnV2lzZG9tJywgJ1Nvbmcgb2YgU29sb21vbic6ICdXaXNkb20nLFxuICAgICAgICAgICAgJ0lzYWlhaCc6ICdQcm9waGV0aWMnLCAnSmVyZW1pYWgnOiAnUHJvcGhldGljJywgJ0xhbWVudGF0aW9ucyc6ICdQcm9waGV0aWMnLCAnRXpla2llbCc6ICdQcm9waGV0aWMnLCAnRGFuaWVsJzogJ1Byb3BoZXRpYycsXG4gICAgICAgICAgICAnSG9zZWEnOiAnUHJvcGhldGljJywgJ0pvZWwnOiAnUHJvcGhldGljJywgJ0Ftb3MnOiAnUHJvcGhldGljJywgJ09iYWRpYWgnOiAnUHJvcGhldGljJywgJ0pvbmFoJzogJ1Byb3BoZXRpYycsXG4gICAgICAgICAgICAnTWljYWgnOiAnUHJvcGhldGljJywgJ05haHVtJzogJ1Byb3BoZXRpYycsICdIYWJha2t1ayc6ICdQcm9waGV0aWMnLCAnWmVwaGFuaWFoJzogJ1Byb3BoZXRpYycsICdIYWdnYWknOiAnUHJvcGhldGljJyxcbiAgICAgICAgICAgICdaZWNoYXJpYWgnOiAnUHJvcGhldGljJywgJ01hbGFjaGknOiAnUHJvcGhldGljJyxcbiAgICAgICAgICAgIC8vIE5ldyBUZXN0YW1lbnRcbiAgICAgICAgICAgICdNYXR0aGV3JzogJ0dvc3BlbCcsICdNYXJrJzogJ0dvc3BlbCcsICdMdWtlJzogJ0dvc3BlbCcsICdKb2huJzogJ0dvc3BlbCcsXG4gICAgICAgICAgICAnQWN0cyc6ICdIaXN0b3JpY2FsJyxcbiAgICAgICAgICAgICdSb21hbnMnOiAnRXBpc3RsZScsICcxIENvcmludGhpYW5zJzogJ0VwaXN0bGUnLCAnMiBDb3JpbnRoaWFucyc6ICdFcGlzdGxlJywgJ0dhbGF0aWFucyc6ICdFcGlzdGxlJywgJ0VwaGVzaWFucyc6ICdFcGlzdGxlJyxcbiAgICAgICAgICAgICdQaGlsaXBwaWFucyc6ICdFcGlzdGxlJywgJ0NvbG9zc2lhbnMnOiAnRXBpc3RsZScsICcxIFRoZXNzYWxvbmlhbnMnOiAnRXBpc3RsZScsICcyIFRoZXNzYWxvbmlhbnMnOiAnRXBpc3RsZScsXG4gICAgICAgICAgICAnMSBUaW1vdGh5JzogJ0VwaXN0bGUnLCAnMiBUaW1vdGh5JzogJ0VwaXN0bGUnLCAnVGl0dXMnOiAnRXBpc3RsZScsICdQaGlsZW1vbic6ICdFcGlzdGxlJyxcbiAgICAgICAgICAgICdIZWJyZXdzJzogJ0VwaXN0bGUnLCAnSmFtZXMnOiAnRXBpc3RsZScsICcxIFBldGVyJzogJ0VwaXN0bGUnLCAnMiBQZXRlcic6ICdFcGlzdGxlJyxcbiAgICAgICAgICAgICcxIEpvaG4nOiAnRXBpc3RsZScsICcyIEpvaG4nOiAnRXBpc3RsZScsICczIEpvaG4nOiAnRXBpc3RsZScsICdKdWRlJzogJ0VwaXN0bGUnLFxuICAgICAgICAgICAgJ1JldmVsYXRpb24nOiAnQXBvY2FseXB0aWMnXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2F0ZWdvcmllc1tib29rXSB8fCAnVW5rbm93bic7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYXNSZWRMZXR0ZXJXb3Jkcyh0ZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGV4dCBjb250YWlucyB3b3JkcyB0aGF0IG1pZ2h0IGJlIHNwb2tlbiBieSBKZXN1c1xuICAgICAgICBjb25zdCBqZXN1c0luZGljYXRvcnMgPSBbXG4gICAgICAgICAgICAnSSBhbScsICd2ZXJpbHknLCAndHJ1bHknLCAnYW1lbicsICdmYXRoZXInLCAna2luZ2RvbScsICdoZWF2ZW4nLFxuICAgICAgICAgICAgJ3BhcmFibGUnLCAnZGlzY2lwbGUnLCAnZm9sbG93IG1lJywgJ2NvbWUgdW50byBtZScsICdteSBmYXRoZXInXG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBsb3dlclRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiBqZXN1c0luZGljYXRvcnMuc29tZShpbmRpY2F0b3IgPT4gbG93ZXJUZXh0LmluY2x1ZGVzKGluZGljYXRvci50b0xvd2VyQ2FzZSgpKSk7XG4gICAgfVxuXG4gICAgLy8gVXRpbGl0eSBtZXRob2QgdG8gZ2V0IGFsbCB2ZXJzZXMgZm9yIGEgc3BlY2lmaWMgcXVlcnlcbiAgICBwdWJsaWMgcXVlcnlWZXJzZXMoYm9vaz86IHN0cmluZywgY2hhcHRlcj86IG51bWJlciwgdHJhbnNsYXRpb24/OiBzdHJpbmcpOiBhbnlbXSB7XG4gICAgICAgIGxldCByZXN1bHRzID0gdGhpcy5nZXRBbGxWZXJzZXNXaXRoTWV0YWRhdGEoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFwcGx5IGZpbHRlcnMgaWYgcHJvdmlkZWRcbiAgICAgICAgaWYgKGJvb2spIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcih2ID0+IHYuYm9vayA9PT0gYm9vayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXB0ZXIpIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcih2ID0+IHYuY2hhcHRlciA9PT0gY2hhcHRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIodiA9PiB2LnRyYW5zbGF0aW9uID09PSB0cmFuc2xhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cy5zbGljZSgwLCAxMDAwKTsgLy8gTGltaXQgcmVzdWx0c1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNKZXN1c1dvcmQod29yZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIEFkZCBsb2dpYyB0byBpZGVudGlmeSB3b3JkcyBvZiBKZXN1c1xuICAgICAgICBjb25zdCBqZXN1c1dvcmRzID0gWydKZXN1cycsICdDaHJpc3QnLCAnTG9yZCcsICdNYXN0ZXInLCAnUmFiYmknLCAnVGVhY2hlciddO1xuICAgICAgICByZXR1cm4gamVzdXNXb3Jkcy5zb21lKHcgPT4gd29yZC5pbmNsdWRlcyh3KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUJpYmxlR2F0ZXdheVVybChyZWZlcmVuY2U6IHN0cmluZywgdHJhbnNsYXRpb246IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIE1hcCB0cmFuc2xhdGlvbiBhYmJyZXZpYXRpb25zIHRvIEJpYmxlIEdhdGV3YXkgdHJhbnNsYXRpb24gY29kZXNcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb25NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICAnS0pWJzogJ0tKVicsXG4gICAgICAgICAgICAnQVNWJzogJ0FTVicsXG4gICAgICAgICAgICAnV0VCJzogJ1dFQicsXG4gICAgICAgICAgICAnWUxUJzogJ1lMVCcsXG4gICAgICAgICAgICAnQkJFJzogJ0JCRScsXG4gICAgICAgICAgICAnQlNCJzogJ0JTQicsXG4gICAgICAgICAgICAnQ1BEVic6ICdDUERWJyxcbiAgICAgICAgICAgICdTcGFSVic6ICdSVlIxOTA5JyxcbiAgICAgICAgICAgICdWdWxnYXRlJzogJ1ZVTEdBVEUnLFxuICAgICAgICAgICAgJ0J5eic6ICdCWVonLFxuICAgICAgICAgICAgJ1dMQyc6ICdXTEMnXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBiaWJsZUdhdGV3YXlUcmFuc2xhdGlvbiA9IHRyYW5zbGF0aW9uTWFwW3RyYW5zbGF0aW9uXSB8fCB0cmFuc2xhdGlvbjtcbiAgICAgICAgY29uc3QgZW5jb2RlZFJlZmVyZW5jZSA9IGVuY29kZVVSSUNvbXBvbmVudChyZWZlcmVuY2UpO1xuICAgICAgICByZXR1cm4gYGh0dHBzOi8vd3d3LmJpYmxlZ2F0ZXdheS5jb20vcGFzc2FnZS8/c2VhcmNoPSR7ZW5jb2RlZFJlZmVyZW5jZX0mdmVyc2lvbj0ke2JpYmxlR2F0ZXdheVRyYW5zbGF0aW9ufWA7XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb2Nlc3NpbmdSdWxlIHtcbiAgICByZWdleDogc3RyaW5nO1xuICAgIGZvcm1hdHRpbmc6IHN0cmluZztcbiAgICBlc2NhcGU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zbGF0aW9uIHtcbiAgICBpZDogbnVtYmVyO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhYmJyZXZpYXRpb246IHN0cmluZztcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xuICAgIGNhdGVnb3J5OiBzdHJpbmc7XG4gICAgcHJvY2Vzc2luZ1J1bGVzOiBQcm9jZXNzaW5nUnVsZVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZlcnNlIHtcbiAgICBpZDogbnVtYmVyO1xuICAgIHRyYW5zbGF0aW9uX2lkOiBudW1iZXI7XG4gICAgYm9vazogc3RyaW5nO1xuICAgIGNoYXB0ZXI6IG51bWJlcjtcbiAgICB2ZXJzZTogbnVtYmVyO1xuICAgIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZURhdGEge1xuICAgIHRyYW5zbGF0aW9uczogVHJhbnNsYXRpb25bXTtcbiAgICB2ZXJzZXM6IFZlcnNlW107XG4gICAgbmV4dFRyYW5zbGF0aW9uSWQ6IG51bWJlcjtcbiAgICBuZXh0VmVyc2VJZDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQmlibGVEYXRhYmFzZSB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIGRhdGFQYXRoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBkYXRhOiBEYXRhYmFzZURhdGE7XG4gICAgcHJpdmF0ZSBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBpc1VubG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLy8gQ2hyb25vbG9naWNhbCBvcmRlciBvZiBCaWJsZSBib29rc1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENIUk9OT0xPR0lDQUxfQk9PS19PUkRFUiA9IFtcbiAgICAgICAgJ0dlbmVzaXMnLCAnRXhvZHVzJywgJ0xldml0aWN1cycsICdOdW1iZXJzJywgJ0RldXRlcm9ub215JyxcbiAgICAgICAgJ0pvc2h1YScsICdKdWRnZXMnLCAnUnV0aCcsICcxIFNhbXVlbCcsICcyIFNhbXVlbCcsXG4gICAgICAgICcxIEtpbmdzJywgJzIgS2luZ3MnLCAnMSBDaHJvbmljbGVzJywgJzIgQ2hyb25pY2xlcycsXG4gICAgICAgICdFenJhJywgJ05laGVtaWFoJywgJ0VzdGhlcicsICdKb2InLCAnUHNhbG1zJyxcbiAgICAgICAgJ1Byb3ZlcmJzJywgJ0VjY2xlc2lhc3RlcycsICdTb25nIG9mIFNvbG9tb24nLCAnSXNhaWFoJyxcbiAgICAgICAgJ0plcmVtaWFoJywgJ0xhbWVudGF0aW9ucycsICdFemVraWVsJywgJ0RhbmllbCcsXG4gICAgICAgICdIb3NlYScsICdKb2VsJywgJ0Ftb3MnLCAnT2JhZGlhaCcsICdKb25haCcsXG4gICAgICAgICdNaWNhaCcsICdOYWh1bScsICdIYWJha2t1aycsICdaZXBoYW5pYWgnLCAnSGFnZ2FpJyxcbiAgICAgICAgJ1plY2hhcmlhaCcsICdNYWxhY2hpJywgJ01hdHRoZXcnLCAnTWFyaycsICdMdWtlJyxcbiAgICAgICAgJ0pvaG4nLCAnQWN0cycsICdSb21hbnMnLCAnMSBDb3JpbnRoaWFucycsICcyIENvcmludGhpYW5zJyxcbiAgICAgICAgJ0dhbGF0aWFucycsICdFcGhlc2lhbnMnLCAnUGhpbGlwcGlhbnMnLCAnQ29sb3NzaWFucycsXG4gICAgICAgICcxIFRoZXNzYWxvbmlhbnMnLCAnMiBUaGVzc2Fsb25pYW5zJywgJzEgVGltb3RoeScsICcyIFRpbW90aHknLFxuICAgICAgICAnVGl0dXMnLCAnUGhpbGVtb24nLCAnSGVicmV3cycsICdKYW1lcycsICcxIFBldGVyJyxcbiAgICAgICAgJzIgUGV0ZXInLCAnMSBKb2huJywgJzIgSm9obicsICczIEpvaG4nLCAnSnVkZScsXG4gICAgICAgICdSZXZlbGF0aW9uJ1xuICAgIF07XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbiwgZGF0YVBhdGg6IHN0cmluZyA9ICdkYXRhJykge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5kYXRhUGF0aCA9IGRhdGFQYXRoO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0JpYmxlTGlua10gVXNpbmcgcGx1Z2luIGRhdGEgcGF0aDogJHt0aGlzLmRhdGFQYXRofWApO1xuICAgICAgICB0aGlzLmRhdGEgPSB7XG4gICAgICAgICAgICB0cmFuc2xhdGlvbnM6IFtdLFxuICAgICAgICAgICAgdmVyc2VzOiBbXSxcbiAgICAgICAgICAgIG5leHRUcmFuc2xhdGlvbklkOiAxLFxuICAgICAgICAgICAgbmV4dFZlcnNlSWQ6IDFcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBCaWJsZSBkYXRhYmFzZTonLCBlcnJvcik7XG4gICAgICAgICAgICAvLyBFdmVuIGlmIGluaXRpYWxpemF0aW9uIGZhaWxzLCBtYXJrIGFzIGluaXRpYWxpemVkIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5iYXNlUGF0aCwgJy5vYnNpZGlhbicsICdwbHVnaW5zJywgJ29ic2lkaWFuLWJpYmxlbGluaycsIHRoaXMuZGF0YVBhdGgsICdiaWJsZV9kYXRhLmpzb24nKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQmlibGVMaW5rXSBbbG9hZERhdGFdIENoZWNraW5nIGZvciBkYXRhIGZpbGUgYXQ6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4Jyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtCaWJsZUxpbmtdIFtsb2FkRGF0YV0gRmlsZSBmb3VuZC4gRmlyc3QgMjAwIGNoYXJzOmAsIGNvbnRlbnQuc2xpY2UoMCwgMjAwKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0JpYmxlTGlua10gW2xvYWREYXRhXSBMb2FkZWQ6ICR7dGhpcy5kYXRhLnRyYW5zbGF0aW9ucy5sZW5ndGh9IHRyYW5zbGF0aW9ucywgJHt0aGlzLmRhdGEudmVyc2VzLmxlbmd0aH0gdmVyc2VzYCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQmlibGVMaW5rXSBbbG9hZERhdGFdIE5vIGV4aXN0aW5nIEJpYmxlIGRhdGEgZmlsZSBmb3VuZCwgc3RhcnRpbmcgZnJlc2gnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIElmIGZpbGUgZG9lc24ndCBleGlzdCBvciBpcyBjb3JydXB0ZWQsIHN0YXJ0IHdpdGggZW1wdHkgZGF0YVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tCaWJsZUxpbmtdIFtsb2FkRGF0YV0gU3RhcnRpbmcgd2l0aCBmcmVzaCBCaWJsZSBkYXRhYmFzZSBkdWUgdG8gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmVuc3VyZURpcmVjdG9yeUV4aXN0cygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5iYXNlUGF0aCwgJy5vYnNpZGlhbicsICdwbHVnaW5zJywgJ29ic2lkaWFuLWJpYmxlbGluaycsIHRoaXMuZGF0YVBhdGgsICdiaWJsZV9kYXRhLmpzb24nKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEsIG51bGwsIDIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtCaWJsZUxpbmtdIFtzYXZlRGF0YV0gU2F2aW5nIHRvOiAke2ZpbGVQYXRofWApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtCaWJsZUxpbmtdIFtzYXZlRGF0YV0gRGF0YSAoZmlyc3QgMjAwIGNoYXJzKTpgLCBjb250ZW50LnNsaWNlKDAsIDIwMCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBXcml0ZSB0byBmaWxlIHVzaW5nIE5vZGUuanMgZnNcbiAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGNvbnRlbnQsICd1dGY4Jyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0JpYmxlTGlua10gW3NhdmVEYXRhXSBCaWJsZSBkYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseTogJHt0aGlzLmRhdGEudHJhbnNsYXRpb25zLmxlbmd0aH0gdHJhbnNsYXRpb25zLCAke3RoaXMuZGF0YS52ZXJzZXMubGVuZ3RofSB2ZXJzZXNgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaWJsZUxpbmtdIFtzYXZlRGF0YV0gRmFpbGVkIHRvIHNhdmUgQmlibGUgZGF0YTonLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNVbmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc2F2ZSBCaWJsZSBkYXRhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNVbmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZW5zdXJlRGlyZWN0b3J5RXhpc3RzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGlyUGF0aCA9IHBhdGguam9pbih0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5iYXNlUGF0aCwgJy5vYnNpZGlhbicsICdwbHVnaW5zJywgJ29ic2lkaWFuLWJpYmxlbGluaycsIHRoaXMuZGF0YVBhdGgpO1xuICAgICAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGRpclBhdGgpKSB7XG4gICAgICAgICAgICAgICAgZnMubWtkaXJTeW5jKGRpclBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQmlibGVMaW5rXSBDcmVhdGVkIGRpcmVjdG9yeTogJHtkaXJQYXRofWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0JpYmxlTGlua10gRGlyZWN0b3J5IGNyZWF0aW9uIGVycm9yIChtYXkgYWxyZWFkeSBleGlzdCk6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRyYW5zbGF0aW9ucygpOiBUcmFuc2xhdGlvbltdIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmRhdGEudHJhbnNsYXRpb25zXS5zb3J0KChhLCBiKSA9PiBhLmFiYnJldmlhdGlvbi5sb2NhbGVDb21wYXJlKGIuYWJicmV2aWF0aW9uKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEJvb2tzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgYm9va3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgZm9yIChjb25zdCB2ZXJzZSBvZiB0aGlzLmRhdGEudmVyc2VzKSB7XG4gICAgICAgICAgICBib29rcy5hZGQodmVyc2UuYm9vayk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNvcnQgYm9va3MgaW4gY2hyb25vbG9naWNhbCBvcmRlclxuICAgICAgICBjb25zdCBib29rQXJyYXkgPSBBcnJheS5mcm9tKGJvb2tzKTtcbiAgICAgICAgcmV0dXJuIGJvb2tBcnJheS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhSW5kZXggPSBCaWJsZURhdGFiYXNlLkNIUk9OT0xPR0lDQUxfQk9PS19PUkRFUi5pbmRleE9mKGEpO1xuICAgICAgICAgICAgY29uc3QgYkluZGV4ID0gQmlibGVEYXRhYmFzZS5DSFJPTk9MT0dJQ0FMX0JPT0tfT1JERVIuaW5kZXhPZihiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWYgYm90aCBib29rcyBhcmUgaW4gdGhlIGNocm9ub2xvZ2ljYWwgb3JkZXIsIHNvcnQgYnkgdGhlaXIgcG9zaXRpb25cbiAgICAgICAgICAgIGlmIChhSW5kZXggIT09IC0xICYmIGJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYUluZGV4IC0gYkluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiBvbmx5IG9uZSBib29rIGlzIGluIHRoZSBjaHJvbm9sb2dpY2FsIG9yZGVyLCBwcmlvcml0aXplIGl0XG4gICAgICAgICAgICBpZiAoYUluZGV4ICE9PSAtMSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKGJJbmRleCAhPT0gLTEpIHJldHVybiAxO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiBuZWl0aGVyIGJvb2sgaXMgaW4gdGhlIGNocm9ub2xvZ2ljYWwgb3JkZXIsIHNvcnQgYWxwaGFiZXRpY2FsbHlcbiAgICAgICAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDaGFwdGVyc0ZvckJvb2soYm9vazogc3RyaW5nLCB0cmFuc2xhdGlvbkFiYnI6IHN0cmluZyk6IG51bWJlcltdIHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSB0aGlzLmRhdGEudHJhbnNsYXRpb25zLmZpbmQodCA9PiB0LmFiYnJldmlhdGlvbiA9PT0gdHJhbnNsYXRpb25BYmJyKTtcbiAgICAgICAgaWYgKCF0cmFuc2xhdGlvbikgcmV0dXJuIFtdO1xuXG4gICAgICAgIGNvbnN0IGNoYXB0ZXJzID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGZvciAoY29uc3QgdmVyc2Ugb2YgdGhpcy5kYXRhLnZlcnNlcykge1xuICAgICAgICAgICAgaWYgKHZlcnNlLnRyYW5zbGF0aW9uX2lkID09PSB0cmFuc2xhdGlvbi5pZCAmJiB2ZXJzZS5ib29rID09PSBib29rKSB7XG4gICAgICAgICAgICAgICAgY2hhcHRlcnMuYWRkKHZlcnNlLmNoYXB0ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKGNoYXB0ZXJzKS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFZlcnNlc0ZvckNoYXB0ZXIoYm9vazogc3RyaW5nLCBjaGFwdGVyOiBudW1iZXIsIHRyYW5zbGF0aW9uQWJicjogc3RyaW5nKTogbnVtYmVyW10ge1xuICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHRoaXMuZGF0YS50cmFuc2xhdGlvbnMuZmluZCh0ID0+IHQuYWJicmV2aWF0aW9uID09PSB0cmFuc2xhdGlvbkFiYnIpO1xuICAgICAgICBpZiAoIXRyYW5zbGF0aW9uKSByZXR1cm4gW107XG5cbiAgICAgICAgY29uc3QgdmVyc2VzID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGZvciAoY29uc3QgdmVyc2Ugb2YgdGhpcy5kYXRhLnZlcnNlcykge1xuICAgICAgICAgICAgaWYgKHZlcnNlLnRyYW5zbGF0aW9uX2lkID09PSB0cmFuc2xhdGlvbi5pZCAmJiBcbiAgICAgICAgICAgICAgICB2ZXJzZS5ib29rID09PSBib29rICYmIFxuICAgICAgICAgICAgICAgIHZlcnNlLmNoYXB0ZXIgPT09IGNoYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICB2ZXJzZXMuYWRkKHZlcnNlLnZlcnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh2ZXJzZXMpLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VmVyc2UoYm9vazogc3RyaW5nLCBjaGFwdGVyOiBudW1iZXIsIHZlcnNlOiBudW1iZXIsIHRyYW5zbGF0aW9uQWJicjogc3RyaW5nKTogVmVyc2UgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSB0aGlzLmRhdGEudHJhbnNsYXRpb25zLmZpbmQodCA9PiB0LmFiYnJldmlhdGlvbiA9PT0gdHJhbnNsYXRpb25BYmJyKTtcbiAgICAgICAgaWYgKCF0cmFuc2xhdGlvbikgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS52ZXJzZXMuZmluZCh2ID0+IFxuICAgICAgICAgICAgdi50cmFuc2xhdGlvbl9pZCA9PT0gdHJhbnNsYXRpb24uaWQgJiYgXG4gICAgICAgICAgICB2LmJvb2sgPT09IGJvb2sgJiYgXG4gICAgICAgICAgICB2LmNoYXB0ZXIgPT09IGNoYXB0ZXIgJiYgXG4gICAgICAgICAgICB2LnZlcnNlID09PSB2ZXJzZVxuICAgICAgICApIHx8IG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGFkZFRyYW5zbGF0aW9uKG5hbWU6IHN0cmluZywgYWJicmV2aWF0aW9uOiBzdHJpbmcsIGxhbmd1YWdlOiBzdHJpbmcgPSAnRW5nbGlzaCcsIGNhdGVnb3J5OiBzdHJpbmcgPSAnU3RhbmRhcmQnLCBwcm9jZXNzaW5nUnVsZXM6IFByb2Nlc3NpbmdSdWxlW10gPSBbXSk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRyYW5zbGF0aW9uIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5kYXRhLnRyYW5zbGF0aW9ucy5maW5kKHQgPT4gdC5hYmJyZXZpYXRpb24gPT09IGFiYnJldmlhdGlvbik7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcmFuc2xhdGlvbiB3aXRoIGFiYnJldmlhdGlvbiAnJHthYmJyZXZpYXRpb259JyBhbHJlYWR5IGV4aXN0c2ApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuZGF0YS5uZXh0VHJhbnNsYXRpb25JZCsrO1xuICAgICAgICB0aGlzLmRhdGEudHJhbnNsYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgICAgIHByb2Nlc3NpbmdSdWxlc1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBBZGRlZCB0cmFuc2xhdGlvbjogJHtuYW1lfSAoJHthYmJyZXZpYXRpb259KSB3aXRoIElEICR7aWR9YCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGVUcmFuc2xhdGlvbihpZDogbnVtYmVyLCBuYW1lOiBzdHJpbmcsIGFiYnJldmlhdGlvbjogc3RyaW5nLCBsYW5ndWFnZTogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nLCBwcm9jZXNzaW5nUnVsZXM6IFByb2Nlc3NpbmdSdWxlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSB0aGlzLmRhdGEudHJhbnNsYXRpb25zLmZpbmQodCA9PiB0LmlkID09PSBpZCk7XG4gICAgICAgIGlmICghdHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNsYXRpb24gbm90IGZvdW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBhYmJyZXZpYXRpb24gaXMgY2hhbmdpbmcsIGNoZWNrIGlmIG5ldyBvbmUgZXhpc3RzXG4gICAgICAgIGlmICh0cmFuc2xhdGlvbi5hYmJyZXZpYXRpb24gIT09IGFiYnJldmlhdGlvbiAmJiBcbiAgICAgICAgICAgIHRoaXMuZGF0YS50cmFuc2xhdGlvbnMuc29tZSh0ID0+IHQuYWJicmV2aWF0aW9uID09PSBhYmJyZXZpYXRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zbGF0aW9uIGFiYnJldmlhdGlvbiBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHRyYW5zbGF0aW9uXG4gICAgICAgIHRyYW5zbGF0aW9uLm5hbWUgPSBuYW1lO1xuICAgICAgICB0cmFuc2xhdGlvbi5hYmJyZXZpYXRpb24gPSBhYmJyZXZpYXRpb247XG4gICAgICAgIHRyYW5zbGF0aW9uLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgIHRyYW5zbGF0aW9uLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIHRyYW5zbGF0aW9uLnByb2Nlc3NpbmdSdWxlcyA9IHByb2Nlc3NpbmdSdWxlcztcblxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGFkZFZlcnNlKHRyYW5zbGF0aW9uSWQ6IG51bWJlciwgYm9vazogc3RyaW5nLCBjaGFwdGVyOiBudW1iZXIsIHZlcnNlOiBudW1iZXIsIHRleHQ6IHN0cmluZywgc2F2ZUltbWVkaWF0ZWx5OiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmRhdGEudmVyc2VzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IHRoaXMuZGF0YS5uZXh0VmVyc2VJZCsrLFxuICAgICAgICAgICAgdHJhbnNsYXRpb25faWQ6IHRyYW5zbGF0aW9uSWQsXG4gICAgICAgICAgICBib29rLFxuICAgICAgICAgICAgY2hhcHRlcixcbiAgICAgICAgICAgIHZlcnNlLFxuICAgICAgICAgICAgdGV4dFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNhdmVJbW1lZGlhdGVseSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGFkZFZlcnNlc0JhdGNoKHZlcnNlczogQXJyYXk8e3RyYW5zbGF0aW9uSWQ6IG51bWJlciwgYm9vazogc3RyaW5nLCBjaGFwdGVyOiBudW1iZXIsIHZlcnNlOiBudW1iZXIsIHRleHQ6IHN0cmluZ30+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh2ZXJzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0JpYmxlTGlua10gTm8gdmVyc2VzIHRvIGFkZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGFydElkID0gdGhpcy5kYXRhLm5leHRWZXJzZUlkO1xuICAgICAgICBmb3IgKGNvbnN0IHZlcnNlIG9mIHZlcnNlcykge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnZlcnNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5kYXRhLm5leHRWZXJzZUlkKyssXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRpb25faWQ6IHZlcnNlLnRyYW5zbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgYm9vazogdmVyc2UuYm9vayxcbiAgICAgICAgICAgICAgICBjaGFwdGVyOiB2ZXJzZS5jaGFwdGVyLFxuICAgICAgICAgICAgICAgIHZlcnNlOiB2ZXJzZS52ZXJzZSxcbiAgICAgICAgICAgICAgICB0ZXh0OiB2ZXJzZS50ZXh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYFtCaWJsZUxpbmtdIEFkZGVkICR7dmVyc2VzLmxlbmd0aH0gdmVyc2VzIChJRHMgJHtzdGFydElkfS0ke3RoaXMuZGF0YS5uZXh0VmVyc2VJZCAtIDF9KWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0JpYmxlTGlua10gVG90YWwgdmVyc2VzIGluIG1lbW9yeTogJHt0aGlzLmRhdGEudmVyc2VzLmxlbmd0aH1gKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSgpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0JpYmxlTGlua10gQWZ0ZXIgc2F2ZSAtIFRvdGFsIHZlcnNlcyBpbiBtZW1vcnk6ICR7dGhpcy5kYXRhLnZlcnNlcy5sZW5ndGh9YCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHJlbW92ZVRyYW5zbGF0aW9uKGFiYnJldmlhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uSW5kZXggPSB0aGlzLmRhdGEudHJhbnNsYXRpb25zLmZpbmRJbmRleCh0ID0+IHQuYWJicmV2aWF0aW9uID09PSBhYmJyZXZpYXRpb24pO1xuICAgICAgICBpZiAodHJhbnNsYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gdGhpcy5kYXRhLnRyYW5zbGF0aW9uc1t0cmFuc2xhdGlvbkluZGV4XTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbW92ZSBhbGwgdmVyc2VzIGZvciB0aGlzIHRyYW5zbGF0aW9uXG4gICAgICAgIHRoaXMuZGF0YS52ZXJzZXMgPSB0aGlzLmRhdGEudmVyc2VzLmZpbHRlcih2ID0+IHYudHJhbnNsYXRpb25faWQgIT09IHRyYW5zbGF0aW9uLmlkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbW92ZSB0cmFuc2xhdGlvblxuICAgICAgICB0aGlzLmRhdGEudHJhbnNsYXRpb25zLnNwbGljZSh0cmFuc2xhdGlvbkluZGV4LCAxKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGltcG9ydEZyb21TUUxpdGUoc3FsaXRlRGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIFRoaXMgd291bGQgcGFyc2UgU1FMaXRlIGRhdGEgYW5kIGNvbnZlcnQgdG8gb3VyIGZvcm1hdFxuICAgICAgICAvLyBGb3Igbm93LCB3ZSdsbCBpbXBsZW1lbnQgYSBiYXNpYyBzdHJ1Y3R1cmVcbiAgICAgICAgaWYgKHNxbGl0ZURhdGEudHJhbnNsYXRpb25zICYmIHNxbGl0ZURhdGEudmVyc2VzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyYW5zbGF0aW9uIG9mIHNxbGl0ZURhdGEudHJhbnNsYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRUcmFuc2xhdGlvbih0cmFuc2xhdGlvbi5uYW1lLCB0cmFuc2xhdGlvbi5hYmJyZXZpYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB2ZXJzZXNUb0FkZDogQXJyYXk8e3RyYW5zbGF0aW9uSWQ6IG51bWJlciwgYm9vazogc3RyaW5nLCBjaGFwdGVyOiBudW1iZXIsIHZlcnNlOiBudW1iZXIsIHRleHQ6IHN0cmluZ30+ID0gW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmVyc2Ugb2Ygc3FsaXRlRGF0YS52ZXJzZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHRoaXMuZGF0YS50cmFuc2xhdGlvbnMuZmluZCh0ID0+IHQuaWQgPT09IHZlcnNlLnRyYW5zbGF0aW9uX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2VzVG9BZGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbklkOiB0cmFuc2xhdGlvbi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2s6IHZlcnNlLmJvb2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyOiB2ZXJzZS5jaGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2U6IHZlcnNlLnZlcnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdmVyc2UudGV4dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh2ZXJzZXNUb0FkZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRWZXJzZXNCYXRjaCh2ZXJzZXNUb0FkZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgaW1wb3J0RnJvbVhNTCh4bWxEYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gVGhpcyB3b3VsZCBwYXJzZSBYTUwgQmlibGUgZGF0YSBhbmQgY29udmVydCB0byBvdXIgZm9ybWF0XG4gICAgICAgIC8vIEltcGxlbWVudGF0aW9uIHdvdWxkIGRlcGVuZCBvbiB0aGUgWE1MIHN0cnVjdHVyZVxuICAgICAgICBjb25zb2xlLmxvZygnWE1MIGltcG9ydCBub3QgeWV0IGltcGxlbWVudGVkJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERhdGFiYXNlU3RhdHMoKTogeyB0cmFuc2xhdGlvbnM6IG51bWJlcjsgdmVyc2VzOiBudW1iZXIgfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHRoaXMuZGF0YS50cmFuc2xhdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgdmVyc2VzOiB0aGlzLmRhdGEudmVyc2VzLmxlbmd0aFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyB2ZXJpZnlUcmFuc2xhdGlvbkV4aXN0cyhhYmJyZXZpYXRpb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnRyYW5zbGF0aW9ucy5zb21lKHQgPT4gdC5hYmJyZXZpYXRpb24gPT09IGFiYnJldmlhdGlvbik7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRyYW5zbGF0aW9uU3RhdHMoYWJicmV2aWF0aW9uOiBzdHJpbmcpOiB7IG5hbWU6IHN0cmluZzsgdmVyc2VDb3VudDogbnVtYmVyOyBib29rczogc3RyaW5nW10gfSB8IG51bGwge1xuICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHRoaXMuZGF0YS50cmFuc2xhdGlvbnMuZmluZCh0ID0+IHQuYWJicmV2aWF0aW9uID09PSBhYmJyZXZpYXRpb24pO1xuICAgICAgICBpZiAoIXRyYW5zbGF0aW9uKSByZXR1cm4gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uVmVyc2VzID0gdGhpcy5kYXRhLnZlcnNlcy5maWx0ZXIodiA9PiB2LnRyYW5zbGF0aW9uX2lkID09PSB0cmFuc2xhdGlvbi5pZCk7XG4gICAgICAgIGNvbnN0IGJvb2tzID0gWy4uLm5ldyBTZXQodHJhbnNsYXRpb25WZXJzZXMubWFwKHYgPT4gdi5ib29rKSldLnNvcnQoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0cmFuc2xhdGlvbi5uYW1lLFxuICAgICAgICAgICAgdmVyc2VDb3VudDogdHJhbnNsYXRpb25WZXJzZXMubGVuZ3RoLFxuICAgICAgICAgICAgYm9va3NcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXBwbHlQcm9jZXNzaW5nUnVsZXModGV4dDogc3RyaW5nLCB0cmFuc2xhdGlvbkFiYnI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gdGhpcy5kYXRhLnRyYW5zbGF0aW9ucy5maW5kKHQgPT4gdC5hYmJyZXZpYXRpb24gPT09IHRyYW5zbGF0aW9uQWJicik7XG4gICAgICAgIGlmICghdHJhbnNsYXRpb24gfHwgIXRyYW5zbGF0aW9uLnByb2Nlc3NpbmdSdWxlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcHJvY2Vzc2VkVGV4dCA9IHRleHQ7XG4gICAgICAgIGZvciAoY29uc3QgcnVsZSBvZiB0cmFuc2xhdGlvbi5wcm9jZXNzaW5nUnVsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHJ1bGUucmVnZXgsICdnJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuZXNjYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZFRleHQgPSBwcm9jZXNzZWRUZXh0LnJlcGxhY2UocmVnZXgsICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhcmdzOiBbbWF0Y2gsIGdyb3VwMSwgZ3JvdXAyLCAuLi4sIG9mZnNldCwgc3RyaW5nXVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJ1bGUuZm9ybWF0dGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJncy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IGFyZ3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNjYXBlZCA9IHRoaXMuZXNjYXBlSHRtbChncm91cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cChgXFxcXCQke2l9YCwgJ2cnKSwgZXNjYXBlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkJiBmb3IgdGhlIHdob2xlIG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFwkJi9nLCB0aGlzLmVzY2FwZUh0bWwoYXJnc1swXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dCA9IHByb2Nlc3NlZFRleHQucmVwbGFjZShyZWdleCwgcnVsZS5mb3JtYXR0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgSW52YWxpZCByZWdleCBpbiBwcm9jZXNzaW5nIHJ1bGUgZm9yICR7dHJhbnNsYXRpb25BYmJyfTogJHtydWxlLnJlZ2V4fWAsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvY2Vzc2VkVGV4dDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGVzY2FwZUh0bWwoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1smPD5cXFtcXF1dL2csIChjKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICAgICAgICBjYXNlICcmJzogcmV0dXJuICcmYW1wOyc7XG4gICAgICAgICAgICAgICAgY2FzZSAnPCc6IHJldHVybiAnJmx0Oyc7XG4gICAgICAgICAgICAgICAgY2FzZSAnPic6IHJldHVybiAnJmd0Oyc7XG4gICAgICAgICAgICAgICAgY2FzZSAnWyc6IHJldHVybiAnJiM5MTsnO1xuICAgICAgICAgICAgICAgIGNhc2UgJ10nOiByZXR1cm4gJyYjOTM7JztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERhdGFGaWxlUGF0aCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gcGF0aC5qb2luKHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmJhc2VQYXRoLCAnLm9ic2lkaWFuJywgJ3BsdWdpbnMnLCAnb2JzaWRpYW4tYmlibGVsaW5rJywgdGhpcy5kYXRhUGF0aCwgJ2JpYmxlX2RhdGEuanNvbicpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkYXRhRmlsZUV4aXN0cygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZzLmV4aXN0c1N5bmModGhpcy5nZXREYXRhRmlsZVBhdGgoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGNsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmlzVW5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBkYXRhYmFzZSBjbG9zZTonLCBlcnJvcik7XG4gICAgICAgICAgICAvLyBEb24ndCByZS10aHJvdyBkdXJpbmcgY2xvc2UgdG8gcHJldmVudCBwbHVnaW4gdW5sb2FkIGZhaWx1cmVzXG4gICAgICAgIH1cbiAgICB9XG59ICIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBCaWJsZURhdGFiYXNlIH0gZnJvbSAnLi9kYXRhYmFzZSc7XG5pbXBvcnQgQmlibGVMaW5rUGx1Z2luIGZyb20gJy4vbWFpbic7XG5cbmV4cG9ydCBjbGFzcyBCaWJsZVNlbGVjdG9yTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEJvb2s6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc2VsZWN0ZWRTdGFydENoYXB0ZXI6IG51bWJlciA9IDE7XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEVuZENoYXB0ZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc2VsZWN0ZWRTdGFydFZlcnNlOiBudW1iZXIgPSAxO1xuICAgIHByaXZhdGUgc2VsZWN0ZWRFbmRWZXJzZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBzZWxlY3RlZFRyYW5zbGF0aW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHNlbGVjdGVkT3V0cHV0VHlwZTogJ3RleHQnIHwgJ2xpbmsnIHwgJ2NvZGVibG9jaycgPSAnY29kZWJsb2NrJztcbiAgICBwcml2YXRlIHNlbGVjdGVkT3B0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIGRiOiBCaWJsZURhdGFiYXNlO1xuXG4gICAgLy8gQWRkIHRoZXNlIGZpZWxkcyB0byB0aGUgY2xhc3NcbiAgICBwcml2YXRlIHJlZmVyZW5jZUlucHV0OiBpbXBvcnQoJ29ic2lkaWFuJykuVGV4dENvbXBvbmVudDtcbiAgICBwcml2YXRlIHJlZmVyZW5jZVdhcm5pbmc6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgdHJhbnNsYXRpb25Ecm9wZG93bjogaW1wb3J0KCdvYnNpZGlhbicpLkRyb3Bkb3duQ29tcG9uZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBwcml2YXRlIHBsdWdpbjogQmlibGVMaW5rUGx1Z2luLFxuICAgICAgICBwcml2YXRlIG9uU3VibWl0OiAocmVmZXJlbmNlOiBzdHJpbmcsIHRyYW5zbGF0aW9uOiBzdHJpbmcsIG91dHB1dFR5cGU6ICd0ZXh0JyB8ICdsaW5rJyB8ICdjb2RlYmxvY2snLCBvcHRpb25zOiBzdHJpbmdbXSkgPT4gdm9pZFxuICAgICkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmRiID0gcGx1Z2luLmRiO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgd2l0aCBwZXJzaXN0ZW50IHNldHRpbmdzXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPdXRwdXRUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kYWxPdXRwdXRUeXBlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RhbE9wdGlvbnNdO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdJbnNlcnQgQmlibGUgUmVmZXJlbmNlJyB9KTtcblxuICAgICAgICAvLyBEaXJlY3QgUmVmZXJlbmNlIElucHV0XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVmZXJlbmNlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciBhIHJlZmVyZW5jZSAoZS5nLiwgSm9obiAxOjEzLTI1KSBvciB1c2UgdGhlIHNlbGVjdG9ycyBiZWxvdy4nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignZS5nLiwgSm9obiAxOjEzLTI1JylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZWZlcmVuY2VJbnB1dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmZXJlbmNlSW5wdXQgPSB0ZXh0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlV2FybmluZyA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdiaWJsZWxpbmstcmVmLXdhcm5pbmcnIH0pO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZVdhcm5pbmcuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC13YXJuaW5nKSc7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlV2FybmluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgIC8vIFRyYW5zbGF0aW9uIFNlbGVjdGlvblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVHJhbnNsYXRpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSBhIEJpYmxlIHRyYW5zbGF0aW9uJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGlvbkRyb3Bkb3duID0gZHJvcGRvd247XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRpb25zID0gdGhpcy5kYi5nZXRUcmFuc2xhdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbk9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbnMuZm9yRWFjaCh0cmFucyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uT3B0aW9uc1t0cmFucy5hYmJyZXZpYXRpb25dID0gYCR7dHJhbnMubmFtZX0gKCR7dHJhbnMuYWJicmV2aWF0aW9ufSlgO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb25zKHRyYW5zbGF0aW9uT3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRUcmFuc2xhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUcmFuc2xhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCb29rR3JpZChib29rR3JpZENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNoYXB0ZXJHcmlkKGNoYXB0ZXJHcmlkQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmVyc2VHcmlkKHZlcnNlR3JpZENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm9vayBTZWxlY3Rpb24gKEdyaWQpXG4gICAgICAgIGNvbnN0IGJvb2tHcmlkQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2JpYmxlbGluay1ib29rLWdyaWQtY29udGFpbmVyJyB9KTtcbiAgICAgICAgdGhpcy5yZW5kZXJCb29rR3JpZChib29rR3JpZENvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gQ2hhcHRlciBTZWxlY3Rpb24gKEdyaWQpXG4gICAgICAgIGNvbnN0IGNoYXB0ZXJHcmlkQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2JpYmxlbGluay1jaGFwdGVyLWdyaWQtY29udGFpbmVyJyB9KTtcbiAgICAgICAgdGhpcy5yZW5kZXJDaGFwdGVyR3JpZChjaGFwdGVyR3JpZENvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gVmVyc2UgU2VsZWN0aW9uIChHcmlkKVxuICAgICAgICBjb25zdCB2ZXJzZUdyaWRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYmlibGVsaW5rLXZlcnNlLWdyaWQtY29udGFpbmVyJyB9KTtcbiAgICAgICAgdGhpcy5yZW5kZXJWZXJzZUdyaWQodmVyc2VHcmlkQ29udGFpbmVyKTtcblxuICAgICAgICAvLyBPdXRwdXQgVHlwZSBTZWxlY3Rpb25cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ091dHB1dCBUeXBlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2UgaG93IHRvIGluc2VydCB0aGUgcmVmZXJlbmNlJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3RleHQnLCAnRnVsbCBWZXJzZSBUZXh0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdsaW5rJywgJ0xpdGVyYWwgV29yZCBMaW5rJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjb2RlYmxvY2snLCAnQ29kZSBCbG9jaycpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRPdXRwdXRUeXBlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPdXRwdXRUeXBlID0gdmFsdWUgYXMgJ3RleHQnIHwgJ2xpbmsnIHwgJ2NvZGVibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGFsT3V0cHV0VHlwZSA9IHRoaXMuc2VsZWN0ZWRPdXRwdXRUeXBlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPcHRpb25zU2VjdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBPcHRpb25zIFNlY3Rpb24gKG9ubHkgZm9yIGNvZGUgYmxvY2tzKVxuICAgICAgICBjb25zdCBvcHRpb25zQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnNTZWN0aW9uKG9wdGlvbnNDb250YWluZXIpO1xuXG5cblxuICAgICAgICAvLyBTdWJtaXQgQnV0dG9uXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdJbnNlcnQnKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRSZWZlcmVuY2UoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQWRkIEVudGVyIGtleSBzdXBwb3J0IGZvciBzdWJtaXNzaW9uXG4gICAgICAgIGlmICh0aGlzLnJlZmVyZW5jZUlucHV0ICYmIHRoaXMucmVmZXJlbmNlSW5wdXQuaW5wdXRFbCkge1xuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VJbnB1dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0UmVmZXJlbmNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmplY3QgbW9kZXJuIENTUyBmb3IgdGhlIG1vZGFsIGdyaWRzIGFuZCBidXR0b25zXG4gICAgICAgIHRoaXMuaW5qZWN0QmlibGVHcmlkU3R5bGVzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbmplY3RCaWJsZUdyaWRTdHlsZXMoKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlibGVsaW5rLW1vZGFsLXN0eWxlJykpIHJldHVybjtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS5pZCA9ICdiaWJsZWxpbmstbW9kYWwtc3R5bGUnO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLmJpYmxlbGluay1ib29rLWdyaWQtY29udGFpbmVyLFxuICAgICAgICAuYmlibGVsaW5rLWNoYXB0ZXItZ3JpZC1jb250YWluZXIsXG4gICAgICAgIC5iaWJsZWxpbmstdmVyc2UtZ3JpZC1jb250YWluZXIge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMS4yZW07XG4gICAgICAgIH1cbiAgICAgICAgLmJpYmxlbGluay1ib29rLWdyaWQsXG4gICAgICAgIC5iaWJsZWxpbmstY2hhcHRlci1ncmlkLFxuICAgICAgICAuYmlibGVsaW5rLXZlcnNlLWdyaWQge1xuICAgICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoOTBweCwgMWZyKSk7XG4gICAgICAgICAgICBnYXA6IDAuNWVtO1xuICAgICAgICAgICAgbWF4LWhlaWdodDogMjAwcHg7XG4gICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgcGFkZGluZzogMC41ZW0gMDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCwgIzIzMjcyZSk7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLmJpYmxlbGluay1ib29rLWJ0bixcbiAgICAgICAgLmJpYmxlbGluay1jaGFwdGVyLWJ0bixcbiAgICAgICAgLmJpYmxlbGluay12ZXJzZS1idG4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LCAjMTgxYTIwKTtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCwgI2UwZTBlMCk7XG4gICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAwLjZlbSAwLjhlbTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLDAsMCwwLjA4KTtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4xNXMsIGNvbG9yIDAuMTVzLCBib3gtc2hhZG93IDAuMTVzLCBib3JkZXIgMC4xNXM7XG4gICAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAuYmlibGVsaW5rLWJvb2stYnRuOmhvdmVyLFxuICAgICAgICAuYmlibGVsaW5rLWNoYXB0ZXItYnRuOmhvdmVyLFxuICAgICAgICAuYmlibGVsaW5rLXZlcnNlLWJ0bjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQsICMzYTdhZmUpO1xuICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgIH1cbiAgICAgICAgLmJpYmxlbGluay1ib29rLWJ0bi5zZWxlY3RlZCxcbiAgICAgICAgLmJpYmxlbGluay1jaGFwdGVyLWJ0bi5zZWxlY3RlZCxcbiAgICAgICAgLmJpYmxlbGluay12ZXJzZS1idG4uc2VsZWN0ZWQge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItYWNjZW50LCAjM2E3YWZlKTtcbiAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWNvbG9yLWFjY2VudC0yLCAjMWU0ZmEzKTtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDU4LDEyMiwyNTQsMC4xNSk7XG4gICAgICAgIH1cbiAgICAgICAgLmJpYmxlbGluay1zZWxlY3RhbGwtYnRuIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIsICMyYTJkMzQpO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQsICNiMGIwYjApO1xuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgcGFkZGluZzogMC40ZW0gMC44ZW07XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cywgY29sb3IgMC4xNXM7XG4gICAgICAgIH1cbiAgICAgICAgLmJpYmxlbGluay1zZWxlY3RhbGwtYnRuOmhvdmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCwgIzNhN2FmZSk7XG4gICAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgfVxuICAgICAgICAuYmlibGVsaW5rLWJvb2stZ3JpZDo6LXdlYmtpdC1zY3JvbGxiYXIsXG4gICAgICAgIC5iaWJsZWxpbmstY2hhcHRlci1ncmlkOjotd2Via2l0LXNjcm9sbGJhcixcbiAgICAgICAgLmJpYmxlbGluay12ZXJzZS1ncmlkOjotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgICAgICB3aWR0aDogOHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLmJpYmxlbGluay1ib29rLWdyaWQ6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iLFxuICAgICAgICAuYmlibGVsaW5rLWNoYXB0ZXItZ3JpZDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIsXG4gICAgICAgIC5iaWJsZWxpbmstdmVyc2UtZ3JpZDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIsICM0NDQpO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB9XG4gICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkge1xuICAgICAgICAgICAgLmJpYmxlbGluay1ib29rLWdyaWQsXG4gICAgICAgICAgICAuYmlibGVsaW5rLWNoYXB0ZXItZ3JpZCxcbiAgICAgICAgICAgIC5iaWJsZWxpbmstdmVyc2UtZ3JpZCB7XG4gICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCg2MHB4LCAxZnIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstYm9vay1idG4sXG4gICAgICAgICAgICAuYmlibGVsaW5rLWNoYXB0ZXItYnRuLFxuICAgICAgICAgICAgLmJpYmxlbGluay12ZXJzZS1idG4ge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNWVtIDAuNWVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cblxuICAgIC8vIEJvb2sgZ3JpZCBzZWxlY3Rpb25cbiAgICBwcml2YXRlIHNlbGVjdGVkQm9va3M6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICAgIHByaXZhdGUgcmVuZGVyQm9va0dyaWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgY29uc3QgYm9va3MgPSB0aGlzLmRiLmdldEJvb2tzKCk7XG4gICAgICAgIGlmICghYm9va3MgfHwgYm9va3MubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGdyaWQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmlibGVsaW5rLWJvb2stZ3JpZCcgfSk7XG4gICAgICAgIGJvb2tzLmZvckVhY2goYm9vayA9PiB7XG4gICAgICAgICAgICBjb25zdCBidG4gPSBncmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogYm9vayxcbiAgICAgICAgICAgICAgICBjbHM6ICdiaWJsZWxpbmstYm9vay1idG4nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJ0bi5zZXRBdHRyKCd0aXRsZScsIGJvb2spO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRCb29rID09PSBib29rKSB7XG4gICAgICAgICAgICAgICAgYnRuLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rID0gYm9vaztcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyID0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRW5kQ2hhcHRlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFbmRWZXJzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCb29rR3JpZChjb250YWluZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2hhcHRlckdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJpYmxlbGluay1jaGFwdGVyLWdyaWQtY29udGFpbmVyJykpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmVyc2VHcmlkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iaWJsZWxpbmstdmVyc2UtZ3JpZC1jb250YWluZXInKSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZWZlcmVuY2VJbnB1dEZyb21TZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnVwZGF0ZVByZXZpZXcoKTsgLy8gUmVtb3ZlZCBiZWNhdXNlIHVwZGF0ZVByZXZpZXcgZG9lcyBub3QgZXhpc3RcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE11bHRpLXNlbGVjdCBmb3IgY2hhcHRlcnNcbiAgICBwcml2YXRlIHNlbGVjdGVkQ2hhcHRlcnM6IFNldDxudW1iZXI+ID0gbmV3IFNldCgpO1xuICAgIHByaXZhdGUgcmVuZGVyQ2hhcHRlckdyaWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkQm9vaykgcmV0dXJuO1xuICAgICAgICBjb25zdCBjaGFwdGVycyA9IHRoaXMuZGIuZ2V0Q2hhcHRlcnNGb3JCb29rKHRoaXMuc2VsZWN0ZWRCb29rLCB0aGlzLnNlbGVjdGVkVHJhbnNsYXRpb24gfHwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFRyYW5zbGF0aW9uKTtcbiAgICAgICAgaWYgKCFjaGFwdGVycyB8fCBjaGFwdGVycy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgY29uc3QgZ3JpZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdiaWJsZWxpbmstY2hhcHRlci1ncmlkJyB9KTtcbiAgICAgICAgLy8gU2VsZWN0IEFsbCBidXR0b25cbiAgICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTZWxlY3QgQWxsIENoYXB0ZXJzJywgY2xzOiAnYmlibGVsaW5rLXNlbGVjdGFsbC1idG4nIH0pO1xuICAgICAgICBzZWxlY3RBbGxCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFwdGVycyA9IG5ldyBTZXQoY2hhcHRlcnMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDaGFwdGVyR3JpZChjb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJWZXJzZUdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJpYmxlbGluay12ZXJzZS1ncmlkLWNvbnRhaW5lcicpKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVmZXJlbmNlSW5wdXRGcm9tU2VsZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNoYXB0ZXJzLmZvckVhY2goY2hhcHRlciA9PiB7XG4gICAgICAgICAgICBjb25zdCBidG4gPSBncmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogY2hhcHRlci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGNsczogJ2JpYmxlbGluay1jaGFwdGVyLWJ0bidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDaGFwdGVycy5oYXMoY2hhcHRlcikgfHwgdGhpcy5zZWxlY3RlZFN0YXJ0Q2hhcHRlciA9PT0gY2hhcHRlciB8fCAodGhpcy5zZWxlY3RlZEVuZENoYXB0ZXIgJiYgY2hhcHRlciA+PSB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyICYmIGNoYXB0ZXIgPD0gdGhpcy5zZWxlY3RlZEVuZENoYXB0ZXIpKSB7XG4gICAgICAgICAgICAgICAgYnRuLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2hhcHRlcnMuaGFzKGNoYXB0ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhcHRlcnMuZGVsZXRlKGNoYXB0ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENoYXB0ZXJzLmFkZChjaGFwdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zaGlmdEtleSAmJiB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5taW4odGhpcy5zZWxlY3RlZFN0YXJ0Q2hhcHRlciwgY2hhcHRlcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWF4KHRoaXMuc2VsZWN0ZWRTdGFydENoYXB0ZXIsIGNoYXB0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjID0gc3RhcnQ7IGMgPD0gZW5kOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFwdGVycy5hZGQoYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhcHRlcnMgPSBuZXcgU2V0KFtjaGFwdGVyXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTdGFydENoYXB0ZXIgPSBjaGFwdGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFbmRDaGFwdGVyID0gY2hhcHRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU3RhcnRWZXJzZSA9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEVuZFZlcnNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNoYXB0ZXJHcmlkKGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWZXJzZUdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJpYmxlbGluay12ZXJzZS1ncmlkLWNvbnRhaW5lcicpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJlZmVyZW5jZUlucHV0RnJvbVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTXVsdGktc2VsZWN0IGZvciB2ZXJzZXNcbiAgICBwcml2YXRlIHNlbGVjdGVkVmVyc2VzOiBTZXQ8bnVtYmVyPiA9IG5ldyBTZXQoKTtcbiAgICBwcml2YXRlIHJlbmRlclZlcnNlR3JpZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRCb29rIHx8ICF0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHZlcnNlcyA9IHRoaXMuZGIuZ2V0VmVyc2VzRm9yQ2hhcHRlcihcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCb29rLFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFN0YXJ0Q2hhcHRlcixcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUcmFuc2xhdGlvbiB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VHJhbnNsYXRpb25cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCF2ZXJzZXMgfHwgdmVyc2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBncmlkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2JpYmxlbGluay12ZXJzZS1ncmlkJyB9KTtcbiAgICAgICAgLy8gU2VsZWN0IEFsbCBidXR0b25cbiAgICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTZWxlY3QgQWxsIFZlcnNlcycsIGNsczogJ2JpYmxlbGluay1zZWxlY3RhbGwtYnRuJyB9KTtcbiAgICAgICAgc2VsZWN0QWxsQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmVyc2VzID0gbmV3IFNldCh2ZXJzZXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJWZXJzZUdyaWQoY29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVmZXJlbmNlSW5wdXRGcm9tU2VsZWN0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIHZlcnNlcy5mb3JFYWNoKHZlcnNlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGdyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB2ZXJzZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGNsczogJ2JpYmxlbGluay12ZXJzZS1idG4nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmVyc2VzLmhhcyh2ZXJzZSkgfHwgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgPT09IHZlcnNlIHx8ICh0aGlzLnNlbGVjdGVkRW5kVmVyc2UgJiYgdmVyc2UgPj0gdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgJiYgdmVyc2UgPD0gdGhpcy5zZWxlY3RlZEVuZFZlcnNlKSkge1xuICAgICAgICAgICAgICAgIGJ0bi5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZlcnNlcy5oYXModmVyc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmVyc2VzLmRlbGV0ZSh2ZXJzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmVyc2VzLmFkZCh2ZXJzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkgJiYgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBNYXRoLm1pbih0aGlzLnNlbGVjdGVkU3RhcnRWZXJzZSwgdmVyc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1heCh0aGlzLnNlbGVjdGVkU3RhcnRWZXJzZSwgdmVyc2UpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB2ID0gc3RhcnQ7IHYgPD0gZW5kOyB2KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWZXJzZXMuYWRkKHYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZlcnNlcyA9IG5ldyBTZXQoW3ZlcnNlXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTdGFydFZlcnNlID0gdmVyc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEVuZFZlcnNlID0gdmVyc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWZXJzZUdyaWQoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJlZmVyZW5jZUlucHV0RnJvbVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVSZWZlcmVuY2VJbnB1dEZyb21TZWxlY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZmVyZW5jZUlucHV0KSB7XG4gICAgICAgICAgICBsZXQgcmVmID0gJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEJvb2spIHtcbiAgICAgICAgICAgICAgICByZWYgKz0gdGhpcy5zZWxlY3RlZEJvb2s7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDaGFwdGVycy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFwdGVycyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZENoYXB0ZXJzKS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgICAgICAgICAgICAgICAgIHJlZiArPSAnICcgKyBjaGFwdGVycy5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZiArPSAnICcgKyB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZlcnNlcy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZXJzZXMgPSBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRWZXJzZXMpLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICAgICAgICAgICAgICAgICAgcmVmICs9ICc6JyArIHZlcnNlcy5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkU3RhcnRWZXJzZSkge1xuICAgICAgICAgICAgICAgICAgICByZWYgKz0gJzonICsgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VJbnB1dC5zZXRWYWx1ZShyZWYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVDaGFwdGVyRHJvcGRvd24oY29udGFpbmVyPzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkQm9vaykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGNoYXB0ZXJzID0gdGhpcy5kYi5nZXRDaGFwdGVyc0ZvckJvb2sodGhpcy5zZWxlY3RlZEJvb2ssIHRoaXMuc2VsZWN0ZWRUcmFuc2xhdGlvbiB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VHJhbnNsYXRpb24pO1xuICAgICAgICBpZiAoIWNoYXB0ZXJzIHx8IGNoYXB0ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGNvbnRhaW5lciB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhcHRlci1jb250YWluZXInKTtcbiAgICAgICAgaWYgKCF0YXJnZXQpIHJldHVybjtcbiAgICAgICAgdGFyZ2V0LmVtcHR5KCk7XG4gICAgICAgIHRhcmdldC5hZGRDbGFzcygnY2hhcHRlci1jb250YWluZXInKTtcblxuICAgICAgICAvLyBTdGFydCBjaGFwdGVyXG4gICAgICAgIG5ldyBTZXR0aW5nKHRhcmdldClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTdGFydCBDaGFwdGVyJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhcHRlck9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICAgICAgICBjaGFwdGVycy5mb3JFYWNoKGNoYXB0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjaGFwdGVyT3B0aW9uc1tjaGFwdGVyLnRvU3RyaW5nKCldID0gY2hhcHRlci50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb25zKGNoYXB0ZXJPcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZWxlY3RlZFN0YXJ0Q2hhcHRlci50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFN0YXJ0Q2hhcHRlciA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZEVuZENoYXB0ZXIgfHwgdGhpcy5zZWxlY3RlZEVuZENoYXB0ZXIgPCB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEVuZENoYXB0ZXIgPSB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFbmRDaGFwdGVyRHJvcGRvd24odGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmVyc2VEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVuZCBjaGFwdGVyXG4gICAgICAgIHRoaXMudXBkYXRlRW5kQ2hhcHRlckRyb3Bkb3duKHRhcmdldCk7XG5cbiAgICAgICAgLy8gSW4gdXBkYXRlQ2hhcHRlckRyb3Bkb3duIGFuZCB1cGRhdGVWZXJzZURyb3Bkb3duLCBhZnRlciBjaGFuZ2luZyBkcm9wZG93bnMsIHVwZGF0ZSB0aGUgdGV4dCBpbnB1dFxuICAgICAgICBpZiAodGhpcy5yZWZlcmVuY2VJbnB1dCkge1xuICAgICAgICAgICAgbGV0IHJlZiA9IHRoaXMuc2VsZWN0ZWRCb29rID8gdGhpcy5zZWxlY3RlZEJvb2sgKyAnICcgKyB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyIDogJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgJiYgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgIT09IDApIHtcbiAgICAgICAgICAgICAgICByZWYgKz0gJzonICsgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRFbmRWZXJzZSAmJiB0aGlzLnNlbGVjdGVkRW5kVmVyc2UgIT09IHRoaXMuc2VsZWN0ZWRTdGFydFZlcnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZiArPSAnLScgKyB0aGlzLnNlbGVjdGVkRW5kVmVyc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VJbnB1dC5zZXRWYWx1ZShyZWYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVFbmRDaGFwdGVyRHJvcGRvd24oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRCb29rKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2hhcHRlcnMgPSB0aGlzLmRiLmdldENoYXB0ZXJzRm9yQm9vayh0aGlzLnNlbGVjdGVkQm9vaywgdGhpcy5zZWxlY3RlZFRyYW5zbGF0aW9uIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRUcmFuc2xhdGlvbik7XG4gICAgICAgIGlmICghY2hhcHRlcnMgfHwgY2hhcHRlcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuZCBDaGFwdGVyJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhcHRlck9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICAgICAgICBjaGFwdGVyc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGMgPT4gYyA+PSB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyKVxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChjaGFwdGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXB0ZXJPcHRpb25zW2NoYXB0ZXIudG9TdHJpbmcoKV0gPSBjaGFwdGVyLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb25zKGNoYXB0ZXJPcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoKHRoaXMuc2VsZWN0ZWRFbmRDaGFwdGVyIHx8IHRoaXMuc2VsZWN0ZWRTdGFydENoYXB0ZXIpLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRW5kQ2hhcHRlciA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmVyc2VEcm9wZG93bigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlVmVyc2VEcm9wZG93bihjb250YWluZXI/OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRCb29rIHx8ICF0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gY29udGFpbmVyIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJzZS1jb250YWluZXInKTtcbiAgICAgICAgaWYgKCF0YXJnZXQpIHJldHVybjtcbiAgICAgICAgdGFyZ2V0LmVtcHR5KCk7XG4gICAgICAgIHRhcmdldC5hZGRDbGFzcygndmVyc2UtY29udGFpbmVyJyk7XG5cbiAgICAgICAgLy8gU3RhcnQgdmVyc2VcbiAgICAgICAgY29uc3Qgc3RhcnRWZXJzZXMgPSB0aGlzLmRiLmdldFZlcnNlc0ZvckNoYXB0ZXIoXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQm9vayxcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTdGFydENoYXB0ZXIsXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVHJhbnNsYXRpb24gfHwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFRyYW5zbGF0aW9uXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHN0YXJ0VmVyc2VzICYmIHN0YXJ0VmVyc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhcmdldClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnU3RhcnQgVmVyc2UnKVxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNlT3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICcwJzogJ0VudGlyZSBDaGFwdGVyJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzdGFydFZlcnNlcy5mb3JFYWNoKHZlcnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNlT3B0aW9uc1t2ZXJzZS50b1N0cmluZygpXSA9IHZlcnNlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbnModmVyc2VPcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRTdGFydFZlcnNlLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNlTnVtID0gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTdGFydFZlcnNlID0gdmVyc2VOdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNlTnVtID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFbmRWZXJzZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFbmRDaGFwdGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFbmRWZXJzZURyb3Bkb3duKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuZCB2ZXJzZSAob25seSBzaG93IGlmIHN0YXJ0IHZlcnNlIGlzIG5vdCAwKVxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRW5kVmVyc2VEcm9wZG93bih0YXJnZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW4gdXBkYXRlQ2hhcHRlckRyb3Bkb3duIGFuZCB1cGRhdGVWZXJzZURyb3Bkb3duLCBhZnRlciBjaGFuZ2luZyBkcm9wZG93bnMsIHVwZGF0ZSB0aGUgdGV4dCBpbnB1dFxuICAgICAgICBpZiAodGhpcy5yZWZlcmVuY2VJbnB1dCkge1xuICAgICAgICAgICAgbGV0IHJlZiA9IHRoaXMuc2VsZWN0ZWRCb29rID8gdGhpcy5zZWxlY3RlZEJvb2sgKyAnICcgKyB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyIDogJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgJiYgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UgIT09IDApIHtcbiAgICAgICAgICAgICAgICByZWYgKz0gJzonICsgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRFbmRWZXJzZSAmJiB0aGlzLnNlbGVjdGVkRW5kVmVyc2UgIT09IHRoaXMuc2VsZWN0ZWRTdGFydFZlcnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZiArPSAnLScgKyB0aGlzLnNlbGVjdGVkRW5kVmVyc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VJbnB1dC5zZXRWYWx1ZShyZWYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVFbmRWZXJzZURyb3Bkb3duKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTdGFydFZlcnNlID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZW5kVmVyc2VzID0gdGhpcy5kYi5nZXRWZXJzZXNGb3JDaGFwdGVyKFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEJvb2ssXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRW5kQ2hhcHRlciB8fCB0aGlzLnNlbGVjdGVkU3RhcnRDaGFwdGVyLFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRyYW5zbGF0aW9uIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRUcmFuc2xhdGlvblxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghZW5kVmVyc2VzIHx8IGVuZFZlcnNlcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5kIFZlcnNlJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmVyc2VPcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgbWluVmVyc2UgPSB0aGlzLnNlbGVjdGVkRW5kQ2hhcHRlciA9PT0gdGhpcy5zZWxlY3RlZFN0YXJ0Q2hhcHRlciA/IHRoaXMuc2VsZWN0ZWRTdGFydFZlcnNlIDogMTtcbiAgICAgICAgICAgICAgICBlbmRWZXJzZXNcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih2ID0+IHYgPj0gbWluVmVyc2UpXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKHZlcnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNlT3B0aW9uc1t2ZXJzZS50b1N0cmluZygpXSA9IHZlcnNlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb25zKHZlcnNlT3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKCh0aGlzLnNlbGVjdGVkRW5kVmVyc2UgfHwgdGhpcy5zZWxlY3RlZFN0YXJ0VmVyc2UpLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRW5kVmVyc2UgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVPcHRpb25zU2VjdGlvbihjb250YWluZXI/OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE91dHB1dFR5cGUgIT09ICdjb2RlYmxvY2snKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gY29udGFpbmVyIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHRpb25zLWNvbnRhaW5lcicpO1xuICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgICAgICB0YXJnZXQuZW1wdHkoKTtcbiAgICAgICAgdGFyZ2V0LmFkZENsYXNzKCdvcHRpb25zLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIHRhcmdldC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb2RlIEJsb2NrIE9wdGlvbnMnIH0pO1xuXG4gICAgICAgIC8vIFZlcnNlIG51bWJlcnNcbiAgICAgICAgbmV3IFNldHRpbmcodGFyZ2V0KVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgVmVyc2UgTnVtYmVycycpXG4gICAgICAgICAgICAuc2V0RGVzYygnSW5jbHVkZSB2ZXJzZSBudW1iZXJzIGluIHRoZSBvdXRwdXQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkT3B0aW9ucy5pbmNsdWRlcygndmVyc2UnKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbigndmVyc2UnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGFsT3B0aW9ucyA9IFsuLi50aGlzLnNlbGVjdGVkT3B0aW9uc107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBDaGFwdGVyIG51bWJlcnNcbiAgICAgICAgbmV3IFNldHRpbmcodGFyZ2V0KVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgQ2hhcHRlciBOdW1iZXJzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdJbmNsdWRlIGNoYXB0ZXIgbnVtYmVycyBpbiB0aGUgb3V0cHV0LicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZWxlY3RlZE9wdGlvbnMuaW5jbHVkZXMoJ2NoYXB0ZXInKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbignY2hhcHRlcicsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kYWxPcHRpb25zID0gWy4uLnRoaXMuc2VsZWN0ZWRPcHRpb25zXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFJlZCBsZXR0ZXIgdGV4dFxuICAgICAgICBuZXcgU2V0dGluZyh0YXJnZXQpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVkIExldHRlciBUZXh0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdIaWdobGlnaHQgd29yZHMgb2YgSmVzdXMgaW4gcmVkLicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZWxlY3RlZE9wdGlvbnMuaW5jbHVkZXMoJ3JlZC10ZXh0JykpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPcHRpb24oJ3JlZC10ZXh0JywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RhbE9wdGlvbnMgPSBbLi4udGhpcy5zZWxlY3RlZE9wdGlvbnNdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gTGluayB0byBCaWJsZSBHYXRld2F5XG4gICAgICAgIG5ldyBTZXR0aW5nKHRhcmdldClcbiAgICAgICAgICAgIC5zZXROYW1lKCdBZGQgRXh0ZXJuYWwgTGluaycpXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRkIGEgbGluayB0byB2aWV3IHRoZSB2ZXJzZSBvbiBCaWJsZSBHYXRld2F5LicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZWxlY3RlZE9wdGlvbnMuaW5jbHVkZXMoJ2xpbmsnKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbignbGluaycsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kYWxPcHRpb25zID0gWy4uLnRoaXMuc2VsZWN0ZWRPcHRpb25zXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlT3B0aW9uKG9wdGlvbjogc3RyaW5nLCBlbmFibGVkOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChlbmFibGVkICYmICF0aGlzLnNlbGVjdGVkT3B0aW9ucy5pbmNsdWRlcyhvcHRpb24pKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy5wdXNoKG9wdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gdGhpcy5zZWxlY3RlZE9wdGlvbnMuZmlsdGVyKG8gPT4gbyAhPT0gb3B0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIGluc2VydFJlZmVyZW5jZSgpIHtcbiAgICAgICAgLy8gQWx3YXlzIHVzZSB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgcmVmZXJlbmNlIGlucHV0XG4gICAgICAgIGNvbnN0IHJlZlZhbHVlID0gdGhpcy5yZWZlcmVuY2VJbnB1dD8uZ2V0VmFsdWUoKT8udHJpbSgpO1xuICAgICAgICBpZiAoIXJlZlZhbHVlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSByZWZlcmVuY2UnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBVc2Ugc2VsZWN0ZWQgdHJhbnNsYXRpb24gb3IgZGVmYXVsdFxuICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHRoaXMuc2VsZWN0ZWRUcmFuc2xhdGlvbiB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VHJhbnNsYXRpb247XG4gICAgICAgIGlmICghdHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgYSB0cmFuc2xhdGlvbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVzZSBjdXJyZW50IG91dHB1dCB0eXBlIGFuZCBvcHRpb25zXG4gICAgICAgIHRoaXMub25TdWJtaXQocmVmVmFsdWUsIHRyYW5zbGF0aW9uLCB0aGlzLnNlbGVjdGVkT3V0cHV0VHlwZSwgdGhpcy5zZWxlY3RlZE9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoaXMgbWV0aG9kIHRvIGhhbmRsZSByZWZlcmVuY2UgaW5wdXQgYW5kIHN5bmMgZHJvcGRvd25zXG4gICAgcHJpdmF0ZSBoYW5kbGVSZWZlcmVuY2VJbnB1dCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUudHJpbSgpID09PSAnJykge1xuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VXYXJuaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAvLyBDbGVhciBzZWxlY3Rpb25zIHdoZW4gaW5wdXQgaXMgZW1wdHlcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFwdGVycy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZlcnNlcy5jbGVhcigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHJlZmVyZW5jZTogQm9vayBDaGFwdGVyOlZlcnNlWy1WZXJzZV0gb3IgQm9vayBDaGFwdGVyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gdmFsdWUubWF0Y2goL14oWzEtM10/ID9bQS1aYS16IF0rKVxccysoXFxkKykoPzo6KFxcZCspKD86LShcXGQrKSk/KT8kLyk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIHRoaXMucmVmZXJlbmNlV2FybmluZy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB0aGlzLnJlZmVyZW5jZVdhcm5pbmcudGV4dENvbnRlbnQgPSAnVW5yZWNvZ25pemVkIHJlZmVyZW5jZSBmb3JtYXQuJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZmVyZW5jZVdhcm5pbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgY29uc3QgWywgYm9vaywgY2hhcHRlcl0gPSBtYXRjaDtcbiAgICAgICAgY29uc3QgYm9va05hbWUgPSBib29rLnRyaW0oKTtcbiAgICAgICAgY29uc3QgY2hhcHRlck51bSA9IHBhcnNlSW50KGNoYXB0ZXIpO1xuICAgICAgICAvLyBUcnkgdG8gbWF0Y2ggYm9vayB0byBkcm9wZG93blxuICAgICAgICBjb25zdCBib29rcyA9IHRoaXMuZGIuZ2V0Qm9va3MoKTtcbiAgICAgICAgY29uc3QgZm91bmRCb29rID0gYm9va3MuZmluZChiID0+IGIudG9Mb3dlckNhc2UoKSA9PT0gYm9va05hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmICghZm91bmRCb29rKSB7XG4gICAgICAgICAgICB0aGlzLnJlZmVyZW5jZVdhcm5pbmcuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VXYXJuaW5nLnRleHRDb250ZW50ID0gJ0Jvb2sgbm90IGZvdW5kLic7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25seSB1cGRhdGUgc2VsZWN0ZWRCb29rIGFuZCBzZWxlY3RlZFN0YXJ0Q2hhcHRlciwgZG8gbm90IGF1dG9maWxsIHZlcnNlc1xuICAgICAgICB0aGlzLnNlbGVjdGVkQm9vayA9IGZvdW5kQm9vaztcbiAgICAgICAgdGhpcy5zZWxlY3RlZFN0YXJ0Q2hhcHRlciA9IGNoYXB0ZXJOdW07XG4gICAgICAgIC8vIERvIG5vdCB1cGRhdGUgc2VsZWN0ZWRTdGFydFZlcnNlIG9yIHNlbGVjdGVkRW5kVmVyc2UgaGVyZVxuICAgICAgICAvLyBEbyBub3QgdXBkYXRlIGRyb3Bkb3ducyBvciBncmlkc1xuICAgIH1cbn0gIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlLCByZXF1ZXN0VXJsLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHBhcnNlU3RyaW5nUHJvbWlzZSB9IGZyb20gJ3htbDJqcyc7XG5pbXBvcnQgQmlibGVMaW5rUGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBQcm9jZXNzaW5nUnVsZSB9IGZyb20gJy4vZGF0YWJhc2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJpYmxlTGlua1NldHRpbmdzIHtcbiAgICBkZWZhdWx0VHJhbnNsYXRpb246IHN0cmluZztcbiAgICBvdXRwdXRUeXBlOiAndGV4dCcgfCAnbGluaycgfCAnY29kZWJsb2NrJztcbiAgICAvLyBEaXNwbGF5IG9wdGlvbnNcbiAgICBzaG93VHJhbnNsYXRpb25BYmJyOiBib29sZWFuO1xuICAgIHNob3dCb29rQWJicjogYm9vbGVhbjtcbiAgICAvLyBTaG9ydGN1dHNcbiAgICBlbmFibGVTaG9ydGN1dHM6IGJvb2xlYW47XG4gICAgc2hvcnRjdXRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgIC8vIERhdGF2aWV3IGludGVncmF0aW9uXG4gICAgZW5hYmxlRGF0YXZpZXdNZXRhZGF0YTogYm9vbGVhbjtcbiAgICBkYXRhdmlld01ldGFkYXRhRmllbGRzOiBzdHJpbmdbXTtcbiAgICAvLyBDb2RlIGJsb2NrIHN0eWxpbmdcbiAgICBjb2RlQmxvY2tCYWNrZ3JvdW5kQ29sb3I6IHN0cmluZztcbiAgICBjb2RlQmxvY2tIZWFkaW5nU3R5bGU6ICdub25lJyB8ICdzaW1wbGUnIHwgJ2RldGFpbGVkJztcbiAgICBjb2RlQmxvY2tUZXh0Q29sb3I6IHN0cmluZztcbiAgICBjb2RlQmxvY2tWZXJzZU51bWJlckNvbG9yOiBzdHJpbmc7XG4gICAgY29kZUJsb2NrTGFuZ3VhZ2U6IHN0cmluZztcbiAgICAvLyBNb2RhbCBwZXJzaXN0ZW5jZVxuICAgIG1vZGFsT3V0cHV0VHlwZTogJ3RleHQnIHwgJ2xpbmsnIHwgJ2NvZGVibG9jayc7XG4gICAgbW9kYWxPcHRpb25zOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEJpYmxlTGlua1NldHRpbmdzID0ge1xuICAgIGRlZmF1bHRUcmFuc2xhdGlvbjogJ0FTVicsXG4gICAgb3V0cHV0VHlwZTogJ2NvZGVibG9jaycsXG4gICAgc2hvd1RyYW5zbGF0aW9uQWJicjogdHJ1ZSxcbiAgICBzaG93Qm9va0FiYnI6IGZhbHNlLFxuICAgIGVuYWJsZVNob3J0Y3V0czogdHJ1ZSxcbiAgICBzaG9ydGN1dHM6IHtcbiAgICAgICAgJ2puMzE2JzogJ0pvaG4gMzoxNicsXG4gICAgICAgICdnZW4xMSc6ICdHZW5lc2lzIDE6MScsXG4gICAgICAgICdwczIzMSc6ICdQc2FsbSAyMzoxJyxcbiAgICAgICAgJ3JvbTgyOCc6ICdSb21hbnMgODoyOCcsXG4gICAgICAgICdqbjExJzogJ0pvaG4gMToxJ1xuICAgIH0sXG4gICAgZW5hYmxlRGF0YXZpZXdNZXRhZGF0YTogdHJ1ZSxcbiAgICBkYXRhdmlld01ldGFkYXRhRmllbGRzOiBbJ2Jvb2snLCAnY2hhcHRlcicsICd2ZXJzZScsICd0cmFuc2xhdGlvbicsICd0ZXh0JywgJ3JlZmVyZW5jZScsICdsYW5ndWFnZScsICdjYXRlZ29yeSddLFxuICAgIGNvZGVCbG9ja0JhY2tncm91bmRDb2xvcjogJyNmOGY5ZmEnLFxuICAgIGNvZGVCbG9ja0hlYWRpbmdTdHlsZTogJ2RldGFpbGVkJyxcbiAgICBjb2RlQmxvY2tUZXh0Q29sb3I6ICcjMmMzZTUwJyxcbiAgICBjb2RlQmxvY2tWZXJzZU51bWJlckNvbG9yOiAnIzdmOGM4ZCcsXG4gICAgY29kZUJsb2NrTGFuZ3VhZ2U6ICdiaWJsZScsXG4gICAgbW9kYWxPdXRwdXRUeXBlOiAnY29kZWJsb2NrJyxcbiAgICBtb2RhbE9wdGlvbnM6IFtdXG59O1xuXG4vLyBCaWJsZSB0cmFuc2xhdGlvbnMgYXZhaWxhYmxlIGZyb20gc2Nyb2xsbWFwcGVyL2JpYmxlX2RhdGFiYXNlc1xuY29uc3QgQVZBSUxBQkxFX1RSQU5TTEFUSU9OUyA9IHtcbiAgICAnQVNWJzogeyBuYW1lOiAnQW1lcmljYW4gU3RhbmRhcmQgVmVyc2lvbiAoMTkwMSknLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdFbmdsaXNoJyB9LFxuICAgICdLSlYnOiB7IG5hbWU6ICdLaW5nIEphbWVzIFZlcnNpb24nLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdFbmdsaXNoJyB9LFxuICAgICdXRUInOiB7IG5hbWU6ICdXb3JsZCBFbmdsaXNoIEJpYmxlJywgbGFuZ3VhZ2U6ICdlbicsIGNhdGVnb3J5OiAnRW5nbGlzaCcgfSxcbiAgICAnWUxUJzogeyBuYW1lOiAnWW91bmdcXCdzIExpdGVyYWwgVHJhbnNsYXRpb24gKDE4OTgpJywgbGFuZ3VhZ2U6ICdlbicsIGNhdGVnb3J5OiAnRW5nbGlzaCcgfSxcbiAgICAnQkJFJzogeyBuYW1lOiAnQmlibGUgaW4gQmFzaWMgRW5nbGlzaCAoMTk0OS8xOTY0KScsIGxhbmd1YWdlOiAnZW4nLCBjYXRlZ29yeTogJ0VuZ2xpc2gnIH0sXG4gICAgJ0FLSlYnOiB7IG5hbWU6ICdBbWVyaWNhbiBLaW5nIEphbWVzIFZlcnNpb24nLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdFbmdsaXNoJyB9LFxuICAgICdXZWJzdGVyJzogeyBuYW1lOiAnV2Vic3RlciBCaWJsZScsIGxhbmd1YWdlOiAnZW4nLCBjYXRlZ29yeTogJ0VuZ2xpc2gnIH0sXG4gICAgJ1R5bmRhbGUnOiB7IG5hbWU6ICdXaWxsaWFtIFR5bmRhbGUgQmlibGUgKDE1MjUvMTUzMCknLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdIaXN0b3JpY2FsJyB9LFxuICAgICdXeWNsaWZmZSc6IHsgbmFtZTogJ0pvaG4gV3ljbGlmZmUgQmlibGUgKGMuMTM5NSknLCBsYW5ndWFnZTogJ2VubScsIGNhdGVnb3J5OiAnSGlzdG9yaWNhbCcgfSxcbiAgICAnQlNCJzogeyBuYW1lOiAnQmVyZWFuIFN0YW5kYXJkIEJpYmxlJywgbGFuZ3VhZ2U6ICdlbicsIGNhdGVnb3J5OiAnRW5nbGlzaCcgfSxcbiAgICAnQ1BEVic6IHsgbmFtZTogJ0NhdGhvbGljIFB1YmxpYyBEb21haW4gVmVyc2lvbicsIGxhbmd1YWdlOiAnZW4nLCBjYXRlZ29yeTogJ0VuZ2xpc2gnIH0sXG4gICAgJ1VLSlYnOiB7IG5hbWU6ICdVcGRhdGVkIEtpbmcgSmFtZXMgVmVyc2lvbicsIGxhbmd1YWdlOiAnZW4nLCBjYXRlZ29yeTogJ0VuZ2xpc2gnIH0sXG4gICAgJ1R3ZW50eSc6IHsgbmFtZTogJ1R3ZW50aWV0aCBDZW50dXJ5IE5ldyBUZXN0YW1lbnQnLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdFbmdsaXNoJyB9LFxuICAgICdBbmRlcnNvbic6IHsgbmFtZTogJ0hlbnJ5IFRvbXBraW5zIEFuZGVyc29uXFwncyAxODY0IE5ldyBUZXN0YW1lbnQnLCBsYW5ndWFnZTogJ2VuJywgY2F0ZWdvcnk6ICdIaXN0b3JpY2FsJyB9LFxuICAgICdBQ1YnOiB7IG5hbWU6ICdBIENvbnNlcnZhdGl2ZSBWZXJzaW9uJywgbGFuZ3VhZ2U6ICdlbicsIGNhdGVnb3J5OiAnRW5nbGlzaCcgfSxcbiAgICAnU3BhUlYnOiB7IG5hbWU6ICdMYSBTYW50YSBCaWJsaWEgUmVpbmEtVmFsZXJhICgxOTA5KScsIGxhbmd1YWdlOiAnZXMnLCBjYXRlZ29yeTogJ1NwYW5pc2gnIH0sXG4gICAgJ1NwYVJWMTg2NSc6IHsgbmFtZTogJ0xhIFNhbnRhIEJpYmxpYSBSZWluYS1WYWxlcmEgKDE4NjUpJywgbGFuZ3VhZ2U6ICdlcycsIGNhdGVnb3J5OiAnU3BhbmlzaCcgfSxcbiAgICAnU3BhUlZHJzogeyBuYW1lOiAnUmVpbmEgVmFsZXJhIEdcdTAwRjNtZXonLCBsYW5ndWFnZTogJ2VzJywgY2F0ZWdvcnk6ICdTcGFuaXNoJyB9LFxuICAgICdTcGFQbGF0ZW5zZSc6IHsgbmFtZTogJ0JpYmxpYSBQbGF0ZW5zZSAoU3RyYXViaW5nZXIpJywgbGFuZ3VhZ2U6ICdlcycsIGNhdGVnb3J5OiAnU3BhbmlzaCcgfSxcbiAgICAnVnVsZ2F0ZSc6IHsgbmFtZTogJ0xhdGluIFZ1bGdhdGUnLCBsYW5ndWFnZTogJ2xhJywgY2F0ZWdvcnk6ICdMYXRpbicgfSxcbiAgICAnVnVsZ0NsZW1lbnRpbmUnOiB7IG5hbWU6ICdDbGVtZW50aW5lIFZ1bGdhdGUnLCBsYW5ndWFnZTogJ2xhJywgY2F0ZWdvcnk6ICdMYXRpbicgfSxcbiAgICAnQnl6JzogeyBuYW1lOiAnVGhlIE5ldyBUZXN0YW1lbnQgaW4gdGhlIE9yaWdpbmFsIEdyZWVrOiBCeXphbnRpbmUgVGV4dGZvcm0gMjAxMycsIGxhbmd1YWdlOiAnZ3JjJywgY2F0ZWdvcnk6ICdHcmVlaycgfSxcbiAgICAnVFInOiB7IG5hbWU6ICdUZXh0dXMgUmVjZXB0dXMgKDE1NTAvMTg5NCknLCBsYW5ndWFnZTogJ2dyYycsIGNhdGVnb3J5OiAnR3JlZWsnIH0sXG4gICAgJ1dMQyc6IHsgbmFtZTogJ1dlc3RtaW5zdGVyIExlbmluZ3JhZCBDb2RleCcsIGxhbmd1YWdlOiAnaGJvJywgY2F0ZWdvcnk6ICdIZWJyZXcnIH0sXG4gICAgJ1N0YXRSZXNHTlQnOiB7IG5hbWU6ICdTdGF0aXN0aWNhbCBSZXN0b3JhdGlvbiBHcmVlayBOZXcgVGVzdGFtZW50JywgbGFuZ3VhZ2U6ICdncmMnLCBjYXRlZ29yeTogJ0dyZWVrJyB9LFxuICAgICdWdWxnU2lzdGluZSc6IHsgbmFtZTogJ1Z1bGdhdGEgU2lzdGluYScsIGxhbmd1YWdlOiAnbGEnLCBjYXRlZ29yeTogJ0xhdGluJyB9LFxuICAgICdWdWxnSGV0emVuYXVlcic6IHsgbmFtZTogJ1Z1bGdhdGEgQ2xlbWVudGluYSwgSGV0emVuYXVlciBlZGl0b3JlJywgbGFuZ3VhZ2U6ICdsYScsIGNhdGVnb3J5OiAnTGF0aW4nIH0sXG4gICAgJ1Z1bGdDb250ZSc6IHsgbmFtZTogJ1Z1bGdhdGEgQ2xlbWVudGluYSwgQ29udGUgZWRpdG9yZScsIGxhbmd1YWdlOiAnbGEnLCBjYXRlZ29yeTogJ0xhdGluJyB9LFxuICAgICdTd2UxOTE3JzogeyBuYW1lOiAnU3dlZGlzaCBCaWJsZSAoMTkxNyknLCBsYW5ndWFnZTogJ3N2JywgY2F0ZWdvcnk6ICdTd2VkaXNoJyB9LFxuICAgICdTd2VLYXJsWElJJzogeyBuYW1lOiAnU3ZlbnNrYSBLYXJsIFhJSTpzIEJpYmVsICgxNzAzKScsIGxhbmd1YWdlOiAnc3YnLCBjYXRlZ29yeTogJ0hpc3RvcmljYWwnIH0sXG4gICAgJ1N3ZUthcmxYSUkxODczJzogeyBuYW1lOiAnU3ZlbnNrYSBLYXJsIFhJSTpzIEJpYmVsICgxODczKScsIGxhbmd1YWdlOiAnc3YnLCBjYXRlZ29yeTogJ0hpc3RvcmljYWwnIH0sXG4gICAgJ1Vrck9naWVua28nOiB7IG5hbWU6ICdcdTA0MjNcdTA0M0FcdTA0NDBcdTA0MzBcdTA0NTdcdTA0M0RcdTA0NDFcdTA0NENcdTA0M0FcdTA0MzAgXHUwNDExXHUwNDU2XHUwNDMxXHUwNDNCXHUwNDU2XHUwNDRGLiBcdTA0MUZcdTA0MzVcdTA0NDBcdTA0MzVcdTA0M0FcdTA0M0JcdTA0MzBcdTA0MzQgXHUwNDA2XHUwNDMyXHUwNDMwXHUwNDNEXHUwNDMwIFx1MDQxRVx1MDQzM1x1MDQ1Nlx1MDQ1NFx1MDQzRFx1MDQzQVx1MDQzMC4nLCBsYW5ndWFnZTogJ3VrJywgY2F0ZWdvcnk6ICdVa3JhaW5pYW4nIH0sXG4gICAgJ1ZpZXQnOiB7IG5hbWU6ICdLaW5oIFRoXHUwMEUxbmggVGlcdTFFQkZuZyBWaVx1MUVDN3QgKDE5MzQpJywgbGFuZ3VhZ2U6ICd2aScsIGNhdGVnb3J5OiAnVmlldG5hbWVzZScgfSxcbiAgICAnVGhhaUtKVic6IHsgbmFtZTogJ1RoYWkgS2luZyBKYW1lcyBWZXJzaW9uJywgbGFuZ3VhZ2U6ICd0aCcsIGNhdGVnb3J5OiAnVGhhaScgfSxcbiAgICAnVGFnQW5nQmlibGlhJzogeyBuYW1lOiAnUGhpbGlwcGluZSBCaWJsZSBTb2NpZXR5ICgxOTA1KScsIGxhbmd1YWdlOiAndGwnLCBjYXRlZ29yeTogJ1RhZ2Fsb2cnIH0sXG4gICAgJ1RhdXN1Zyc6IHsgbmFtZTogJ1RhdXN1ZyBLaXRhYiBJbmppbCcsIGxhbmd1YWdlOiAndHNnJywgY2F0ZWdvcnk6ICdUYXVzdWcnIH0sXG4gICAgJ1RwaUtKUEInOiB7IG5hbWU6ICdLaW5nIEplbXMgUGlzaW4gQmFpYmVsJywgbGFuZ3VhZ2U6ICd0cGknLCBjYXRlZ29yeTogJ1RvayBQaXNpbicgfSxcbiAgICAnQnVySnVkc29uJzogeyBuYW1lOiAnMTgzNSBKdWRzb24gQnVybWVzZSBCaWJsZScsIGxhbmd1YWdlOiAnbXknLCBjYXRlZ29yeTogJ0J1cm1lc2UnIH0sXG4gICAgJ0FsYic6IHsgbmFtZTogJ0FsYmFuaWFuIEJpYmxlJywgbGFuZ3VhZ2U6ICdzcScsIGNhdGVnb3J5OiAnQWxiYW5pYW4nIH0sXG4gICAgJ0FybUVhc3Rlcm4nOiB7IG5hbWU6ICdFYXN0ZXJuIEFybWVuaWFuIEJpYmxlJywgbGFuZ3VhZ2U6ICdoeScsIGNhdGVnb3J5OiAnQXJtZW5pYW4nIH0sXG4gICAgJ0JlYU1SSyc6IHsgbmFtZTogJ1RoZSBHb3NwZWwgb2YgTWFyayBpbiBCZWF2ZXIgKERhbmV6YWEpJywgbGFuZ3VhZ2U6ICdiZWEnLCBjYXRlZ29yeTogJ0luZGlnZW5vdXMnIH0sXG4gICAgJ1NyS0RFa2F2c2tpJzogeyBuYW1lOiAnU2VyYmlhbiBCaWJsZSBEYW5pXHUwMTBEaVx1MDEwNy1LYXJhZFx1MDE3RWlcdTAxMDcgRWthdnNraScsIGxhbmd1YWdlOiAnc3InLCBjYXRlZ29yeTogJ1NlcmJpYW4nIH0sXG4gICAgJ1NyS0RJamVrYXYnOiB7IG5hbWU6ICdTZXJiaWFuIEJpYmxlIERhbmlcdTAxMERpXHUwMTA3LUthcmFkXHUwMTdFaVx1MDEwNyBJamVrYXZza2knLCBsYW5ndWFnZTogJ3NyJywgY2F0ZWdvcnk6ICdTZXJiaWFuJyB9LFxuICAgICdXdWxmaWxhJzogeyBuYW1lOiAnQmlzaG9wIFd1bGZpbGEgR290aGljIEJpYmxlJywgbGFuZ3VhZ2U6ICdnb3QnLCBjYXRlZ29yeTogJ0dvdGhpYycgfSxcbiAgICAnc21sX0JMXzIwMDgnOiB7IG5hbWU6ICdLaXRhYiBBd2FsLUphbWFuIG1ha2EgS2l0YWIgSW5qaWwnLCBsYW5ndWFnZTogJ3NtbCcsIGNhdGVnb3J5OiAnSW5kaWdlbm91cycgfSxcbiAgICAndmxzSm9OVCc6IHsgbmFtZTogJ0hldCBOaWV1d2UgVGVzdGFtZW50IGJ5IE5pY29sYWFzIERlIEpvbmdlJywgbGFuZ3VhZ2U6ICd2bHMnLCBjYXRlZ29yeTogJ0R1dGNoJyB9XG59O1xuXG5leHBvcnQgY2xhc3MgQmlibGVMaW5rU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogQmlibGVMaW5rUGx1Z2luO1xuICAgIHByaXZhdGUgZmlsdGVyVGV4dDogc3RyaW5nID0gJyc7XG4gICAgcHJpdmF0ZSBlZGl0aW5nQWJicjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBlZGl0aW5nTmFtZTogc3RyaW5nID0gJyc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBCaWJsZUxpbmtQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0JpYmxlTGluayBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgLy8gQmFzaWMgU2V0dGluZ3MgU2VjdGlvblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdCYXNpYyBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgLy8gRGVmYXVsdCBUcmFuc2xhdGlvbiBTZXR0aW5nXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgVHJhbnNsYXRpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB5b3VyIHByZWZlcnJlZCBCaWJsZSB0cmFuc2xhdGlvbi4nKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbnMgPSB0aGlzLnBsdWdpbi5kYi5nZXRUcmFuc2xhdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbk9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucy5mb3JFYWNoKHRyYW5zID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25PcHRpb25zW3RyYW5zLmFiYnJldmlhdGlvbl0gPSBgJHt0cmFucy5uYW1lfSAoJHt0cmFucy5hYmJyZXZpYXRpb259KWA7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9ucyh0cmFuc2xhdGlvbk9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VHJhbnNsYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRUcmFuc2xhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRGVmYXVsdCBPdXRwdXQgVHlwZSBTZXR0aW5nXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgT3V0cHV0IFR5cGUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSBob3cgcmVmZXJlbmNlcyBhcmUgaW5zZXJ0ZWQuJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3RleHQnLCAnRnVsbCBWZXJzZSBUZXh0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdsaW5rJywgJ0xpdGVyYWwgV29yZCBMaW5rJylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjb2RlYmxvY2snLCAnQ29kZSBCbG9jaycpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm91dHB1dFR5cGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vdXRwdXRUeXBlID0gdmFsdWUgYXMgJ3RleHQnIHwgJ2xpbmsnIHwgJ2NvZGVibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBEaXNwbGF5IE9wdGlvbnNcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBUcmFuc2xhdGlvbiBBYmJyZXZpYXRpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0luY2x1ZGUgdHJhbnNsYXRpb24gYWJicmV2aWF0aW9uIGluIHRoZSBvdXRwdXQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VHJhbnNsYXRpb25BYmJyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1RyYW5zbGF0aW9uQWJiciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBCb29rIEFiYnJldmlhdGlvbnMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1VzZSBhYmJyZXZpYXRlZCBib29rIG5hbWVzIChlLmcuLCBKbiBpbnN0ZWFkIG9mIEpvaG4pLicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0Jvb2tBYmJyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0Jvb2tBYmJyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBDb2RlIEJsb2NrIFN0eWxpbmcgU2VjdGlvblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb2RlIEJsb2NrIFN0eWxpbmcnIH0pO1xuXG4gICAgICAgIC8vIENvZGUgQmxvY2sgQmFja2dyb3VuZCBDb2xvclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdCYWNrZ3JvdW5kIENvbG9yJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdCYWNrZ3JvdW5kIGNvbG9yIGZvciBCaWJsZSB2ZXJzZSBjb2RlIGJsb2Nrcy4nKVxuICAgICAgICAgICAgLmFkZENvbG9yUGlja2VyKGNvbG9yUGlja2VyID0+IGNvbG9yUGlja2VyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja0JhY2tncm91bmRDb2xvcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja0JhY2tncm91bmRDb2xvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ29kZSBCbG9jayBIZWFkaW5nIFN0eWxlXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0hlYWRpbmcgU3R5bGUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1N0eWxlIGZvciB0aGUgcmVmZXJlbmNlIGhlYWRpbmcgaW4gY29kZSBibG9ja3MuJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25vbmUnLCAnTm8gSGVhZGluZycpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignc2ltcGxlJywgJ1NpbXBsZSAoSm9obiAzOjE2KScpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGV0YWlsZWQnLCAnRGV0YWlsZWQgKEpvaG4gMzoxNiBBU1YpJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29kZUJsb2NrSGVhZGluZ1N0eWxlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29kZUJsb2NrSGVhZGluZ1N0eWxlID0gdmFsdWUgYXMgJ25vbmUnIHwgJ3NpbXBsZScgfCAnZGV0YWlsZWQnO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ29kZSBCbG9jayBUZXh0IENvbG9yXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RleHQgQ29sb3InKVxuICAgICAgICAgICAgLnNldERlc2MoJ0NvbG9yIGZvciB0aGUgdmVyc2UgdGV4dCBpbiBjb2RlIGJsb2Nrcy4nKVxuICAgICAgICAgICAgLmFkZENvbG9yUGlja2VyKGNvbG9yUGlja2VyID0+IGNvbG9yUGlja2VyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja1RleHRDb2xvcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja1RleHRDb2xvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ29kZSBCbG9jayBWZXJzZSBOdW1iZXIgQ29sb3JcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVmVyc2UgTnVtYmVyIENvbG9yJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdDb2xvciBmb3IgdmVyc2UgbnVtYmVycyBpbiBjb2RlIGJsb2Nrcy4nKVxuICAgICAgICAgICAgLmFkZENvbG9yUGlja2VyKGNvbG9yUGlja2VyID0+IGNvbG9yUGlja2VyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja1ZlcnNlTnVtYmVyQ29sb3IpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2RlQmxvY2tWZXJzZU51bWJlckNvbG9yID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBDb2RlIEJsb2NrIExhbmd1YWdlXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NvZGUgQmxvY2sgTGFuZ3VhZ2UnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBsYW5ndWFnZSBpZGVudGlmaWVyIGZvciBCaWJsZSB2ZXJzZSBjb2RlIGJsb2Nrcy4nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdiaWJsZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja0xhbmd1YWdlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29kZUJsb2NrTGFuZ3VhZ2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEV4YW1wbGUgQ29kZSBCbG9ja1xuICAgICAgICBjb25zdCBleGFtcGxlQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQ29kZSBCbG9jayBFeGFtcGxlcycgfSk7XG4gICAgICAgIGV4YW1wbGVDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnVXNlIG9wdGlvbnMgaW4gc3F1YXJlIGJyYWNrZXRzIGFmdGVyIHRoZSBsYW5ndWFnZSBpZGVudGlmaWVyIHRvIGN1c3RvbWl6ZSB0aGUgb3V0cHV0OidcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgZXhwbGFuYXRpb24gb2Ygc3ludGF4XG4gICAgICAgIGNvbnN0IHN5bnRheEV4YW1wbGUgPSBleGFtcGxlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2JpYmxlbGluay1zeW50YXgtZXhhbXBsZScgfSk7XG4gICAgICAgIHN5bnRheEV4YW1wbGUuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1N5bnRheDogYGBgYmlibGUgW29wdGlvbjEsb3B0aW9uMixvcHRpb24zXScsXG4gICAgICAgICAgICBjbHM6ICdiaWJsZWxpbmstc3ludGF4LXRleHQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhhbXBsZXMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdCYXNpYyB2ZXJzZSAobm8gb3B0aW9ucyk6JyxcbiAgICAgICAgICAgICAgICBjb2RlOiBgXFxgXFxgXFxgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2RlQmxvY2tMYW5ndWFnZX1cXG5OQVNCIDEgSm9obiAzOjE3XFxuXFxgXFxgXFxgYFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1dpdGggbGluayBvcHRpb24gKHNob3dzIGEgbGluayB0byB0aGUgdmVyc2UpOicsXG4gICAgICAgICAgICAgICAgY29kZTogYFxcYFxcYFxcYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29kZUJsb2NrTGFuZ3VhZ2V9XFxuTkFTQiBNYXR0aGV3IDg6OC00MCBbbGlua11cXG5cXGBcXGBcXGBgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnV2l0aCB2ZXJzZSBvcHRpb24gKGRpc3BsYXlzIG51bWJlcnMgcGVyIHZlcnNlKTonLFxuICAgICAgICAgICAgICAgIGNvZGU6IGBcXGBcXGBcXGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja0xhbmd1YWdlfVxcbk5BU0IgMSBDb3JpbnRoaWFucyAxOjItMyBbdmVyc2VdXFxuXFxgXFxgXFxgYFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1dpdGggY2hhcHRlciBvcHRpb24gKGRpc3BsYXlzIGVhY2ggY2hhcHRlciBhcyBDaGFwdGVyIFgpOicsXG4gICAgICAgICAgICAgICAgY29kZTogYFxcYFxcYFxcYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29kZUJsb2NrTGFuZ3VhZ2V9XFxuTkFTQiBQc2FsbSAyMyBbY2hhcHRlcl1cXG5cXGBcXGBcXGBgXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnTXVsdGlwbGUgb3B0aW9ucyAoY29tbWEtc2VwYXJhdGVkKTonLFxuICAgICAgICAgICAgICAgIGNvZGU6IGBcXGBcXGBcXGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmNvZGVCbG9ja0xhbmd1YWdlfVxcbk5BU0IgSm9obiAzOjE2LTE4IFt2ZXJzZSxjaGFwdGVyLGxpbmtdXFxuXFxgXFxgXFxgYFxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBleCBvZiBleGFtcGxlcykge1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZURpdiA9IGV4YW1wbGVDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmlibGVsaW5rLWV4YW1wbGUtaXRlbScgfSk7XG4gICAgICAgICAgICBleGFtcGxlRGl2LmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGV4LmxhYmVsLCBjbHM6ICdiaWJsZWxpbmstZXhhbXBsZS1sYWJlbCcgfSk7XG4gICAgICAgICAgICBjb25zdCBjb2RlQmxvY2sgPSBleGFtcGxlRGl2LmNyZWF0ZUVsKCdwcmUnLCB7IGNsczogJ2JpYmxlbGluay1leGFtcGxlLWNvZGUnIH0pO1xuICAgICAgICAgICAgY29kZUJsb2NrLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiBleC5jb2RlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvcnRjdXRzIFNlY3Rpb25cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQmlibGUgUmVmZXJlbmNlIFNob3J0Y3V0cycgfSk7XG4gICAgICAgIHRoaXMucmVuZGVyU2hvcnRjdXRzU2VjdGlvbihjb250YWluZXJFbCk7XG5cbiAgICAgICAgLy8gRGF0YXZpZXcgSW50ZWdyYXRpb24gU2VjdGlvblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdEYXRhdmlldyBJbnRlZ3JhdGlvbicgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5hYmxlIERhdGF2aWV3IE1ldGFkYXRhJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdBZGQgcmljaCBtZXRhZGF0YSB0byBCaWJsZSB2ZXJzZXMgZm9yIERhdGF2aWV3IHF1ZXJpZXMuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVEYXRhdmlld01ldGFkYXRhKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRGF0YXZpZXdNZXRhZGF0YSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZURhdGF2aWV3TWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBtZXRhZGF0YUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnQXZhaWxhYmxlIG1ldGFkYXRhIGZpZWxkczogYm9vaywgY2hhcHRlciwgdmVyc2UsIHRyYW5zbGF0aW9uLCB0ZXh0LCByZWZlcmVuY2UsIGxhbmd1YWdlLCBjYXRlZ29yeSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBTaG93IERhdGF2aWV3IHF1ZXJ5IGV4cGxhbmF0aW9uXG4gICAgICAgICAgICBjb25zdCBxdWVyeUNvbnRhaW5lciA9IG1ldGFkYXRhQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgcXVlcnlDb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnSG93IHRvIFF1ZXJ5IEJpYmxlIFZlcnNlcycgfSk7XG4gICAgICAgICAgICBxdWVyeUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnVXNlIERhdGF2aWV3IHF1ZXJpZXMgdG8gc2VhcmNoIGFuZCBkaXNwbGF5IEJpYmxlIHZlcnNlcy4gWW91IGNhbiBmaWx0ZXIgYnkgdHJhbnNsYXRpb24sIGJvb2ssIGNoYXB0ZXIsIHZlcnNlLCBvciBzZWFyY2ggd2l0aGluIHRoZSB0ZXh0IGNvbnRlbnQuJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVRdWVyeSA9IGBcXGBcXGBcXGBkYXRhdmlld1xuVEFCTEUgYm9vaywgY2hhcHRlciwgdmVyc2UsIHRyYW5zbGF0aW9uXG5GUk9NIFwiQmlibGVcIlxuV0hFUkUgdHJhbnNsYXRpb24gPSBcIkFTVlwiXG5TT1JUIGJvb2ssIGNoYXB0ZXIsIHZlcnNlXG5cXGBcXGBcXGBgO1xuICAgICAgICAgICAgY29uc3QgY29kZUJsb2NrID0gcXVlcnlDb250YWluZXIuY3JlYXRlRWwoJ3ByZScpO1xuICAgICAgICAgICAgY29kZUJsb2NrLmNyZWF0ZUVsKCdjb2RlJywgeyB0ZXh0OiBleGFtcGxlUXVlcnkgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmFuc2xhdGlvbiBNYW5hZ2VtZW50IFNlY3Rpb25cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVHJhbnNsYXRpb24gTWFuYWdlbWVudCcgfSk7XG5cbiAgICAgICAgLy8gVXBsb2FkIEN1c3RvbSBUcmFuc2xhdGlvbiBTZWN0aW9uXG4gICAgICAgIGNvbnN0IHVwbG9hZFNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdiaWJsZWxpbmstdXBsb2FkLXNlY3Rpb24nIH0pO1xuICAgICAgICB1cGxvYWRTZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1VwbG9hZCBDdXN0b20gVHJhbnNsYXRpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdXBsb2FkRGVzYyA9IHVwbG9hZFNlY3Rpb24uY3JlYXRlRWwoJ3AnKTtcbiAgICAgICAgdXBsb2FkRGVzYy5pbm5lckhUTUwgPSAnVXBsb2FkIHlvdXIgb3duIEJpYmxlIHRyYW5zbGF0aW9uIGZpbGVzLiA8c3Ryb25nPlhNTCBmb3JtYXQgaXMgcmVjb21tZW5kZWQ8L3N0cm9uZz4gYW5kIGNhbiBiZSBkb3dubG9hZGVkIGZyb20gPGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9zY3JvbGxtYXBwZXIvYmlibGVfZGF0YWJhc2VzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+c2Nyb2xsbWFwcGVyL2JpYmxlX2RhdGFiYXNlczwvYT4uJztcblxuICAgICAgICBuZXcgU2V0dGluZyh1cGxvYWRTZWN0aW9uKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1VwbG9hZCBUcmFuc2xhdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIGEgZmlsZSB0byB1cGxvYWQgKFNRTGl0ZSBvciBYTUwgZm9ybWF0KS4nKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1VwbG9hZCBYTUwnKVxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnbW9kLWN0YScpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy51cGxvYWRYTUxGaWxlKCkpKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1VwbG9hZCBTUUxpdGUnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMudXBsb2FkU1FMaXRlRmlsZSgpKSk7XG5cbiAgICAgICAgLy8gQ3VycmVudCBUcmFuc2xhdGlvbnMgVGFibGVcbiAgICAgICAgdGhpcy5kaXNwbGF5Q3VycmVudFRyYW5zbGF0aW9ucyhjb250YWluZXJFbCk7XG5cbiAgICAgICAgLy8gSW1wb3J0IFN0YXR1cyBTZWN0aW9uXG4gICAgICAgIC8vIHRoaXMuZGlzcGxheUltcG9ydFN0YXR1cyhjb250YWluZXJFbCk7IC8vIFJlbW92ZWQgYXMgcGVyIGVkaXQgaGludFxuICAgIH1cblxuICAgIHByaXZhdGUgZGlzcGxheUN1cnJlbnRUcmFuc2xhdGlvbnMoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIFNlY3Rpb24gaGVhZGVyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdiaWJsZWxpbmstdHJhbnNsYXRpb25zLWhlYWRlcicgfSk7XG4gICAgICAgIHNlY3Rpb25IZWFkZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnSW5zdGFsbGVkIFRyYW5zbGF0aW9ucycgfSk7XG5cbiAgICAgICAgLy8gRmlsdGVyIGlucHV0XG4gICAgICAgIGNvbnN0IGZpbHRlckNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ2JpYmxlbGluay1maWx0ZXItY29udGFpbmVyJyB9KTtcbiAgICAgICAgY29uc3QgZmlsdGVySW5wdXQgPSBmaWx0ZXJDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2ggdHJhbnNsYXRpb25zLi4uJyxcbiAgICAgICAgICAgIGNsczogJ2JpYmxlbGluay1maWx0ZXItaW5wdXQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0YWJsZSBjb250YWluZXJcbiAgICAgICAgY29uc3QgdGFibGVDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdiaWJsZWxpbmstdGFibGUtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAvLyBTb3J0IHN0YXRlXG4gICAgICAgIGxldCBzb3J0RmllbGQ6ICduYW1lJyB8ICdhYmJyZXZpYXRpb24nIHwgJ2xhbmd1YWdlJyB8ICdjYXRlZ29yeScgPSAnbmFtZSc7XG4gICAgICAgIGxldCBzb3J0QXNjID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCByZW5kZXJUYWJsZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRhYmxlQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IHRhYmxlQ29udGFpbmVyLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnYmlibGVsaW5rLXRyYW5zbGF0aW9uLXRhYmxlJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGhlYWRlcnMgd2l0aCBzb3J0IGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZVNvcnRhYmxlSGVhZGVyID0gKHRleHQ6IHN0cmluZywgZmllbGQ6IHR5cGVvZiBzb3J0RmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnKTtcbiAgICAgICAgICAgICAgICB0aC5jcmVhdGVTcGFuKHsgdGV4dCB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc29ydEZpZWxkID09PSBmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB0aC5jcmVhdGVTcGFuKHsgdGV4dDogc29ydEFzYyA/ICcgXHUyMTkzJyA6ICcgXHUyMTkxJyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGgub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRGaWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRBc2MgPSAhc29ydEFzYztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRGaWVsZCA9IGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEFzYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY3JlYXRlU29ydGFibGVIZWFkZXIoJ1RyYW5zbGF0aW9uIE5hbWUnLCAnbmFtZScpO1xuICAgICAgICAgICAgY3JlYXRlU29ydGFibGVIZWFkZXIoJ0FiYnJldmlhdGlvbicsICdhYmJyZXZpYXRpb24nKTtcbiAgICAgICAgICAgIGNyZWF0ZVNvcnRhYmxlSGVhZGVyKCdMYW5ndWFnZScsICdsYW5ndWFnZScpO1xuICAgICAgICAgICAgY3JlYXRlU29ydGFibGVIZWFkZXIoJ0NhdGVnb3J5JywgJ2NhdGVnb3J5Jyk7XG4gICAgICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiAnQWN0aW9ucycgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG5cbiAgICAgICAgICAgIC8vIEdldCBhbmQgZmlsdGVyIHRyYW5zbGF0aW9uc1xuICAgICAgICAgICAgbGV0IHRyYW5zbGF0aW9ucyA9IHRoaXMucGx1Z2luLmRiLmdldFRyYW5zbGF0aW9ucygpXG4gICAgICAgICAgICAgICAgLm1hcCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnQsXG4gICAgICAgICAgICAgICAgICAgIC4uLkFWQUlMQUJMRV9UUkFOU0xBVElPTlNbdC5hYmJyZXZpYXRpb25dLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YWxsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IGZpbHRlclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyVGV4dCA9IGZpbHRlcklucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyVGV4dCkge1xuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucyA9IHRyYW5zbGF0aW9ucy5maWx0ZXIodCA9PlxuICAgICAgICAgICAgICAgICAgICB0Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJUZXh0KSB8fFxuICAgICAgICAgICAgICAgICAgICB0LmFiYnJldmlhdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlclRleHQpIHx8XG4gICAgICAgICAgICAgICAgICAgIHQubGFuZ3VhZ2U/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyVGV4dCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdC5jYXRlZ29yeT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJUZXh0KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IHNvcnRcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYVZhbCA9IGFbc29ydEZpZWxkXSB8fCAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBiVmFsID0gYltzb3J0RmllbGRdIHx8ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiAoc29ydEFzYyA/IDEgOiAtMSkgKiBhVmFsLmxvY2FsZUNvbXBhcmUoYlZhbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRyYW5zbGF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbXB0eVJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuICAgICAgICAgICAgICAgIGVtcHR5Um93LmNyZWF0ZUVsKCd0ZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vIHRyYW5zbGF0aW9ucyBpbnN0YWxsZWQuJyxcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogeyBjb2xzcGFuOiAnNScgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNsYXRpb25zLmZvckVhY2godHJhbnMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGluZ0FiYnIgPT09IHRyYW5zLmFiYnJldmlhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBFZGl0IG1vZGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZUNlbGwgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IG5hbWVDZWxsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cmFucy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnYmlibGVsaW5rLWVkaXQtaW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUcmFuc2xhdGlvbiBOYW1lJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhYmJyQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWJicklucHV0ID0gYWJickNlbGwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRyYW5zLmFiYnJldmlhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ2JpYmxlbGluay1lZGl0LWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQWJicmV2aWF0aW9uIChlLmcuLCBLSlYpJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiB0cmFucy5sYW5ndWFnZSB8fCAnJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogdHJhbnMuY2F0ZWdvcnkgfHwgJycgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnLCB7IGNsczogJ2JpYmxlbGluay10cmFuc2xhdGlvbi1hY3Rpb25zJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ2VsbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU2F2ZScsIGNsczogJ21vZC1jdGEnIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FiYnIgPSBhYmJySW5wdXQudmFsdWUudHJpbSgpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3TmFtZSB8fCAhbmV3QWJicikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05hbWUgYW5kIGFiYnJldmlhdGlvbiBhcmUgcmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG5ldyBhYmJyZXZpYXRpb24gYWxyZWFkeSBleGlzdHMgKGV4Y2VwdCBmb3IgY3VycmVudCB0cmFuc2xhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdBYmJyICE9PSB0cmFucy5hYmJyZXZpYXRpb24gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGIuZ2V0VHJhbnNsYXRpb25zKCkuc29tZSh0ID0+IHQuYWJicmV2aWF0aW9uID09PSBuZXdBYmJyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0FiYnJldmlhdGlvbiBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRyYW5zbGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRBYmJyID0gdHJhbnMuYWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMubmFtZSA9IG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFucy5hYmJyZXZpYXRpb24gPSBuZXdBYmJyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIHdhcyB0aGUgZGVmYXVsdCB0cmFuc2xhdGlvbiwgdXBkYXRlIHRoZSBzZXR0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFRyYW5zbGF0aW9uID09PSBvbGRBYmJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFRyYW5zbGF0aW9uID0gbmV3QWJicjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGIuc2F2ZURhdGE/LigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nQWJiciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJUYWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnVHJhbnNsYXRpb24gdXBkYXRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbkNlbGwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ0FiYnIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyVGFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBWaWV3IG1vZGVcbiAgICAgICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogdHJhbnMubmFtZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogdHJhbnMuYWJicmV2aWF0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiB0cmFucy5sYW5ndWFnZSB8fCAnJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogdHJhbnMuY2F0ZWdvcnkgfHwgJycgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnLCB7IGNsczogJ2JpYmxlbGluay10cmFuc2xhdGlvbi1hY3Rpb25zJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnMuYWJicmV2aWF0aW9uICE9PSAnQVNWJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ2VsbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRWRpdCcgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVuIGVkaXQgbW9kYWwgd2l0aCBjdXJyZW50IHRyYW5zbGF0aW9uIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IHRoaXMucGx1Z2luLmRiLmdldFRyYW5zbGF0aW9ucygpLmZpbmQodCA9PiB0LmFiYnJldmlhdGlvbiA9PT0gdHJhbnMuYWJicmV2aWF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFRyYW5zbGF0aW9uRWRpdE1vZGFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb24uYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb24ubGFuZ3VhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbi5jYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uLnByb2Nlc3NpbmdSdWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIChuYW1lLCBhYmJyZXZpYXRpb24sIGxhbmd1YWdlLCBjYXRlZ29yeSwgcHJvY2Vzc2luZ1J1bGVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGIudXBkYXRlVHJhbnNsYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYmJyZXZpYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ1J1bGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RyYW5zbGF0aW9uIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlclRhYmxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgdXBkYXRpbmcgdHJhbnNsYXRpb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ2VsbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdSZW1vdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1SZW1vdmVUcmFuc2xhdGlvbih0cmFucy5hYmJyZXZpYXRpb24sIHRyYW5zLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkNlbGwuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJyhCdWlsdC1pbiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ2JpYmxlbGluay1idWlsdGluLWxhYmVsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBZGQgZmlsdGVyIGxpc3RlbmVyXG4gICAgICAgIGZpbHRlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgcmVuZGVyVGFibGUpO1xuXG4gICAgICAgIC8vIEluaXRpYWwgcmVuZGVyXG4gICAgICAgIHJlbmRlclRhYmxlKCk7XG5cbiAgICAgICAgLy8gQWRkIG1vZGVybiB0YWJsZSBDU1NcbiAgICAgICAgY29uc3QgY3NzID0gYFxuICAgICAgICAgICAgLmJpYmxlbGluay10cmFuc2xhdGlvbnMtaGVhZGVyIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1maWx0ZXItY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1maWx0ZXItaW5wdXQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMzAwcHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLWZpbHRlci1pbnB1dDpmb2N1cyB7XG4gICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMnB4IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLXRhYmxlLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLXRyYW5zbGF0aW9uLXRhYmxlIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLXRyYW5zbGF0aW9uLXRhYmxlIHRoIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay10cmFuc2xhdGlvbi10YWJsZSB0aDpob3ZlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLXRyYW5zbGF0aW9uLXRhYmxlIHRkIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay10cmFuc2xhdGlvbi10YWJsZSB0cjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLXRyYW5zbGF0aW9uLXRhYmxlIHRyOmxhc3QtY2hpbGQgdGQge1xuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYmlibGVsaW5rLXRyYW5zbGF0aW9uLWFjdGlvbnMge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstdHJhbnNsYXRpb24tYWN0aW9ucyBidXR0b24ge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstdHJhbnNsYXRpb24tYWN0aW9ucyBidXR0b246aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay10cmFuc2xhdGlvbi1hY3Rpb25zIGJ1dHRvbi5tb2QtY3RhIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay10cmFuc2xhdGlvbi1hY3Rpb25zIGJ1dHRvbi5tb2Qtd2FybmluZyB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1idWlsdGluLWxhYmVsIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstZWRpdC1pbnB1dCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstdXBsb2FkLXNlY3Rpb24ge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstdXBsb2FkLXNlY3Rpb24gaDQge1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay11cGxvYWQtc2VjdGlvbiBwIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKCcjYmlibGVsaW5rLXRhYmxlLXN0eWxlcycpIHx8IGRvY3VtZW50LmhlYWQuY3JlYXRlRWwoJ3N0eWxlJywgeyBhdHRyOiB7IGlkOiAnYmlibGVsaW5rLXRhYmxlLXN0eWxlcycgfX0pO1xuICAgICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gY3NzO1xuXG4gICAgICAgIC8vIEFkZCBleGFtcGxlLXNwZWNpZmljIENTU1xuICAgICAgICBjb25zdCBleGFtcGxlQ3NzID0gYFxuICAgICAgICAgICAgLmJpYmxlbGluay1zeW50YXgtZXhhbXBsZSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1zeW50YXgtdGV4dCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1leGFtcGxlLWl0ZW0ge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstZXhhbXBsZS1sYWJlbCB7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstZXhhbXBsZS1jb2RlIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1leGFtcGxlLWNvZGUgY29kZSB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCBleGFtcGxlU3R5bGVFbCA9IGRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvcignI2JpYmxlbGluay1leGFtcGxlLXN0eWxlcycpIHx8IGRvY3VtZW50LmhlYWQuY3JlYXRlRWwoJ3N0eWxlJywgeyBhdHRyOiB7IGlkOiAnYmlibGVsaW5rLWV4YW1wbGUtc3R5bGVzJyB9fSk7XG4gICAgICAgIGV4YW1wbGVTdHlsZUVsLnRleHRDb250ZW50ID0gZXhhbXBsZUNzcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHVwbG9hZFNRTGl0ZUZpbGUoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgICAgaW5wdXQuYWNjZXB0ID0gJy5zcWxpdGUsLmRiJztcbiAgICAgICAgaW5wdXQub25jaGFuZ2UgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmZpbGVzPy5bMF07XG4gICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1NRTGl0ZUZpbGUoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlucHV0LmNsaWNrKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzU1FMaXRlRmlsZShmaWxlOiBGaWxlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBQcm9jZXNzaW5nICR7ZmlsZS5uYW1lfS4uLmApO1xuXG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbk5hbWUgPSBmaWxlLm5hbWUucmVwbGFjZSgvXFwuKHNxbGl0ZXxkYikkL2ksICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGFiYnJldmlhdGlvbiA9IHRyYW5zbGF0aW9uTmFtZS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgICAvLyBTaG93IG1vZGFsIGZvciBjdXN0b21pemluZyB0cmFuc2xhdGlvbiBkZXRhaWxzXG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBUcmFuc2xhdGlvbkVkaXRNb2RhbChcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgICAgICdFbmdsaXNoJyxcbiAgICAgICAgICAgICAgICAnU3RhbmRhcmQnLFxuICAgICAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jIChuYW1lOiBzdHJpbmcsIGFiYnI6IHN0cmluZywgbGFuZ3VhZ2U6IHN0cmluZywgY2F0ZWdvcnk6IHN0cmluZywgcHJvY2Vzc2luZ1J1bGVzOiBQcm9jZXNzaW5nUnVsZVtdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0cmFuc2xhdGlvbiBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdUcmFuc2xhdGlvbnMgPSB0aGlzLnBsdWdpbi5kYi5nZXRUcmFuc2xhdGlvbnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1RyYW5zbGF0aW9ucy5zb21lKHQgPT4gdC5hYmJyZXZpYXRpb24gPT09IGFiYnIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcmFuc2xhdGlvbiAke2FiYnJ9IGFscmVhZHkgZXhpc3RzYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0cmFuc2xhdGlvbiB3aXRoIGFsbCBkZXRhaWxzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbklkID0gYXdhaXQgdGhpcy5wbHVnaW4uZGIuYWRkVHJhbnNsYXRpb24obmFtZSwgYWJiciwgbGFuZ3VhZ2UsIGNhdGVnb3J5LCBwcm9jZXNzaW5nUnVsZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgc2FtcGxlIHZlcnNlcyBmb3IgZGVtb25zdHJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtcGxlVmVyc2VzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgYm9vazogJ0pvaG4nLCBjaGFwdGVyOiAzLCB2ZXJzZTogMTYsIHRleHQ6ICdTYW1wbGUgdmVyc2UgZnJvbSB1cGxvYWRlZCBmaWxlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgYm9vazogJ0dlbmVzaXMnLCBjaGFwdGVyOiAxLCB2ZXJzZTogMSwgdGV4dDogJ1NhbXBsZSB2ZXJzZSBmcm9tIHVwbG9hZGVkIGZpbGUnIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNlc1RvQWRkID0gc2FtcGxlVmVyc2VzLm1hcCh2ZXJzZSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vazogdmVyc2UuYm9vayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyOiB2ZXJzZS5jaGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNlOiB2ZXJzZS52ZXJzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB2ZXJzZS50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRiLmFkZFZlcnNlc0JhdGNoKHZlcnNlc1RvQWRkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgU3VjY2Vzc2Z1bGx5IGltcG9ydGVkIHNhbXBsZSBkYXRhIGZyb20gJHtmaWxlLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0aGUgc2V0dGluZ3MgZGlzcGxheVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignU1FMaXRlIGltcG9ydCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gaW1wb3J0ICR7ZmlsZS5uYW1lfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NRTGl0ZSBpbXBvcnQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIGltcG9ydCAke2ZpbGUubmFtZX06ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBsb2FkWE1MRmlsZSgpIHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgICAgICBpbnB1dC5hY2NlcHQgPSAnLnhtbCc7XG4gICAgICAgIGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5maWxlcz8uWzBdO1xuICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NYTUxGaWxlKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpbnB1dC5jbGljaygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1hNTEZpbGUoZmlsZTogRmlsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgUHJvY2Vzc2luZyAke2ZpbGUubmFtZX0uLi5gKTtcblxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGUudGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGFyc2VTdHJpbmdQcm9taXNlKHRleHQpO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5YTUxCSUJMRSB8fCAhcmVzdWx0LlhNTEJJQkxFLkJJQkxFQk9PSykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBYTUwgZmlsZTogbWlzc2luZyBYTUxCSUJMRSBvciBCSUJMRUJPT0sgZWxlbWVudHMnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRXh0cmFjdCB0cmFuc2xhdGlvbiBuYW1lL2FiYnJldmlhdGlvbiBmcm9tIGJpYmxlbmFtZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGNvbnN0IGJpYmxlbmFtZSA9IHJlc3VsdC5YTUxCSUJMRS4kPy5iaWJsZW5hbWUgfHwgZmlsZS5uYW1lLnJlcGxhY2UoJy54bWwnLCAnJyk7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbk5hbWUgPSBiaWJsZW5hbWU7XG4gICAgICAgICAgICBjb25zdCBhYmJyZXZpYXRpb24gPSBiaWJsZW5hbWUudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgICAgLy8gU2hvdyBtb2RhbCBmb3IgY3VzdG9taXppbmcgdHJhbnNsYXRpb24gZGV0YWlsc1xuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgVHJhbnNsYXRpb25FZGl0TW9kYWwoXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRpb25OYW1lLFxuICAgICAgICAgICAgICAgIGFiYnJldmlhdGlvbixcbiAgICAgICAgICAgICAgICAnRW5nbGlzaCcsXG4gICAgICAgICAgICAgICAgJ1N0YW5kYXJkJyxcbiAgICAgICAgICAgICAgICBbXSxcbiAgICAgICAgICAgICAgICBhc3luYyAobmFtZTogc3RyaW5nLCBhYmJyOiBzdHJpbmcsIGxhbmd1YWdlOiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmcsIHByb2Nlc3NpbmdSdWxlczogUHJvY2Vzc2luZ1J1bGVbXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdHJhbnNsYXRpb24gYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVHJhbnNsYXRpb25zID0gdGhpcy5wbHVnaW4uZGIuZ2V0VHJhbnNsYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdUcmFuc2xhdGlvbnMuc29tZSh0ID0+IHQuYWJicmV2aWF0aW9uID09PSBhYmJyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVHJhbnNsYXRpb24gJyR7YWJicn0nIGFscmVhZHkgZXhpc3RzLiBPdmVyd3JpdGU/YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgKGNvbmZpcm1lZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRiLnJlbW92ZVRyYW5zbGF0aW9uKGFiYnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaW1wb3J0WE1MQm9va3MocmVzdWx0LCBuYW1lLCBhYmJyLCBmaWxlLm5hbWUsIGxhbmd1YWdlLCBjYXRlZ29yeSwgcHJvY2Vzc2luZ1J1bGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnSW1wb3J0IGNhbmNlbGxlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbXBvcnRYTUxCb29rcyhyZXN1bHQsIG5hbWUsIGFiYnIsIGZpbGUubmFtZSwgbGFuZ3VhZ2UsIGNhdGVnb3J5LCBwcm9jZXNzaW5nUnVsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdYTUwgaW1wb3J0IGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBpbXBvcnQgJHtmaWxlLm5hbWV9OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignWE1MIGltcG9ydCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gaW1wb3J0ICR7ZmlsZS5uYW1lfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBpbXBvcnRYTUxCb29rcyhyZXN1bHQ6IGFueSwgdHJhbnNsYXRpb25OYW1lOiBzdHJpbmcsIGFiYnJldmlhdGlvbjogc3RyaW5nLCBmaWxlTmFtZTogc3RyaW5nLCBsYW5ndWFnZTogc3RyaW5nID0gJ0VuZ2xpc2gnLCBjYXRlZ29yeTogc3RyaW5nID0gJ1N0YW5kYXJkJywgcHJvY2Vzc2luZ1J1bGVzOiBQcm9jZXNzaW5nUnVsZVtdID0gW10pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJvb2tzID0gcmVzdWx0LlhNTEJJQkxFLkJJQkxFQk9PSztcbiAgICAgICAgICAgIGlmICghYm9va3MgfHwgYm9va3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYm9va3MgZm91bmQgaW4gWE1MLiBJbXBvcnQgYWJvcnRlZC4nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBib29rcyBmb3VuZCBpbiBYTUw6JywgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTaG93IHByb2dyZXNzIG5vdGljZVxuICAgICAgICAgICAgbmV3IE5vdGljZShgU3RhcnRpbmcgaW1wb3J0IG9mICR7dHJhbnNsYXRpb25OYW1lfS4uLmApO1xuICAgICAgICAgICAgLy8gQWRkIHRyYW5zbGF0aW9uIHRvIGRhdGFiYXNlIHdpdGggYWxsIGRldGFpbHNcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uSWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5kYi5hZGRUcmFuc2xhdGlvbih0cmFuc2xhdGlvbk5hbWUsIGFiYnJldmlhdGlvbiwgbGFuZ3VhZ2UsIGNhdGVnb3J5LCBwcm9jZXNzaW5nUnVsZXMpO1xuICAgICAgICAgICAgbGV0IGltcG9ydGVkQ291bnQgPSAwO1xuICAgICAgICAgICAgbGV0IGJvb2tDb3VudCA9IDA7XG4gICAgICAgICAgICBjb25zdCB2ZXJzZXNUb0FkZDogQXJyYXk8e3RyYW5zbGF0aW9uSWQ6IG51bWJlciwgYm9vazogc3RyaW5nLCBjaGFwdGVyOiBudW1iZXIsIHZlcnNlOiBudW1iZXIsIHRleHQ6IHN0cmluZ30+ID0gW107XG4gICAgICAgICAgICAvLyBQcm9jZXNzIGVhY2ggYm9va1xuICAgICAgICAgICAgZm9yIChjb25zdCBib29rIG9mIGJvb2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFib29rIHx8ICFib29rLiQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tOYW1lID0gYm9vay4kLmJuYW1lIHx8IGJvb2suJC5zbmFtZSB8fCAnVW5rbm93bic7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhcHRlcnMgPSBBcnJheS5pc0FycmF5KGJvb2suQ0hBUFRFUikgPyBib29rLkNIQVBURVIgOiBbYm9vay5DSEFQVEVSXTtcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIGVhY2ggY2hhcHRlclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2hhcHRlciBvZiBjaGFwdGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXB0ZXIgfHwgIWNoYXB0ZXIuJCkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXB0ZXJOdW0gPSBwYXJzZUludChjaGFwdGVyLiQuY251bWJlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihjaGFwdGVyTnVtKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNlcyA9IEFycmF5LmlzQXJyYXkoY2hhcHRlci5WRVJTKSA/IGNoYXB0ZXIuVkVSUyA6IChjaGFwdGVyLlZFUlMgPyBbY2hhcHRlci5WRVJTXSA6IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBlYWNoIHZlcnNlXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmVyc2Ugb2YgdmVyc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZlcnNlKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2ZXJzZVRleHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2ZXJzZU51bSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IHZlcnNlIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmVyc2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2VUZXh0ID0gdmVyc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZlcnNlLl8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZVRleHQgPSB2ZXJzZS5fO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZlcnNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNlVGV4dCA9IHZlcnNlLmpvaW4oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCB2ZXJzZSBudW1iZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZXJzZS4kICYmIHZlcnNlLiQudm51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNlTnVtID0gcGFyc2VJbnQodmVyc2UuJC52bnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB2ZXJzZSBpZiBpdCBoYXMgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNlVGV4dCAmJiB2ZXJzZVRleHQudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2VzVG9BZGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2s6IGJvb2tOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFwdGVyOiBjaGFwdGVyTnVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzZTogdmVyc2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHZlcnNlVGV4dC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZENvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm9va0NvdW50Kys7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyBwcm9ncmVzcyBldmVyeSAxMCBib29rc1xuICAgICAgICAgICAgICAgIGlmIChib29rQ291bnQgJSAxMCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBQcm9jZXNzZWQgJHtib29rQ291bnR9IGJvb2tzLCAke2ltcG9ydGVkQ291bnR9IHZlcnNlcy4uLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQmlibGVMaW5rXSBQYXJzZWQgJHtpbXBvcnRlZENvdW50fSB2ZXJzZXMgZnJvbSBYTUwgZm9yICR7dHJhbnNsYXRpb25OYW1lfWApO1xuICAgICAgICAgICAgLy8gU2F2ZSBhbGwgdmVyc2VzIGluIGEgc2luZ2xlIGJhdGNoIG9wZXJhdGlvblxuICAgICAgICAgICAgaWYgKHZlcnNlc1RvQWRkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTYXZpbmcgJHtpbXBvcnRlZENvdW50fSB2ZXJzZXMgdG8gZGF0YWJhc2UuLi5gKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYi5hZGRWZXJzZXNCYXRjaCh2ZXJzZXNUb0FkZCk7XG4gICAgICAgICAgICAgICAgLy8gVmVyaWZ5IHRoZSBpbXBvcnQgd2FzIHN1Y2Nlc3NmdWxcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbkV4aXN0cyA9IHRoaXMucGx1Z2luLmRiLnZlcmlmeVRyYW5zbGF0aW9uRXhpc3RzKGFiYnJldmlhdGlvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRpb25TdGF0cyA9IHRoaXMucGx1Z2luLmRiLmdldFRyYW5zbGF0aW9uU3RhdHMoYWJicmV2aWF0aW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxWZXJzZXMgPSB0aGlzLnBsdWdpbi5kYlsnZGF0YSddPy52ZXJzZXM/LmZpbHRlcih2ID0+IHYudHJhbnNsYXRpb25faWQgPT09IHRyYW5zbGF0aW9uSWQpIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQmlibGVMaW5rXSBTYXZlZCAke2FsbFZlcnNlcy5sZW5ndGh9IHZlcnNlcyBmb3IgJHt0cmFuc2xhdGlvbk5hbWV9IChzaG91bGQgbWF0Y2ggJHtpbXBvcnRlZENvdW50fSlgKTtcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb25FeGlzdHMgJiYgdHJhbnNsYXRpb25TdGF0cyAmJiBhbGxWZXJzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3MDUgU3VjY2Vzc2Z1bGx5IGltcG9ydGVkICR7dHJhbnNsYXRpb25OYW1lfSAoJHthYmJyZXZpYXRpb259KSB3aXRoICR7dHJhbnNsYXRpb25TdGF0cy52ZXJzZUNvdW50fSB2ZXJzZXMgZnJvbSAke3RyYW5zbGF0aW9uU3RhdHMuYm9va3MubGVuZ3RofSBib29rc2ApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQmlibGUgaW1wb3J0IGNvbXBsZXRlZDogJHt0cmFuc2xhdGlvbk5hbWV9ICgke2FiYnJldmlhdGlvbn0pIC0gJHt0cmFuc2xhdGlvblN0YXRzLnZlcnNlQ291bnR9IHZlcnNlcyBmcm9tICR7dHJhbnNsYXRpb25TdGF0cy5ib29rcy5sZW5ndGh9IGJvb2tzYCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEltcG9ydCBmYWlsZWQ6IE5vIHZlcnNlcyBzYXZlZCBmb3IgJHt0cmFuc2xhdGlvbk5hbWV9LiBDaGVjayB0aGUgWE1MIGZvcm1hdCBhbmQgdHJ5IGFnYWluLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbQmlibGVMaW5rXSBJbXBvcnQgZmFpbGVkOiBObyB2ZXJzZXMgc2F2ZWQgZm9yICR7dHJhbnNsYXRpb25OYW1lfS5gKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGIucmVtb3ZlVHJhbnNsYXRpb24oYWJicmV2aWF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBObyB2ZXJzZXMgd2VyZSBmb3VuZCBpbiB0aGUgWE1MIGZpbGUuIEltcG9ydCBhYm9ydGVkLicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCaWJsZUxpbmtdIE5vIHZlcnNlcyBmb3VuZCBpbiBYTUw6JywgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYi5yZW1vdmVUcmFuc2xhdGlvbihhYmJyZXZpYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignWE1MIGltcG9ydCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgRmFpbGVkIHRvIGltcG9ydCAke2ZpbGVOYW1lfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgLy8gVHJ5IHRvIGNsZWFuIHVwIGlmIHRyYW5zbGF0aW9uIHdhcyBwYXJ0aWFsbHkgYWRkZWRcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGIucmVtb3ZlVHJhbnNsYXRpb24oYWJicmV2aWF0aW9uKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGNsZWFudXBFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjbGVhbnVwIGFmdGVyIGltcG9ydCBlcnJvcjonLCBjbGVhbnVwRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZW1vdmVUcmFuc2xhdGlvbihhYmJyZXZpYXRpb246IHN0cmluZykge1xuICAgICAgICBpZiAoYWJicmV2aWF0aW9uID09PSAnQVNWJykge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnQ2Fubm90IHJlbW92ZSBBU1YgdHJhbnNsYXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5kYi5yZW1vdmVUcmFuc2xhdGlvbihhYmJyZXZpYXRpb24pO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgJHthYmJyZXZpYXRpb259IHRyYW5zbGF0aW9uIHJlbW92ZWRgKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlbW92ZWQgdHJhbnNsYXRpb24gd2FzIHRoZSBkZWZhdWx0LCByZXNldCB0byBBU1ZcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VHJhbnNsYXRpb24gPT09IGFiYnJldmlhdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRUcmFuc2xhdGlvbiA9ICdBU1YnO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0aGUgc2V0dGluZ3MgZGlzcGxheVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHJlbW92ZSAke2FiYnJldmlhdGlvbn06IHRyYW5zbGF0aW9uIG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb25maXJtUmVtb3ZlVHJhbnNsYXRpb24oYWJicmV2aWF0aW9uOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtTW9kYWwodGhpcy5hcHAsIGBSZW1vdmUgdHJhbnNsYXRpb24gJyR7bmFtZX0nICgke2FiYnJldmlhdGlvbn0pP2AsIGFzeW5jIChjb25maXJtZWQpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maXJtZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZVRyYW5zbGF0aW9uKGFiYnJldmlhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICAvLyAtLS0gU2hvcnRjdXQgTWFuYWdlbWVudCBJbXBsZW1lbnRhdGlvbiAtLS1cbiAgICBwcml2YXRlIHJlbmRlclNob3J0Y3V0c1NlY3Rpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNob3J0Y3V0cyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3J0Y3V0cztcblxuICAgICAgICAvLyBGaWx0ZXIgaW5wdXRcbiAgICAgICAgY29uc3QgZmlsdGVyQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnYmlibGVsaW5rLWZpbHRlci1jb250YWluZXInIH0pO1xuICAgICAgICBjb25zdCBmaWx0ZXJJbnB1dCA9IGZpbHRlckNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0ZpbHRlciBzaG9ydGN1dHMuLi4nLFxuICAgICAgICAgICAgY2xzOiAnYmlibGVsaW5rLWZpbHRlci1pbnB1dCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRhYmxlXG4gICAgICAgIGNvbnN0IHRhYmxlID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdiaWJsZWxpbmstc2hvcnRjdXQtdGFibGUnIH0pO1xuICAgICAgICBjb25zdCB0aGVhZCA9IHRhYmxlLmNyZWF0ZUVsKCd0aGVhZCcpO1xuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcblxuICAgICAgICAvLyBTb3J0IHN0YXRlXG4gICAgICAgIGxldCBzb3J0RmllbGQ6ICdrZXknIHwgJ3JlZmVyZW5jZScgPSAna2V5JztcbiAgICAgICAgbGV0IHNvcnRBc2MgPSB0cnVlO1xuXG4gICAgICAgIC8vIENyZWF0ZSBoZWFkZXJzIHdpdGggc29ydCBmdW5jdGlvbmFsaXR5XG4gICAgICAgIGNvbnN0IGNyZWF0ZVNvcnRhYmxlSGVhZGVyID0gKHRleHQ6IHN0cmluZywgZmllbGQ6ICdrZXknIHwgJ3JlZmVyZW5jZScpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRoID0gaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dCB9KTtcbiAgICAgICAgICAgIHRoLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIHRoLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNvcnRGaWVsZCA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgc29ydEFzYyA9ICFzb3J0QXNjO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNvcnRGaWVsZCA9IGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICBzb3J0QXNjID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVuZGVyU2hvcnRjdXRzKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIGNyZWF0ZVNvcnRhYmxlSGVhZGVyKCdTaG9ydGN1dCcsICdrZXknKTtcbiAgICAgICAgY3JlYXRlU29ydGFibGVIZWFkZXIoJ1JlZmVyZW5jZScsICdyZWZlcmVuY2UnKTtcbiAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogJ0FjdGlvbnMnIH0pO1xuXG4gICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG5cbiAgICAgICAgY29uc3QgcmVuZGVyU2hvcnRjdXRzID0gKCkgPT4ge1xuICAgICAgICAgICAgdGJvZHkuZW1wdHkoKTtcbiAgICAgICAgICAgIGxldCBzaG9ydGN1dEVudHJpZXMgPSBPYmplY3QuZW50cmllcyhzaG9ydGN1dHMpO1xuXG4gICAgICAgICAgICAvLyBBcHBseSBmaWx0ZXJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlclRleHQgPSBmaWx0ZXJJbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKGZpbHRlclRleHQpIHtcbiAgICAgICAgICAgICAgICBzaG9ydGN1dEVudHJpZXMgPSBzaG9ydGN1dEVudHJpZXMuZmlsdGVyKChba2V5LCByZWZdKSA9PlxuICAgICAgICAgICAgICAgICAgICBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJUZXh0KSB8fFxuICAgICAgICAgICAgICAgICAgICByZWYudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJUZXh0KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IHNvcnRcbiAgICAgICAgICAgIHNob3J0Y3V0RW50cmllcy5zb3J0KChba2V5QSwgcmVmQV0sIFtrZXlCLCByZWZCXSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFWYWwgPSBzb3J0RmllbGQgPT09ICdrZXknID8ga2V5QSA6IHJlZkE7XG4gICAgICAgICAgICAgICAgY29uc3QgYlZhbCA9IHNvcnRGaWVsZCA9PT0gJ2tleScgPyBrZXlCIDogcmVmQjtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNvcnRBc2MgPyAxIDogLTEpICogYVZhbC5sb2NhbGVDb21wYXJlKGJWYWwpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNob3J0Y3V0RW50cmllcy5mb3JFYWNoKChba2V5LCByZWZlcmVuY2VdKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gdGJvZHkuY3JlYXRlRWwoJ3RyJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMgYXMgYW55KS5fZWRpdGluZ0tleSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVkaXQgbW9kZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlDZWxsID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlJbnB1dCA9IGtleUNlbGwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ2JpYmxlbGluay1lZGl0LWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2hvcnRjdXQgKGUuZy4sIGpuMzE2KSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVmQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVmSW5wdXQgPSByZWZDZWxsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZWZlcmVuY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdiaWJsZWxpbmstZWRpdC1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1JlZmVyZW5jZSAoZS5nLiwgSm9obiAzOjE2KSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ2VsbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU2F2ZScgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0tleSA9IGtleUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JlZiA9IHJlZklucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdLZXkgfHwgIW5ld1JlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1Nob3J0Y3V0IGFuZCByZWZlcmVuY2UgcmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdLZXkgIT09IGtleSAmJiBzaG9ydGN1dHNbbmV3S2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1Nob3J0Y3V0IGtleSBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEvXlxcdytcXHMrXFxkKzpcXGQrJC8udGVzdChuZXdSZWYpICYmICEvXlxcdytcXHMrXFxkKzpcXGQrKC1cXGQrKT8kLy50ZXN0KG5ld1JlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdSZWZlcmVuY2UgbXVzdCBiZSBpbiB0aGUgZm9ybWF0IEJvb2sgQ2hhcHRlcjpWZXJzZSBvciBCb29rIENoYXB0ZXI6VmVyc2UtVmVyc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzaG9ydGN1dFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNob3J0Y3V0c1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXRzW25ld0tleV0gPSBuZXdSZWY7XG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcyBhcyBhbnkpLl9lZGl0aW5nS2V5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyU2hvcnRjdXRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdTaG9ydGN1dCB1cGRhdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ2VsbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgYXMgYW55KS5fZWRpdGluZ0tleSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJTaG9ydGN1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBWaWV3IG1vZGVcbiAgICAgICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDoga2V5IH0pO1xuICAgICAgICAgICAgICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiByZWZlcmVuY2UgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkNlbGwgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ2VsbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRWRpdCcgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIGFueSkuX2VkaXRpbmdLZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJTaG9ydGN1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ2VsbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1JlbW92ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdtb2Qtd2FybmluZydcbiAgICAgICAgICAgICAgICAgICAgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENvbmZpcm1Nb2RhbCh0aGlzLmFwcCwgYFJlbW92ZSBzaG9ydGN1dCAnJHtrZXl9Jz9gLCBhc3luYyAoY29uZmlybWVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2hvcnRjdXRzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJTaG9ydGN1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQWRkIG5ldyBzaG9ydGN1dCByb3dcbiAgICAgICAgICAgIGlmICgodGhpcyBhcyBhbnkpLl9hZGRpbmdTaG9ydGN1dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleUlucHV0ID0gcm93LmNyZWF0ZUVsKCd0ZCcpLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1Nob3J0Y3V0IChlLmcuLCBqbjMxNiknLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdiaWJsZWxpbmstZWRpdC1pbnB1dCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZJbnB1dCA9IHJvdy5jcmVhdGVFbCgndGQnKS5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdSZWZlcmVuY2UgKGUuZy4sIEpvaG4gMzoxNiknLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdiaWJsZWxpbmstZWRpdC1pbnB1dCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25DZWxsID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICAgICAgICAgIGFjdGlvbkNlbGwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FkZCcgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3S2V5ID0ga2V5SW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSZWYgPSByZWZJbnB1dC52YWx1ZS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdLZXkgfHwgIW5ld1JlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnU2hvcnRjdXQgYW5kIHJlZmVyZW5jZSByZXF1aXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3J0Y3V0c1tuZXdLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdTaG9ydGN1dCBrZXkgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghL15cXHcrXFxzK1xcZCs6XFxkKyQvLnRlc3QobmV3UmVmKSAmJiAhL15cXHcrXFxzK1xcZCs6XFxkKygtXFxkKyk/JC8udGVzdChuZXdSZWYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdSZWZlcmVuY2UgbXVzdCBiZSBpbiB0aGUgZm9ybWF0IEJvb2sgQ2hhcHRlcjpWZXJzZSBvciBCb29rIENoYXB0ZXI6VmVyc2UtVmVyc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0c1tuZXdLZXldID0gbmV3UmVmO1xuICAgICAgICAgICAgICAgICAgICAodGhpcyBhcyBhbnkpLl9hZGRpbmdTaG9ydGN1dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyU2hvcnRjdXRzKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1Nob3J0Y3V0IGFkZGVkJyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhY3Rpb25DZWxsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIGFueSkuX2FkZGluZ1Nob3J0Y3V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclNob3J0Y3V0cygpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFkZFJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFkZENlbGwgPSBhZGRSb3cuY3JlYXRlRWwoJ3RkJywgeyBhdHRyOiB7IGNvbHNwYW46ICczJyB9IH0pO1xuICAgICAgICAgICAgICAgIGFkZENlbGwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0FkZCBTaG9ydGN1dCcsXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgICAgICAgICAgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMgYXMgYW55KS5fYWRkaW5nU2hvcnRjdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJTaG9ydGN1dHMoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEluaXRpYWwgcmVuZGVyXG4gICAgICAgIHJlbmRlclNob3J0Y3V0cygpO1xuXG4gICAgICAgIC8vIEFkZCBmaWx0ZXIgbGlzdGVuZXJcbiAgICAgICAgZmlsdGVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCByZW5kZXJTaG9ydGN1dHMpO1xuXG4gICAgICAgIC8vIEFkZCBDU1NcbiAgICAgICAgY29uc3QgY3NzID0gYFxuICAgICAgICAgICAgLmJpYmxlbGluay1zaG9ydGN1dC10YWJsZSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmJpYmxlbGluay1zaG9ydGN1dC10YWJsZSB0aCxcbiAgICAgICAgICAgIC5iaWJsZWxpbmstc2hvcnRjdXQtdGFibGUgdGQge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5iaWJsZWxpbmstc2hvcnRjdXQtdGFibGUgdGgge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuaGVhZC5jcmVhdGVFbCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGNzcztcbiAgICB9XG59XG5cbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgb25SZXN1bHQ6IChjb25maXJtZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1lc3NhZ2U6IHN0cmluZywgb25SZXN1bHQ6IChjb25maXJtZWQ6IGJvb2xlYW4pID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5vblJlc3VsdCA9IG9uUmVzdWx0O1xuICAgIH1cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbmZpcm0nIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcbiAgICAgICAgY29uc3QgYnRuUm93ID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBidG5Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgYnRuUm93LnN0eWxlLmdhcCA9ICcxMHB4JztcbiAgICAgICAgYnRuUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdSZW1vdmUnLCBjbHM6ICdtb2Qtd2FybmluZycgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25SZXN1bHQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIGJ0blJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5vblJlc3VsdChmYWxzZSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG5jbGFzcyBJbXBvcnRUcmFuc2xhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhYmJyZXZpYXRpb246IHN0cmluZztcbiAgICBvblN1Ym1pdDogKG5hbWU6IHN0cmluZywgYWJicmV2aWF0aW9uOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGRlZmF1bHROYW1lOiBzdHJpbmcsIGRlZmF1bHRBYmJyOiBzdHJpbmcsIG9uU3VibWl0OiAobmFtZTogc3RyaW5nLCBhYmJyZXZpYXRpb246IHN0cmluZykgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLm5hbWUgPSBkZWZhdWx0TmFtZTtcbiAgICAgICAgdGhpcy5hYmJyZXZpYXRpb24gPSBkZWZhdWx0QWJicjtcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW1wb3J0IFRyYW5zbGF0aW9uJyB9KTtcblxuICAgICAgICAvLyBOYW1lIGlucHV0XG4gICAgICAgIGNvbnN0IG5hbWVDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIG5hbWVDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnVHJhbnNsYXRpb24gTmFtZTonIH0pO1xuICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1RyYW5zbGF0aW9uIE5hbWUnXG4gICAgICAgIH0pO1xuICAgICAgICBuYW1lSW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIG5hbWVJbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XG5cbiAgICAgICAgLy8gQWJicmV2aWF0aW9uIGlucHV0XG4gICAgICAgIGNvbnN0IGFiYnJDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGFiYnJDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnQWJicmV2aWF0aW9uOicgfSk7XG4gICAgICAgIGNvbnN0IGFiYnJJbnB1dCA9IGFiYnJDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuYWJicmV2aWF0aW9uLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdBYmJyZXZpYXRpb24gKGUuZy4sIEtKViknXG4gICAgICAgIH0pO1xuICAgICAgICBhYmJySW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGFiYnJJbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XG5cbiAgICAgICAgLy8gQnV0dG9uc1xuICAgICAgICBjb25zdCBidG5Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGJ0bkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBidG5Db250YWluZXIuc3R5bGUuZ2FwID0gJzEwcHgnO1xuICAgICAgICBidG5Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuXG4gICAgICAgIGJ0bkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnSW1wb3J0JyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCBhYmJyID0gYWJicklucHV0LnZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgICBpZiAoIW5hbWUgfHwgIWFiYnIpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdOYW1lIGFuZCBhYmJyZXZpYXRpb24gYXJlIHJlcXVpcmVkJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm9uU3VibWl0KG5hbWUsIGFiYnIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGJ0bkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSBcblxuY2xhc3MgVHJhbnNsYXRpb25FZGl0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBuYW1lOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBhYmJyZXZpYXRpb246IHN0cmluZztcbiAgICBwcml2YXRlIGxhbmd1YWdlOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjYXRlZ29yeTogc3RyaW5nO1xuICAgIHByaXZhdGUgcHJvY2Vzc2luZ1J1bGVzOiBQcm9jZXNzaW5nUnVsZVtdO1xuICAgIHByaXZhdGUgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcsIGFiYnJldmlhdGlvbjogc3RyaW5nLCBsYW5ndWFnZTogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nLCBwcm9jZXNzaW5nUnVsZXM6IFByb2Nlc3NpbmdSdWxlW10pID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBpc0VkaXQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsIFxuICAgICAgICBkZWZhdWx0TmFtZTogc3RyaW5nLCBcbiAgICAgICAgZGVmYXVsdEFiYnI6IHN0cmluZywgXG4gICAgICAgIGRlZmF1bHRMYW5ndWFnZTogc3RyaW5nID0gJ0VuZ2xpc2gnLFxuICAgICAgICBkZWZhdWx0Q2F0ZWdvcnk6IHN0cmluZyA9ICdTdGFuZGFyZCcsXG4gICAgICAgIGRlZmF1bHRQcm9jZXNzaW5nUnVsZXM6IFByb2Nlc3NpbmdSdWxlW10gPSBbXSxcbiAgICAgICAgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcsIGFiYnJldmlhdGlvbjogc3RyaW5nLCBsYW5ndWFnZTogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nLCBwcm9jZXNzaW5nUnVsZXM6IFByb2Nlc3NpbmdSdWxlW10pID0+IHZvaWQsXG4gICAgICAgIGlzRWRpdDogYm9vbGVhbiA9IGZhbHNlXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMubmFtZSA9IGRlZmF1bHROYW1lO1xuICAgICAgICB0aGlzLmFiYnJldmlhdGlvbiA9IGRlZmF1bHRBYmJyO1xuICAgICAgICB0aGlzLmxhbmd1YWdlID0gZGVmYXVsdExhbmd1YWdlO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gZGVmYXVsdENhdGVnb3J5O1xuICAgICAgICB0aGlzLnByb2Nlc3NpbmdSdWxlcyA9IFsuLi5kZWZhdWx0UHJvY2Vzc2luZ1J1bGVzXTtcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgICAgICB0aGlzLmlzRWRpdCA9IGlzRWRpdDtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLmlzRWRpdCA/ICdFZGl0IFRyYW5zbGF0aW9uJyA6ICdBZGQgVHJhbnNsYXRpb24nIH0pO1xuXG4gICAgICAgIC8vIFRyYW5zbGF0aW9uIE5hbWVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RyYW5zbGF0aW9uIE5hbWUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Z1bGwgbmFtZSBvZiB0aGUgdHJhbnNsYXRpb24nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdlLmcuLCBBbWVyaWNhbiBTdGFuZGFyZCBWZXJzaW9uJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5uYW1lKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBYmJyZXZpYXRpb25cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FiYnJldmlhdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2hvcnQgYWJicmV2aWF0aW9uIGZvciB0aGUgdHJhbnNsYXRpb24nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdlLmcuLCBBU1YnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmFiYnJldmlhdGlvbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFiYnJldmlhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBMYW5ndWFnZVxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTGFuZ3VhZ2UnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0xhbmd1YWdlIG9mIHRoZSB0cmFuc2xhdGlvbicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgJ0VuZ2xpc2gnLCAnU3BhbmlzaCcsICdGcmVuY2gnLCAnR2VybWFuJywgJ0l0YWxpYW4nLCAnUG9ydHVndWVzZScsXG4gICAgICAgICAgICAgICAgICAgICdSdXNzaWFuJywgJ0NoaW5lc2UnLCAnSmFwYW5lc2UnLCAnS29yZWFuJywgJ0FyYWJpYycsICdIZWJyZXcnLFxuICAgICAgICAgICAgICAgICAgICAnR3JlZWsnLCAnTGF0aW4nLCAnU3dlZGlzaCcsICdOb3J3ZWdpYW4nLCAnRGFuaXNoJywgJ0R1dGNoJyxcbiAgICAgICAgICAgICAgICAgICAgJ1BvbGlzaCcsICdDemVjaCcsICdTbG92YWsnLCAnSHVuZ2FyaWFuJywgJ1JvbWFuaWFuJywgJ0J1bGdhcmlhbicsXG4gICAgICAgICAgICAgICAgICAgICdVa3JhaW5pYW4nLCAnQmVsYXJ1c2lhbicsICdTZXJiaWFuJywgJ0Nyb2F0aWFuJywgJ1Nsb3ZlbmlhbicsXG4gICAgICAgICAgICAgICAgICAgICdFc3RvbmlhbicsICdMYXR2aWFuJywgJ0xpdGh1YW5pYW4nLCAnRmlubmlzaCcsICdJY2VsYW5kaWMnLFxuICAgICAgICAgICAgICAgICAgICAnVHVya2lzaCcsICdQZXJzaWFuJywgJ0hpbmRpJywgJ0JlbmdhbGknLCAnVGhhaScsICdWaWV0bmFtZXNlJyxcbiAgICAgICAgICAgICAgICAgICAgJ0luZG9uZXNpYW4nLCAnTWFsYXknLCAnRmlsaXBpbm8nLCAnT3RoZXInXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaChsYW5nID0+IGRyb3Bkb3duLmFkZE9wdGlvbihsYW5nLCBsYW5nKSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5sYW5ndWFnZSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhbmd1YWdlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBDYXRlZ29yeVxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2F0ZWdvcnknKVxuICAgICAgICAgICAgLnNldERlc2MoJ0NhdGVnb3J5IG9mIHRoZSB0cmFuc2xhdGlvbicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBbXG4gICAgICAgICAgICAgICAgICAgICdTdGFuZGFyZCcsICdTdHVkeScsICdQYXJhcGhyYXNlJywgJ0xpdGVyYWwnLCAnRHluYW1pYycsXG4gICAgICAgICAgICAgICAgICAgICdIaXN0b3JpY2FsJywgJ0NhdGhvbGljJywgJ09ydGhvZG94JywgJ1Byb3Rlc3RhbnQnLFxuICAgICAgICAgICAgICAgICAgICAnSmV3aXNoJywgJ0FjYWRlbWljJywgJ0NoaWxkcmVuJywgJ090aGVyJ1xuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllcy5mb3JFYWNoKGNhdCA9PiBkcm9wZG93bi5hZGRPcHRpb24oY2F0LCBjYXQpKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmNhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFByb2Nlc3NpbmcgUnVsZXMgU2VjdGlvblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUHJvY2Vzc2luZyBSdWxlcycgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnQWRkIHJlZ2V4IHBhdHRlcm5zIHRvIGZvcm1hdCB2ZXJzZSB0ZXh0LiBFeGFtcGxlOiBcXFxcW1xcXFx3K1xcXFxdID0gPGVtPiQmPC9lbT4gdG8gbWFrZSBicmFja2V0ZWQgdGV4dCBpdGFsaWMuJyxcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcnVsZXNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAncHJvY2Vzc2luZy1ydWxlcy1jb250YWluZXInIH0pO1xuICAgICAgICB0aGlzLnJlbmRlclByb2Nlc3NpbmdSdWxlcyhydWxlc0NvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gQWRkIFJ1bGUgQnV0dG9uXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdBZGQgUHJvY2Vzc2luZyBSdWxlJylcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1J1bGVzLnB1c2goeyByZWdleDogJycsIGZvcm1hdHRpbmc6ICcnLCBlc2NhcGU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclByb2Nlc3NpbmdSdWxlcyhydWxlc0NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEJ1dHRvbnNcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1jb250cm9sJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ0NhbmNlbCcsXG4gICAgICAgICAgICBjbHM6ICdtb2Qtd2FybmluZydcbiAgICAgICAgfSkub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcblxuICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuaXNFZGl0ID8gJ1VwZGF0ZScgOiAnQWRkJyxcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYW1lLnRyaW0oKSAmJiB0aGlzLmFiYnJldmlhdGlvbi50cmltKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3VibWl0KHRoaXMubmFtZS50cmltKCksIHRoaXMuYWJicmV2aWF0aW9uLnRyaW0oKSwgdGhpcy5sYW5ndWFnZSwgdGhpcy5jYXRlZ29yeSwgdGhpcy5wcm9jZXNzaW5nUnVsZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGZpbGwgaW4gYWxsIHJlcXVpcmVkIGZpZWxkcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUHJvY2Vzc2luZ1J1bGVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnByb2Nlc3NpbmdSdWxlcy5mb3JFYWNoKChydWxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVsZUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwcm9jZXNzaW5nLXJ1bGUtaXRlbScgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlZ2V4IFBhdHRlcm5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJ1bGVDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ1JlZ2V4IFBhdHRlcm4nKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2gnKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2UuZy4sIFxcXFxbXFxcXHcrXFxcXF0nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUocnVsZS5yZWdleClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1J1bGVzW2luZGV4XS5yZWdleCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIC8vIEZvcm1hdHRpbmdcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJ1bGVDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ0Zvcm1hdHRpbmcnKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdSZXBsYWNlbWVudCB0ZXh0ICh1c2UgJCYgZm9yIG1hdGNoZWQgdGV4dCknKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2UuZy4sIDxlbT4kJjwvZW0+JylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHJ1bGUuZm9ybWF0dGluZylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1J1bGVzW2luZGV4XS5mb3JtYXR0aW5nID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgLy8gRXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVyc1xuICAgICAgICAgICAgbmV3IFNldHRpbmcocnVsZUNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnRXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycycpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzY2FwZSBbLCBdLCA8LCA+LCAmIGluIHRoZSBtYXRjaGVkIHRleHQgZm9yIEhUTUwgb3V0cHV0LicpXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSghIXJ1bGUuZXNjYXBlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nUnVsZXNbaW5kZXhdLmVzY2FwZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBCdXR0b25cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJ1bGVDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZW1vdmUnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0V2FybmluZygpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1J1bGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclByb2Nlc3NpbmdSdWxlcyhjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59ICJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFDQSxJQUFDLFlBQVc7QUFDVixjQUFRLFdBQVc7QUFBQSxRQUNqQixPQUFPO0FBQUEsVUFDTCxpQkFBaUI7QUFBQSxVQUNqQixNQUFNO0FBQUEsVUFDTixXQUFXO0FBQUEsVUFDWCxlQUFlO0FBQUEsVUFDZixTQUFTO0FBQUEsVUFDVCxTQUFTO0FBQUEsVUFDVCxlQUFlO0FBQUEsVUFDZixhQUFhO0FBQUEsVUFDYixZQUFZO0FBQUEsVUFDWixjQUFjO0FBQUEsVUFDZCxXQUFXO0FBQUEsVUFDWCxPQUFPO0FBQUEsVUFDUCxrQkFBa0I7QUFBQSxVQUNsQixVQUFVO0FBQUEsVUFDVixpQkFBaUI7QUFBQSxVQUNqQixtQkFBbUI7QUFBQSxVQUNuQixPQUFPO0FBQUEsVUFDUCxRQUFRO0FBQUEsVUFDUixvQkFBb0I7QUFBQSxVQUNwQixxQkFBcUI7QUFBQSxVQUNyQixtQkFBbUI7QUFBQSxVQUNuQixpQkFBaUI7QUFBQSxVQUNqQixVQUFVO0FBQUE7QUFBQSxRQUVaLE9BQU87QUFBQSxVQUNMLGlCQUFpQjtBQUFBLFVBQ2pCLE1BQU07QUFBQSxVQUNOLFdBQVc7QUFBQSxVQUNYLGVBQWU7QUFBQSxVQUNmLFNBQVM7QUFBQSxVQUNULFNBQVM7QUFBQSxVQUNULGVBQWU7QUFBQSxVQUNmLGFBQWE7QUFBQSxVQUNiLFlBQVk7QUFBQSxVQUNaLGNBQWM7QUFBQSxVQUNkLFdBQVc7QUFBQSxVQUNYLE9BQU87QUFBQSxVQUNQLGtCQUFrQjtBQUFBLFVBQ2xCLHVCQUF1QjtBQUFBLFVBQ3ZCLFVBQVU7QUFBQSxVQUNWLGlCQUFpQjtB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QUNSLGFBQWE7QUFBQSxRQUNiLHVCQUF1QjtBQUFBLFFBQ3ZCLGNBQWM7QUFBQSxRQUNkLHFCQUFxQjtBQUFBLFFBQ3JCLHFCQUFxQjtBQUFBLFFBQ3JCLHVCQUF1QjtBQUFBLFFBQ3ZCLHVCQUF1QjtBQUFBLFFBQ3ZCLHVCQUF1QjtBQUFBLFFBQ3ZCLFdBQVc7QUFBQSxRQUNYLHFCQUFxQjtBQUFBLFFBQ3JCLFFBQVE7QUFBQSxRQUNSLGVBQWU7QUFBQTtBQUdqQixVQUFJLGVBQWU7QUFBQSxRQUNqQixPQUFPO0FBQUEsUUFDUCxNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsUUFDTixRQUFRO0FBQUEsUUFDUixRQUFRO0FBQUE7QUFHVixVQUFJLFdBQVc7QUFBQSxRQUNiLE9BQU87QUFBQSxRQUNQLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFdBQVc7QUFBQSxRQUNYLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLFdBQVc7QUFBQSxRQUNYLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxRQUNULE9BQU87QUFBQSxRQUNQLFdBQVc7QUFBQSxRQUNYLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFdBQVc7QUFBQSxRQUNYLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLFdBQVc7QUFBQSxRQUNYLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULE9BQU87QUFBQSxRQUNQLFdBQVc7QUFBQSxRQUNYLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxRQUNULFlBQVk7QUFBQSxRQUNaLFNBQVM7QUFBQSxRQUNULE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFdBQVc7QUFBQSxRQUNYLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxRQUNWLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULE1BQU07QUFBQSxRQUNOLFNBQVM7QUFBQSxRQUNULE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLE9BQU87QUFBQSxRQUNQLE9BQU87QUFBQSxRQUNQLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFFBQVE7QUFBQSxRQUNSLFFBQVE7QUFBQSxRQUNSLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQTtBQUdYLGFBQU8sS0FBSyxJQUFJLFVBQVUsUUFBUSxTQUFVLEtBQUs7QUFDL0MsWUFBSSxJQUFJLElBQUksU0FBUztBQUNyQixZQUFJLEtBQUksT0FBTyxNQUFNLFdBQVcsT0FBTyxhQUFhLEtBQUs7QUFDekQsWUFBSSxTQUFTLE9BQU87QUFBQTtBQUd0QixlQUFTLEtBQUssSUFBSSxPQUFPO0FBQ3ZCLFlBQUksTUFBTSxJQUFJLE1BQU0sTUFBTTtBQUFBO0FBSTVCLFVBQUksSUFBSTtBQUVSLG9CQUFlLFFBQVEsT0FBTyxNQUFNO0FBQ2xDLGVBQU8sVUFBVSxPQUFPLE9BQU87QUFBQTtBQUdqQyx3QkFBbUIsUUFBUSxVQUFVLE1BQU07QUFDekMsWUFBSSxPQUFPO0FBQVUsb0JBQVU7QUFDL0IsYUFBSyxRQUFRLFVBQVU7QUFBQTtBQUd6Qix5QkFBb0IsUUFBUTtBQUMxQixlQUFPLFdBQVcsU0FBUyxPQUFPLEtBQUssT0FBTztBQUM5QyxZQUFJLE9BQU87QUFBVSxlQUFLLFFBQVEsVUFBVSxPQUFPO0FBQ25ELGVBQU8sV0FBVztBQUFBO0FBR3BCLHdCQUFtQixLQUFLLE1BQU07QUFDNUIsWUFBSSxJQUFJO0FBQU0saUJBQU8sS0FBSztBQUMxQixZQUFJLElBQUk7QUFBVyxpQkFBTyxLQUFLLFFBQVEsUUFBUTtBQUMvQyxlQUFPO0FBQUE7QUFHVCxxQkFBZ0IsUUFBUSxJQUFJO0FBQzFCLGtCQUFVO0FBQ1YsWUFBSSxPQUFPLGVBQWU7QUFDeEIsZ0JBQU0sYUFBYSxPQUFPLE9BQ3hCLGVBQWUsT0FBTyxTQUN0QixhQUFhLE9BQU87QUFBQTtBQUV4QixhQUFLLElBQUksTUFBTTtBQUNmLGVBQU8sUUFBUTtBQUNmLGFBQUssUUFBUSxXQUFXO0FBQ3hCLGVBQU87QUFBQTtBQUdULG1CQUFjLFFBQVE7QUFDcEIsWUFBSSxPQUFPLFdBQVcsQ0FBQyxPQUFPO0FBQVkscUJBQVcsUUFBUTtBQUM3RCxZQUFLLE9BQU8sVUFBVSxFQUFFLFNBQ3JCLE9BQU8sVUFBVSxFQUFFLG9CQUNuQixPQUFPLFVBQVUsRUFBRSxNQUFPO0FBQzNCLGdCQUFNLFFBQVE7QUFBQTtBQUVoQixrQkFBVTtBQUNWLGVBQU8sSUFBSTtBQUNYLGVBQU8sU0FBUztBQUNoQixhQUFLLFFBQVE7QUFDYixrQkFBVSxLQUFLLFFBQVEsT0FBTyxRQUFRLE9BQU87QUFDN0MsZUFBTztBQUFBO0FBR1QsMEJBQXFCLFFBQVEsU0FBUztBQUNwQyxZQUFJLE9BQU8sV0FBVyxZQUFZLENBQUUsbUJBQWtCLFlBQVk7QUFDaEUsZ0JBQU0sSUFBSSxNQUFNO0FBQUE7QUFFbEIsWUFBSSxPQUFPLFFBQVE7QUFDakIsZ0JBQU0sUUFBUTtBQUFBO0FBQUE7QUFJbEIsc0JBQWlCLFFBQVE7QUFDdkIsWUFBSSxDQUFDLE9BQU87QUFBUSxpQkFBTyxVQUFVLE9BQU8sUUFBUSxPQUFPO0FBQzNELFlBQUksU0FBUyxPQUFPLEtBQUssT0FBTyxLQUFLLFNBQVMsTUFBTTtBQUNwRCxZQUFJLE1BQU0sT0FBTyxNQUFNLEVBQUUsTUFBTSxPQUFPLFNBQVMsWUFBWTtBQUczRCxZQUFJLE9BQU8sSUFBSSxPQUFPO0FBQ3BCLGNBQUksS0FBSyxPQUFPO0FBQUE7QUFFbEIsZUFBTyxXQUFXLFNBQVM7QUFDM0IsaUJBQVMsUUFBUSxrQkFBa0I7QUFBQTtBQUdyQyxxQkFBZ0IsTUFBTSxXQUFXO0FBQy9CLFlBQUksSUFBSSxLQUFLLFFBQVE7QUFDckIsWUFBSSxXQUFXLElBQUksSUFBSSxDQUFFLElBQUksUUFBUyxLQUFLLE1BQU07QUFDakQsWUFBSSxTQUFTLFNBQVM7QUFDdEIsWUFBSSxRQUFRLFNBQVM7QUFHckIsWUFBSSxhQUFhLFNBQVMsU0FBUztBQUNqQyxtQkFBUztBQUNULGtCQUFRO0FBQUE7QUFHVixlQUFPLEVBQUUsUUFBZ0I7QUFBQTtBQUczQixzQkFBaUIsUUFBUTtBQUN2QixZQUFJLENBQUMsT0FBTyxRQUFRO0FBQ2xCLGlCQUFPLGFBQWEsT0FBTyxXQUFXLE9BQU87QUFBQTtBQUcvQyxZQUFJLE9BQU8sV0FBVyxRQUFRLE9BQU8sZ0JBQWdCLE1BQ25ELE9BQU8sSUFBSSxXQUFXLGVBQWUsT0FBTyxhQUFhO0FBQ3pELGlCQUFPLGFBQWEsT0FBTyxjQUFjO0FBQ3pDO0FBQUE7QUFHRixZQUFJLE9BQU8sSUFBSSxPQUFPO0FBQ3BCLGNBQUksS0FBSyxNQUFNLE9BQU8sWUFBWTtBQUNsQyxjQUFJLFNBQVMsR0FBRztBQUNoQixjQUFJLFFBQVEsR0FBRztBQUVmLGNBQUksV0FBVyxTQUFTO0FBRXRCLGdCQUFJLFVBQVUsU0FBUyxPQUFPLGdCQUFnQixlQUFlO0FBQzNELHlCQUFXLFFBQ1Qsa0NBQWtDLGdCQUFnQixlQUNyQyxPQUFPO0FBQUEsdUJBQ2IsVUFBVSxXQUFXLE9BQU8sZ0JBQWdCLGlCQUFpQjtBQUN0RSx5QkFBVyxRQUNULG9DQUFvQyxrQkFBa0IsZUFDekMsT0FBTztBQUFBLG1CQUNqQjtBQUNMLGtCQUFJLE1BQU0sT0FBTztBQUNqQixrQkFBSSxTQUFTLE9BQU8sS0FBSyxPQUFPLEtBQUssU0FBUyxNQUFNO0FBQ3BELGtCQUFJLElBQUksT0FBTyxPQUFPLElBQUk7QUFDeEIsb0JBQUksS0FBSyxPQUFPLE9BQU8sT0FBTztBQUFBO0FBRWhDLGtCQUFJLEdBQUcsU0FBUyxPQUFPO0FBQUE7QUFBQTtBQU8zQixpQkFBTyxXQUFXLEtBQUssQ0FBQyxPQUFPLFlBQVksT0FBTztBQUFBLGVBQzdDO0FBRUwsaUJBQU8sSUFBSSxXQUFXLE9BQU8sY0FBYyxPQUFPO0FBQ2xELG1CQUFTLFFBQVEsZUFBZTtBQUFBLFlBQzlCLE1BQU0sT0FBTztBQUFBLFlBQ2IsT0FBTyxPQUFPO0FBQUE7QUFBQTtBQUlsQixlQUFPLGFBQWEsT0FBTyxjQUFjO0FBQUE7QUFHM0MsdUJBQWtCLFFBQVEsYUFBYTtBQUNyQyxZQUFJLE9BQU8sSUFBSSxPQUFPO0FBRXBCLGNBQUksTUFBTSxPQUFPO0FBR2pCLGNBQUksS0FBSyxNQUFNLE9BQU87QUFDdEIsY0FBSSxTQUFTLEdBQUc7QUFDaEIsY0FBSSxRQUFRLEdBQUc7QUFDZixjQUFJLE1BQU0sSUFBSSxHQUFHLEdBQUcsV0FBVztBQUUvQixjQUFJLElBQUksVUFBVSxDQUFDLElBQUksS0FBSztBQUMxQix1QkFBVyxRQUFRLCtCQUNqQixLQUFLLFVBQVUsT0FBTztBQUN4QixnQkFBSSxNQUFNLEdBQUc7QUFBQTtBQUdmLGNBQUksU0FBUyxPQUFPLEtBQUssT0FBTyxLQUFLLFNBQVMsTUFBTTtBQUNwRCxjQUFJLElBQUksTUFBTSxPQUFPLE9BQU8sSUFBSSxJQUFJO0FBQ2xDLG1CQUFPLEtBQUssSUFBSSxJQUFJLFFBQVEsU0FBVSxHQUFHO0FBQ3ZDLHVCQUFTLFFBQVEsbUJBQW1CO0FBQUEsZ0JBQ2xDLFFBQVE7QUFBQSxnQkFDUixLQUFLLElBQUksR0FBRztBQUFBO0FBQUE7QUFBQTtBQVFsQixtQkFBUyxJQUFJLEdBQUcsSUFBSSxPQUFPLFdBQVcsUUFBUSxJQUFJLEdBQUcsS0FBSztBQUN4RCxnQkFBSSxLQUFLLE9BQU8sV0FBVztBQUMzQixnQkFBSSxPQUFPLEdBQUc7QUFDZCxnQkFBSSxRQUFRLEdBQUc7QUFDZixnQkFBSSxXQUFXLE1BQU0sTUFBTTtBQUMzQixnQkFBSSxTQUFTLFNBQVM7QUFDdEIsZ0JBQUksUUFBUSxTQUFTO0FBQ3JCLGdCQUFJLE1BQU0sV0FBVyxLQUFLLEtBQU0sSUFBSSxHQUFHLFdBQVc7QUFDbEQsZ0JBQUksSUFBSTtBQUFBLGNBQ047QUFBQSxjQUNBO0FBQUEsY0FDQTtBQUFBLGNBQ0E7QUFBQSxjQUNBO0FBQUE7QUFLRixnQkFBSSxVQUFVLFdBQVcsV0FBVyxDQUFDLEtBQUs7QUFDeEMseUJBQVcsUUFBUSwrQkFDakIsS0FBSyxVQUFVO0FBQ2pCLGdCQUFFLE1BQU07QUFBQTtBQUVWLG1CQUFPLElBQUksV0FBVyxRQUFRO0FBQzlCLHFCQUFTLFFBQVEsZUFBZTtBQUFBO0FBRWxDLGlCQUFPLFdBQVcsU0FBUztBQUFBO0FBRzdCLGVBQU8sSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDO0FBRzdCLGVBQU8sVUFBVTtBQUNqQixlQUFPLEtBQUssS0FBSyxPQUFPO0FBQ3hCLGlCQUFTLFFBQVEsYUFBYSxPQUFPO0FBQ3JDLFlBQUksQ0FBQyxhQUFhO0FBRWhCLGNBQUksQ0FBQyxPQUFPLFlBQVksT0FBTyxRQUFRLGtCQUFrQixVQUFVO0FBQ2pFLG1CQUFPLFFBQVEsRUFBRTtBQUFBLGlCQUNaO0FBQ0wsbUJBQU8sUUFBUSxFQUFFO0FBQUE7QUFFbkIsaUJBQU8sTUFBTTtBQUNiLGlCQUFPLFVBQVU7QUFBQTtBQUVuQixlQUFPLGFBQWEsT0FBTyxjQUFjO0FBQ3pDLGVBQU8sV0FBVyxTQUFTO0FBQUE7QUFHN0Isd0JBQW1CLFFBQVE7QUFDekIsWUFBSSxDQUFDLE9BQU8sU0FBUztBQUNuQixxQkFBVyxRQUFRO0FBQ25CLGlCQUFPLFlBQVk7QUFDbkIsaUJBQU8sUUFBUSxFQUFFO0FBQ2pCO0FBQUE7QUFHRixZQUFJLE9BQU8sUUFBUTtBQUNqQixjQUFJLE9BQU8sWUFBWSxVQUFVO0FBQy9CLG1CQUFPLFVBQVUsT0FBTyxPQUFPLFVBQVU7QUFDekMsbUJBQU8sVUFBVTtBQUNqQixtQkFBTyxRQUFRLEVBQUU7QUFDakI7QUFBQTtBQUVGLG1CQUFTLFFBQVEsWUFBWSxPQUFPO0FBQ3BDLGlCQUFPLFNBQVM7QUFBQTtBQUtsQixZQUFJLElBQUksT0FBTyxLQUFLO0FBQ3BCLFlBQUksVUFBVSxPQUFPO0FBQ3JCLFlBQUksQ0FBQyxPQUFPLFFBQVE7QUFDbEIsb0JBQVUsUUFBUSxPQUFPO0FBQUE7QUFFM0IsWUFBSSxVQUFVO0FBQ2QsZUFBTyxLQUFLO0FBQ1YsY0FBSSxRQUFRLE9BQU8sS0FBSztBQUN4QixjQUFJLE1BQU0sU0FBUyxTQUFTO0FBRTFCLHVCQUFXLFFBQVE7QUFBQSxpQkFDZDtBQUNMO0FBQUE7QUFBQTtBQUtKLFlBQUksSUFBSSxHQUFHO0FBQ1QscUJBQVcsUUFBUSw0QkFBNEIsT0FBTztBQUN0RCxpQkFBTyxZQUFZLE9BQU8sT0FBTyxVQUFVO0FBQzNDLGlCQUFPLFFBQVEsRUFBRTtBQUNqQjtBQUFBO0FBRUYsZUFBTyxVQUFVO0FBQ2pCLFlBQUksS0FBSSxPQUFPLEtBQUs7QUFDcEIsZUFBTyxPQUFNLEdBQUc7QUFDZCxjQUFJLE1BQU0sT0FBTyxNQUFNLE9BQU8sS0FBSztBQUNuQyxpQkFBTyxVQUFVLE9BQU8sSUFBSTtBQUM1QixtQkFBUyxRQUFRLGNBQWMsT0FBTztBQUV0QyxjQUFJLElBQUk7QUFDUixtQkFBUyxLQUFLLElBQUksSUFBSTtBQUNwQixjQUFFLEtBQUssSUFBSSxHQUFHO0FBQUE7QUFHaEIsY0FBSSxTQUFTLE9BQU8sS0FBSyxPQUFPLEtBQUssU0FBUyxNQUFNO0FBQ3BELGNBQUksT0FBTyxJQUFJLFNBQVMsSUFBSSxPQUFPLE9BQU8sSUFBSTtBQUU1QyxtQkFBTyxLQUFLLElBQUksSUFBSSxRQUFRLFNBQVUsR0FBRztBQUN2QyxrQkFBSSxJQUFJLElBQUksR0FBRztBQUNmLHVCQUFTLFFBQVEsb0JBQW9CLEVBQUUsUUFBUSxHQUFHLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFJN0QsWUFBSSxNQUFNO0FBQUcsaUJBQU8sYUFBYTtBQUNqQyxlQUFPLFVBQVUsT0FBTyxjQUFjLE9BQU8sYUFBYTtBQUMxRCxlQUFPLFdBQVcsU0FBUztBQUMzQixlQUFPLFFBQVEsRUFBRTtBQUFBO0FBR25CLDJCQUFzQixRQUFRO0FBQzVCLFlBQUksU0FBUyxPQUFPO0FBQ3BCLFlBQUksV0FBVyxPQUFPO0FBQ3RCLFlBQUk7QUFDSixZQUFJLFNBQVM7QUFFYixZQUFJLE9BQU8sU0FBUyxTQUFTO0FBQzNCLGlCQUFPLE9BQU8sU0FBUztBQUFBO0FBRXpCLFlBQUksT0FBTyxTQUFTLFdBQVc7QUFDN0IsaUJBQU8sT0FBTyxTQUFTO0FBQUE7QUFFekIsaUJBQVM7QUFDVCxZQUFJLE9BQU8sT0FBTyxPQUFPLEtBQUs7QUFDNUIsY0FBSSxPQUFPLE9BQU8sT0FBTyxLQUFLO0FBQzVCLHFCQUFTLE9BQU8sTUFBTTtBQUN0QixrQkFBTSxTQUFTLFFBQVE7QUFDdkIscUJBQVMsSUFBSSxTQUFTO0FBQUEsaUJBQ2pCO0FBQ0wscUJBQVMsT0FBTyxNQUFNO0FBQ3RCLGtCQUFNLFNBQVMsUUFBUTtBQUN2QixxQkFBUyxJQUFJLFNBQVM7QUFBQTtBQUFBO0FBRzFCLGlCQUFTLE9BQU8sUUFBUSxPQUFPO0FBQy9CLFlBQUksTUFBTSxRQUFRLE9BQU8sa0JBQWtCLFFBQVE7QUFDakQscUJBQVcsUUFBUTtBQUNuQixpQkFBTyxNQUFNLE9BQU8sU0FBUztBQUFBO0FBRy9CLGVBQU8sT0FBTyxjQUFjO0FBQUE7QUFHOUIsK0JBQTBCLFFBQVEsR0FBRztBQUNuQyxZQUFJLE1BQU0sS0FBSztBQUNiLGlCQUFPLFFBQVEsRUFBRTtBQUNqQixpQkFBTyxtQkFBbUIsT0FBTztBQUFBLG1CQUN4QixDQUFDLGFBQWEsSUFBSTtBQUczQixxQkFBVyxRQUFRO0FBQ25CLGlCQUFPLFdBQVc7QUFDbEIsaUJBQU8sUUFBUSxFQUFFO0FBQUE7QUFBQTtBQUlyQixzQkFBaUIsT0FBTyxHQUFHO0FBQ3pCLFlBQUksU0FBUztBQUNiLFlBQUksSUFBSSxNQUFNLFFBQVE7QUFDcEIsbUJBQVMsTUFBTSxPQUFPO0FBQUE7QUFFeEIsZUFBTztBQUFBO0FBR1QscUJBQWdCLE9BQU87QUFDckIsWUFBSSxTQUFTO0FBQ2IsWUFBSSxLQUFLLE9BQU87QUFDZCxnQkFBTSxLQUFLO0FBQUE7QUFFYixZQUFJLE9BQU8sUUFBUTtBQUNqQixpQkFBTyxNQUFNLFFBQ1g7QUFBQTtBQUVKLFlBQUksVUFBVSxNQUFNO0FBQ2xCLGlCQUFPLElBQUk7QUFBQTtBQUViLFlBQUksT0FBTyxVQUFVLFVBQVU7QUFDN0Isa0JBQVEsTUFBTTtBQUFBO0FBRWhCLFlBQUksSUFBSTtBQUNSLFlBQUksSUFBSTtBQUNSLGVBQU8sTUFBTTtBQUNYLGNBQUksT0FBTyxPQUFPO0FBQ2xCLGlCQUFPLElBQUk7QUFFWCxjQUFJLENBQUMsR0FBRztBQUNOO0FBQUE7QUFHRixjQUFJLE9BQU8sZUFBZTtBQUN4QixtQkFBTztBQUNQLGdCQUFJLE1BQU0sTUFBTTtBQUNkLHFCQUFPO0FBQ1AscUJBQU8sU0FBUztBQUFBLG1CQUNYO0FBQ0wscUJBQU87QUFBQTtBQUFBO0FBSVgsa0JBQVEsT0FBTztBQUFBLGlCQUNSLEVBQUU7QUFDTCxxQkFBTyxRQUFRLEVBQUU7QUFDakIsa0JBQUksTUFBTSxVQUFVO0FBQ2xCO0FBQUE7QUFFRiw4QkFBZ0IsUUFBUTtBQUN4QjtBQUFBLGlCQUVHLEVBQUU7QUFDTCw4QkFBZ0IsUUFBUTtBQUN4QjtBQUFBLGlCQUVHLEVBQUU7QUFDTCxrQkFBSSxPQUFPLFdBQVcsQ0FBQyxPQUFPLFlBQVk7QUFDeEMsb0JBQUksU0FBUyxJQUFJO0FBQ2pCLHVCQUFPLEtBQUssTUFBTSxPQUFPLE1BQU0sS0FBSztBQUNsQyxzQkFBSSxPQUFPLE9BQU87QUFDbEIsc0JBQUksS0FBSyxPQUFPLGVBQWU7QUFDN0IsMkJBQU87QUFDUCx3QkFBSSxNQUFNLE1BQU07QUFDZCw2QkFBTztBQUNQLDZCQUFPLFNBQVM7QUFBQSwyQkFDWDtBQUNMLDZCQUFPO0FBQUE7QUFBQTtBQUFBO0FBSWIsdUJBQU8sWUFBWSxNQUFNLFVBQVUsUUFBUSxJQUFJO0FBQUE7QUFFakQsa0JBQUksTUFBTSxPQUFPLENBQUUsUUFBTyxXQUFXLE9BQU8sY0FBYyxDQUFDLE9BQU8sU0FBUztBQUN6RSx1QkFBTyxRQUFRLEVBQUU7QUFDakIsdUJBQU8sbUJBQW1CLE9BQU87QUFBQSxxQkFDNUI7QUFDTCxvQkFBSSxDQUFDLGFBQWEsTUFBTyxFQUFDLE9BQU8sV0FBVyxPQUFPLGFBQWE7QUFDOUQsNkJBQVcsUUFBUTtBQUFBO0FBRXJCLG9CQUFJLE1BQU0sS0FBSztBQUNiLHlCQUFPLFFBQVEsRUFBRTtBQUFBLHVCQUNaO0FBQ0wseUJBQU8sWUFBWTtBQUFBO0FBQUE7QUFHdkI7QUFBQSxpQkFFRyxFQUFFO0FBRUwsa0JBQUksTUFBTSxLQUFLO0FBQ2IsdUJBQU8sUUFBUSxFQUFFO0FBQUEscUJBQ1o7QUFDTCx1QkFBTyxVQUFVO0FBQUE7QUFFbkI7QUFBQSxpQkFFRyxFQUFFO0FBQ0wsa0JBQUksTUFBTSxLQUFLO0FBQ2IsdUJBQU8sUUFBUSxFQUFFO0FBQUEscUJBQ1o7QUFDTCx1QkFBTyxVQUFVLE1BQU07QUFDdkIsdUJBQU8sUUFBUSxFQUFFO0FBQUE7QUFFbkI7QUFBQSxpQkFFRyxFQUFFO0FBRUwsa0JBQUksTUFBTSxLQUFLO0FBQ2IsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLFdBQVc7QUFBQSx5QkFDVCxhQUFhLElBQUk7QUFBQSx5QkFFakIsUUFBUSxXQUFXLElBQUk7QUFDaEMsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLFVBQVU7QUFBQSx5QkFDUixNQUFNLEtBQUs7QUFDcEIsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLFVBQVU7QUFBQSx5QkFDUixNQUFNLEtBQUs7QUFDcEIsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLGVBQWUsT0FBTyxlQUFlO0FBQUEscUJBQ3ZDO0FBQ0wsMkJBQVcsUUFBUTtBQUVuQixvQkFBSSxPQUFPLG1CQUFtQixJQUFJLE9BQU8sVUFBVTtBQUNqRCxzQkFBSSxNQUFNLE9BQU8sV0FBVyxPQUFPO0FBQ25DLHNCQUFJLElBQUksTUFBTSxLQUFLLEtBQUssT0FBTztBQUFBO0FBRWpDLHVCQUFPLFlBQVksTUFBTTtBQUN6Qix1QkFBTyxRQUFRLEVBQUU7QUFBQTtBQUVuQjtBQUFBLGlCQUVHLEVBQUU7QUFDTCxrQkFBSSxPQUFPLFdBQVcsTUFBTSxNQUFNO0FBQ2hDLHVCQUFPLFFBQVEsRUFBRTtBQUNqQix1QkFBTyxVQUFVO0FBQ2pCLHVCQUFPLFdBQVc7QUFDbEI7QUFBQTtBQUdGLGtCQUFJLE9BQU8sV0FBVyxPQUFPLFlBQVksUUFBUSxPQUFPLFVBQVU7QUFDaEUsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLFdBQVcsT0FBTyxPQUFPLFdBQVc7QUFDM0MsdUJBQU8sV0FBVztBQUFBLHlCQUNSLFFBQU8sV0FBVyxHQUFHLGtCQUFrQixPQUFPO0FBQ3hELHlCQUFTLFFBQVE7QUFDakIsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLFdBQVc7QUFDbEIsdUJBQU8sUUFBUTtBQUFBLHlCQUNMLFFBQU8sV0FBVyxHQUFHLGtCQUFrQixTQUFTO0FBQzFELHVCQUFPLFFBQVEsRUFBRTtBQUNqQixvQkFBSSxPQUFPLFdBQVcsT0FBTyxTQUFTO0FBQ3BDLDZCQUFXLFFBQ1Q7QUFBQTtBQUVKLHVCQUFPLFVBQVU7QUFDakIsdUJBQU8sV0FBVztBQUFBLHlCQUNULE1BQU0sS0FBSztBQUNwQix5QkFBUyxRQUFRLHFCQUFxQixPQUFPO0FBQzdDLHVCQUFPLFdBQVc7QUFDbEIsdUJBQU8sUUFBUSxFQUFFO0FBQUEseUJBQ1IsUUFBUSxJQUFJO0FBQ3JCLHVCQUFPLFFBQVEsRUFBRTtBQUNqQix1QkFBTyxZQUFZO0FBQUEscUJBQ2Q7QUFDTCx1QkFBTyxZQUFZO0FBQUE7QUFFckI7QUFBQSxpQkFFRyxFQUFFO0FBQ0wsa0JBQUksTUFBTSxPQUFPLEdBQUc7QUFDbEIsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLElBQUk7QUFBQTtBQUViLHFCQUFPLFlBQVk7QUFDbkI7QUFBQSxpQkFFRyxFQUFFO0FBQ0wsa0JBQUksTUFBTSxLQUFLO0FBQ2IsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHlCQUFTLFFBQVEsYUFBYSxPQUFPO0FBQ3JDLHVCQUFPLFVBQVU7QUFBQSxxQkFDWjtBQUNMLHVCQUFPLFdBQVc7QUFDbEIsb0JBQUksTUFBTSxLQUFLO0FBQ2IseUJBQU8sUUFBUSxFQUFFO0FBQUEsMkJBQ1IsUUFBUSxJQUFJO0FBQ3JCLHlCQUFPLFFBQVEsRUFBRTtBQUNqQix5QkFBTyxJQUFJO0FBQUE7QUFBQTtBQUdmO0FBQUEsaUJBRUcsRUFBRTtBQUNMLHFCQUFPLFdBQVc7QUFDbEIsa0JBQUksTUFBTSxPQUFPLEdBQUc7QUFDbEIsdUJBQU8sSUFBSTtBQUNYLHVCQUFPLFFBQVEsRUFBRTtBQUFBO0FBRW5CO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLHVCQUFPLFdBQVc7QUFDbEIsdUJBQU8sUUFBUSxFQUFFO0FBQUEseUJBQ1IsTUFBTSxLQUFLO0FBQ3BCLHVCQUFPLFFBQVEsRUFBRTtBQUNqQix1QkFBTyxtQkFBbUIsT0FBTztBQUFBLHlCQUN4QixRQUFRLElBQUk7QUFDckIsdUJBQU8sV0FBVztBQUNsQix1QkFBTyxRQUFRLEVBQUU7QUFDakIsdUJBQU8sSUFBSTtBQUFBLHFCQUNOO0FBQ0wsdUJBQU8sV0FBVztBQUFBO0FBRXBCO0FBQUEsaUJBRUcsRUFBRTtBQUNMLHFCQUFPLFdBQVc7QUFDbEIsa0JBQUksTUFBTSxPQUFPLEdBQUc7QUFDbEIsdUJBQU8sUUFBUSxFQUFFO0FBQ2pCLHVCQUFPLElBQUk7QUFBQTtBQUViO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHFCQUNaO0FBQ0wsdUJBQU8sV0FBVztBQUFBO0FBRXBCO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLHVCQUFPLFFBQVEsRUFBRTtBQUNqQix1QkFBTyxVQUFVLFNBQVMsT0FBTyxLQUFLLE9BQU87QUFDN0Msb0JBQUksT0FBTyxTQUFTO0FBQ2xCLDJCQUFTLFFBQVEsYUFBYSxPQUFPO0FBQUE7QUFFdkMsdUJBQU8sVUFBVTtBQUFBLHFCQUNaO0FBQ0wsdUJBQU8sV0FBVyxNQUFNO0FBQ3hCLHVCQUFPLFFBQVEsRUFBRTtBQUFBO0FBRW5CO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLDJCQUFXLFFBQVE7QUFHbkIsdUJBQU8sV0FBVyxPQUFPO0FBQ3pCLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHlCQUNSLE9BQU8sV0FBVyxPQUFPLFlBQVksTUFBTTtBQUNwRCx1QkFBTyxRQUFRLEVBQUU7QUFBQSxxQkFDWjtBQUNMLHVCQUFPLFFBQVEsRUFBRTtBQUFBO0FBRW5CO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHFCQUNaO0FBQ0wsdUJBQU8sU0FBUztBQUFBO0FBRWxCO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHFCQUNaO0FBQ0wsdUJBQU8sU0FBUyxNQUFNO0FBQ3RCLHVCQUFPLFFBQVEsRUFBRTtBQUFBO0FBRW5CO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLG9CQUFJLE9BQU8sT0FBTztBQUNoQiwyQkFBUyxRQUFRLFdBQVcsT0FBTztBQUFBO0FBRXJDLHlCQUFTLFFBQVE7QUFDakIsdUJBQU8sUUFBUTtBQUNmLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHlCQUNSLE1BQU0sS0FBSztBQUNwQix1QkFBTyxTQUFTO0FBQUEscUJBQ1g7QUFDTCx1QkFBTyxTQUFTLE9BQU87QUFDdkIsdUJBQU8sUUFBUSxFQUFFO0FBQUE7QUFFbkI7QUFBQSxpQkFFRyxFQUFFO0FBQ0wsa0JBQUksTUFBTSxLQUFLO0FBQ2IsdUJBQU8sUUFBUSxFQUFFO0FBQUEseUJBQ1IsYUFBYSxJQUFJO0FBQzFCLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHFCQUNaO0FBQ0wsdUJBQU8sZ0JBQWdCO0FBQUE7QUFFekI7QUFBQSxpQkFFRyxFQUFFO0FBQ0wsa0JBQUksQ0FBQyxPQUFPLGdCQUFnQixhQUFhLElBQUk7QUFDM0M7QUFBQSx5QkFDUyxNQUFNLEtBQUs7QUFDcEIsdUJBQU8sUUFBUSxFQUFFO0FBQUEscUJBQ1o7QUFDTCx1QkFBTyxnQkFBZ0I7QUFBQTtBQUV6QjtBQUFBLGlCQUVHLEVBQUU7QUFDTCxrQkFBSSxNQUFNLEtBQUs7QUFDYix5QkFBUyxRQUFRLDJCQUEyQjtBQUFBLGtCQUMxQyxNQUFNLE9BQU87QUFBQSxrQkFDYixNQUFNLE9BQU87QUFBQTtBQUVmLHVCQUFPLGVBQWUsT0FBTyxlQUFlO0FBQzVDLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHFCQUNaO0FBQ0wsdUJBQU8sZ0JBQWdCLE1BQU07QUFDN0IsdUJBQU8sUUFBUSxFQUFFO0FBQUE7QUFFbkI7QUFBQSxpQkFFRyxFQUFFO0FBQ0wsa0JBQUksUUFBUSxVQUFVLElBQUk7QUFDeEIsdUJBQU8sV0FBVztBQUFBLHFCQUNiO0FBQ0wsdUJBQU87QUFDUCxvQkFBSSxNQUFNLEtBQUs7QUFDYiwwQkFBUTtBQUFBLDJCQUNDLE1BQU0sS0FBSztBQUNwQix5QkFBTyxRQUFRLEVBQUU7QUFBQSx1QkFDWjtBQUNMLHNCQUFJLENBQUMsYUFBYSxJQUFJO0FBQ3BCLCtCQUFXLFFBQVE7QUFBQTtBQUVyQix5QkFBTyxRQUFRLEVBQUU7QUFBQTtBQUFBO0FBR3JCO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLHdCQUFRLFFBQVE7QUFDaEIseUJBQVM7QUFBQSxxQkFDSjtBQUNMLDJCQUFXLFFBQVE7QUFDbkIsdUJBQU8sUUFBUSxFQUFFO0FBQUE7QUFFbkI7QUFBQSxpQkFFRyxFQUFFO0FBRUwsa0JBQUksYUFBYSxJQUFJO0FBQ25CO0FBQUEseUJBQ1MsTUFBTSxLQUFLO0FBQ3BCLHdCQUFRO0FBQUEseUJBQ0MsTUFBTSxLQUFLO0FBQ3BCLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHlCQUNSLFFBQVEsV0FBVyxJQUFJO0FBQ2hDLHVCQUFPLGFBQWE7QUFDcEIsdUJBQU8sY0FBYztBQUNyQix1QkFBTyxRQUFRLEVBQUU7QUFBQSxxQkFDWjtBQUNMLDJCQUFXLFFBQVE7QUFBQTtBQUVyQjtBQUFBLGlCQUVHLEVBQUU7QUFDTCxrQkFBSSxNQUFNLEtBQUs7QUFDYix1QkFBTyxRQUFRLEVBQUU7QUFBQSx5QkFDUixNQUFNLEtBQUs7QUFDcEIsMkJBQVcsUUFBUTtBQUNuQix1QkFBTyxjQUFjLE9BQU87QUFDNUIsdUJBQU87QUFDUCx3QkFBUTtBQUFBLHlCQUNDLGFBQWEsSUFBSTtBQUMxQix1QkFBTyxRQUFRLEVBQUU7QUFBQSx5QkFDUixRQUFRLFVBQVUsSUFBSTtBQUMvQix1QkFBTyxjQUFjO0FBQUEscUJBQ2hCO0FBQ0wsMkJBQVcsUUFBUTtBQUFBO0FBRXJCO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLE1BQU0sS0FBSztBQUNiLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHlCQUNSLGFBQWEsSUFBSTtBQUMxQjtBQUFBLHFCQUNLO0FBQ0wsMkJBQVcsUUFBUTtBQUNuQix1QkFBTyxJQUFJLFdBQVcsT0FBTyxjQUFjO0FBQzNDLHVCQUFPLGNBQWM7QUFDckIseUJBQVMsUUFBUSxlQUFlO0FBQUEsa0JBQzlCLE1BQU0sT0FBTztBQUFBLGtCQUNiLE9BQU87QUFBQTtBQUVULHVCQUFPLGFBQWE7QUFDcEIsb0JBQUksTUFBTSxLQUFLO0FBQ2IsMEJBQVE7QUFBQSwyQkFDQyxRQUFRLFdBQVcsSUFBSTtBQUNoQyx5QkFBTyxhQUFhO0FBQ3BCLHlCQUFPLFFBQVEsRUFBRTtBQUFBLHVCQUNaO0FBQ0wsNkJBQVcsUUFBUTtBQUNuQix5QkFBTyxRQUFRLEVBQUU7QUFBQTtBQUFBO0FBR3JCO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLGFBQWEsSUFBSTtBQUNuQjtBQUFBLHlCQUNTLFFBQVEsSUFBSTtBQUNyQix1QkFBTyxJQUFJO0FBQ1gsdUJBQU8sUUFBUSxFQUFFO0FBQUEscUJBQ1o7QUFDTCxvQkFBSSxDQUFDLE9BQU8sSUFBSSx5QkFBeUI7QUFDdkMsd0JBQU0sUUFBUTtBQUFBO0FBRWhCLHVCQUFPLFFBQVEsRUFBRTtBQUNqQix1QkFBTyxjQUFjO0FBQUE7QUFFdkI7QUFBQSxpQkFFRyxFQUFFO0FBQ0wsa0JBQUksTUFBTSxPQUFPLEdBQUc7QUFDbEIsb0JBQUksTUFBTSxLQUFLO0FBQ2IseUJBQU8sUUFBUSxFQUFFO0FBQUEsdUJBQ1o7QUFDTCx5QkFBTyxlQUFlO0FBQUE7QUFFeEI7QUFBQTtBQUVGLHFCQUFPO0FBQ1AscUJBQU8sSUFBSTtBQUNYLHFCQUFPLFFBQVEsRUFBRTtBQUNqQjtBQUFBLGlCQUVHLEVBQUU7QUFDTCxrQkFBSSxhQUFhLElBQUk7QUFDbkIsdUJBQU8sUUFBUSxFQUFFO0FBQUEseUJBQ1IsTUFBTSxLQUFLO0FBQ3BCLHdCQUFRO0FBQUEseUJBQ0MsTUFBTSxLQUFLO0FBQ3BCLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHlCQUNSLFFBQVEsV0FBVyxJQUFJO0FBQ2hDLDJCQUFXLFFBQVE7QUFDbkIsdUJBQU8sYUFBYTtBQUNwQix1QkFBTyxjQUFjO0FBQ3JCLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHFCQUNaO0FBQ0wsMkJBQVcsUUFBUTtBQUFBO0FBRXJCO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLENBQUMsWUFBWSxJQUFJO0FBQ25CLG9CQUFJLE1BQU0sS0FBSztBQUNiLHlCQUFPLFFBQVEsRUFBRTtBQUFBLHVCQUNaO0FBQ0wseUJBQU8sZUFBZTtBQUFBO0FBRXhCO0FBQUE7QUFFRixxQkFBTztBQUNQLGtCQUFJLE1BQU0sS0FBSztBQUNiLHdCQUFRO0FBQUEscUJBQ0g7QUFDTCx1QkFBTyxRQUFRLEVBQUU7QUFBQTtBQUVuQjtBQUFBLGlCQUVHLEVBQUU7QUFDTCxrQkFBSSxDQUFDLE9BQU8sU0FBUztBQUNuQixvQkFBSSxhQUFhLElBQUk7QUFDbkI7QUFBQSwyQkFDUyxTQUFTLFdBQVcsSUFBSTtBQUNqQyxzQkFBSSxPQUFPLFFBQVE7QUFDakIsMkJBQU8sVUFBVSxPQUFPO0FBQ3hCLDJCQUFPLFFBQVEsRUFBRTtBQUFBLHlCQUNaO0FBQ0wsK0JBQVcsUUFBUTtBQUFBO0FBQUEsdUJBRWhCO0FBQ0wseUJBQU8sVUFBVTtBQUFBO0FBQUEseUJBRVYsTUFBTSxLQUFLO0FBQ3BCLHlCQUFTO0FBQUEseUJBQ0EsUUFBUSxVQUFVLElBQUk7QUFDL0IsdUJBQU8sV0FBVztBQUFBLHlCQUNULE9BQU8sUUFBUTtBQUN4Qix1QkFBTyxVQUFVLE9BQU8sT0FBTztBQUMvQix1QkFBTyxVQUFVO0FBQ2pCLHVCQUFPLFFBQVEsRUFBRTtBQUFBLHFCQUNaO0FBQ0wsb0JBQUksQ0FBQyxhQUFhLElBQUk7QUFDcEIsNkJBQVcsUUFBUTtBQUFBO0FBRXJCLHVCQUFPLFFBQVEsRUFBRTtBQUFBO0FBRW5CO0FBQUEsaUJBRUcsRUFBRTtBQUNMLGtCQUFJLGFBQWEsSUFBSTtBQUNuQjtBQUFBO0FBRUYsa0JBQUksTUFBTSxLQUFLO0FBQ2IseUJBQVM7QUFBQSxxQkFDSjtBQUNMLDJCQUFXLFFBQVE7QUFBQTtBQUVyQjtBQUFBLGlCQUVHLEVBQUU7QUFBQSxpQkFDRixFQUFFO0FBQUEsaUJBQ0YsRUFBRTtBQUNMLGtCQUFJO0FBQ0osa0JBQUk7QUFDSixzQkFBUSxPQUFPO0FBQUEscUJBQ1IsRUFBRTtBQUNMLGdDQUFjLEVBQUU7QUFDaEIsMkJBQVM7QUFDVDtBQUFBLHFCQUVHLEVBQUU7QUFDTCxnQ0FBYyxFQUFFO0FBQ2hCLDJCQUFTO0FBQ1Q7QUFBQSxxQkFFRyxFQUFFO0FBQ0wsZ0NBQWMsRUFBRTtBQUNoQiwyQkFBUztBQUNUO0FBQUE7QUFHSixrQkFBSSxNQUFNLEtBQUs7QUFDYixvQkFBSSxlQUFlLFlBQVk7QUFDL0Isb0JBQUksT0FBTyxJQUFJLG9CQUFvQixDQUFDLE9BQU8sT0FBTyxJQUFJLGNBQWMsU0FBUyxlQUFlO0FBQzFGLHlCQUFPLFNBQVM7QUFDaEIseUJBQU8sUUFBUTtBQUNmLHlCQUFPLE1BQU07QUFBQSx1QkFDUjtBQUNMLHlCQUFPLFdBQVc7QUFDbEIseUJBQU8sU0FBUztBQUNoQix5QkFBTyxRQUFRO0FBQUE7QUFBQSx5QkFFUixRQUFRLE9BQU8sT0FBTyxTQUFTLGFBQWEsYUFBYSxJQUFJO0FBQ3RFLHVCQUFPLFVBQVU7QUFBQSxxQkFDWjtBQUNMLDJCQUFXLFFBQVE7QUFDbkIsdUJBQU8sV0FBVyxNQUFNLE9BQU8sU0FBUztBQUN4Qyx1QkFBTyxTQUFTO0FBQ2hCLHVCQUFPLFFBQVE7QUFBQTtBQUdqQjtBQUFBLHFCQUVrQztBQUNsQyxvQkFBTSxJQUFJLE1BQU0sUUFBUSxvQkFBb0IsT0FBTztBQUFBO0FBQUE7QUFBQTtBQUt6RCxZQUFJLE9BQU8sWUFBWSxPQUFPLHFCQUFxQjtBQUNqRCw0QkFBa0I7QUFBQTtBQUVwQixlQUFPO0FBQUE7QUFHVCxBQUVBLFVBQUksQ0FBQyxPQUFPLGVBQWU7QUFDekIsUUFBQyxZQUFZO0FBQ1gsY0FBSSxxQkFBcUIsT0FBTztBQUNoQyxjQUFJLFFBQVEsS0FBSztBQUNqQixjQUFJLGdCQUFnQixXQUFZO0FBQzlCLGdCQUFJLFdBQVc7QUFDZixnQkFBSSxZQUFZO0FBQ2hCLGdCQUFJO0FBQ0osZ0JBQUk7QUFDSixnQkFBSSxRQUFRO0FBQ1osZ0JBQUksU0FBUyxVQUFVO0FBQ3ZCLGdCQUFJLENBQUMsUUFBUTtBQUNYLHFCQUFPO0FBQUE7QUFFVCxnQkFBSSxTQUFTO0FBQ2IsbUJBQU8sRUFBRSxRQUFRLFFBQVE7QUFDdkIsa0JBQUksWUFBWSxPQUFPLFVBQVU7QUFDakMsa0JBQ0UsQ0FBQyxTQUFTLGNBQ1YsWUFBWSxLQUNaLFlBQVksV0FDWixNQUFNLGVBQWUsV0FDckI7QUFDQSxzQkFBTSxXQUFXLHlCQUF5QjtBQUFBO0FBRTVDLGtCQUFJLGFBQWEsT0FBUTtBQUN2QiwwQkFBVSxLQUFLO0FBQUEscUJBQ1Y7QUFFTCw2QkFBYTtBQUNiLGdDQUFpQixjQUFhLE1BQU07QUFDcEMsK0JBQWdCLFlBQVksT0FBUztBQUNyQywwQkFBVSxLQUFLLGVBQWU7QUFBQTtBQUVoQyxrQkFBSSxRQUFRLE1BQU0sVUFBVSxVQUFVLFNBQVMsVUFBVTtBQUN2RCwwQkFBVSxtQkFBbUIsTUFBTSxNQUFNO0FBQ3pDLDBCQUFVLFNBQVM7QUFBQTtBQUFBO0FBR3ZCLG1CQUFPO0FBQUE7QUFHVCxjQUFJLE9BQU8sZ0JBQWdCO0FBQ3pCLG1CQUFPLGVBQWUsUUFBUSxpQkFBaUI7QUFBQSxjQUM3QyxPQUFPO0FBQUEsY0FDUCxjQUFjO0FBQUEsY0FDZCxVQUFVO0FBQUE7QUFBQSxpQkFFUDtBQUNMLG1CQUFPLGdCQUFnQjtBQUFBO0FBQUE7QUFBQTtBQUFBLE9BSTVCLE9BQU8sWUFBWSxjQUFjLFFBQUssTUFBTSxLQUFLO0FBQUE7QUFBQTs7O0FDNWpEcEQ7QUFBQTtBQUNBLElBQUMsWUFBVztBQUNWO0FBQ0EsY0FBUSxXQUFXLFNBQVMsS0FBSztBQUMvQixZQUFJLElBQUksT0FBTyxVQUFVO0FBQ3ZCLGlCQUFPLElBQUksVUFBVTtBQUFBLGVBQ2hCO0FBQ0wsaUJBQU87QUFBQTtBQUFBO0FBQUEsT0FJVixLQUFLO0FBQUE7QUFBQTs7O0FDWFI7QUFBQTtBQUNBLElBQUMsWUFBVztBQUNWO0FBQ0EsVUFBSTtBQUVKLG9CQUFjLElBQUksT0FBTztBQUV6QixjQUFRLFlBQVksU0FBUyxLQUFLO0FBQ2hDLGVBQU8sSUFBSTtBQUFBO0FBR2IsY0FBUSxxQkFBcUIsU0FBUyxLQUFLO0FBQ3pDLGVBQU8sSUFBSSxPQUFPLEdBQUcsZ0JBQWdCLElBQUksTUFBTTtBQUFBO0FBR2pELGNBQVEsY0FBYyxTQUFTLEtBQUs7QUFDbEMsZUFBTyxJQUFJLFFBQVEsYUFBYTtBQUFBO0FBR2xDLGNBQVEsZUFBZSxTQUFTLEtBQUs7QUFDbkMsWUFBSSxDQUFDLE1BQU0sTUFBTTtBQUNmLGdCQUFNLE1BQU0sTUFBTSxJQUFJLFNBQVMsS0FBSyxNQUFNLFdBQVc7QUFBQTtBQUV2RCxlQUFPO0FBQUE7QUFHVCxjQUFRLGdCQUFnQixTQUFTLEtBQUs7QUFDcEMsWUFBSSxvQkFBb0IsS0FBSyxNQUFNO0FBQ2pDLGdCQUFNLElBQUksa0JBQWtCO0FBQUE7QUFFOUIsZUFBTztBQUFBO0FBQUEsT0FHUixLQUFLO0FBQUE7QUFBQTs7O0FDakNSO0FBQUE7QUFDQSxJQUFDLFlBQVc7QUFDVjtBQUNBLFVBQUksS0FBSyxVQUFVLFFBQVEsU0FBUyxhQUFhLFlBQVksS0FBSyxjQUNoRSxPQUFPLFNBQVMsSUFBSSxJQUFHO0FBQUUsZUFBTyxXQUFVO0FBQUUsaUJBQU8sR0FBRyxNQUFNLElBQUk7QUFBQTtBQUFBLFNBQ2hFLFNBQVMsU0FBUyxPQUFPLFFBQVE7QUFBRSxpQkFBUyxPQUFPLFFBQVE7QUFBRSxjQUFJLFFBQVEsS0FBSyxRQUFRO0FBQU0sa0JBQU0sT0FBTyxPQUFPO0FBQUE7QUFBUSx3QkFBZ0I7QUFBRSxlQUFLLGNBQWM7QUFBQTtBQUFTLGFBQUssWUFBWSxPQUFPO0FBQVcsY0FBTSxZQUFZLElBQUk7QUFBUSxjQUFNLFlBQVksT0FBTztBQUFXLGVBQU87QUFBQSxTQUNsUixVQUFVLEdBQUc7QUFFZixZQUFNO0FBRU4sZUFBUyxRQUFRO0FBRWpCLFlBQU07QUFFTixtQkFBYTtBQUViLHFCQUFlLFFBQVEsVUFBVTtBQUVqQyxpQkFBVyxtQkFBc0I7QUFFakMsZ0JBQVUsU0FBUyxPQUFPO0FBQ3hCLGVBQU8sT0FBTyxVQUFVLFlBQWEsU0FBUyxRQUFTLE9BQU8sS0FBSyxPQUFPLFdBQVc7QUFBQTtBQUd2RixvQkFBYyxTQUFTLGFBQVksTUFBTSxLQUFLO0FBQzVDLFlBQUksR0FBRyxLQUFLO0FBQ1osYUFBSyxJQUFJLEdBQUcsTUFBTSxZQUFXLFFBQVEsSUFBSSxLQUFLLEtBQUs7QUFDakQsb0JBQVUsWUFBVztBQUNyQixpQkFBTyxRQUFRLE1BQU07QUFBQTtBQUV2QixlQUFPO0FBQUE7QUFHVCxjQUFRLFNBQVUsU0FBUyxZQUFZO0FBQ3JDLGVBQU8sUUFBUTtBQUVmLHdCQUFnQixNQUFNO0FBQ3BCLGVBQUsscUJBQXFCLEtBQUssS0FBSyxvQkFBb0I7QUFDeEQsZUFBSyxjQUFjLEtBQUssS0FBSyxhQUFhO0FBQzFDLGVBQUssUUFBUSxLQUFLLEtBQUssT0FBTztBQUM5QixlQUFLLGVBQWUsS0FBSyxLQUFLLGNBQWM7QUFDNUMsZUFBSyxlQUFlLEtBQUssS0FBSyxjQUFjO0FBQzVDLGNBQUksS0FBSyxLQUFLO0FBQ2QsY0FBSSxDQUFFLGlCQUFnQixRQUFRLFNBQVM7QUFDckMsbUJBQU8sSUFBSSxRQUFRLE9BQU87QUFBQTtBQUU1QixlQUFLLFVBQVU7QUFDZixnQkFBTSxTQUFTO0FBQ2YsZUFBSyxPQUFPLEtBQUs7QUFDZixnQkFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLO0FBQU07QUFDN0Isb0JBQVEsSUFBSTtBQUNaLGlCQUFLLFFBQVEsT0FBTztBQUFBO0FBRXRCLGVBQUssT0FBTyxNQUFNO0FBQ2hCLGdCQUFJLENBQUMsUUFBUSxLQUFLLE1BQU07QUFBTTtBQUM5QixvQkFBUSxLQUFLO0FBQ2IsaUJBQUssUUFBUSxPQUFPO0FBQUE7QUFFdEIsY0FBSSxLQUFLLFFBQVEsT0FBTztBQUN0QixpQkFBSyxRQUFRLFdBQVcsS0FBSyxRQUFRLFVBQVU7QUFBQTtBQUVqRCxjQUFJLEtBQUssUUFBUSxlQUFlO0FBQzlCLGdCQUFJLENBQUMsS0FBSyxRQUFRLG1CQUFtQjtBQUNuQyxtQkFBSyxRQUFRLG9CQUFvQjtBQUFBO0FBRW5DLGlCQUFLLFFBQVEsa0JBQWtCLFFBQVEsV0FBVztBQUFBO0FBRXBELGVBQUs7QUFBQTtBQUdQLGVBQU8sVUFBVSxlQUFlLFdBQVc7QUFDekMsY0FBSSxPQUFPO0FBQ1gsY0FBSTtBQUNGLGdCQUFJLEtBQUssVUFBVSxVQUFVLEtBQUssUUFBUSxXQUFXO0FBQ25ELHNCQUFRLEtBQUs7QUFDYixtQkFBSyxZQUFZO0FBQ2pCLG1CQUFLLFlBQVksS0FBSyxVQUFVLE1BQU07QUFDdEMscUJBQU8sS0FBSyxVQUFVO0FBQUEsbUJBQ2pCO0FBQ0wsc0JBQVEsS0FBSyxVQUFVLE9BQU8sR0FBRyxLQUFLLFFBQVE7QUFDOUMsbUJBQUssWUFBWSxLQUFLLFVBQVUsT0FBTyxLQUFLLFFBQVEsV0FBVyxLQUFLLFVBQVU7QUFDOUUsbUJBQUssWUFBWSxLQUFLLFVBQVUsTUFBTTtBQUN0QyxxQkFBTyxhQUFhLEtBQUs7QUFBQTtBQUFBLG1CQUVwQixRQUFQO0FBQ0Esa0JBQU07QUFDTixnQkFBSSxDQUFDLEtBQUssVUFBVSxXQUFXO0FBQzdCLG1CQUFLLFVBQVUsWUFBWTtBQUMzQixxQkFBTyxLQUFLLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFLdkIsZUFBTyxVQUFVLGVBQWUsU0FBUyxLQUFLLEtBQUssVUFBVTtBQUMzRCxjQUFJLENBQUUsUUFBTyxNQUFNO0FBQ2pCLGdCQUFJLENBQUMsS0FBSyxRQUFRLGVBQWU7QUFDL0IscUJBQU8sSUFBSSxPQUFPO0FBQUEsbUJBQ2I7QUFDTCxxQkFBTyxJQUFJLE9BQU8sQ0FBQztBQUFBO0FBQUEsaUJBRWhCO0FBQ0wsZ0JBQUksQ0FBRSxLQUFJLGdCQUFnQixRQUFRO0FBQ2hDLGtCQUFJLE9BQU8sQ0FBQyxJQUFJO0FBQUE7QUFFbEIsbUJBQU8sSUFBSSxLQUFLLEtBQUs7QUFBQTtBQUFBO0FBSXpCLGVBQU8sVUFBVSxRQUFRLFdBQVc7QUFDbEMsY0FBSSxTQUFTLFNBQVMsUUFBUTtBQUM5QixlQUFLO0FBQ0wsZUFBSyxZQUFZLElBQUksT0FBTyxLQUFLLFFBQVEsUUFBUTtBQUFBLFlBQy9DLE1BQU07QUFBQSxZQUNOLFdBQVc7QUFBQSxZQUNYLE9BQU8sS0FBSyxRQUFRO0FBQUE7QUFFdEIsZUFBSyxVQUFVLFlBQVk7QUFDM0IsZUFBSyxVQUFVLFVBQVcsU0FBUyxPQUFPO0FBQ3hDLG1CQUFPLFNBQVMsT0FBTztBQUNyQixvQkFBTSxVQUFVO0FBQ2hCLGtCQUFJLENBQUMsTUFBTSxVQUFVLFdBQVc7QUFDOUIsc0JBQU0sVUFBVSxZQUFZO0FBQzVCLHVCQUFPLE1BQU0sS0FBSyxTQUFTO0FBQUE7QUFBQTtBQUFBLFlBRzlCO0FBQ0gsZUFBSyxVQUFVLFFBQVMsU0FBUyxPQUFPO0FBQ3RDLG1CQUFPLFdBQVc7QUFDaEIsa0JBQUksQ0FBQyxNQUFNLFVBQVUsT0FBTztBQUMxQixzQkFBTSxVQUFVLFFBQVE7QUFDeEIsdUJBQU8sTUFBTSxLQUFLLE9BQU8sTUFBTTtBQUFBO0FBQUE7QUFBQSxZQUdsQztBQUNILGVBQUssVUFBVSxRQUFRO0FBQ3ZCLGVBQUssbUJBQW1CLEtBQUssUUFBUTtBQUNyQyxlQUFLLGVBQWU7QUFDcEIsa0JBQVE7QUFDUixvQkFBVSxLQUFLLFFBQVE7QUFDdkIsb0JBQVUsS0FBSyxRQUFRO0FBQ3ZCLGVBQUssVUFBVSxZQUFhLFNBQVMsT0FBTztBQUMxQyxtQkFBTyxTQUFTLE1BQU07QUFDcEIsa0JBQUksS0FBSyxVQUFVLEtBQUssY0FBYztBQUN0QyxvQkFBTSxPQUFPLE9BQU87QUFDcEIsa0JBQUksV0FBVztBQUNmLGtCQUFJLENBQUMsTUFBTSxRQUFRLGFBQWE7QUFDOUIsc0JBQU0sS0FBSztBQUNYLHFCQUFLLE9BQU8sS0FBSztBQUNmLHNCQUFJLENBQUMsUUFBUSxLQUFLLEtBQUs7QUFBTTtBQUM3QixzQkFBSSxDQUFFLFlBQVcsUUFBUSxDQUFDLE1BQU0sUUFBUSxZQUFZO0FBQ2xELHdCQUFJLFdBQVcsT0FBTyxPQUFPO0FBQUE7QUFFL0IsNkJBQVcsTUFBTSxRQUFRLHNCQUFzQixZQUFZLE1BQU0sUUFBUSxxQkFBcUIsS0FBSyxXQUFXLE1BQU0sT0FBTyxLQUFLLFdBQVc7QUFDM0ksaUNBQWUsTUFBTSxRQUFRLHFCQUFxQixZQUFZLE1BQU0sUUFBUSxvQkFBb0IsT0FBTztBQUN2RyxzQkFBSSxNQUFNLFFBQVEsWUFBWTtBQUM1QiwwQkFBTSxhQUFhLEtBQUssY0FBYztBQUFBLHlCQUNqQztBQUNMLHdCQUFJLFNBQVMsZ0JBQWdCO0FBQUE7QUFBQTtBQUFBO0FBSW5DLGtCQUFJLFdBQVcsTUFBTSxRQUFRLG9CQUFvQixZQUFZLE1BQU0sUUFBUSxtQkFBbUIsS0FBSyxRQUFRLEtBQUs7QUFDaEgsa0JBQUksTUFBTSxRQUFRLE9BQU87QUFDdkIsb0JBQUksTUFBTSxRQUFRLFlBQVk7QUFBQSxrQkFDNUIsS0FBSyxLQUFLO0FBQUEsa0JBQ1YsT0FBTyxLQUFLO0FBQUE7QUFBQTtBQUdoQixxQkFBTyxNQUFNLEtBQUs7QUFBQTtBQUFBLFlBRW5CO0FBQ0gsZUFBSyxVQUFVLGFBQWMsU0FBUyxPQUFPO0FBQzNDLG1CQUFPLFdBQVc7QUFDaEIsa0JBQUksT0FBTyxVQUFVLEtBQUssTUFBTSxVQUFVLEtBQUssVUFBVSxLQUFLLEdBQUc7QUFDakUsb0JBQU0sTUFBTTtBQUNaLHlCQUFXLElBQUk7QUFDZixrQkFBSSxDQUFDLE1BQU0sUUFBUSxvQkFBb0IsQ0FBQyxNQUFNLFFBQVEsdUJBQXVCO0FBQzNFLHVCQUFPLElBQUk7QUFBQTtBQUViLGtCQUFJLElBQUksVUFBVSxNQUFNO0FBQ3RCLHdCQUFRLElBQUk7QUFDWix1QkFBTyxJQUFJO0FBQUE7QUFFYixrQkFBSSxNQUFNLE1BQU0sU0FBUztBQUN6QixrQkFBSSxJQUFJLFNBQVMsTUFBTSxZQUFZLENBQUMsT0FBTztBQUN6QywyQkFBVyxJQUFJO0FBQ2YsdUJBQU8sSUFBSTtBQUFBLHFCQUNOO0FBQ0wsb0JBQUksTUFBTSxRQUFRLE1BQU07QUFDdEIsc0JBQUksV0FBVyxJQUFJLFNBQVM7QUFBQTtBQUU5QixvQkFBSSxNQUFNLFFBQVEsV0FBVztBQUMzQixzQkFBSSxXQUFXLElBQUksU0FBUyxRQUFRLFdBQVcsS0FBSztBQUFBO0FBRXRELG9CQUFJLFdBQVcsTUFBTSxRQUFRLGtCQUFrQixZQUFZLE1BQU0sUUFBUSxpQkFBaUIsSUFBSSxVQUFVLFlBQVksSUFBSTtBQUN4SCxvQkFBSSxPQUFPLEtBQUssS0FBSyxXQUFXLEtBQUssV0FBVyxPQUFPLENBQUMsTUFBTSxrQkFBa0I7QUFDOUUsd0JBQU0sSUFBSTtBQUFBO0FBQUE7QUFHZCxrQkFBSSxRQUFRLE1BQU07QUFDaEIsb0JBQUksT0FBTyxNQUFNLFFBQVEsYUFBYSxZQUFZO0FBQ2hELHdCQUFNLE1BQU0sUUFBUTtBQUFBLHVCQUNmO0FBQ0wsd0JBQU0sTUFBTSxRQUFRLGFBQWEsS0FBSyxNQUFNLFFBQVEsV0FBVztBQUFBO0FBQUE7QUFHbkUsa0JBQUksTUFBTSxRQUFRLGFBQWEsTUFBTTtBQUNuQyx3QkFBUSxNQUFRLFdBQVc7QUFDekIsc0JBQUksR0FBRyxLQUFLO0FBQ1osNEJBQVU7QUFDVix1QkFBSyxJQUFJLEdBQUcsTUFBTSxNQUFNLFFBQVEsSUFBSSxLQUFLLEtBQUs7QUFDNUMsMkJBQU8sTUFBTTtBQUNiLDRCQUFRLEtBQUssS0FBSztBQUFBO0FBRXBCLHlCQUFPO0FBQUEsb0JBQ0gsT0FBTyxVQUFVLEtBQUs7QUFDNUIsZ0JBQUMsWUFBVztBQUNWLHNCQUFJO0FBQ0osc0JBQUk7QUFDRiwyQkFBTyxNQUFNLE1BQU0sUUFBUSxVQUFVLE9BQU8sS0FBSyxFQUFFLFdBQVc7QUFBQSwyQkFDdkQsUUFBUDtBQUNBLDBCQUFNO0FBQ04sMkJBQU8sTUFBTSxLQUFLLFNBQVM7QUFBQTtBQUFBO0FBQUE7QUFJakMsa0JBQUksTUFBTSxRQUFRLG9CQUFvQixDQUFDLE1BQU0sUUFBUSxjQUFjLE9BQU8sUUFBUSxVQUFVO0FBQzFGLG9CQUFJLENBQUMsTUFBTSxRQUFRLHVCQUF1QjtBQUN4Qyx5QkFBTyxPQUFPLE9BQU87QUFDckIsc0JBQUksTUFBTSxRQUFRLFdBQVcsS0FBSztBQUNoQyx5QkFBSyxNQUFNLFFBQVEsV0FBVyxJQUFJLE1BQU0sUUFBUTtBQUNoRCwyQkFBTyxJQUFJLE1BQU0sUUFBUTtBQUFBO0FBRTNCLHNCQUFJLENBQUMsTUFBTSxRQUFRLG1CQUFtQixNQUFNLFFBQVEsV0FBVyxLQUFLO0FBQ2xFLHlCQUFLLE1BQU0sUUFBUSxXQUFXLElBQUksTUFBTSxRQUFRO0FBQ2hELDJCQUFPLElBQUksTUFBTSxRQUFRO0FBQUE7QUFFM0Isc0JBQUksT0FBTyxvQkFBb0IsS0FBSyxTQUFTLEdBQUc7QUFDOUMseUJBQUssTUFBTSxRQUFRLFlBQVk7QUFBQTtBQUVqQyx3QkFBTTtBQUFBLDJCQUNHLEdBQUc7QUFDWixvQkFBRSxNQUFNLFFBQVEsWUFBWSxFQUFFLE1BQU0sUUFBUSxhQUFhO0FBQ3pELDZCQUFXLE9BQU8sT0FBTztBQUN6Qix1QkFBSyxPQUFPLEtBQUs7QUFDZix3QkFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLO0FBQU07QUFDN0IsNkJBQVMsT0FBTyxJQUFJO0FBQUE7QUFFdEIsb0JBQUUsTUFBTSxRQUFRLFVBQVUsS0FBSztBQUMvQix5QkFBTyxJQUFJO0FBQ1gsc0JBQUksT0FBTyxLQUFLLEtBQUssV0FBVyxLQUFLLFdBQVcsT0FBTyxDQUFDLE1BQU0sa0JBQWtCO0FBQzlFLDBCQUFNLElBQUk7QUFBQTtBQUFBO0FBQUE7QUFJaEIsa0JBQUksTUFBTSxTQUFTLEdBQUc7QUFDcEIsdUJBQU8sTUFBTSxhQUFhLEdBQUcsVUFBVTtBQUFBLHFCQUNsQztBQUNMLG9CQUFJLE1BQU0sUUFBUSxjQUFjO0FBQzlCLHdCQUFNO0FBQ04sd0JBQU0sT0FBTyxPQUFPO0FBQ3BCLHNCQUFJLFlBQVk7QUFBQTtBQUVsQixzQkFBTSxlQUFlO0FBQ3JCLHNCQUFNLFVBQVUsUUFBUTtBQUN4Qix1QkFBTyxNQUFNLEtBQUssT0FBTyxNQUFNO0FBQUE7QUFBQTtBQUFBLFlBR2xDO0FBQ0gsbUJBQVUsU0FBUyxPQUFPO0FBQ3hCLG1CQUFPLFNBQVMsTUFBTTtBQUNwQixrQkFBSSxXQUFXO0FBQ2Ysa0JBQUksTUFBTSxNQUFNLFNBQVM7QUFDekIsa0JBQUksR0FBRztBQUNMLGtCQUFFLFlBQVk7QUFDZCxvQkFBSSxNQUFNLFFBQVEsb0JBQW9CLE1BQU0sUUFBUSx5QkFBeUIsTUFBTSxRQUFRLG1CQUFvQixPQUFNLFFBQVEscUJBQXFCLEtBQUssUUFBUSxRQUFRLElBQUksV0FBVyxLQUFLO0FBQ3pMLG9CQUFFLE1BQU0sUUFBUSxZQUFZLEVBQUUsTUFBTSxRQUFRLGFBQWE7QUFDekQsOEJBQVk7QUFBQSxvQkFDVixTQUFTO0FBQUE7QUFFWCw0QkFBVSxXQUFXO0FBQ3JCLHNCQUFJLE1BQU0sUUFBUSxXQUFXO0FBQzNCLDhCQUFVLFdBQVcsVUFBVSxTQUFTLFFBQVEsV0FBVyxLQUFLO0FBQUE7QUFFbEUsb0JBQUUsTUFBTSxRQUFRLFVBQVUsS0FBSztBQUFBO0FBRWpDLHVCQUFPO0FBQUE7QUFBQTtBQUFBLFlBR1Y7QUFDSCxlQUFLLFVBQVUsU0FBUztBQUN4QixpQkFBTyxLQUFLLFVBQVUsVUFBVyxTQUFTLE9BQU87QUFDL0MsbUJBQU8sU0FBUyxNQUFNO0FBQ3BCLGtCQUFJO0FBQ0osa0JBQUksT0FBTztBQUNYLGtCQUFJLEdBQUc7QUFDTCx1QkFBTyxFQUFFLFFBQVE7QUFBQTtBQUFBO0FBQUEsWUFHcEI7QUFBQTtBQUdMLGVBQU8sVUFBVSxjQUFjLFNBQVMsS0FBSyxJQUFJO0FBQy9DLGNBQUk7QUFDSixjQUFLLE1BQU0sUUFBUyxPQUFPLE9BQU8sWUFBWTtBQUM1QyxpQkFBSyxHQUFHLE9BQU8sU0FBUyxRQUFRO0FBQzlCLG1CQUFLO0FBQ0wscUJBQU8sR0FBRyxNQUFNO0FBQUE7QUFFbEIsaUJBQUssR0FBRyxTQUFTLFNBQVMsTUFBSztBQUM3QixtQkFBSztBQUNMLHFCQUFPLEdBQUc7QUFBQTtBQUFBO0FBR2QsY0FBSTtBQUNGLGtCQUFNLElBQUk7QUFDVixnQkFBSSxJQUFJLFdBQVcsSUFBSTtBQUNyQixtQkFBSyxLQUFLLE9BQU87QUFDakIscUJBQU87QUFBQTtBQUVULGtCQUFNLElBQUksU0FBUztBQUNuQixnQkFBSSxLQUFLLFFBQVEsT0FBTztBQUN0QixtQkFBSyxZQUFZO0FBQ2pCLDJCQUFhLEtBQUs7QUFDbEIscUJBQU8sS0FBSztBQUFBO0FBRWQsbUJBQU8sS0FBSyxVQUFVLE1BQU0sS0FBSztBQUFBLG1CQUMxQixRQUFQO0FBQ0Esa0JBQU07QUFDTixnQkFBSSxDQUFFLE1BQUssVUFBVSxhQUFhLEtBQUssVUFBVSxRQUFRO0FBQ3ZELG1CQUFLLEtBQUssU0FBUztBQUNuQixxQkFBTyxLQUFLLFVBQVUsWUFBWTtBQUFBLHVCQUN6QixLQUFLLFVBQVUsT0FBTztBQUMvQixvQkFBTTtBQUFBO0FBQUE7QUFBQTtBQUtaLGVBQU8sVUFBVSxxQkFBcUIsU0FBUyxLQUFLO0FBQ2xELGlCQUFPLElBQUksUUFBUyxTQUFTLE9BQU87QUFDbEMsbUJBQU8sU0FBUyxTQUFTLFFBQVE7QUFDL0IscUJBQU8sTUFBTSxZQUFZLEtBQUssU0FBUyxLQUFLLE9BQU87QUFDakQsb0JBQUksS0FBSztBQUNQLHlCQUFPLE9BQU87QUFBQSx1QkFDVDtBQUNMLHlCQUFPLFFBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQSxZQUlwQjtBQUFBO0FBR0wsZUFBTztBQUFBLFFBRU47QUFFSCxjQUFRLGNBQWMsU0FBUyxLQUFLLEdBQUcsR0FBRztBQUN4QyxZQUFJLElBQUksU0FBUztBQUNqQixZQUFJLEtBQUssTUFBTTtBQUNiLGNBQUksT0FBTyxNQUFNLFlBQVk7QUFDM0IsaUJBQUs7QUFBQTtBQUVQLGNBQUksT0FBTyxNQUFNLFVBQVU7QUFDekIsc0JBQVU7QUFBQTtBQUFBLGVBRVA7QUFDTCxjQUFJLE9BQU8sTUFBTSxZQUFZO0FBQzNCLGlCQUFLO0FBQUE7QUFFUCxvQkFBVTtBQUFBO0FBRVosaUJBQVMsSUFBSSxRQUFRLE9BQU87QUFDNUIsZUFBTyxPQUFPLFlBQVksS0FBSztBQUFBO0FBR2pDLGNBQVEscUJBQXFCLFNBQVMsS0FBSyxHQUFHO0FBQzVDLFlBQUksU0FBUztBQUNiLFlBQUksT0FBTyxNQUFNLFVBQVU7QUFDekIsb0JBQVU7QUFBQTtBQUVaLGlCQUFTLElBQUksUUFBUSxPQUFPO0FBQzVCLGVBQU8sT0FBTyxtQkFBbUI7QUFBQTtBQUFBLE9BR2xDLEtBQUs7QUFBQTtBQUFBOzs7QUNoWVI7QUFBQTtBQUNBLElBQUMsWUFBVztBQUNWO0FBQ0EsVUFBSSxTQUFTLFVBQVUsUUFBUSxZQUM3QixTQUFTLFNBQVMsT0FBTyxRQUFRO0FBQUUsaUJBQVMsT0FBTyxRQUFRO0FBQUUsY0FBSSxRQUFRLEtBQUssUUFBUTtBQUFNLGtCQUFNLE9BQU8sT0FBTztBQUFBO0FBQVEsd0JBQWdCO0FBQUUsZUFBSyxjQUFjO0FBQUE7QUFBUyxhQUFLLFlBQVksT0FBTztBQUFXLGNBQU0sWUFBWSxJQUFJO0FBQVEsY0FBTSxZQUFZLE9BQU87QUFBVyxlQUFPO0FBQUEsU0FDbFIsVUFBVSxHQUFHO0FBRWYsaUJBQVc7QUFFWCxnQkFBVTtBQUVWLGVBQVM7QUFFVCxtQkFBYTtBQUViLGNBQVEsV0FBVyxTQUFTO0FBRTVCLGNBQVEsYUFBYTtBQUVyQixjQUFRLGtCQUFtQixTQUFTLFlBQVk7QUFDOUMsZUFBTyxpQkFBaUI7QUFFeEIsaUNBQXlCLFNBQVM7QUFDaEMsZUFBSyxVQUFVO0FBQUE7QUFHakIsZUFBTztBQUFBLFFBRU47QUFFSCxjQUFRLFVBQVUsUUFBUTtBQUUxQixjQUFRLFNBQVMsT0FBTztBQUV4QixjQUFRLGNBQWMsT0FBTztBQUU3QixjQUFRLHFCQUFxQixPQUFPO0FBQUEsT0FFbkMsS0FBSztBQUFBO0FBQUE7OztBQ3RDUjtBQUFBO0FBQUE7QUFBQSx1QkFBNkQ7OztBQ0E3RCxzQkFBK0I7QUFDL0IsU0FBb0I7QUFDcEIsV0FBc0I7QUFpQ2YsMkJBQW9CO0FBQUEsRUEwQnZCLFlBQVksUUFBZ0IsV0FBbUIsUUFBUTtBQXRCL0MseUJBQXlCO0FBQ3pCLHVCQUF1QjtBQXNCM0IsU0FBSyxTQUFTO0FBQ2QsU0FBSyxXQUFXO0FBQ2hCLFlBQVEsSUFBSSx1Q0FBdUMsS0FBSztBQUN4RCxTQUFLLE9BQU87QUFBQSxNQUNSLGNBQWM7QUFBQSxNQUNkLFFBQVE7QUFBQSxNQUNSLG1CQUFtQjtBQUFBLE1BQ25CLGFBQWE7QUFBQTtBQUFBO0FBQUEsUUFJUixhQUE0QjtBQUNyQyxRQUFJLEtBQUs7QUFBZTtBQUV4QixRQUFJO0FBQ0EsWUFBTSxLQUFLO0FBQ1gsV0FBSyxnQkFBZ0I7QUFBQSxhQUNoQixPQUFQO0FBQ0UsY0FBUSxNQUFNLHdDQUF3QztBQUV0RCxXQUFLLGdCQUFnQjtBQUNyQixZQUFNO0FBQUE7QUFBQTtBQUFBLFFBSUEsV0FBMEI7QUFDcEMsUUFBSTtBQUNBLFlBQU0sV0FBVyxBQUFLLFVBQUssS0FBSyxPQUFPLElBQUksTUFBTSxRQUFRLFVBQVUsYUFBYSxXQUFXLHNCQUFzQixLQUFLLFVBQVU7QUFDaEksY0FBUSxJQUFJLHFEQUFxRDtBQUVqRSxVQUFJLEFBQUcsY0FBVyxXQUFXO0FBQ3pCLGNBQU0sVUFBVSxBQUFHLGdCQUFhLFVBQVU7QUFDMUMsZ0JBQVEsSUFBSSx1REFBdUQsUUFBUSxNQUFNLEdBQUc7QUFDcEYsYUFBSyxPQUFPLEtBQUssTUFBTTtBQUN2QixnQkFBUSxJQUFJLGtDQUFrQyxLQUFLLEtBQUssYUFBYSx3QkFBd0IsS0FBSyxLQUFLLE9BQU87QUFBQSxhQUMzRztBQUNILGdCQUFRLElBQUk7QUFBQTtBQUFBLGFBRVgsT0FBUDtBQUVFLGNBQVEsSUFBSSwyRUFBMkU7QUFBQTtBQUFBO0FBQUEsUUFJakYsV0FBMEI7QUFDcEMsUUFBSTtBQUVBLFlBQU0sS0FBSztBQUVYLFlBQU0sV0FBVyxBQUFLLFVBQUssS0FBSyxPQUFPLElBQUksTUFBTSxRQUFRLFVBQVUsYUFBYSxXQUFXLHNCQUFzQixLQUFLLFVBQVU7QUFDaEksWUFBTSxVQUFVLEtBQUssVUFBVSxLQUFLLE1BQU0sTUFBTTtBQUNoRCxjQUFRLElBQUkscUNBQXFDO0FBQ2pELGNBQVEsSUFBSSxrREFBa0QsUUFBUSxNQUFNLEdBQUc7QUFHL0UsTUFBRyxpQkFBYyxVQUFVLFNBQVM7QUFDcEMsY0FBUSxJQUFJLHlEQUF5RCxLQUFLLEtBQUssYUFBYSx3QkFBd0IsS0FBSyxLQUFLLE9BQU87QUFBQSxhQUNoSSxPQUFQO0FBQ0UsY0FBUSxNQUFNLHFEQUFxRDtBQUNuRSxVQUFJLENBQUMsS0FBSyxhQUFhO0FBQ25CLFlBQUksdUJBQU87QUFBQTtBQUVmLFVBQUksQ0FBQyxLQUFLLGFBQWE7QUFDbkIsY0FBTTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBS0osd0JBQXVDO0FBQ2pELFFBQUk7QUFDQSxZQUFNLFVBQVUsQUFBSyxVQUFLLEtBQUssT0FBTyxJQUFJLE1BQU0sUUFBUSxVQUFVLGFBQWEsV0FBVyxzQkFBc0IsS0FBSztBQUNySCxVQUFJLENBQUMsQUFBRyxjQUFXLFVBQVU7QUFDekIsUUFBRyxhQUFVLFNBQVMsRUFBRSxXQUFXO0FBQ25DLGdCQUFRLElBQUksa0NBQWtDO0FBQUE7QUFBQSxhQUU3QyxPQUFQO0FBQ0UsY0FBUSxJQUFJLDZEQUE2RDtBQUFBO0FBQUE7QUFBQSxFQUkxRSxrQkFBaUM7QUFDcEMsV0FBTyxDQUFDLEdBQUcsS0FBSyxLQUFLLGNBQWMsS0FBSyxDQUFDLEdBQUcsTUFBTSxFQUFFLGFBQWEsY0FBYyxFQUFFO0FBQUE7QUFBQSxFQUc5RSxXQUFxQjtBQUN4QixVQUFNLFFBQVEsSUFBSTtBQUNsQixlQUFXLFNBQVMsS0FBSyxLQUFLLFFBQVE7QUFDbEMsWUFBTSxJQUFJLE1BQU07QUFBQTtBQUlwQixVQUFNLFlBQVksTUFBTSxLQUFLO0FBQzdCLFdBQU8sVUFBVSxLQUFLLENBQUMsR0FBRyxNQUFNO0FBQzVCLFlBQU0sU0FBUyxlQUFjLHlCQUF5QixRQUFRO0FBQzlELFlBQU0sU0FBUyxlQUFjLHlCQUF5QixRQUFRO0FBRzlELFVBQUksV0FBVyxNQUFNLFdBQVcsSUFBSTtBQUNoQyxlQUFPLFNBQVM7QUFBQTtBQUlwQixVQUFJLFdBQVc7QUFBSSxlQUFPO0FBQzFCLFVBQUksV0FBVztBQUFJLGVBQU87QUFHMUIsYUFBTyxFQUFFLGNBQWM7QUFBQTtBQUFBO0FBQUEsRUFJeEIsbUJBQW1CLE1BQWMsaUJBQW1DO0FBQ3ZFLFVBQU0sY0FBYyxLQUFLLEtBQUssYUFBYSxLQUFLLE9BQUssRUFBRSxpQkFBaUI7QUFDeEUsUUFBSSxDQUFDO0FBQWEsYUFBTztBQUV6QixVQUFNLFdBQVcsSUFBSTtBQUNyQixlQUFXLFNBQVMsS0FBSyxLQUFLLFFBQVE7QUFDbEMsVUFBSSxNQUFNLG1CQUFtQixZQUFZLE1BQU0sTUFBTSxTQUFTLE1BQU07QUFDaEUsaUJBQVMsSUFBSSxNQUFNO0FBQUE7QUFBQTtBQUczQixXQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssQ0FBQyxHQUFHLE1BQU0sSUFBSTtBQUFBO0FBQUEsRUFHNUMsb0JBQW9CLE1BQWMsU0FBaUIsaUJBQW1DO0FBQ3pGLFVBQU0sY0FBYyxLQUFLLEtBQUssYUFBYSxLQUFLLE9BQUssRUFBRSxpQkFBaUI7QUFDeEUsUUFBSSxDQUFDO0FBQWEsYUFBTztBQUV6QixVQUFNLFNBQVMsSUFBSTtBQUNuQixlQUFXLFNBQVMsS0FBSyxLQUFLLFFBQVE7QUFDbEMsVUFBSSxNQUFNLG1CQUFtQixZQUFZLE1BQ3JDLE1BQU0sU0FBUyxRQUNmLE1BQU0sWUFBWSxTQUFTO0FBQzNCLGVBQU8sSUFBSSxNQUFNO0FBQUE7QUFBQTtBQUd6QixXQUFPLE1BQU0sS0FBSyxRQUFRLEtBQUssQ0FBQyxHQUFHLE1BQU0sSUFBSTtBQUFBO0FBQUEsRUFHMUMsU0FBUyxNQUFjLFNBQWlCLE9BQWUsaUJBQXVDO0FBQ2pHLFVBQU0sY0FBYyxLQUFLLEtBQUssYUFBYSxLQUFLLE9BQUssRUFBRSxpQkFBaUI7QUFDeEUsUUFBSSxDQUFDO0FBQWEsYUFBTztBQUV6QixXQUFPLEtBQUssS0FBSyxPQUFPLEtBQUssT0FDekIsRUFBRSxtQkFBbUIsWUFBWSxNQUNqQyxFQUFFLFNBQVMsUUFDWCxFQUFFLFlBQVksV0FDZCxFQUFFLFVBQVUsVUFDWDtBQUFBO0FBQUEsUUFHSSxlQUFlLE1BQWMsY0FBc0IsV0FBbUIsV0FBVyxXQUFtQixZQUFZLGtCQUFvQyxJQUFxQjtBQUVsTCxVQUFNLFdBQVcsS0FBSyxLQUFLLGFBQWEsS0FBSyxPQUFLLEVBQUUsaUJBQWlCO0FBQ3JFLFFBQUksVUFBVTtBQUNWLFlBQU0sSUFBSSxNQUFNLGtDQUFrQztBQUFBO0FBR3RELFVBQU0sS0FBSyxLQUFLLEtBQUs7QUFDckIsU0FBSyxLQUFLLGFBQWEsS0FBSztBQUFBLE1BQ3hCO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQTtBQUdKLFlBQVEsSUFBSSxzQkFBc0IsU0FBUyx5QkFBeUI7QUFDcEUsVUFBTSxLQUFLO0FBQ1gsV0FBTztBQUFBO0FBQUEsUUFHRSxrQkFBa0IsSUFBWSxNQUFjLGNBQXNCLFVBQWtCLFVBQWtCLGlCQUFrRDtBQUNqSyxVQUFNLGNBQWMsS0FBSyxLQUFLLGFBQWEsS0FBSyxPQUFLLEVBQUUsT0FBTztBQUM5RCxRQUFJLENBQUMsYUFBYTtBQUNkLFlBQU0sSUFBSSxNQUFNO0FBQUE7QUFJcEIsUUFBSSxZQUFZLGlCQUFpQixnQkFDN0IsS0FBSyxLQUFLLGFBQWEsS0FBSyxPQUFLLEVBQUUsaUJBQWlCLGVBQWU7QUFDbkUsWUFBTSxJQUFJLE1BQU07QUFBQTtBQUlwQixnQkFBWSxPQUFPO0FBQ25CLGdCQUFZLGVBQWU7QUFDM0IsZ0JBQVksV0FBVztBQUN2QixnQkFBWSxXQUFXO0FBQ3ZCLGdCQUFZLGtCQUFrQjtBQUU5QixVQUFNLEtBQUs7QUFBQTtBQUFBLFFBR0YsU0FBUyxlQUF1QixNQUFjLFNBQWlCLE9BQWUsTUFBYyxrQkFBMkIsTUFBcUI7QUFDckosU0FBSyxLQUFLLE9BQU8sS0FBSztBQUFBLE1BQ2xCLElBQUksS0FBSyxLQUFLO0FBQUEsTUFDZCxnQkFBZ0I7QUFBQSxNQUNoQjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBO0FBRUosUUFBSSxpQkFBaUI7QUFDakIsWUFBTSxLQUFLO0FBQUE7QUFBQTtBQUFBLFFBSU4sZUFBZSxRQUFtSDtBQUMzSSxRQUFJLE9BQU8sV0FBVyxHQUFHO0FBQ3JCLGNBQVEsSUFBSTtBQUNaO0FBQUE7QUFHSixVQUFNLFVBQVUsS0FBSyxLQUFLO0FBQzFCLGVBQVcsU0FBUyxRQUFRO0FBQ3hCLFdBQUssS0FBSyxPQUFPLEtBQUs7QUFBQSxRQUNsQixJQUFJLEtBQUssS0FBSztBQUFBLFFBQ2QsZ0JBQWdCLE1BQU07QUFBQSxRQUN0QixNQUFNLE1BQU07QUFBQSxRQUNaLFNBQVMsTUFBTTtBQUFBLFFBQ2YsT0FBTyxNQUFNO0FBQUEsUUFDYixNQUFNLE1BQU07QUFBQTtBQUFBO0FBSXBCLFlBQVEsSUFBSSxxQkFBcUIsT0FBTyxzQkFBc0IsV0FBVyxLQUFLLEtBQUssY0FBYztBQUNqRyxZQUFRLElBQUksdUNBQXVDLEtBQUssS0FBSyxPQUFPO0FBQ3BFLFVBQU0sS0FBSztBQUNYLFlBQVEsSUFBSSxvREFBb0QsS0FBSyxLQUFLLE9BQU87QUFBQTtBQUFBLFFBR3hFLGtCQUFrQixjQUF3QztBQUNuRSxVQUFNLG1CQUFtQixLQUFLLEtBQUssYUFBYSxVQUFVLE9BQUssRUFBRSxpQkFBaUI7QUFDbEYsUUFBSSxxQkFBcUIsSUFBSTtBQUN6QixhQUFPO0FBQUE7QUFHWCxVQUFNLGNBQWMsS0FBSyxLQUFLLGFBQWE7QUFHM0MsU0FBSyxLQUFLLFNBQVMsS0FBSyxLQUFLLE9BQU8sT0FBTyxPQUFLLEVBQUUsbUJBQW1CLFlBQVk7QUFHakYsU0FBSyxLQUFLLGFBQWEsT0FBTyxrQkFBa0I7QUFFaEQsVUFBTSxLQUFLO0FBQ1gsV0FBTztBQUFBO0FBQUEsUUFHRSxpQkFBaUIsWUFBZ0M7QUFHMUQsUUFBSSxXQUFXLGdCQUFnQixXQUFXLFFBQVE7QUFDOUMsaUJBQVcsZUFBZSxXQUFXLGNBQWM7QUFDL0MsY0FBTSxLQUFLLGVBQWUsWUFBWSxNQUFNLFlBQVk7QUFBQTtBQUc1RCxZQUFNLGNBQTBHO0FBRWhILGlCQUFXLFNBQVMsV0FBVyxRQUFRO0FBQ25DLGNBQU0sY0FBYyxLQUFLLEtBQUssYUFBYSxLQUFLLE9BQUssRUFBRSxPQUFPLE1BQU07QUFDcEUsWUFBSSxhQUFhO0FBQ2Isc0JBQVksS0FBSztBQUFBLFlBQ2IsZUFBZSxZQUFZO0FBQUEsWUFDM0IsTUFBTSxNQUFNO0FBQUEsWUFDWixTQUFTLE1BQU07QUFBQSxZQUNmLE9BQU8sTUFBTTtBQUFBLFlBQ2IsTUFBTSxNQUFNO0FBQUE7QUFBQTtBQUFBO0FBS3hCLFVBQUksWUFBWSxTQUFTLEdBQUc7QUFDeEIsY0FBTSxLQUFLLGVBQWU7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQUt6QixjQUFjLFNBQTZCO0FBR3BELFlBQVEsSUFBSTtBQUFBO0FBQUEsRUFHVCxtQkFBNkQ7QUFDaEUsV0FBTztBQUFBLE1BQ0gsY0FBYyxLQUFLLEtBQUssYUFBYTtBQUFBLE1BQ3JDLFFBQVEsS0FBSyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUEsRUFJMUIsd0JBQXdCLGNBQStCO0FBQzFELFdBQU8sS0FBSyxLQUFLLGFBQWEsS0FBSyxPQUFLLEVBQUUsaUJBQWlCO0FBQUE7QUFBQSxFQUd4RCxvQkFBb0IsY0FBb0Y7QUFDM0csVUFBTSxjQUFjLEtBQUssS0FBSyxhQUFhLEtBQUssT0FBSyxFQUFFLGlCQUFpQjtBQUN4RSxRQUFJLENBQUM7QUFBYSxhQUFPO0FBRXpCLFVBQU0sb0JBQW9CLEtBQUssS0FBSyxPQUFPLE9BQU8sT0FBSyxFQUFFLG1CQUFtQixZQUFZO0FBQ3hGLFVBQU0sUUFBUSxDQUFDLEdBQUcsSUFBSSxJQUFJLGtCQUFrQixJQUFJLE9BQUssRUFBRSxRQUFRO0FBRS9ELFdBQU87QUFBQSxNQUNILE1BQU0sWUFBWTtBQUFBLE1BQ2xCLFlBQVksa0JBQWtCO0FBQUEsTUFDOUI7QUFBQTtBQUFBO0FBQUEsRUFJRCxxQkFBcUIsTUFBYyxpQkFBaUM7QUFDdkUsVUFBTSxjQUFjLEtBQUssS0FBSyxhQUFhLEtBQUssT0FBSyxFQUFFLGlCQUFpQjtBQUN4RSxRQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksaUJBQWlCO0FBQzlDLGFBQU87QUFBQTtBQUdYLFFBQUksZ0JBQWdCO0FBQ3BCLGVBQVcsUUFBUSxZQUFZLGlCQUFpQjtBQUM1QyxVQUFJO0FBQ0EsY0FBTSxRQUFRLElBQUksT0FBTyxLQUFLLE9BQU87QUFDckMsWUFBSSxLQUFLLFFBQVE7QUFDYiwwQkFBZ0IsY0FBYyxRQUFRLE9BQU8sSUFBSSxTQUFTO0FBRXRELGdCQUFJLFNBQVMsS0FBSztBQUNsQixxQkFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFNBQVMsR0FBRyxLQUFLO0FBQ3RDLG9CQUFNLFFBQVEsS0FBSztBQUNuQixvQkFBTSxVQUFVLEtBQUssV0FBVztBQUNoQyx1QkFBUyxPQUFPLFFBQVEsSUFBSSxPQUFPLE1BQU0sS0FBSyxNQUFNO0FBQUE7QUFHeEQscUJBQVMsT0FBTyxRQUFRLFFBQVEsS0FBSyxXQUFXLEtBQUs7QUFDckQsbUJBQU87QUFBQTtBQUFBLGVBRVI7QUFDSCwwQkFBZ0IsY0FBYyxRQUFRLE9BQU8sS0FBSztBQUFBO0FBQUEsZUFFakQsT0FBUDtBQUNFLGdCQUFRLEtBQUssd0NBQXdDLG9CQUFvQixLQUFLLFNBQVM7QUFBQTtBQUFBO0FBRy9GLFdBQU87QUFBQTtBQUFBLEVBR0gsV0FBVyxLQUFxQjtBQUNwQyxXQUFPLElBQUksUUFBUSxjQUFjLENBQUMsTUFBTTtBQUNwQyxjQUFRO0FBQUEsYUFDQztBQUFLLGlCQUFPO0FBQUEsYUFDWjtBQUFLLGlCQUFPO0FBQUEsYUFDWjtBQUFLLGlCQUFPO0FBQUEsYUFDWjtBQUFLLGlCQUFPO0FBQUEsYUFDWjtBQUFLLGlCQUFPO0FBQUE7QUFDUixpQkFBTztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS3JCLGtCQUEwQjtBQUM3QixXQUFPLEFBQUssVUFBSyxLQUFLLE9BQU8sSUFBSSxNQUFNLFFBQVEsVUFBVSxhQUFhLFdBQVcsc0JBQXNCLEtBQUssVUFBVTtBQUFBO0FBQUEsRUFHbkgsaUJBQTBCO0FBQzdCLFdBQU8sQUFBRyxjQUFXLEtBQUs7QUFBQTtBQUFBLFFBR2pCLFFBQXVCO0FBQ2hDLFNBQUssY0FBYztBQUNuQixRQUFJO0FBQ0EsWUFBTSxLQUFLO0FBQUEsYUFDTixPQUFQO0FBQ0UsY0FBUSxNQUFNLGdDQUFnQztBQUFBO0FBQUE7QUFBQTtBQTVZbkQ7QUFRcUIsQUFSckIsY0FRcUIsMkJBQTJCO0FBQUEsRUFDL0M7QUFBQSxFQUFXO0FBQUEsRUFBVTtBQUFBLEVBQWE7QUFBQSxFQUFXO0FBQUEsRUFDN0M7QUFBQSxFQUFVO0FBQUEsRUFBVTtBQUFBLEVBQVE7QUFBQSxFQUFZO0FBQUEsRUFDeEM7QUFBQSxFQUFXO0FBQUEsRUFBVztBQUFBLEVBQWdCO0FBQUEsRUFDdEM7QUFBQSxFQUFRO0FBQUEsRUFBWTtBQUFBLEVBQVU7QUFBQSxFQUFPO0FBQUEsRUFDckM7QUFBQSxFQUFZO0FBQUEsRUFBZ0I7QUFBQSxFQUFtQjtBQUFBLEVBQy9DO0FBQUEsRUFBWTtBQUFBLEVBQWdCO0FBQUEsRUFBVztBQUFBLEVBQ3ZDO0FBQUEsRUFBUztBQUFBLEVBQVE7QUFBQSxFQUFRO0FBQUEsRUFBVztBQUFBLEVBQ3BDO0FBQUEsRUFBUztBQUFBLEVBQVM7QUFBQSxFQUFZO0FBQUEsRUFBYTtBQUFBLEVBQzNDO0FBQUEsRUFBYTtBQUFBLEVBQVc7QUFBQSxFQUFXO0FBQUEsRUFBUTtBQUFBLEVBQzNDO0FBQUEsRUFBUTtBQUFBLEVBQVE7QUFBQSxFQUFVO0FBQUEsRUFBaUI7QUFBQSxFQUMzQztBQUFBLEVBQWE7QUFBQSxFQUFhO0FBQUEsRUFBZTtBQUFBLEVBQ3pDO0FBQUEsRUFBbUI7QUFBQSxFQUFtQjtBQUFBLEVBQWE7QUFBQSxFQUNuRDtBQUFBLEVBQVM7QUFBQSxFQUFZO0FBQUEsRUFBVztBQUFBLEVBQVM7QUFBQSxFQUN6QztBQUFBLEVBQVc7QUFBQSxFQUFVO0FBQUEsRUFBVTtBQUFBLEVBQVU7QUFBQSxFQUN6QztBQUFBOzs7QUMxRFIsdUJBQTRDO0FBSXJDLHVDQUFpQyx1QkFBTTtBQUFBLEVBZ0IxQyxZQUNJLEtBQ1EsUUFDQSxVQUNWO0FBQ0UsVUFBTTtBQUhFO0FBQ0E7QUFsQkosd0JBQThCO0FBQzlCLGdDQUErQjtBQUMvQiw4QkFBb0M7QUFDcEMsOEJBQTZCO0FBQzdCLDRCQUFrQztBQUNsQywrQkFBcUM7QUFDckMsOEJBQW9EO0FBQ3BELDJCQUE0QjtBQThONUIseUJBQTZCLElBQUk7QUErQmpDLDRCQUFnQyxJQUFJO0FBbURwQywwQkFBOEIsSUFBSTtBQWxTdEMsU0FBSyxLQUFLLE9BQU87QUFBQTtBQUFBLEVBR3JCLFNBQVM7QUFDTCxVQUFNLEVBQUUsY0FBYztBQUN0QixjQUFVO0FBR1YsU0FBSyxxQkFBcUIsS0FBSyxPQUFPLFNBQVM7QUFDL0MsU0FBSyxrQkFBa0IsQ0FBQyxHQUFHLEtBQUssT0FBTyxTQUFTO0FBRWhELGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTTtBQUdqQyxVQUFNLG1CQUFtQixJQUFJLHlCQUFRLFdBQ2hDLFFBQVEsYUFDUixRQUFRLHNFQUNSLFFBQVEsVUFBUTtBQUNiLFdBQUssZUFBZSxzQkFDZixTQUFTLENBQUMsVUFBVTtBQUNqQixhQUFLLHFCQUFxQjtBQUFBO0FBRWxDLFdBQUssaUJBQWlCO0FBQUE7QUFFOUIsU0FBSyxtQkFBbUIsVUFBVSxTQUFTLE9BQU8sRUFBRSxLQUFLO0FBQ3pELFNBQUssaUJBQWlCLE1BQU0sUUFBUTtBQUNwQyxTQUFLLGlCQUFpQixNQUFNLFVBQVU7QUFHdEMsUUFBSSx5QkFBUSxXQUNQLFFBQVEsZUFDUixRQUFRLDhCQUNSLFlBQVksY0FBWTtBQUNyQixXQUFLLHNCQUFzQjtBQUMzQixZQUFNLGVBQWUsS0FBSyxHQUFHO0FBQzdCLFlBQU0scUJBQTZDO0FBQ25ELG1CQUFhLFFBQVEsV0FBUztBQUMxQiwyQkFBbUIsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLFNBQVMsTUFBTTtBQUFBO0FBRXJFLGVBQ0ssV0FBVyxvQkFDWCxTQUFTLEtBQUssT0FBTyxTQUFTLG9CQUM5QixTQUFTLFdBQVM7QUFDZixhQUFLLHNCQUFzQjtBQUMzQixhQUFLLGVBQWU7QUFDcEIsYUFBSyxrQkFBa0I7QUFDdkIsYUFBSyxnQkFBZ0I7QUFBQTtBQUFBO0FBS3JDLFVBQU0sb0JBQW9CLFVBQVUsVUFBVSxFQUFFLEtBQUs7QUFDckQsU0FBSyxlQUFlO0FBR3BCLFVBQU0sdUJBQXVCLFVBQVUsVUFBVSxFQUFFLEtBQUs7QUFDeEQsU0FBSyxrQkFBa0I7QUFHdkIsVUFBTSxxQkFBcUIsVUFBVSxVQUFVLEVBQUUsS0FBSztBQUN0RCxTQUFLLGdCQUFnQjtBQUdyQixRQUFJLHlCQUFRLFdBQ1AsUUFBUSxlQUNSLFFBQVEsc0NBQ1IsWUFBWSxjQUFZLFNBQ3BCLFVBQVUsUUFBUSxtQkFDbEIsVUFBVSxRQUFRLHFCQUNsQixVQUFVLGFBQWEsY0FDdkIsU0FBUyxLQUFLLG9CQUNkLFNBQVMsV0FBUztBQUNmLFdBQUsscUJBQXFCO0FBQzFCLFdBQUssT0FBTyxTQUFTLGtCQUFrQixLQUFLO0FBQzVDLFdBQUssT0FBTztBQUNaLFdBQUs7QUFBQTtBQUlqQixVQUFNLG1CQUFtQixVQUFVO0FBQ25DLFNBQUsscUJBQXFCO0FBSzFCLFVBQU0sZUFBZSxJQUFJLHlCQUFRLFdBQzVCLFVBQVUsWUFBVSxPQUNoQixjQUFjLFVBQ2QsU0FDQSxRQUFRLE1BQU07QUFDWCxXQUFLO0FBQUE7QUFJakIsUUFBSSxLQUFLLGtCQUFrQixLQUFLLGVBQWUsU0FBUztBQUNwRCxXQUFLLGVBQWUsUUFBUSxpQkFBaUIsV0FBVyxDQUFDLE1BQXFCO0FBQzFFLFlBQUksRUFBRSxRQUFRLFNBQVM7QUFDbkIsWUFBRTtBQUNGLGVBQUs7QUFBQTtBQUFBO0FBQUE7QUFNakIsU0FBSztBQUFBO0FBQUEsRUFHRCx3QkFBd0I7QUFDNUIsUUFBSSxTQUFTLGVBQWU7QUFBMEI7QUFDdEQsVUFBTSxRQUFRLFNBQVMsY0FBYztBQUNyQyxVQUFNLEtBQUs7QUFDWCxVQUFNLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBNkZwQixhQUFTLEtBQUssWUFBWTtBQUFBO0FBQUEsRUFLdEIsZUFBZSxXQUF3QjtBQUMzQyxjQUFVO0FBQ1YsVUFBTSxRQUFRLEtBQUssR0FBRztBQUN0QixRQUFJLENBQUMsU0FBUyxNQUFNLFdBQVc7QUFBRztBQUNsQyxVQUFNLE9BQU8sVUFBVSxVQUFVLEVBQUUsS0FBSztBQUN4QyxVQUFNLFFBQVEsVUFBUTtBQUNsQixZQUFNLE1BQU0sS0FBSyxTQUFTLFVBQVU7QUFBQSxRQUNoQyxNQUFNO0FBQUEsUUFDTixLQUFLO0FBQUE7QUFFVCxVQUFJLFFBQVEsU0FBUztBQUNyQixVQUFJLEtBQUssaUJBQWlCLE1BQU07QUFDNUIsWUFBSSxTQUFTO0FBQUE7QUFFakIsVUFBSSxVQUFVLENBQUMsTUFBTTtBQUNqQixhQUFLLGVBQWU7QUFDcEIsYUFBSyx1QkFBdUI7QUFDNUIsYUFBSyxxQkFBcUI7QUFDMUIsYUFBSyxxQkFBcUI7QUFDMUIsYUFBSyxtQkFBbUI7QUFDeEIsYUFBSyxlQUFlO0FBQ3BCLGFBQUssa0JBQWtCLFNBQVMsY0FBYztBQUM5QyxhQUFLLGdCQUFnQixTQUFTLGNBQWM7QUFDNUMsYUFBSztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUVQsa0JBQWtCLFdBQXdCO0FBQzlDLGNBQVU7QUFDVixRQUFJLENBQUMsS0FBSztBQUFjO0FBQ3hCLFVBQU0sV0FBVyxLQUFLLEdBQUcsbUJBQW1CLEtBQUssY0FBYyxLQUFLLHVCQUF1QixLQUFLLE9BQU8sU0FBUztBQUNoSCxRQUFJLENBQUMsWUFBWSxTQUFTLFdBQVc7QUFBRztBQUN4QyxVQUFNLE9BQU8sVUFBVSxVQUFVLEVBQUUsS0FBSztBQUV4QyxVQUFNLGVBQWUsVUFBVSxTQUFTLFVBQVUsRUFBRSxNQUFNLHVCQUF1QixLQUFLO0FBQ3RGLGlCQUFhLFVBQVUsTUFBTTtBQUN6QixXQUFLLG1CQUFtQixJQUFJLElBQUk7QUFDaEMsV0FBSyxrQkFBa0I7QUFDdkIsV0FBSyxnQkFBZ0IsU0FBUyxjQUFjO0FBQzVDLFdBQUs7QUFBQTtBQUVULGFBQVMsUUFBUSxhQUFXO0FBQ3hCLFlBQU0sTUFBTSxLQUFLLFNBQVMsVUFBVTtBQUFBLFFBQ2hDLE1BQU0sUUFBUTtBQUFBLFFBQ2QsS0FBSztBQUFBO0FBRVQsVUFBSSxLQUFLLGlCQUFpQixJQUFJLFlBQVksS0FBSyx5QkFBeUIsV0FBWSxLQUFLLHNCQUFzQixXQUFXLEtBQUssd0JBQXdCLFdBQVcsS0FBSyxvQkFBcUI7QUFDeEwsWUFBSSxTQUFTO0FBQUE7QUFFakIsVUFBSSxVQUFVLENBQUMsTUFBTTtBQUNqQixZQUFJLEVBQUUsV0FBVyxFQUFFLFNBQVM7QUFDeEIsY0FBSSxLQUFLLGlCQUFpQixJQUFJLFVBQVU7QUFDcEMsaUJBQUssaUJBQWlCLE9BQU87QUFBQSxpQkFDMUI7QUFDSCxpQkFBSyxpQkFBaUIsSUFBSTtBQUFBO0FBQUEsbUJBRXZCLEVBQUUsWUFBWSxLQUFLLHNCQUFzQjtBQUNoRCxnQkFBTSxRQUFRLEtBQUssSUFBSSxLQUFLLHNCQUFzQjtBQUNsRCxnQkFBTSxNQUFNLEtBQUssSUFBSSxLQUFLLHNCQUFzQjtBQUNoRCxtQkFBUyxJQUFJLE9BQU8sS0FBSyxLQUFLLEtBQUs7QUFDL0IsaUJBQUssaUJBQWlCLElBQUk7QUFBQTtBQUFBLGVBRTNCO0FBQ0gsZUFBSyxtQkFBbUIsSUFBSSxJQUFJLENBQUM7QUFBQTtBQUVyQyxhQUFLLHVCQUF1QjtBQUM1QixhQUFLLHFCQUFxQjtBQUMxQixhQUFLLHFCQUFxQjtBQUMxQixhQUFLLG1CQUFtQjtBQUN4QixhQUFLLGtCQUFrQjtBQUN2QixhQUFLLGdCQUFnQixTQUFTLGNBQWM7QUFDNUMsYUFBSztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT1QsZ0JBQWdCLFdBQXdCO0FBQzVDLGNBQVU7QUFDVixRQUFJLENBQUMsS0FBSyxnQkFBZ0IsQ0FBQyxLQUFLO0FBQXNCO0FBQ3RELFVBQU0sU0FBUyxLQUFLLEdBQUcsb0JBQ25CLEtBQUssY0FDTCxLQUFLLHNCQUNMLEtBQUssdUJBQXVCLEtBQUssT0FBTyxTQUFTO0FBRXJELFFBQUksQ0FBQyxVQUFVLE9BQU8sV0FBVztBQUFHO0FBQ3BDLFVBQU0sT0FBTyxVQUFVLFVBQVUsRUFBRSxLQUFLO0FBRXhDLFVBQU0sZUFBZSxVQUFVLFNBQVMsVUFBVSxFQUFFLE1BQU0scUJBQXFCLEtBQUs7QUFDcEYsaUJBQWEsVUFBVSxNQUFNO0FBQ3pCLFdBQUssaUJBQWlCLElBQUksSUFBSTtBQUM5QixXQUFLLGdCQUFnQjtBQUNyQixXQUFLO0FBQUE7QUFFVCxXQUFPLFFBQVEsV0FBUztBQUNwQixZQUFNLE1BQU0sS0FBSyxTQUFTLFVBQVU7QUFBQSxRQUNoQyxNQUFNLE1BQU07QUFBQSxRQUNaLEtBQUs7QUFBQTtBQUVULFVBQUksS0FBSyxlQUFlLElBQUksVUFBVSxLQUFLLHVCQUF1QixTQUFVLEtBQUssb0JBQW9CLFNBQVMsS0FBSyxzQkFBc0IsU0FBUyxLQUFLLGtCQUFtQjtBQUN0SyxZQUFJLFNBQVM7QUFBQTtBQUVqQixVQUFJLFVBQVUsQ0FBQyxNQUFNO0FBQ2pCLFlBQUksRUFBRSxXQUFXLEVBQUUsU0FBUztBQUN4QixjQUFJLEtBQUssZUFBZSxJQUFJLFFBQVE7QUFDaEMsaUJBQUssZUFBZSxPQUFPO0FBQUEsaUJBQ3hCO0FBQ0gsaUJBQUssZUFBZSxJQUFJO0FBQUE7QUFBQSxtQkFFckIsRUFBRSxZQUFZLEtBQUssb0JBQW9CO0FBQzlDLGdCQUFNLFFBQVEsS0FBSyxJQUFJLEtBQUssb0JBQW9CO0FBQ2hELGdCQUFNLE1BQU0sS0FBSyxJQUFJLEtBQUssb0JBQW9CO0FBQzlDLG1CQUFTLElBQUksT0FBTyxLQUFLLEtBQUssS0FBSztBQUMvQixpQkFBSyxlQUFlLElBQUk7QUFBQTtBQUFBLGVBRXpCO0FBQ0gsZUFBSyxpQkFBaUIsSUFBSSxJQUFJLENBQUM7QUFBQTtBQUVuQyxhQUFLLHFCQUFxQjtBQUMxQixhQUFLLG1CQUFtQjtBQUN4QixhQUFLLGdCQUFnQjtBQUNyQixhQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLVCxvQ0FBb0M7QUFDeEMsUUFBSSxLQUFLLGdCQUFnQjtBQUNyQixVQUFJLE1BQU07QUFDVixVQUFJLEtBQUssY0FBYztBQUNuQixlQUFPLEtBQUs7QUFDWixZQUFJLEtBQUssaUJBQWlCLE9BQU8sR0FBRztBQUNoQyxnQkFBTSxXQUFXLE1BQU0sS0FBSyxLQUFLLGtCQUFrQixLQUFLLENBQUMsR0FBRyxNQUFNLElBQUk7QUFDdEUsaUJBQU8sTUFBTSxTQUFTLEtBQUs7QUFBQSxtQkFDcEIsS0FBSyxzQkFBc0I7QUFDbEMsaUJBQU8sTUFBTSxLQUFLO0FBQUE7QUFFdEIsWUFBSSxLQUFLLGVBQWUsT0FBTyxHQUFHO0FBQzlCLGdCQUFNLFNBQVMsTUFBTSxLQUFLLEtBQUssZ0JBQWdCLEtBQUssQ0FBQyxHQUFHLE1BQU0sSUFBSTtBQUNsRSxpQkFBTyxNQUFNLE9BQU8sS0FBSztBQUFBLG1CQUNsQixLQUFLLG9CQUFvQjtBQUNoQyxpQkFBTyxNQUFNLEtBQUs7QUFBQTtBQUFBO0FBRzFCLFdBQUssZUFBZSxTQUFTO0FBQUE7QUFBQTtBQUFBLEVBSTdCLHNCQUFzQixXQUF5QjtBQUNuRCxRQUFJLENBQUMsS0FBSztBQUFjO0FBRXhCLFVBQU0sV0FBVyxLQUFLLEdBQUcsbUJBQW1CLEtBQUssY0FBYyxLQUFLLHVCQUF1QixLQUFLLE9BQU8sU0FBUztBQUNoSCxRQUFJLENBQUMsWUFBWSxTQUFTLFdBQVc7QUFBRztBQUV4QyxVQUFNLFNBQVMsYUFBYSxTQUFTLGNBQWM7QUFDbkQsUUFBSSxDQUFDO0FBQVE7QUFDYixXQUFPO0FBQ1AsV0FBTyxTQUFTO0FBR2hCLFFBQUkseUJBQVEsUUFDUCxRQUFRLGlCQUNSLFlBQVksY0FBWTtBQUNyQixZQUFNLGlCQUF5QztBQUMvQyxlQUFTLFFBQVEsYUFBVztBQUN4Qix1QkFBZSxRQUFRLGNBQWMsUUFBUTtBQUFBO0FBRWpELGVBQ0ssV0FBVyxnQkFDWCxTQUFTLEtBQUsscUJBQXFCLFlBQ25DLFNBQVMsV0FBUztBQUNmLGFBQUssdUJBQXVCLFNBQVM7QUFDckMsWUFBSSxDQUFDLEtBQUssc0JBQXNCLEtBQUsscUJBQXFCLEtBQUssc0JBQXNCO0FBQ2pGLGVBQUsscUJBQXFCLEtBQUs7QUFBQTtBQUVuQyxhQUFLLHlCQUF5QjtBQUM5QixhQUFLO0FBQUE7QUFBQTtBQUtyQixTQUFLLHlCQUF5QjtBQUc5QixRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLFVBQUksTUFBTSxLQUFLLGVBQWUsS0FBSyxlQUFlLE1BQU0sS0FBSyx1QkFBdUI7QUFDcEYsVUFBSSxLQUFLLHNCQUFzQixLQUFLLHVCQUF1QixHQUFHO0FBQzFELGVBQU8sTUFBTSxLQUFLO0FBQ2xCLFlBQUksS0FBSyxvQkFBb0IsS0FBSyxxQkFBcUIsS0FBSyxvQkFBb0I7QUFDNUUsaUJBQU8sTUFBTSxLQUFLO0FBQUE7QUFBQTtBQUcxQixXQUFLLGVBQWUsU0FBUztBQUFBO0FBQUE7QUFBQSxFQUk3Qix5QkFBeUIsV0FBd0I7QUFDckQsUUFBSSxDQUFDLEtBQUs7QUFBYztBQUV4QixVQUFNLFdBQVcsS0FBSyxHQUFHLG1CQUFtQixLQUFLLGNBQWMsS0FBSyx1QkFBdUIsS0FBSyxPQUFPLFNBQVM7QUFDaEgsUUFBSSxDQUFDLFlBQVksU0FBUyxXQUFXO0FBQUc7QUFFeEMsUUFBSSx5QkFBUSxXQUNQLFFBQVEsZUFDUixZQUFZLGNBQVk7QUFDckIsWUFBTSxpQkFBeUM7QUFDL0MsZUFDSyxPQUFPLE9BQUssS0FBSyxLQUFLLHNCQUN0QixRQUFRLGFBQVc7QUFDaEIsdUJBQWUsUUFBUSxjQUFjLFFBQVE7QUFBQTtBQUVyRCxlQUNLLFdBQVcsZ0JBQ1gsU0FBVSxNQUFLLHNCQUFzQixLQUFLLHNCQUFzQixZQUNoRSxTQUFTLFdBQVM7QUFDZixhQUFLLHFCQUFxQixTQUFTO0FBQ25DLGFBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtqQixvQkFBb0IsV0FBeUI7QUFDakQsUUFBSSxDQUFDLEtBQUssZ0JBQWdCLENBQUMsS0FBSztBQUFzQjtBQUV0RCxVQUFNLFNBQVMsYUFBYSxTQUFTLGNBQWM7QUFDbkQsUUFBSSxDQUFDO0FBQVE7QUFDYixXQUFPO0FBQ1AsV0FBTyxTQUFTO0FBR2hCLFVBQU0sY0FBYyxLQUFLLEdBQUcsb0JBQ3hCLEtBQUssY0FDTCxLQUFLLHNCQUNMLEtBQUssdUJBQXVCLEtBQUssT0FBTyxTQUFTO0FBR3JELFFBQUksZUFBZSxZQUFZLFNBQVMsR0FBRztBQUN2QyxVQUFJLHlCQUFRLFFBQ1AsUUFBUSxlQUNSLFlBQVksY0FBWTtBQUNyQixjQUFNLGVBQXVDO0FBQUEsVUFDekMsS0FBSztBQUFBO0FBRVQsb0JBQVksUUFBUSxXQUFTO0FBQ3pCLHVCQUFhLE1BQU0sY0FBYyxNQUFNO0FBQUE7QUFFM0MsaUJBQ0ssV0FBVyxjQUNYLFNBQVMsS0FBSyxtQkFBbUIsWUFDakMsU0FBUyxXQUFTO0FBQ2YsZ0JBQU0sV0FBVyxTQUFTO0FBQzFCLGVBQUsscUJBQXFCO0FBQzFCLGNBQUksYUFBYSxHQUFHO0FBQ2hCLGlCQUFLLG1CQUFtQjtBQUN4QixpQkFBSyxxQkFBcUI7QUFBQTtBQUU5QixlQUFLLHVCQUF1QjtBQUFBO0FBQUE7QUFBQTtBQU1oRCxRQUFJLEtBQUssdUJBQXVCLEdBQUc7QUFDL0IsV0FBSyx1QkFBdUI7QUFBQTtBQUloQyxRQUFJLEtBQUssZ0JBQWdCO0FBQ3JCLFVBQUksTUFBTSxLQUFLLGVBQWUsS0FBSyxlQUFlLE1BQU0sS0FBSyx1QkFBdUI7QUFDcEYsVUFBSSxLQUFLLHNCQUFzQixLQUFLLHVCQUF1QixHQUFHO0FBQzFELGVBQU8sTUFBTSxLQUFLO0FBQ2xCLFlBQUksS0FBSyxvQkFBb0IsS0FBSyxxQkFBcUIsS0FBSyxvQkFBb0I7QUFDNUUsaUJBQU8sTUFBTSxLQUFLO0FBQUE7QUFBQTtBQUcxQixXQUFLLGVBQWUsU0FBUztBQUFBO0FBQUE7QUFBQSxFQUk3Qix1QkFBdUIsV0FBd0I7QUFDbkQsUUFBSSxLQUFLLHVCQUF1QjtBQUFHO0FBRW5DLFVBQU0sWUFBWSxLQUFLLEdBQUcsb0JBQ3RCLEtBQUssY0FDTCxLQUFLLHNCQUFzQixLQUFLLHNCQUNoQyxLQUFLLHVCQUF1QixLQUFLLE9BQU8sU0FBUztBQUdyRCxRQUFJLENBQUMsYUFBYSxVQUFVLFdBQVc7QUFBRztBQUUxQyxRQUFJLHlCQUFRLFdBQ1AsUUFBUSxhQUNSLFlBQVksY0FBWTtBQUNyQixZQUFNLGVBQXVDO0FBQzdDLFlBQU0sV0FBVyxLQUFLLHVCQUF1QixLQUFLLHVCQUF1QixLQUFLLHFCQUFxQjtBQUNuRyxnQkFDSyxPQUFPLE9BQUssS0FBSyxVQUNqQixRQUFRLFdBQVM7QUFDZCxxQkFBYSxNQUFNLGNBQWMsTUFBTTtBQUFBO0FBRS9DLGVBQ0ssV0FBVyxjQUNYLFNBQVUsTUFBSyxvQkFBb0IsS0FBSyxvQkFBb0IsWUFDNUQsU0FBUyxXQUFTO0FBQ2YsYUFBSyxtQkFBbUIsU0FBUztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSzdDLHFCQUFxQixXQUF5QjtBQUNsRCxRQUFJLEtBQUssdUJBQXVCO0FBQWE7QUFFN0MsVUFBTSxTQUFTLGFBQWEsU0FBUyxjQUFjO0FBQ25ELFFBQUksQ0FBQztBQUFRO0FBQ2IsV0FBTztBQUNQLFdBQU8sU0FBUztBQUVoQixXQUFPLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFHOUIsUUFBSSx5QkFBUSxRQUNQLFFBQVEsc0JBQ1IsUUFBUSx3Q0FDUixVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLGdCQUFnQixTQUFTLFVBQ3ZDLFNBQVMsV0FBUztBQUNmLFdBQUssYUFBYSxTQUFTO0FBQzNCLFdBQUssT0FBTyxTQUFTLGVBQWUsQ0FBQyxHQUFHLEtBQUs7QUFDN0MsV0FBSyxPQUFPO0FBQUE7QUFJeEIsUUFBSSx5QkFBUSxRQUNQLFFBQVEsd0JBQ1IsUUFBUSwwQ0FDUixVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLGdCQUFnQixTQUFTLFlBQ3ZDLFNBQVMsV0FBUztBQUNmLFdBQUssYUFBYSxXQUFXO0FBQzdCLFdBQUssT0FBTyxTQUFTLGVBQWUsQ0FBQyxHQUFHLEtBQUs7QUFDN0MsV0FBSyxPQUFPO0FBQUE7QUFJeEIsUUFBSSx5QkFBUSxRQUNQLFFBQVEsbUJBQ1IsUUFBUSxvQ0FDUixVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLGdCQUFnQixTQUFTLGFBQ3ZDLFNBQVMsV0FBUztBQUNmLFdBQUssYUFBYSxZQUFZO0FBQzlCLFdBQUssT0FBTyxTQUFTLGVBQWUsQ0FBQyxHQUFHLEtBQUs7QUFDN0MsV0FBSyxPQUFPO0FBQUE7QUFJeEIsUUFBSSx5QkFBUSxRQUNQLFFBQVEscUJBQ1IsUUFBUSxrREFDUixVQUFVLFlBQVUsT0FDaEIsU0FBUyxLQUFLLGdCQUFnQixTQUFTLFNBQ3ZDLFNBQVMsV0FBUztBQUNmLFdBQUssYUFBYSxRQUFRO0FBQzFCLFdBQUssT0FBTyxTQUFTLGVBQWUsQ0FBQyxHQUFHLEtBQUs7QUFDN0MsV0FBSyxPQUFPO0FBQUE7QUFBQTtBQUFBLEVBSXBCLGFBQWEsUUFBZ0IsU0FBa0I7QUFDbkQsUUFBSSxXQUFXLENBQUMsS0FBSyxnQkFBZ0IsU0FBUyxTQUFTO0FBQ25ELFdBQUssZ0JBQWdCLEtBQUs7QUFBQSxlQUNuQixDQUFDLFNBQVM7QUFDakIsV0FBSyxrQkFBa0IsS0FBSyxnQkFBZ0IsT0FBTyxPQUFLLE1BQU07QUFBQTtBQUFBO0FBQUEsRUFNOUQsa0JBQWtCO0FBMW1COUI7QUE0bUJRLFVBQU0sV0FBVyxpQkFBSyxtQkFBTCxtQkFBcUIsZUFBckIsbUJBQWlDO0FBQ2xELFFBQUksQ0FBQyxVQUFVO0FBQ1gsVUFBSSx3QkFBTztBQUNYO0FBQUE7QUFHSixVQUFNLGNBQWMsS0FBSyx1QkFBdUIsS0FBSyxPQUFPLFNBQVM7QUFDckUsUUFBSSxDQUFDLGFBQWE7QUFDZCxVQUFJLHdCQUFPO0FBQ1g7QUFBQTtBQUdKLFNBQUssU0FBUyxVQUFVLGFBQWEsS0FBSyxvQkFBb0IsS0FBSztBQUNuRSxTQUFLO0FBQUE7QUFBQSxFQUlELHFCQUFxQixPQUFlO0FBQ3hDLFFBQUksQ0FBQyxTQUFTLE1BQU0sV0FBVyxJQUFJO0FBQy9CLFdBQUssaUJBQWlCLE1BQU0sVUFBVTtBQUV0QyxXQUFLLGlCQUFpQjtBQUN0QixXQUFLLGVBQWU7QUFDcEI7QUFBQTtBQUdKLFVBQU0sUUFBUSxNQUFNLE1BQU07QUFDMUIsUUFBSSxDQUFDLE9BQU87QUFDUixXQUFLLGlCQUFpQixNQUFNLFVBQVU7QUFDdEMsV0FBSyxpQkFBaUIsY0FBYztBQUNwQztBQUFBO0FBRUosU0FBSyxpQkFBaUIsTUFBTSxVQUFVO0FBQ3RDLFVBQU0sQ0FBQyxFQUFFLE1BQU0sV0FBVztBQUMxQixVQUFNLFdBQVcsS0FBSztBQUN0QixVQUFNLGFBQWEsU0FBUztBQUU1QixVQUFNLFFBQVEsS0FBSyxHQUFHO0FBQ3RCLFVBQU0sWUFBWSxNQUFNLEtBQUssT0FBSyxFQUFFLGtCQUFrQixTQUFTO0FBQy9ELFFBQUksQ0FBQyxXQUFXO0FBQ1osV0FBSyxpQkFBaUIsTUFBTSxVQUFVO0FBQ3RDLFdBQUssaUJBQWlCLGNBQWM7QUFDcEM7QUFBQTtBQUdKLFNBQUssZUFBZTtBQUNwQixTQUFLLHVCQUF1QjtBQUFBO0FBQUE7OztBQzFwQnBDLHVCQUEwRTtBQUMxRSxvQkFBbUM7QUEyQjVCLElBQU0sbUJBQXNDO0FBQUEsRUFDL0Msb0JBQW9CO0FBQUEsRUFDcEIsWUFBWTtBQUFBLEVBQ1oscUJBQXFCO0FBQUEsRUFDckIsY0FBYztBQUFBLEVBQ2QsaUJBQWlCO0FBQUEsRUFDakIsV0FBVztBQUFBLElBQ1AsU0FBUztBQUFBLElBQ1QsU0FBUztBQUFBLElBQ1QsU0FBUztBQUFBLElBQ1QsVUFBVTtBQUFBLElBQ1YsUUFBUTtBQUFBO0FBQUEsRUFFWix3QkFBd0I7QUFBQSxFQUN4Qix3QkFBd0IsQ0FBQyxRQUFRLFdBQVcsU0FBUyxlQUFlLFFBQVEsYUFBYSxZQUFZO0FBQUEsRUFDckcsMEJBQTBCO0FBQUEsRUFDMUIsdUJBQXVCO0FBQUEsRUFDdkIsb0JBQW9CO0FBQUEsRUFDcEIsMkJBQTJCO0FBQUEsRUFDM0IsbUJBQW1CO0FBQUEsRUFDbkIsaUJBQWlCO0FBQUEsRUFDakIsY0FBYztBQUFBO0FBSWxCLElBQU0seUJBQXlCO0FBQUEsRUFDM0IsT0FBTyxFQUFFLE1BQU0sb0NBQW9DLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDN0UsT0FBTyxFQUFFLE1BQU0sc0JBQXNCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDL0QsT0FBTyxFQUFFLE1BQU0sdUJBQXVCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDaEUsT0FBTyxFQUFFLE1BQU0sc0NBQXVDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDaEYsT0FBTyxFQUFFLE1BQU0sc0NBQXNDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDL0UsUUFBUSxFQUFFLE1BQU0sK0JBQStCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDekUsV0FBVyxFQUFFLE1BQU0saUJBQWlCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDOUQsV0FBVyxFQUFFLE1BQU0scUNBQXFDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDbEYsWUFBWSxFQUFFLE1BQU0sZ0NBQWdDLFVBQVUsT0FBTyxVQUFVO0FBQUEsRUFDL0UsT0FBTyxFQUFFLE1BQU0seUJBQXlCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDbEUsUUFBUSxFQUFFLE1BQU0sa0NBQWtDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDNUUsUUFBUSxFQUFFLE1BQU0sOEJBQThCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDeEUsVUFBVSxFQUFFLE1BQU0sbUNBQW1DLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDL0UsWUFBWSxFQUFFLE1BQU0sZ0RBQWlELFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDL0YsT0FBTyxFQUFFLE1BQU0sMEJBQTBCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDbkUsU0FBUyxFQUFFLE1BQU0sdUNBQXVDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDbEYsYUFBYSxFQUFFLE1BQU0sdUNBQXVDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDdEYsVUFBVSxFQUFFLE1BQU0seUJBQXNCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDbEUsZUFBZSxFQUFFLE1BQU0saUNBQWlDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDbEYsV0FBVyxFQUFFLE1BQU0saUJBQWlCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDOUQsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUMxRSxPQUFPLEVBQUUsTUFBTSxvRUFBb0UsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUM5RyxNQUFNLEVBQUUsTUFBTSwrQkFBK0IsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUN4RSxPQUFPLEVBQUUsTUFBTSwrQkFBK0IsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUN6RSxjQUFjLEVBQUUsTUFBTSwrQ0FBK0MsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUNoRyxlQUFlLEVBQUUsTUFBTSxtQkFBbUIsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUNwRSxrQkFBa0IsRUFBRSxNQUFNLDBDQUEwQyxVQUFVLE1BQU0sVUFBVTtBQUFBLEVBQzlGLGFBQWEsRUFBRSxNQUFNLHFDQUFxQyxVQUFVLE1BQU0sVUFBVTtBQUFBLEVBQ3BGLFdBQVcsRUFBRSxNQUFNLHdCQUF3QixVQUFVLE1BQU0sVUFBVTtBQUFBLEVBQ3JFLGNBQWMsRUFBRSxNQUFNLG1DQUFtQyxVQUFVLE1BQU0sVUFBVTtBQUFBLEVBQ25GLGtCQUFrQixFQUFFLE1BQU0sbUNBQW1DLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDdkYsY0FBYyxFQUFFLE1BQU0sa09BQThDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDOUYsUUFBUSxFQUFFLE1BQU0sNkNBQWdDLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDMUUsV0FBVyxFQUFFLE1BQU0sMkJBQTJCLFVBQVUsTUFBTSxVQUFVO0FBQUEsRUFDeEUsZ0JBQWdCLEVBQUUsTUFBTSxtQ0FBbUMsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUNyRixVQUFVLEVBQUUsTUFBTSxzQkFBc0IsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUNuRSxXQUFXLEVBQUUsTUFBTSwwQkFBMEIsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUN4RSxhQUFhLEVBQUUsTUFBTSw2QkFBNkIsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUM1RSxPQUFPLEVBQUUsTUFBTSxrQkFBa0IsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUMzRCxjQUFjLEVBQUUsTUFBTSwwQkFBMEIsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUMxRSxVQUFVLEVBQUUsTUFBTSwwQ0FBMEMsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUN2RixlQUFlLEVBQUUsTUFBTSw4REFBMEMsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUMzRixjQUFjLEVBQUUsTUFBTSxnRUFBNEMsVUFBVSxNQUFNLFVBQVU7QUFBQSxFQUM1RixXQUFXLEVBQUUsTUFBTSwrQkFBK0IsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUM3RSxlQUFlLEVBQUUsTUFBTSxxQ0FBcUMsVUFBVSxPQUFPLFVBQVU7QUFBQSxFQUN2RixXQUFXLEVBQUUsTUFBTSw2Q0FBNkMsVUFBVSxPQUFPLFVBQVU7QUFBQTtBQUd4Rix3Q0FBa0Msa0NBQWlCO0FBQUEsRUFNdEQsWUFBWSxLQUFVLFFBQXlCO0FBQzNDLFVBQU0sS0FBSztBQUxQLHNCQUFxQjtBQUNyQix1QkFBNkI7QUFDN0IsdUJBQXNCO0FBSTFCLFNBQUssU0FBUztBQUFBO0FBQUEsRUFHbEIsVUFBZ0I7QUFDWixVQUFNLEVBQUUsZ0JBQWdCO0FBQ3hCLGdCQUFZO0FBRVosZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTTtBQUduQyxnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBR25DLFFBQUkseUJBQVEsYUFDUCxRQUFRLHVCQUNSLFFBQVEsNENBQ1IsWUFBWSxjQUFZO0FBQ3JCLFlBQU0sZUFBZSxLQUFLLE9BQU8sR0FBRztBQUNwQyxZQUFNLHFCQUE2QztBQUVuRCxtQkFBYSxRQUFRLFdBQVM7QUFDMUIsMkJBQW1CLE1BQU0sZ0JBQWdCLEdBQUcsTUFBTSxTQUFTLE1BQU07QUFBQTtBQUdyRSxlQUNLLFdBQVcsb0JBQ1gsU0FBUyxLQUFLLE9BQU8sU0FBUyxvQkFDOUIsU0FBUyxPQUFPLFVBQVU7QUFDdkIsYUFBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzFDLGNBQU0sS0FBSyxPQUFPO0FBQUE7QUFBQTtBQUtsQyxRQUFJLHlCQUFRLGFBQ1AsUUFBUSx1QkFDUixRQUFRLHVDQUNSLFlBQVksY0FBWSxTQUNwQixVQUFVLFFBQVEsbUJBQ2xCLFVBQVUsUUFBUSxxQkFDbEIsVUFBVSxhQUFhLGNBQ3ZCLFNBQVMsS0FBSyxPQUFPLFNBQVMsWUFDOUIsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxPQUFPLFNBQVMsYUFBYTtBQUNsQyxZQUFNLEtBQUssT0FBTztBQUFBO0FBSTlCLFFBQUkseUJBQVEsYUFDUCxRQUFRLGlDQUNSLFFBQVEsbURBQ1IsVUFBVSxZQUFVLE9BQ2hCLFNBQVMsS0FBSyxPQUFPLFNBQVMscUJBQzlCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLHNCQUFzQjtBQUMzQyxZQUFNLEtBQUssT0FBTztBQUFBO0FBRzlCLFFBQUkseUJBQVEsYUFDUCxRQUFRLDJCQUNSLFFBQVEsMERBQ1IsVUFBVSxZQUFVLE9BQ2hCLFNBQVMsS0FBSyxPQUFPLFNBQVMsY0FDOUIsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxPQUFPLFNBQVMsZUFBZTtBQUNwQyxZQUFNLEtBQUssT0FBTztBQUFBO0FBSTlCLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFHbkMsUUFBSSx5QkFBUSxhQUNQLFFBQVEsb0JBQ1IsUUFBUSxpREFDUixlQUFlLGlCQUFlLFlBQzFCLFNBQVMsS0FBSyxPQUFPLFNBQVMsMEJBQzlCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLDJCQUEyQjtBQUNoRCxZQUFNLEtBQUssT0FBTztBQUFBO0FBSTlCLFFBQUkseUJBQVEsYUFDUCxRQUFRLGlCQUNSLFFBQVEsbURBQ1IsWUFBWSxjQUFZLFNBQ3BCLFVBQVUsUUFBUSxjQUNsQixVQUFVLFVBQVUsc0JBQ3BCLFVBQVUsWUFBWSw0QkFDdEIsU0FBUyxLQUFLLE9BQU8sU0FBUyx1QkFDOUIsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxPQUFPLFNBQVMsd0JBQXdCO0FBQzdDLFlBQU0sS0FBSyxPQUFPO0FBQUE7QUFJOUIsUUFBSSx5QkFBUSxhQUNQLFFBQVEsY0FDUixRQUFRLDRDQUNSLGVBQWUsaUJBQWUsWUFDMUIsU0FBUyxLQUFLLE9BQU8sU0FBUyxvQkFDOUIsU0FBUyxPQUFPLFVBQVU7QUFDdkIsV0FBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzFDLFlBQU0sS0FBSyxPQUFPO0FBQUE7QUFJOUIsUUFBSSx5QkFBUSxhQUNQLFFBQVEsc0JBQ1IsUUFBUSwyQ0FDUixlQUFlLGlCQUFlLFlBQzFCLFNBQVMsS0FBSyxPQUFPLFNBQVMsMkJBQzlCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLDRCQUE0QjtBQUNqRCxZQUFNLEtBQUssT0FBTztBQUFBO0FBSTlCLFFBQUkseUJBQVEsYUFDUCxRQUFRLHVCQUNSLFFBQVEsd0RBQ1IsUUFBUSxVQUFRLEtBQ1osZUFBZSxTQUNmLFNBQVMsS0FBSyxPQUFPLFNBQVMsbUJBQzlCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLG9CQUFvQjtBQUN6QyxZQUFNLEtBQUssT0FBTztBQUFBO0FBSTlCLFVBQU0sbUJBQW1CLFlBQVk7QUFDckMscUJBQWlCLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFDeEMscUJBQWlCLFNBQVMsS0FBSztBQUFBLE1BQzNCLE1BQU07QUFBQTtBQUlWLFVBQU0sZ0JBQWdCLGlCQUFpQixVQUFVLEVBQUUsS0FBSztBQUN4RCxrQkFBYyxTQUFTLEtBQUs7QUFBQSxNQUN4QixNQUFNO0FBQUEsTUFDTixLQUFLO0FBQUE7QUFHVCxVQUFNLFdBQVc7QUFBQSxNQUNiO0FBQUEsUUFDSSxPQUFPO0FBQUEsUUFDUCxNQUFNLFNBQVMsS0FBSyxPQUFPLFNBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUV4QztBQUFBLFFBQ0ksT0FBTztBQUFBLFFBQ1AsTUFBTSxTQUFTLEtBQUssT0FBTyxTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFFeEM7QUFBQSxRQUNJLE9BQU87QUFBQSxRQUNQLE1BQU0sU0FBUyxLQUFLLE9BQU8sU0FBUztBQUFBO0FBQUE7QUFBQTtBQUFBLE1BRXhDO0FBQUEsUUFDSSxPQUFPO0FBQUEsUUFDUCxNQUFNLFNBQVMsS0FBSyxPQUFPLFNBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUV4QztBQUFBLFFBQ0ksT0FBTztBQUFBLFFBQ1AsTUFBTSxTQUFTLEtBQUssT0FBTyxTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJNUMsZUFBVyxNQUFNLFVBQVU7QUFDdkIsWUFBTSxhQUFhLGlCQUFpQixVQUFVLEVBQUUsS0FBSztBQUNyRCxpQkFBVyxTQUFTLE9BQU8sRUFBRSxNQUFNLEdBQUcsT0FBTyxLQUFLO0FBQ2xELFlBQU0sWUFBWSxXQUFXLFNBQVMsT0FBTyxFQUFFLEtBQUs7QUFDcEQsZ0JBQVUsU0FBUyxRQUFRLEVBQUUsTUFBTSxHQUFHO0FBQUE7QUFJMUMsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTTtBQUNuQyxTQUFLLHVCQUF1QjtBQUc1QixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBRW5DLFFBQUkseUJBQVEsYUFDUCxRQUFRLDRCQUNSLFFBQVEsMkRBQ1IsVUFBVSxZQUFVLE9BQ2hCLFNBQVMsS0FBSyxPQUFPLFNBQVMsd0JBQzlCLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLFdBQUssT0FBTyxTQUFTLHlCQUF5QjtBQUM5QyxZQUFNLEtBQUssT0FBTztBQUFBO0FBRzlCLFFBQUksS0FBSyxPQUFPLFNBQVMsd0JBQXdCO0FBQzdDLFlBQU0sb0JBQW9CLFlBQVk7QUFDdEMsd0JBQWtCLFNBQVMsS0FBSztBQUFBLFFBQzVCLE1BQU07QUFBQTtBQUlWLFlBQU0saUJBQWlCLGtCQUFrQjtBQUN6QyxxQkFBZSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBQ3RDLHFCQUFlLFNBQVMsS0FBSztBQUFBLFFBQ3pCLE1BQU07QUFBQTtBQUdWLFlBQU0sZUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNckIsWUFBTSxZQUFZLGVBQWUsU0FBUztBQUMxQyxnQkFBVSxTQUFTLFFBQVEsRUFBRSxNQUFNO0FBQUE7QUFJdkMsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTTtBQUduQyxVQUFNLGdCQUFnQixZQUFZLFVBQVUsRUFBRSxLQUFLO0FBQ25ELGtCQUFjLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFFckMsVUFBTSxhQUFhLGNBQWMsU0FBUztBQUMxQyxlQUFXLFlBQVk7QUFFdkIsUUFBSSx5QkFBUSxlQUNQLFFBQVEsc0JBQ1IsUUFBUSxtREFDUixVQUFVLFlBQVUsT0FDaEIsY0FBYyxjQUNkLFNBQVMsV0FDVCxRQUFRLE1BQU0sS0FBSyxrQkFDdkIsVUFBVSxZQUFVLE9BQ2hCLGNBQWMsaUJBQ2QsUUFBUSxNQUFNLEtBQUs7QUFHNUIsU0FBSywyQkFBMkI7QUFBQTtBQUFBLEVBTTVCLDJCQUEyQixhQUEwQjtBQUV6RCxVQUFNLGdCQUFnQixZQUFZLFVBQVUsRUFBRSxLQUFLO0FBQ25ELGtCQUFjLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFHckMsVUFBTSxrQkFBa0IsWUFBWSxVQUFVLEVBQUUsS0FBSztBQUNyRCxVQUFNLGNBQWMsZ0JBQWdCLFNBQVMsU0FBUztBQUFBLE1BQ2xELE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLEtBQUs7QUFBQTtBQUlULFVBQU0saUJBQWlCLFlBQVksVUFBVSxFQUFFLEtBQUs7QUFHcEQsUUFBSSxZQUErRDtBQUNuRSxRQUFJLFVBQVU7QUFFZCxVQUFNLGNBQWMsTUFBTTtBQUN0QixxQkFBZTtBQUNmLFlBQU0sUUFBUSxlQUFlLFNBQVMsU0FBUyxFQUFFLEtBQUs7QUFDdEQsWUFBTSxRQUFRLE1BQU0sU0FBUztBQUM3QixZQUFNLFlBQVksTUFBTSxTQUFTO0FBR2pDLFlBQU0sdUJBQXVCLENBQUMsTUFBYyxVQUE0QjtBQUNwRSxjQUFNLEtBQUssVUFBVSxTQUFTO0FBQzlCLFdBQUcsV0FBVyxFQUFFO0FBQ2hCLFlBQUksY0FBYyxPQUFPO0FBQ3JCLGFBQUcsV0FBVyxFQUFFLE1BQU0sVUFBVSxZQUFPO0FBQUE7QUFFM0MsV0FBRyxVQUFVLE1BQU07QUFDZixjQUFJLGNBQWMsT0FBTztBQUNyQixzQkFBVSxDQUFDO0FBQUEsaUJBQ1I7QUFDSCx3QkFBWTtBQUNaLHNCQUFVO0FBQUE7QUFFZDtBQUFBO0FBQUE7QUFJUiwyQkFBcUIsb0JBQW9CO0FBQ3pDLDJCQUFxQixnQkFBZ0I7QUFDckMsMkJBQXFCLFlBQVk7QUFDakMsMkJBQXFCLFlBQVk7QUFDakMsZ0JBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTTtBQUVqQyxZQUFNLFFBQVEsTUFBTSxTQUFTO0FBRzdCLFVBQUksZUFBZSxLQUFLLE9BQU8sR0FBRyxrQkFDN0IsSUFBSSxPQUFNO0FBQUEsV0FDSjtBQUFBLFdBQ0EsdUJBQXVCLEVBQUU7QUFBQSxRQUM1QixXQUFXO0FBQUE7QUFJbkIsWUFBTSxhQUFhLFlBQVksTUFBTTtBQUNyQyxVQUFJLFlBQVk7QUFDWix1QkFBZSxhQUFhLE9BQU8sT0FBRTtBQS9ackQ7QUFnYW9CLG1CQUFFLEtBQUssY0FBYyxTQUFTLGVBQzlCLEVBQUUsYUFBYSxjQUFjLFNBQVMsZUFDdEMsU0FBRSxhQUFGLG1CQUFZLGNBQWMsU0FBUyxnQkFDbkMsU0FBRSxhQUFGLG1CQUFZLGNBQWMsU0FBUztBQUFBO0FBQUE7QUFLM0MsbUJBQWEsS0FBSyxDQUFDLEdBQUcsTUFBTTtBQUN4QixjQUFNLE9BQU8sRUFBRSxjQUFjO0FBQzdCLGNBQU0sT0FBTyxFQUFFLGNBQWM7QUFDN0IsZUFBUSxXQUFVLElBQUksTUFBTSxLQUFLLGNBQWM7QUFBQTtBQUduRCxVQUFJLGFBQWEsV0FBVyxHQUFHO0FBQzNCLGNBQU0sV0FBVyxNQUFNLFNBQVM7QUFDaEMsaUJBQVMsU0FBUyxNQUFNO0FBQUEsVUFDcEIsTUFBTTtBQUFBLFVBQ04sTUFBTSxFQUFFLFNBQVM7QUFBQTtBQUVyQjtBQUFBO0FBR0osbUJBQWEsUUFBUSxXQUFTO0FBQzFCLGNBQU0sTUFBTSxNQUFNLFNBQVM7QUFFM0IsWUFBSSxLQUFLLGdCQUFnQixNQUFNLGNBQWM7QUFFekMsZ0JBQU0sV0FBVyxJQUFJLFNBQVM7QUFDOUIsZ0JBQU0sWUFBWSxTQUFTLFNBQVMsU0FBUztBQUFBLFlBQ3pDLE1BQU07QUFBQSxZQUNOLE9BQU8sTUFBTTtBQUFBLFlBQ2IsS0FBSztBQUFBLFlBQ0wsYUFBYTtBQUFBO0FBR2pCLGdCQUFNLFdBQVcsSUFBSSxTQUFTO0FBQzlCLGdCQUFNLFlBQVksU0FBUyxTQUFTLFNBQVM7QUFBQSxZQUN6QyxNQUFNO0FBQUEsWUFDTixPQUFPLE1BQU07QUFBQSxZQUNiLEtBQUs7QUFBQSxZQUNMLGFBQWE7QUFBQTtBQUdqQixjQUFJLFNBQVMsTUFBTSxFQUFFLE1BQU0sTUFBTSxZQUFZO0FBQzdDLGNBQUksU0FBUyxNQUFNLEVBQUUsTUFBTSxNQUFNLFlBQVk7QUFFN0MsZ0JBQU0sYUFBYSxJQUFJLFNBQVMsTUFBTSxFQUFFLEtBQUs7QUFDN0MscUJBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxRQUFRLEtBQUssYUFBYSxVQUFVLFlBQVk7QUFoZDFHO0FBaWR3QixrQkFBTSxVQUFVLFVBQVUsTUFBTTtBQUNoQyxrQkFBTSxVQUFVLFVBQVUsTUFBTSxPQUFPO0FBRXZDLGdCQUFJLENBQUMsV0FBVyxDQUFDLFNBQVM7QUFDdEIsa0JBQUksd0JBQU87QUFDWDtBQUFBO0FBSUosZ0JBQUksWUFBWSxNQUFNLGdCQUNsQixLQUFLLE9BQU8sR0FBRyxrQkFBa0IsS0FBSyxPQUFLLEVBQUUsaUJBQWlCLFVBQVU7QUFDeEUsa0JBQUksd0JBQU87QUFDWDtBQUFBO0FBSUosa0JBQU0sVUFBVSxNQUFNO0FBQ3RCLGtCQUFNLE9BQU87QUFDYixrQkFBTSxlQUFlO0FBR3JCLGdCQUFJLEtBQUssT0FBTyxTQUFTLHVCQUF1QixTQUFTO0FBQ3JELG1CQUFLLE9BQU8sU0FBUyxxQkFBcUI7QUFDMUMsb0JBQU0sS0FBSyxPQUFPO0FBQUE7QUFHdEIsa0JBQU0sa0JBQUssT0FBTyxJQUFHLGFBQWY7QUFDTixpQkFBSyxjQUFjO0FBQ25CO0FBQ0EsZ0JBQUksd0JBQU87QUFBQTtBQUdmLHFCQUFXLFNBQVMsVUFBVSxFQUFFLE1BQU0sWUFBWSxVQUFVLE1BQU07QUFDOUQsaUJBQUssY0FBYztBQUNuQjtBQUFBO0FBQUEsZUFFRDtBQUVILGNBQUksU0FBUyxNQUFNLEVBQUUsTUFBTSxNQUFNO0FBQ2pDLGNBQUksU0FBUyxNQUFNLEVBQUUsTUFBTSxNQUFNO0FBQ2pDLGNBQUksU0FBUyxNQUFNLEVBQUUsTUFBTSxNQUFNLFlBQVk7QUFDN0MsY0FBSSxTQUFTLE1BQU0sRUFBRSxNQUFNLE1BQU0sWUFBWTtBQUU3QyxnQkFBTSxhQUFhLElBQUksU0FBUyxNQUFNLEVBQUUsS0FBSztBQUU3QyxjQUFJLE1BQU0saUJBQWlCLE9BQU87QUFDOUIsdUJBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxVQUFVLFVBQVUsTUFBTTtBQUU1RCxvQkFBTSxjQUFjLEtBQUssT0FBTyxHQUFHLGtCQUFrQixLQUFLLE9BQUssRUFBRSxpQkFBaUIsTUFBTTtBQUN4RixrQkFBSSxhQUFhO0FBQ2Isb0JBQUkscUJBQ0EsS0FBSyxLQUNMLFlBQVksTUFDWixZQUFZLGNBQ1osWUFBWSxVQUNaLFlBQVksVUFDWixZQUFZLGlCQUNaLE9BQU8sTUFBTSxjQUFjLFVBQVUsVUFBVSxvQkFBb0I7QUFDL0Qsc0JBQUk7QUFDQSwwQkFBTSxLQUFLLE9BQU8sR0FBRyxrQkFDakIsWUFBWSxJQUNaLE1BQ0EsY0FDQSxVQUNBLFVBQ0E7QUFFSix3QkFBSSx3QkFBTztBQUNYO0FBQUEsMkJBQ0ssT0FBUDtBQUNFLHdCQUFJLHdCQUFPLCtCQUErQixNQUFNO0FBQUE7QUFBQSxtQkFHeEQsTUFDRjtBQUFBO0FBQUE7QUFHVix1QkFBVyxTQUFTLFVBQVU7QUFBQSxjQUMxQixNQUFNO0FBQUEsY0FDTixLQUFLO0FBQUEsZUFDTixVQUFVLE1BQU07QUFDZixtQkFBSyx5QkFBeUIsTUFBTSxjQUFjLE1BQU07QUFBQTtBQUFBLGlCQUV6RDtBQUNILHVCQUFXLFNBQVMsUUFBUTtBQUFBLGNBQ3hCLE1BQU07QUFBQSxjQUNOLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUXpCLGdCQUFZLGlCQUFpQixTQUFTO0FBR3RDO0FBR0EsVUFBTSxNQUFNO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaUhaLFVBQU0sVUFBVSxTQUFTLEtBQUssY0FBYyw4QkFBOEIsU0FBUyxLQUFLLFNBQVMsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJO0FBQ3hILFlBQVEsY0FBYztBQUd0QixVQUFNLGFBQWE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBcUNuQixVQUFNLGlCQUFpQixTQUFTLEtBQUssY0FBYyxnQ0FBZ0MsU0FBUyxLQUFLLFNBQVMsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJO0FBQ2pJLG1CQUFlLGNBQWM7QUFBQTtBQUFBLFFBR25CLG1CQUFtQjtBQUM3QixVQUFNLFFBQVEsU0FBUyxjQUFjO0FBQ3JDLFVBQU0sT0FBTztBQUNiLFVBQU0sU0FBUztBQUNmLFVBQU0sV0FBVyxPQUFPLFVBQVU7QUF2dEIxQztBQXd0QlksWUFBTSxPQUFRLFlBQU0sT0FBNEIsVUFBbEMsbUJBQTBDO0FBQ3hELFVBQUksTUFBTTtBQUNOLGNBQU0sS0FBSyxrQkFBa0I7QUFBQTtBQUFBO0FBR3JDLFVBQU07QUFBQTtBQUFBLFFBR0ksa0JBQWtCLE1BQVk7QUFDeEMsUUFBSTtBQUNBLFVBQUksd0JBQU8sY0FBYyxLQUFLO0FBRTlCLFlBQU0sa0JBQWtCLEtBQUssS0FBSyxRQUFRLG1CQUFtQjtBQUM3RCxZQUFNLGVBQWUsZ0JBQWdCO0FBR3JDLFlBQU0sUUFBUSxJQUFJLHFCQUNkLEtBQUssS0FDTCxpQkFDQSxjQUNBLFdBQ0EsWUFDQSxJQUNBLE9BQU8sTUFBYyxNQUFjLFVBQWtCLFVBQWtCLG9CQUFzQztBQUN6RyxZQUFJO0FBRUEsZ0JBQU0sdUJBQXVCLEtBQUssT0FBTyxHQUFHO0FBQzVDLGNBQUkscUJBQXFCLEtBQUssT0FBSyxFQUFFLGlCQUFpQixPQUFPO0FBQ3pELGtCQUFNLElBQUksTUFBTSxlQUFlO0FBQUE7QUFJbkMsZ0JBQU0sZ0JBQWdCLE1BQU0sS0FBSyxPQUFPLEdBQUcsZUFBZSxNQUFNLE1BQU0sVUFBVSxVQUFVO0FBRzFGLGdCQUFNLGVBQWU7QUFBQSxZQUNqQixFQUFFLE1BQU0sUUFBUSxTQUFTLEdBQUcsT0FBTyxJQUFJLE1BQU07QUFBQSxZQUM3QyxFQUFFLE1BQU0sV0FBVyxTQUFTLEdBQUcsT0FBTyxHQUFHLE1BQU07QUFBQTtBQUduRCxnQkFBTSxjQUFjLGFBQWEsSUFBSSxXQUFVO0FBQUEsWUFDM0M7QUFBQSxZQUNBLE1BQU0sTUFBTTtBQUFBLFlBQ1osU0FBUyxNQUFNO0FBQUEsWUFDZixPQUFPLE1BQU07QUFBQSxZQUNiLE1BQU0sTUFBTTtBQUFBO0FBR2hCLGdCQUFNLEtBQUssT0FBTyxHQUFHLGVBQWU7QUFFcEMsY0FBSSx3QkFBTywwQ0FBMEMsS0FBSztBQUMxRCxlQUFLO0FBQUEsaUJBQ0EsT0FBUDtBQUNFLGtCQUFRLE1BQU0sd0JBQXdCO0FBQ3RDLGNBQUksd0JBQU8sb0JBQW9CLEtBQUssU0FBUyxNQUFNO0FBQUE7QUFBQSxTQUczRDtBQUVKLFlBQU07QUFBQSxhQUNELE9BQVA7QUFDRSxjQUFRLE1BQU0sd0JBQXdCO0FBQ3RDLFVBQUksd0JBQU8sb0JBQW9CLEtBQUssU0FBUyxNQUFNO0FBQUE7QUFBQTtBQUFBLEVBSW5ELGdCQUFnQjtBQUNwQixVQUFNLFFBQVEsU0FBUyxjQUFjO0FBQ3JDLFVBQU0sT0FBTztBQUNiLFVBQU0sU0FBUztBQUNmLFVBQU0sV0FBVyxPQUFPLFVBQVU7QUE5eEIxQztBQSt4QlksWUFBTSxPQUFRLFlBQU0sT0FBNEIsVUFBbEMsbUJBQTBDO0FBQ3hELFVBQUksTUFBTTtBQUNOLGNBQU0sS0FBSyxlQUFlO0FBQUE7QUFBQTtBQUdsQyxVQUFNO0FBQUE7QUFBQSxRQUdJLGVBQWUsTUFBWTtBQXZ5QjdDO0FBd3lCUSxRQUFJO0FBQ0EsVUFBSSx3QkFBTyxjQUFjLEtBQUs7QUFFOUIsWUFBTSxPQUFPLE1BQU0sS0FBSztBQUN4QixZQUFNLFNBQVMsTUFBTSxzQ0FBbUI7QUFFeEMsVUFBSSxDQUFDLE9BQU8sWUFBWSxDQUFDLE9BQU8sU0FBUyxXQUFXO0FBQ2hELGNBQU0sSUFBSSxNQUFNO0FBQUE7QUFJcEIsWUFBTSxZQUFZLGNBQU8sU0FBUyxNQUFoQixtQkFBbUIsY0FBYSxLQUFLLEtBQUssUUFBUSxRQUFRO0FBQzVFLFlBQU0sa0JBQWtCO0FBQ3hCLFlBQU0sZUFBZSxVQUFVO0FBRy9CLFlBQU0sUUFBUSxJQUFJLHFCQUNkLEtBQUssS0FDTCxpQkFDQSxjQUNBLFdBQ0EsWUFDQSxJQUNBLE9BQU8sTUFBYyxNQUFjLFVBQWtCLFVBQWtCLG9CQUFzQztBQUN6RyxZQUFJO0FBRUEsZ0JBQU0sdUJBQXVCLEtBQUssT0FBTyxHQUFHO0FBQzVDLGNBQUkscUJBQXFCLEtBQUssT0FBSyxFQUFFLGlCQUFpQixPQUFPO0FBQ3pELGtCQUFNLGVBQWUsSUFBSSxhQUNyQixLQUFLLEtBQ0wsZ0JBQWdCLG9DQUNoQixPQUFPLGNBQWM7QUFDakIsa0JBQUksV0FBVztBQUNYLHNCQUFNLEtBQUssT0FBTyxHQUFHLGtCQUFrQjtBQUN2QyxzQkFBTSxLQUFLLGVBQWUsUUFBUSxNQUFNLE1BQU0sS0FBSyxNQUFNLFVBQVUsVUFBVTtBQUFBLHFCQUMxRTtBQUNILG9CQUFJLHdCQUFPO0FBQUE7QUFFZixtQkFBSztBQUFBO0FBR2IseUJBQWE7QUFDYjtBQUFBO0FBR0osZ0JBQU0sS0FBSyxlQUFlLFFBQVEsTUFBTSxNQUFNLEtBQUssTUFBTSxVQUFVLFVBQVU7QUFDN0UsZUFBSztBQUFBLGlCQUNBLE9BQVA7QUFDRSxrQkFBUSxNQUFNLHFCQUFxQjtBQUNuQyxjQUFJLHdCQUFPLG9CQUFvQixLQUFLLFNBQVMsTUFBTTtBQUFBO0FBQUEsU0FHM0Q7QUFFSixZQUFNO0FBQUEsYUFDRCxPQUFQO0FBQ0UsY0FBUSxNQUFNLHFCQUFxQjtBQUNuQyxVQUFJLHdCQUFPLG9CQUFvQixLQUFLLFNBQVMsTUFBTTtBQUFBO0FBQUE7QUFBQSxRQUk3QyxlQUFlLFFBQWEsaUJBQXlCLGNBQXNCLFVBQWtCLFdBQW1CLFdBQVcsV0FBbUIsWUFBWSxrQkFBb0MsSUFBSTtBQXIyQnBOO0FBczJCUSxRQUFJO0FBQ0EsWUFBTSxRQUFRLE9BQU8sU0FBUztBQUM5QixVQUFJLENBQUMsU0FBUyxNQUFNLFdBQVcsR0FBRztBQUM5QixZQUFJLHdCQUFPO0FBQ1gsZ0JBQVEsTUFBTSwwQkFBMEI7QUFDeEM7QUFBQTtBQUdKLFVBQUksd0JBQU8sc0JBQXNCO0FBRWpDLFlBQU0sZ0JBQWdCLE1BQU0sS0FBSyxPQUFPLEdBQUcsZUFBZSxpQkFBaUIsY0FBYyxVQUFVLFVBQVU7QUFDN0csVUFBSSxnQkFBZ0I7QUFDcEIsVUFBSSxZQUFZO0FBQ2hCLFlBQU0sY0FBMEc7QUFFaEgsaUJBQVcsUUFBUSxPQUFPO0FBQ3RCLFlBQUksQ0FBQyxRQUFRLENBQUMsS0FBSztBQUFHO0FBQ3RCLGNBQU0sV0FBVyxLQUFLLEVBQUUsU0FBUyxLQUFLLEVBQUUsU0FBUztBQUNqRCxjQUFNLFdBQVcsTUFBTSxRQUFRLEtBQUssV0FBVyxLQUFLLFVBQVUsQ0FBQyxLQUFLO0FBRXBFLG1CQUFXLFdBQVcsVUFBVTtBQUM1QixjQUFJLENBQUMsV0FBVyxDQUFDLFFBQVE7QUFBRztBQUM1QixnQkFBTSxhQUFhLFNBQVMsUUFBUSxFQUFFO0FBQ3RDLGNBQUksTUFBTTtBQUFhO0FBQ3ZCLGdCQUFNLFNBQVMsTUFBTSxRQUFRLFFBQVEsUUFBUSxRQUFRLE9BQVEsUUFBUSxPQUFPLENBQUMsUUFBUSxRQUFRO0FBRTdGLHFCQUFXLFNBQVMsUUFBUTtBQUN4QixnQkFBSSxDQUFDO0FBQU87QUFDWixnQkFBSSxZQUFZO0FBQ2hCLGdCQUFJLFdBQVc7QUFFZixnQkFBSSxPQUFPLFVBQVUsVUFBVTtBQUMzQiwwQkFBWTtBQUFBLHVCQUNMLE1BQU0sR0FBRztBQUNoQiwwQkFBWSxNQUFNO0FBQUEsdUJBQ1gsTUFBTSxRQUFRLFFBQVE7QUFDN0IsMEJBQVksTUFBTSxLQUFLO0FBQUE7QUFHM0IsZ0JBQUksTUFBTSxLQUFLLE1BQU0sRUFBRSxTQUFTO0FBQzVCLHlCQUFXLFNBQVMsTUFBTSxFQUFFO0FBQUE7QUFHaEMsZ0JBQUksYUFBYSxVQUFVLFFBQVE7QUFDL0IsMEJBQVksS0FBSztBQUFBLGdCQUNiO0FBQUEsZ0JBQ0EsTUFBTTtBQUFBLGdCQUNOLFNBQVM7QUFBQSxnQkFDVCxPQUFPO0FBQUEsZ0JBQ1AsTUFBTSxVQUFVO0FBQUE7QUFFcEI7QUFBQTtBQUFBO0FBQUE7QUFJWjtBQUVBLFlBQUksWUFBWSxPQUFPLEdBQUc7QUFDdEIsY0FBSSx3QkFBTyxhQUFhLG9CQUFvQjtBQUFBO0FBQUE7QUFHcEQsY0FBUSxJQUFJLHNCQUFzQixxQ0FBcUM7QUFFdkUsVUFBSSxZQUFZLFNBQVMsR0FBRztBQUN4QixZQUFJLHdCQUFPLFVBQVU7QUFDckIsY0FBTSxLQUFLLE9BQU8sR0FBRyxlQUFlO0FBRXBDLGNBQU0sb0JBQW9CLEtBQUssT0FBTyxHQUFHLHdCQUF3QjtBQUNqRSxjQUFNLG1CQUFtQixLQUFLLE9BQU8sR0FBRyxvQkFBb0I7QUFDNUQsY0FBTSxZQUFZLGtCQUFLLE9BQU8sR0FBRyxZQUFmLG1CQUF3QixXQUF4QixtQkFBZ0MsT0FBTyxPQUFLLEVBQUUsbUJBQW1CLG1CQUFrQjtBQUNyRyxnQkFBUSxJQUFJLHFCQUFxQixVQUFVLHFCQUFxQixpQ0FBaUM7QUFDakcsWUFBSSxxQkFBcUIsb0JBQW9CLFVBQVUsU0FBUyxHQUFHO0FBQy9ELGNBQUksd0JBQU8sZ0NBQTJCLG9CQUFvQixzQkFBc0IsaUJBQWlCLDBCQUEwQixpQkFBaUIsTUFBTTtBQUNsSixrQkFBUSxJQUFJLDJCQUEyQixvQkFBb0IsbUJBQW1CLGlCQUFpQiwwQkFBMEIsaUJBQWlCLE1BQU07QUFBQSxlQUM3STtBQUNILGNBQUksd0JBQU8sNkNBQXdDO0FBQ25ELGtCQUFRLE1BQU0sa0RBQWtEO0FBQ2hFLGdCQUFNLEtBQUssT0FBTyxHQUFHLGtCQUFrQjtBQUFBO0FBQUEsYUFFeEM7QUFDSCxZQUFJLHdCQUFPO0FBQ1gsZ0JBQVEsTUFBTSx1Q0FBdUM7QUFDckQsY0FBTSxLQUFLLE9BQU8sR0FBRyxrQkFBa0I7QUFBQTtBQUFBLGFBRXRDLE9BQVA7QUFDRSxjQUFRLE1BQU0scUJBQXFCO0FBQ25DLFVBQUksd0JBQU8sMkJBQXNCLGFBQWEsTUFBTTtBQUVwRCxVQUFJO0FBQ0EsY0FBTSxLQUFLLE9BQU8sR0FBRyxrQkFBa0I7QUFBQSxlQUNsQyxjQUFQO0FBQ0UsZ0JBQVEsTUFBTSx5Q0FBeUM7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQUtyRCxrQkFBa0IsY0FBc0I7QUFDbEQsUUFBSSxpQkFBaUIsT0FBTztBQUN4QixVQUFJLHdCQUFPO0FBQ1g7QUFBQTtBQUdKLFVBQU0sVUFBVSxNQUFNLEtBQUssT0FBTyxHQUFHLGtCQUFrQjtBQUN2RCxRQUFJLFNBQVM7QUFDVCxVQUFJLHdCQUFPLEdBQUc7QUFHZCxVQUFJLEtBQUssT0FBTyxTQUFTLHVCQUF1QixjQUFjO0FBQzFELGFBQUssT0FBTyxTQUFTLHFCQUFxQjtBQUMxQyxjQUFNLEtBQUssT0FBTztBQUFBO0FBR3RCLFdBQUs7QUFBQSxXQUNGO0FBQ0gsVUFBSSx3QkFBTyxvQkFBb0I7QUFBQTtBQUFBO0FBQUEsRUFJL0IseUJBQXlCLGNBQXNCLE1BQWM7QUFDakUsVUFBTSxRQUFRLElBQUksYUFBYSxLQUFLLEtBQUssdUJBQXVCLFVBQVUsa0JBQWtCLE9BQU8sY0FBYztBQUM3RyxVQUFJLFdBQVc7QUFDWCxjQUFNLEtBQUssa0JBQWtCO0FBQUE7QUFFakMsV0FBSztBQUFBO0FBRVQsVUFBTTtBQUFBO0FBQUEsRUFJRix1QkFBdUIsYUFBMEI7QUFDckQsVUFBTSxZQUFZLEtBQUssT0FBTyxTQUFTO0FBR3ZDLFVBQU0sa0JBQWtCLFlBQVksVUFBVSxFQUFFLEtBQUs7QUFDckQsVUFBTSxjQUFjLGdCQUFnQixTQUFTLFNBQVM7QUFBQSxNQUNsRCxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixLQUFLO0FBQUE7QUFJVCxVQUFNLFFBQVEsWUFBWSxTQUFTLFNBQVMsRUFBRSxLQUFLO0FBQ25ELFVBQU0sUUFBUSxNQUFNLFNBQVM7QUFDN0IsVUFBTSxZQUFZLE1BQU0sU0FBUztBQUdqQyxRQUFJLFlBQWlDO0FBQ3JDLFFBQUksVUFBVTtBQUdkLFVBQU0sdUJBQXVCLENBQUMsTUFBYyxVQUErQjtBQUN2RSxZQUFNLEtBQUssVUFBVSxTQUFTLE1BQU0sRUFBRTtBQUN0QyxTQUFHLE1BQU0sU0FBUztBQUNsQixTQUFHLFVBQVUsTUFBTTtBQUNmLFlBQUksY0FBYyxPQUFPO0FBQ3JCLG9CQUFVLENBQUM7QUFBQSxlQUNSO0FBQ0gsc0JBQVk7QUFDWixvQkFBVTtBQUFBO0FBRWQ7QUFBQTtBQUFBO0FBSVIseUJBQXFCLFlBQVk7QUFDakMseUJBQXFCLGFBQWE7QUFDbEMsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBRWpDLFVBQU0sUUFBUSxNQUFNLFNBQVM7QUFFN0IsVUFBTSxrQkFBa0IsTUFBTTtBQUMxQixZQUFNO0FBQ04sVUFBSSxrQkFBa0IsT0FBTyxRQUFRO0FBR3JDLFlBQU0sYUFBYSxZQUFZLE1BQU07QUFDckMsVUFBSSxZQUFZO0FBQ1osMEJBQWtCLGdCQUFnQixPQUFPLENBQUMsQ0FBQyxLQUFLLFNBQzVDLElBQUksY0FBYyxTQUFTLGVBQzNCLElBQUksY0FBYyxTQUFTO0FBQUE7QUFLbkMsc0JBQWdCLEtBQUssQ0FBQyxDQUFDLE1BQU0sT0FBTyxDQUFDLE1BQU0sVUFBVTtBQUNqRCxjQUFNLE9BQU8sY0FBYyxRQUFRLE9BQU87QUFDMUMsY0FBTSxPQUFPLGNBQWMsUUFBUSxPQUFPO0FBQzFDLGVBQVEsV0FBVSxJQUFJLE1BQU0sS0FBSyxjQUFjO0FBQUE7QUFHbkQsc0JBQWdCLFFBQVEsQ0FBQyxDQUFDLEtBQUssZUFBZTtBQUMxQyxjQUFNLE1BQU0sTUFBTSxTQUFTO0FBRTNCLFlBQUssS0FBYSxnQkFBZ0IsS0FBSztBQUVuQyxnQkFBTSxVQUFVLElBQUksU0FBUztBQUM3QixnQkFBTSxXQUFXLFFBQVEsU0FBUyxTQUFTO0FBQUEsWUFDdkMsTUFBTTtBQUFBLFlBQ04sT0FBTztBQUFBLFlBQ1AsS0FBSztBQUFBLFlBQ0wsYUFBYTtBQUFBO0FBR2pCLGdCQUFNLFVBQVUsSUFBSSxTQUFTO0FBQzdCLGdCQUFNLFdBQVcsUUFBUSxTQUFTLFNBQVM7QUFBQSxZQUN2QyxNQUFNO0FBQUEsWUFDTixPQUFPO0FBQUEsWUFDUCxLQUFLO0FBQUEsWUFDTCxhQUFhO0FBQUE7QUFHakIsZ0JBQU0sYUFBYSxJQUFJLFNBQVM7QUFDaEMscUJBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxVQUFVLFVBQVUsWUFBWTtBQUNsRSxrQkFBTSxTQUFTLFNBQVMsTUFBTTtBQUM5QixrQkFBTSxTQUFTLFNBQVMsTUFBTTtBQUU5QixnQkFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRO0FBQ3BCLGtCQUFJLHdCQUFPO0FBQ1g7QUFBQTtBQUdKLGdCQUFJLFdBQVcsT0FBTyxVQUFVLFNBQVM7QUFDckMsa0JBQUksd0JBQU87QUFDWDtBQUFBO0FBR0osZ0JBQUksQ0FBQyxrQkFBa0IsS0FBSyxXQUFXLENBQUMseUJBQXlCLEtBQUssU0FBUztBQUMzRSxrQkFBSSx3QkFBTztBQUNYO0FBQUE7QUFJSixtQkFBTyxVQUFVO0FBQ2pCLHNCQUFVLFVBQVU7QUFDcEIsWUFBQyxLQUFhLGNBQWM7QUFDNUIsa0JBQU0sS0FBSyxPQUFPO0FBQ2xCO0FBQ0EsZ0JBQUksd0JBQU87QUFBQTtBQUdmLHFCQUFXLFNBQVMsVUFBVSxFQUFFLE1BQU0sWUFBWSxVQUFVLE1BQU07QUFDOUQsWUFBQyxLQUFhLGNBQWM7QUFDNUI7QUFBQTtBQUFBLGVBRUQ7QUFFSCxjQUFJLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFDM0IsY0FBSSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBQzNCLGdCQUFNLGFBQWEsSUFBSSxTQUFTO0FBRWhDLHFCQUFXLFNBQVMsVUFBVSxFQUFFLE1BQU0sVUFBVSxVQUFVLE1BQU07QUFDNUQsWUFBQyxLQUFhLGNBQWM7QUFDNUI7QUFBQTtBQUVKLHFCQUFXLFNBQVMsVUFBVTtBQUFBLFlBQzFCLE1BQU07QUFBQSxZQUNOLEtBQUs7QUFBQSxhQUNOLFVBQVUsTUFBTTtBQUNmLGtCQUFNLFFBQVEsSUFBSSxhQUFhLEtBQUssS0FBSyxvQkFBb0IsU0FBUyxPQUFPLGNBQWM7QUFDdkYsa0JBQUksV0FBVztBQUNYLHVCQUFPLFVBQVU7QUFDakIsc0JBQU0sS0FBSyxPQUFPO0FBQ2xCO0FBQUE7QUFBQTtBQUdSLGtCQUFNO0FBQUE7QUFBQTtBQUFBO0FBTWxCLFVBQUssS0FBYSxpQkFBaUI7QUFDL0IsY0FBTSxNQUFNLE1BQU0sU0FBUztBQUMzQixjQUFNLFdBQVcsSUFBSSxTQUFTLE1BQU0sU0FBUyxTQUFTO0FBQUEsVUFDbEQsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBO0FBRVQsY0FBTSxXQUFXLElBQUksU0FBUyxNQUFNLFNBQVMsU0FBUztBQUFBLFVBQ2xELE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQTtBQUVULGNBQU0sYUFBYSxJQUFJLFNBQVM7QUFDaEMsbUJBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFTLFVBQVUsWUFBWTtBQUNqRSxnQkFBTSxTQUFTLFNBQVMsTUFBTTtBQUM5QixnQkFBTSxTQUFTLFNBQVMsTUFBTTtBQUU5QixjQUFJLENBQUMsVUFBVSxDQUFDLFFBQVE7QUFDcEIsZ0JBQUksd0JBQU87QUFDWDtBQUFBO0FBR0osY0FBSSxVQUFVLFNBQVM7QUFDbkIsZ0JBQUksd0JBQU87QUFDWDtBQUFBO0FBR0osY0FBSSxDQUFDLGtCQUFrQixLQUFLLFdBQVcsQ0FBQyx5QkFBeUIsS0FBSyxTQUFTO0FBQzNFLGdCQUFJLHdCQUFPO0FBQ1g7QUFBQTtBQUdKLG9CQUFVLFVBQVU7QUFDcEIsVUFBQyxLQUFhLGtCQUFrQjtBQUNoQyxnQkFBTSxLQUFLLE9BQU87QUFDbEI7QUFDQSxjQUFJLHdCQUFPO0FBQUE7QUFFZixtQkFBVyxTQUFTLFVBQVUsRUFBRSxNQUFNLFlBQVksVUFBVSxNQUFNO0FBQzlELFVBQUMsS0FBYSxrQkFBa0I7QUFDaEM7QUFBQTtBQUFBLGFBRUQ7QUFDSCxjQUFNLFNBQVMsTUFBTSxTQUFTO0FBQzlCLGNBQU0sVUFBVSxPQUFPLFNBQVMsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTO0FBQ3pELGdCQUFRLFNBQVMsVUFBVTtBQUFBLFVBQ3ZCLE1BQU07QUFBQSxVQUNOLEtBQUs7QUFBQSxXQUNOLFVBQVUsTUFBTTtBQUNmLFVBQUMsS0FBYSxrQkFBa0I7QUFDaEM7QUFBQTtBQUFBO0FBQUE7QUFNWjtBQUdBLGdCQUFZLGlCQUFpQixTQUFTO0FBR3RDLFVBQU0sTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWlCWixVQUFNLFVBQVUsU0FBUyxLQUFLLFNBQVM7QUFDdkMsWUFBUSxjQUFjO0FBQUE7QUFBQTtBQUk5QixpQ0FBMkIsdUJBQU07QUFBQSxFQUc3QixZQUFZLEtBQVUsU0FBaUIsVUFBd0M7QUFDM0UsVUFBTTtBQUNOLFNBQUssVUFBVTtBQUNmLFNBQUssV0FBVztBQUFBO0FBQUEsRUFFcEIsU0FBUztBQUNMLFVBQU0sRUFBRSxjQUFjO0FBQ3RCLGNBQVU7QUFDVixjQUFVLFNBQVMsTUFBTSxFQUFFLE1BQU07QUFDakMsY0FBVSxTQUFTLEtBQUssRUFBRSxNQUFNLEtBQUs7QUFDckMsVUFBTSxTQUFTLFVBQVU7QUFDekIsV0FBTyxNQUFNLFVBQVU7QUFDdkIsV0FBTyxNQUFNLE1BQU07QUFDbkIsV0FBTyxTQUFTLFVBQVUsRUFBRSxNQUFNLFVBQVUsS0FBSyxpQkFBaUIsVUFBVSxNQUFNO0FBQzlFLFdBQUs7QUFDTCxXQUFLLFNBQVM7QUFBQTtBQUVsQixXQUFPLFNBQVMsVUFBVSxFQUFFLE1BQU0sWUFBWSxVQUFVLE1BQU07QUFDMUQsV0FBSztBQUNMLFdBQUssU0FBUztBQUFBO0FBQUE7QUFBQSxFQUd0QixVQUFVO0FBQ04sU0FBSyxVQUFVO0FBQUE7QUFBQTtBQXdFdkIseUNBQW1DLHVCQUFNO0FBQUEsRUFTckMsWUFDSSxLQUNBLGFBQ0EsYUFDQSxrQkFBMEIsV0FDMUIsa0JBQTBCLFlBQzFCLHlCQUEyQyxJQUMzQyxVQUNBLFNBQWtCLE9BQ3BCO0FBQ0UsVUFBTTtBQUNOLFNBQUssT0FBTztBQUNaLFNBQUssZUFBZTtBQUNwQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssa0JBQWtCLENBQUMsR0FBRztBQUMzQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxTQUFTO0FBQUE7QUFBQSxFQUdsQixTQUFTO0FBQ0wsVUFBTSxFQUFFLGNBQWM7QUFDdEIsY0FBVTtBQUVWLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSxLQUFLLFNBQVMscUJBQXFCO0FBR3BFLFFBQUkseUJBQVEsV0FDUCxRQUFRLG9CQUNSLFFBQVEsZ0NBQ1IsUUFBUSxVQUFRLEtBQ1osZUFBZSxtQ0FDZixTQUFTLEtBQUssTUFDZCxTQUFTLFdBQVM7QUFDZixXQUFLLE9BQU87QUFBQTtBQUl4QixRQUFJLHlCQUFRLFdBQ1AsUUFBUSxnQkFDUixRQUFRLDBDQUNSLFFBQVEsVUFBUSxLQUNaLGVBQWUsYUFDZixTQUFTLEtBQUssY0FDZCxTQUFTLFdBQVM7QUFDZixXQUFLLGVBQWU7QUFBQTtBQUloQyxRQUFJLHlCQUFRLFdBQ1AsUUFBUSxZQUNSLFFBQVEsK0JBQ1IsWUFBWSxjQUFZO0FBQ3JCLFlBQU0sWUFBWTtBQUFBLFFBQ2Q7QUFBQSxRQUFXO0FBQUEsUUFBVztBQUFBLFFBQVU7QUFBQSxRQUFVO0FBQUEsUUFBVztBQUFBLFFBQ3JEO0FBQUEsUUFBVztBQUFBLFFBQVc7QUFBQSxRQUFZO0FBQUEsUUFBVTtBQUFBLFFBQVU7QUFBQSxRQUN0RDtBQUFBLFFBQVM7QUFBQSxRQUFTO0FBQUEsUUFBVztBQUFBLFFBQWE7QUFBQSxRQUFVO0FBQUEsUUFDcEQ7QUFBQSxRQUFVO0FBQUEsUUFBUztBQUFBLFFBQVU7QUFBQSxRQUFhO0FBQUEsUUFBWTtBQUFBLFFBQ3REO0FBQUEsUUFBYTtBQUFBLFFBQWM7QUFBQSxRQUFXO0FBQUEsUUFBWTtBQUFBLFFBQ2xEO0FBQUEsUUFBWTtBQUFBLFFBQVc7QUFBQSxRQUFjO0FBQUEsUUFBVztBQUFBLFFBQ2hEO0FBQUEsUUFBVztBQUFBLFFBQVc7QUFBQSxRQUFTO0FBQUEsUUFBVztBQUFBLFFBQVE7QUFBQSxRQUNsRDtBQUFBLFFBQWM7QUFBQSxRQUFTO0FBQUEsUUFBWTtBQUFBO0FBR3ZDLGdCQUFVLFFBQVEsVUFBUSxTQUFTLFVBQVUsTUFBTTtBQUNuRCxlQUFTLFNBQVMsS0FBSztBQUN2QixlQUFTLFNBQVMsV0FBUztBQUN2QixhQUFLLFdBQVc7QUFBQTtBQUFBO0FBSzVCLFFBQUkseUJBQVEsV0FDUCxRQUFRLFlBQ1IsUUFBUSwrQkFDUixZQUFZLGNBQVk7QUFDckIsWUFBTSxhQUFhO0FBQUEsUUFDZjtBQUFBLFFBQVk7QUFBQSxRQUFTO0FBQUEsUUFBYztBQUFBLFFBQVc7QUFBQSxRQUM5QztBQUFBLFFBQWM7QUFBQSxRQUFZO0FBQUEsUUFBWTtBQUFBLFFBQ3RDO0FBQUEsUUFBVTtBQUFBLFFBQVk7QUFBQSxRQUFZO0FBQUE7QUFHdEMsaUJBQVcsUUFBUSxTQUFPLFNBQVMsVUFBVSxLQUFLO0FBQ2xELGVBQVMsU0FBUyxLQUFLO0FBQ3ZCLGVBQVMsU0FBUyxXQUFTO0FBQ3ZCLGFBQUssV0FBVztBQUFBO0FBQUE7QUFLNUIsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBQ2pDLGNBQVUsU0FBUyxLQUFLO0FBQUEsTUFDcEIsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBO0FBR1QsVUFBTSxpQkFBaUIsVUFBVSxVQUFVLEVBQUUsS0FBSztBQUNsRCxTQUFLLHNCQUFzQjtBQUczQixRQUFJLHlCQUFRLFdBQ1AsVUFBVSxZQUFVLE9BQ2hCLGNBQWMsdUJBQ2QsUUFBUSxNQUFNO0FBQ1gsV0FBSyxnQkFBZ0IsS0FBSyxFQUFFLE9BQU8sSUFBSSxZQUFZLElBQUksUUFBUTtBQUMvRCxXQUFLLHNCQUFzQjtBQUFBO0FBSXZDLFVBQU0sa0JBQWtCLFVBQVUsVUFBVSxFQUFFLEtBQUs7QUFFbkQsb0JBQWdCLFNBQVMsVUFBVTtBQUFBLE1BQy9CLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxPQUNOLFVBQVUsTUFBTSxLQUFLO0FBRXhCLG9CQUFnQixTQUFTLFVBQVU7QUFBQSxNQUMvQixNQUFNLEtBQUssU0FBUyxXQUFXO0FBQUEsTUFDL0IsS0FBSztBQUFBLE9BQ04sVUFBVSxNQUFNO0FBQ2YsVUFBSSxLQUFLLEtBQUssVUFBVSxLQUFLLGFBQWEsUUFBUTtBQUM5QyxhQUFLLFNBQVMsS0FBSyxLQUFLLFFBQVEsS0FBSyxhQUFhLFFBQVEsS0FBSyxVQUFVLEtBQUssVUFBVSxLQUFLO0FBQzdGLGFBQUs7QUFBQSxhQUNGO0FBQ0gsWUFBSSx3QkFBTztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS2Ysc0JBQXNCLFdBQXdCO0FBQ2xELGNBQVU7QUFFVixTQUFLLGdCQUFnQixRQUFRLENBQUMsTUFBTSxVQUFVO0FBQzFDLFlBQU0sZ0JBQWdCLFVBQVUsVUFBVSxFQUFFLEtBQUs7QUFHakQsVUFBSSx5QkFBUSxlQUNQLFFBQVEsaUJBQ1IsUUFBUSwrQkFDUixRQUFRLFVBQVEsS0FDWixlQUFlLG9CQUNmLFNBQVMsS0FBSyxPQUNkLFNBQVMsV0FBUztBQUNmLGFBQUssZ0JBQWdCLE9BQU8sUUFBUTtBQUFBO0FBSWhELFVBQUkseUJBQVEsZUFDUCxRQUFRLGNBQ1IsUUFBUSw4Q0FDUixRQUFRLFVBQVEsS0FDWixlQUFlLHFCQUNmLFNBQVMsS0FBSyxZQUNkLFNBQVMsV0FBUztBQUNmLGFBQUssZ0JBQWdCLE9BQU8sYUFBYTtBQUFBO0FBSXJELFVBQUkseUJBQVEsZUFDUCxRQUFRLDZCQUNSLFFBQVEsNkRBQ1IsVUFBVSxZQUFVLE9BQ2hCLFNBQVMsQ0FBQyxDQUFDLEtBQUssUUFDaEIsU0FBUyxXQUFTO0FBQ2YsYUFBSyxnQkFBZ0IsT0FBTyxTQUFTO0FBQUE7QUFJakQsVUFBSSx5QkFBUSxlQUNQLFVBQVUsWUFBVSxPQUNoQixjQUFjLFVBQ2QsYUFDQSxRQUFRLE1BQU07QUFDWCxhQUFLLGdCQUFnQixPQUFPLE9BQU87QUFDbkMsYUFBSyxzQkFBc0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUsvQyxVQUFVO0FBQ04sVUFBTSxFQUFFLGNBQWM7QUFDdEIsY0FBVTtBQUFBO0FBQUE7OztBSHIrQ2xCLFVBQW9CO0FBQ3BCLFlBQXNCO0FBR3RCLElBQU0scUJBQTZDO0FBQUEsRUFDL0MsV0FBVztBQUFBLEVBQU8sVUFBVTtBQUFBLEVBQU8sYUFBYTtBQUFBLEVBQU8sV0FBVztBQUFBLEVBQU8sZUFBZTtBQUFBLEVBQ3hGLFVBQVU7QUFBQSxFQUFPLFVBQVU7QUFBQSxFQUFPLFFBQVE7QUFBQSxFQUFPLFlBQVk7QUFBQSxFQUFPLFlBQVk7QUFBQSxFQUNoRixXQUFXO0FBQUEsRUFBTyxXQUFXO0FBQUEsRUFBTyxnQkFBZ0I7QUFBQSxFQUFPLGdCQUFnQjtBQUFBLEVBQzNFLFFBQVE7QUFBQSxFQUFPLFlBQVk7QUFBQSxFQUFPLFVBQVU7QUFBQSxFQUFPLE9BQU87QUFBQSxFQUFPLFVBQVU7QUFBQSxFQUMzRSxZQUFZO0FBQUEsRUFBTyxnQkFBZ0I7QUFBQSxFQUFPLG1CQUFtQjtBQUFBLEVBQU8sVUFBVTtBQUFBLEVBQzlFLFlBQVk7QUFBQSxFQUFPLGdCQUFnQjtBQUFBLEVBQU8sV0FBVztBQUFBLEVBQU8sVUFBVTtBQUFBLEVBQ3RFLFNBQVM7QUFBQSxFQUFPLFFBQVE7QUFBQSxFQUFPLFFBQVE7QUFBQSxFQUFPLFdBQVc7QUFBQSxFQUFPLFNBQVM7QUFBQSxFQUN6RSxTQUFTO0FBQUEsRUFBTyxTQUFTO0FBQUEsRUFBTyxZQUFZO0FBQUEsRUFBTyxhQUFhO0FBQUEsRUFBTyxVQUFVO0FBQUEsRUFDakYsYUFBYTtBQUFBLEVBQU8sV0FBVztBQUFBLEVBQU8sV0FBVztBQUFBLEVBQU8sUUFBUTtBQUFBLEVBQU8sUUFBUTtBQUFBLEVBQy9FLFFBQVE7QUFBQSxFQUFPLFFBQVE7QUFBQSxFQUFPLFVBQVU7QUFBQSxFQUFPLGlCQUFpQjtBQUFBLEVBQU8saUJBQWlCO0FBQUEsRUFDeEYsYUFBYTtBQUFBLEVBQU8sYUFBYTtBQUFBLEVBQU8sZUFBZTtBQUFBLEVBQU8sY0FBYztBQUFBLEVBQzVFLG1CQUFtQjtBQUFBLEVBQU8sbUJBQW1CO0FBQUEsRUFBTyxhQUFhO0FBQUEsRUFBTyxhQUFhO0FBQUEsRUFDckYsU0FBUztBQUFBLEVBQU8sWUFBWTtBQUFBLEVBQU8sV0FBVztBQUFBLEVBQU8sU0FBUztBQUFBLEVBQU8sV0FBVztBQUFBLEVBQ2hGLFdBQVc7QUFBQSxFQUFPLFVBQVU7QUFBQSxFQUFPLFVBQVU7QUFBQSxFQUFPLFVBQVU7QUFBQSxFQUFPLFFBQVE7QUFBQSxFQUM3RSxjQUFjO0FBQUE7QUFHbEIsb0NBQTZDLHdCQUFPO0FBQUEsRUFBcEQsY0ExQkE7QUEwQkE7QUFHWSx1QkFBYztBQUFBO0FBQUEsUUFFaEIsU0FBUztBQUNYLFVBQU0sS0FBSztBQUdYLFNBQUssS0FBSyxJQUFJLGNBQWM7QUFHNUIsUUFBSSxLQUFLLGFBQWE7QUFDbEIsWUFBTSxLQUFLLEdBQUc7QUFDZCxXQUFLLGNBQWM7QUFHbkIsVUFBSSx3QkFBTztBQUFBLFdBQ1I7QUFDSCxZQUFNLEtBQUssR0FBRztBQUFBO0FBSWxCLElBQUMsT0FBZSxrQkFBa0I7QUFHbEMsSUFBQyxPQUFlLGVBQWU7QUFBQSxNQUMzQixjQUFjLE1BQU0sS0FBSztBQUFBLE1BQ3pCLGFBQWEsQ0FBQyxNQUFlLFNBQWtCLGdCQUF5QixLQUFLLFlBQVksTUFBTSxTQUFTO0FBQUEsTUFDeEcsaUJBQWlCLE1BQU0sS0FBSyxHQUFHO0FBQUEsTUFDL0IsVUFBVSxNQUFNLEtBQUssR0FBRztBQUFBLE1BQ3hCLG9CQUFvQixDQUFDLE1BQWMsZ0JBQXdCLEtBQUssR0FBRyxtQkFBbUIsTUFBTTtBQUFBLE1BQzVGLHFCQUFxQixDQUFDLE1BQWMsU0FBaUIsZ0JBQXdCLEtBQUssR0FBRyxvQkFBb0IsTUFBTSxTQUFTO0FBQUEsTUFDeEgsVUFBVSxDQUFDLE1BQWMsU0FBaUIsT0FBZSxnQkFBd0IsS0FBSyxHQUFHLFNBQVMsTUFBTSxTQUFTLE9BQU87QUFBQSxNQUV4SCxRQUFRO0FBQUE7QUFJWixVQUFNLGlCQUFpQixDQUFDLFFBQTJFO0FBQy9GLFlBQU0sUUFBUSxJQUFJLE1BQU07QUFDeEIsVUFBSSxDQUFDO0FBQU8sZUFBTztBQUVuQixZQUFNLENBQUMsRUFBRSxNQUFNLFNBQVMsU0FBUztBQUNqQyxhQUFPO0FBQUEsUUFDSCxNQUFNLEtBQUs7QUFBQSxRQUNYLFNBQVMsU0FBUztBQUFBLFFBQ2xCLE9BQU8sUUFBUSxTQUFTLFNBQVM7QUFBQTtBQUFBO0FBS3pDLFNBQUssbUNBQW1DLEtBQUssU0FBUyxtQkFBbUIsQ0FBQyxRQUFRLElBQUksUUFBUTtBQUMxRixXQUFLLGlCQUFpQixRQUFRLElBQUk7QUFBQTtBQUl0QyxTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLGdCQUFnQixDQUFDLFdBQW1CO0FBQ2hDLFlBQUksbUJBQ0EsS0FBSyxLQUNMLE1BQ0EsQ0FBQyxXQUFtQixhQUFxQixZQUEyQyxZQUFzQjtBQUN0RyxlQUFLLHFCQUFxQixRQUFRLFdBQVcsYUFBYSxZQUFZO0FBQ3RFLHFCQUFXLE1BQU0sS0FBSywrQkFBK0I7QUFBQSxXQUUzRDtBQUFBO0FBQUE7QUFLVixRQUFJLEtBQUssU0FBUyxpQkFBaUI7QUFDL0IsV0FBSztBQUFBO0FBSVQsU0FBSyxjQUFjLElBQUksb0JBQW9CLEtBQUssS0FBSztBQUdyRCxTQUFLO0FBR0wsU0FBSztBQUdMLFNBQUs7QUFHTCxTQUFLO0FBR0wsU0FBSztBQUVMLFlBQVEsSUFBSTtBQUFBO0FBQUEsRUFHUiwwQkFBMEI7QUFDOUIsWUFBUSxJQUFJLDJEQUEyRDtBQUFBLE1BQ25FLG9CQUFvQixLQUFLLFNBQVM7QUFBQSxNQUNsQyxZQUFZLEtBQUssU0FBUztBQUFBLE1BQzFCLGlCQUFpQixLQUFLLFNBQVM7QUFBQSxNQUMvQixjQUFjLEtBQUssU0FBUztBQUFBLE1BQzVCLDBCQUEwQixLQUFLLFNBQVM7QUFBQSxNQUN4QyxvQkFBb0IsS0FBSyxTQUFTO0FBQUE7QUFJdEMsVUFBTSxlQUFlLEFBQUssV0FBSyxLQUFLLElBQUksTUFBTSxRQUFRLFVBQVUsYUFBYSxXQUFXLHNCQUFzQixRQUFRO0FBQ3RILFFBQUksQUFBRyxlQUFXLGVBQWU7QUFDN0IsWUFBTSxVQUFVLEFBQUcsaUJBQWEsY0FBYztBQUM5QyxjQUFRLElBQUksNEVBQTRFLFFBQVEsTUFBTSxHQUFHO0FBQUEsV0FDdEc7QUFDSCxjQUFRLElBQUk7QUFBQTtBQUFBO0FBQUEsUUFJZCxXQUFXO0FBQ2IsUUFBSSxLQUFLLElBQUk7QUFDVCxZQUFNLEtBQUssR0FBRztBQUFBO0FBSWxCLFFBQUssT0FBZSxjQUFjO0FBQzlCLGFBQVEsT0FBZTtBQUFBO0FBRTNCLFFBQUssT0FBZSxpQkFBaUI7QUFDakMsYUFBUSxPQUFlO0FBQUE7QUFHM0IsWUFBUSxJQUFJO0FBQUE7QUFBQSxRQUdWLGVBQWU7QUFDakIsUUFBSTtBQUNBLFlBQU0sZUFBZSxBQUFLLFdBQUssS0FBSyxJQUFJLE1BQU0sUUFBUSxVQUFVLGFBQWEsV0FBVyxzQkFBc0IsUUFBUTtBQUN0SCxjQUFRLElBQUkscURBQXFEO0FBRWpFLFVBQUksQUFBRyxlQUFXLGVBQWU7QUFDN0IsY0FBTSxVQUFVLEFBQUcsaUJBQWEsY0FBYztBQUM5QyxnQkFBUSxJQUFJLG9FQUFvRSxRQUFRLE1BQU0sR0FBRztBQUNqRyxjQUFNLGdCQUFnQixLQUFLLE1BQU07QUFDakMsYUFBSyxXQUFXLE9BQU8sT0FBTyxJQUFJLGtCQUFrQjtBQUNwRCxnQkFBUSxJQUFJO0FBQUEsYUFDVDtBQUNILGdCQUFRLElBQUk7QUFDWixhQUFLLFdBQVcsT0FBTyxPQUFPLElBQUk7QUFHbEMsY0FBTSxLQUFLO0FBQ1gsZ0JBQVEsSUFBSTtBQUFBO0FBQUEsYUFFWCxPQUFQO0FBQ0UsY0FBUSxNQUFNLHNEQUFzRDtBQUNwRSxXQUFLLFdBQVcsT0FBTyxPQUFPLElBQUk7QUFBQTtBQUFBO0FBQUEsUUFJcEMsZUFBZTtBQUNqQixRQUFJO0FBRUEsWUFBTSxVQUFVLEFBQUssV0FBSyxLQUFLLElBQUksTUFBTSxRQUFRLFVBQVUsYUFBYSxXQUFXLHNCQUFzQjtBQUN6RyxVQUFJLENBQUMsQUFBRyxlQUFXLFVBQVU7QUFDekIsUUFBRyxjQUFVLFNBQVMsRUFBRSxXQUFXO0FBQUE7QUFHdkMsWUFBTSxlQUFlLEFBQUssV0FBSyxTQUFTO0FBQ3hDLFlBQU0sVUFBVSxLQUFLLFVBQVUsS0FBSyxVQUFVLE1BQU07QUFDcEQsY0FBUSxJQUFJLGtEQUFrRDtBQUM5RCxjQUFRLElBQUksMERBQTBELFFBQVEsTUFBTSxHQUFHO0FBRXZGLE1BQUcsa0JBQWMsY0FBYyxTQUFTO0FBQ3hDLGNBQVEsSUFBSTtBQU1aLFdBQUs7QUFBQSxhQUNBLE9BQVA7QUFDRSxjQUFRLE1BQU0scURBQXFEO0FBQ25FLFVBQUksd0JBQU87QUFBQTtBQUFBO0FBQUEsRUFJWCxZQUFZO0FBQ2hCLFNBQUs7QUFBQTtBQUFBLEVBR0QsZUFBZTtBQUVuQixVQUFNLGdCQUFnQixTQUFTLGVBQWU7QUFDOUMsUUFBSSxlQUFlO0FBQ2Ysb0JBQWM7QUFBQTtBQUdsQixVQUFNLFFBQVEsU0FBUyxjQUFjO0FBQ3JDLFVBQU0sS0FBSztBQUNYLFVBQU0sY0FBYztBQUFBO0FBQUEseUJBRUgsS0FBSyxTQUFTO0FBQUEsb0NBQ0gsS0FBSyxTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEseUJBcUN6QixLQUFLLFNBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaUYvQixhQUFTLEtBQUssWUFBWTtBQUFBO0FBQUEsRUFHdEIsaUJBQWlCLFFBQWdCLElBQWlCLEtBQVU7QUFFaEUsT0FBRyxNQUFNLGtCQUFrQixLQUFLLFNBQVM7QUFDekMsT0FBRyxNQUFNLFFBQVEsS0FBSyxTQUFTO0FBRy9CLFVBQU0sUUFBUSxPQUFPLE9BQU8sTUFBTTtBQUNsQyxRQUFJLE1BQU0sV0FBVztBQUFHO0FBRXhCLFVBQU0sWUFBWSxNQUFNLEdBQUc7QUFDM0IsVUFBTSxRQUFRLFVBQVUsTUFBTSxLQUFLLE9BQU8sT0FBSyxFQUFFLFNBQVM7QUFHMUQsVUFBTSxVQUFVO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsTUFDVCxTQUFTO0FBQUEsTUFDVCxNQUFNO0FBQUE7QUFJVixRQUFJLG1CQUFtQjtBQUN2QixRQUFJLHNCQUFzQjtBQUcxQixhQUFTLElBQUksR0FBRyxJQUFJLE1BQU0sUUFBUSxLQUFLO0FBQ25DLFlBQU0sT0FBTyxNQUFNLEdBQUc7QUFDdEIsVUFBSSxDQUFDLFNBQVMsV0FBVyxZQUFZLFFBQVEsU0FBUyxPQUFPO0FBQ3pELGdCQUFRO0FBQUEsZUFDQztBQUNELG9CQUFRLFFBQVE7QUFDaEI7QUFBQSxlQUNDO0FBQ0Qsb0JBQVEsVUFBVTtBQUNsQjtBQUFBLGVBQ0M7QUFDRCxvQkFBUSxVQUFVO0FBQ2xCO0FBQUEsZUFDQztBQUNELG9CQUFRLE9BQU87QUFDZjtBQUFBO0FBRVIsMkJBQW1CLElBQUk7QUFBQSxhQUNwQjtBQUNIO0FBQUE7QUFBQTtBQUtSLFVBQU0sV0FBVyxNQUFNLE1BQU0sU0FBUztBQUN0QyxRQUFJLG9CQUFvQixNQUFNO0FBQzlCLFFBQUksU0FBUyxXQUFXLFFBQVEsU0FBUyxTQUFTLE1BQU07QUFDcEQsWUFBTSxhQUFhLFNBQVMsTUFBTSxHQUFHO0FBRXJDLFlBQU0sY0FBYyxXQUFXLE1BQU0sUUFBUSxJQUFJLE9BQUssRUFBRSxRQUFRLE9BQU8sT0FBSyxFQUFFLFNBQVM7QUFFdkYsY0FBUSxRQUFRLFFBQVEsU0FBUyxZQUFZLFNBQVM7QUFDdEQsY0FBUSxVQUFVLFFBQVEsV0FBVyxZQUFZLFNBQVM7QUFDMUQsY0FBUSxVQUFVLFFBQVEsV0FBVyxZQUFZLFNBQVM7QUFDMUQsY0FBUSxPQUFPLFFBQVEsUUFBUSxZQUFZLFNBQVM7QUFDcEQ7QUFBQTtBQUdKLFFBQUksb0JBQW9CLG1CQUFtQjtBQUN2QyxTQUFHLFdBQVcsRUFBRSxNQUFNO0FBQ3RCO0FBQUE7QUFJSixVQUFNLGNBQWMsTUFBTTtBQUMxQixVQUFNLGdCQUFnQixNQUFNLE1BQU0sbUJBQW1CLEdBQUcsbUJBQW1CLEtBQUs7QUFHaEYsVUFBTSxnQkFBZ0IsY0FBYyxNQUFNO0FBQzFDLFFBQUksU0FBOEQ7QUFFbEUsUUFBSSxlQUFlO0FBRWYsWUFBTSxDQUFDLEVBQUUsV0FBVyxjQUFjLFlBQVksU0FBUyxZQUFZLFlBQVk7QUFDL0UsWUFBTSxrQkFBa0IsU0FBUztBQUNqQyxZQUFNLGdCQUFnQixTQUFTO0FBQy9CLFlBQU0sZ0JBQWdCLFNBQVM7QUFDL0IsWUFBTSxjQUFjLFNBQVM7QUFHN0IsVUFBSSxjQUFjLFNBQVM7QUFDdkIsV0FBRyxXQUFXLEVBQUUsTUFBTTtBQUN0QjtBQUFBO0FBSUosZUFBUyxVQUFVLGlCQUFpQixXQUFXLGVBQWUsV0FBVztBQUNyRSxjQUFNLFFBQVEsWUFBWSxrQkFBa0IsZ0JBQWdCO0FBQzVELGNBQU0sTUFBTSxZQUFZLGdCQUFnQixjQUFjO0FBRXRELGlCQUFTLFFBQVEsT0FBTyxTQUFTLEtBQUssU0FBUztBQUMzQyxnQkFBTSxZQUFZLEtBQUssR0FBRyxTQUFTLFdBQVcsU0FBUyxPQUFPO0FBQzlELGNBQUksV0FBVztBQUNYLG1CQUFPLEtBQUssRUFBRSxTQUFTLE9BQU8sTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBSzFELFVBQUksT0FBTyxXQUFXLEdBQUc7QUFDckIsV0FBRyxXQUFXLEVBQUUsTUFBTSxzQkFBc0Isb0JBQW9CO0FBQ2hFO0FBQUE7QUFJSixZQUFNLFlBQVksR0FBRyxVQUFVO0FBQUEsUUFDM0IsS0FBSyx3QkFBd0IsUUFBUSxVQUFVLGdCQUFnQixLQUFLLFFBQVEsVUFBVSxrQkFBa0IsS0FBSyxRQUFRLFFBQVEsZ0JBQWdCO0FBQUE7QUFJakosWUFBTSxNQUFNLEdBQUcsYUFBYSxtQkFBbUIsaUJBQWlCLGlCQUFpQixnQkFBZ0I7QUFDakcsZ0JBQVUsV0FBVyxFQUFFLE1BQU0sTUFBTSxNQUFNLEtBQUs7QUFHOUMsWUFBTSxpQkFBaUIsVUFBVSxVQUFVLEVBQUUsS0FBSztBQUNsRCxVQUFJLGNBQWM7QUFFbEIsYUFBTyxRQUFRLENBQUMsVUFBVTtBQUN0QixZQUFJLFFBQVEsV0FBVyxNQUFNLFlBQVksYUFBYTtBQUVsRCx5QkFBZSxTQUFTLE1BQU07QUFBQSxZQUMxQixNQUFNLFdBQVcsTUFBTTtBQUFBLFlBQ3ZCLEtBQUs7QUFBQTtBQUVULHdCQUFjLE1BQU07QUFBQTtBQUd4QixZQUFJLFFBQVEsT0FBTztBQUVmLGdCQUFNLE1BQU0sZUFBZSxTQUFTLE9BQU8sRUFBRSxNQUFNLE1BQU0sTUFBTTtBQUMvRCxjQUFJLE1BQU0sY0FBYztBQUFBO0FBSTVCLFlBQUksZ0JBQWdCLEtBQUssR0FBRyxxQkFBcUIsTUFBTSxNQUFNO0FBRzdELFlBQUksUUFBUSxTQUFTO0FBQ2pCLGdCQUFNLFFBQVEsY0FBYyxNQUFNO0FBQ2xDLGdCQUFNLFFBQVEsQ0FBQyxNQUFNLE1BQU07QUFDdkIsa0JBQU0sY0FBYyxLQUFLLFlBQVk7QUFDckMsMkJBQWUsV0FBVztBQUFBLGNBQ3RCLE1BQU0sT0FBUSxLQUFJLE1BQU0sU0FBUyxJQUFJLE1BQU07QUFBQSxjQUMzQyxLQUFLLGNBQWMsb0JBQW9CO0FBQUE7QUFBQTtBQUFBLGVBRzVDO0FBRUgsZ0JBQU0sV0FBVyxlQUFlO0FBQ2hDLG1CQUFTLFlBQVksZ0JBQWdCO0FBQUE7QUFBQTtBQUs3QyxVQUFJLFFBQVEsTUFBTTtBQUNkLGNBQU0sZ0JBQWdCLFVBQVUsVUFBVSxFQUFFLEtBQUs7QUFDakQsY0FBTSxXQUFXLEdBQUcsYUFBYSxtQkFBbUIsZ0JBQWdCLGdCQUFnQixnQkFBZ0IsTUFBTSxjQUFjO0FBQ3hILGNBQU0sVUFBVSxLQUFLLHdCQUF3QixVQUFVO0FBQ3ZELGNBQU0sT0FBTyxjQUFjLFNBQVMsS0FBSztBQUFBLFVBQ3JDLE1BQU0sS0FBSztBQUFBLFVBQ1gsTUFBTTtBQUFBO0FBRVYsYUFBSyxTQUFTO0FBQUE7QUFBQSxXQUVmO0FBRUgsWUFBTSxRQUFRLGNBQWMsTUFBTTtBQUNsQyxVQUFJLENBQUMsT0FBTztBQUNSLFdBQUcsV0FBVyxFQUFFLE1BQU0sNkJBQTZCO0FBQ25EO0FBQUE7QUFHSixZQUFNLENBQUMsRUFBRSxNQUFNLFNBQVMsWUFBWSxZQUFZO0FBQ2hELFlBQU0sa0JBQWtCLFNBQVM7QUFDakMsWUFBTSxnQkFBZ0IsYUFBYSxTQUFTLGNBQWM7QUFDMUQsWUFBTSxjQUFjLFdBQVcsU0FBUyxZQUFZO0FBR3BELGVBQVMsSUFBSSxlQUFlLEtBQUssYUFBYSxLQUFLO0FBQy9DLGNBQU0sWUFBWSxLQUFLLEdBQUcsU0FBUyxNQUFNLGlCQUFpQixHQUFHO0FBQzdELFlBQUksV0FBVztBQUNYLGlCQUFPLEtBQUssRUFBRSxTQUFTLGlCQUFpQixPQUFPLEdBQUcsTUFBTSxVQUFVO0FBQUE7QUFBQTtBQUkxRSxVQUFJLE9BQU8sV0FBVyxHQUFHO0FBQ3JCLFdBQUcsV0FBVyxFQUFFLE1BQU0sc0JBQXNCLFFBQVEsbUJBQW1CLGdCQUFnQixnQkFBZ0IsZ0JBQWdCLE1BQU0sY0FBYyxTQUFTO0FBQ3BKO0FBQUE7QUFJSixZQUFNLFlBQVksR0FBRyxVQUFVO0FBQUEsUUFDM0IsS0FBSyx3QkFBd0IsUUFBUSxVQUFVLGdCQUFnQixLQUFLLFFBQVEsVUFBVSxrQkFBa0IsS0FBSyxRQUFRLFFBQVEsZ0JBQWdCO0FBQUE7QUFJakosWUFBTSxNQUFNLEdBQUcsUUFBUSxtQkFBbUIsZ0JBQWdCLGdCQUFnQixnQkFBZ0IsTUFBTSxjQUFjLE9BQU87QUFDckgsZ0JBQVUsV0FBVyxFQUFFLE1BQU0sTUFBTSxNQUFNLEtBQUs7QUFHOUMsWUFBTSxpQkFBaUIsVUFBVSxVQUFVLEVBQUUsS0FBSztBQUNsRCxVQUFJLGNBQWM7QUFFbEIsYUFBTyxRQUFRLENBQUMsVUFBVTtBQUN0QixZQUFJLFFBQVEsV0FBVyxNQUFNLFlBQVksYUFBYTtBQUVsRCxnQkFBTSxhQUFhLGVBQWUsU0FBUyxVQUFVO0FBQUEsWUFDakQsTUFBTSxNQUFNLFFBQVE7QUFBQSxZQUNwQixLQUFLO0FBQUE7QUFFVCxxQkFBVyxNQUFNLGNBQWM7QUFDL0Isd0JBQWMsTUFBTTtBQUFBO0FBR3hCLFlBQUksUUFBUSxTQUFTLE9BQU8sU0FBUyxHQUFHO0FBRXBDLGdCQUFNLE1BQU0sZUFBZSxTQUFTLE9BQU8sRUFBRSxNQUFNLE1BQU0sTUFBTTtBQUMvRCxjQUFJLE1BQU0sY0FBYztBQUFBO0FBSTVCLFlBQUksZ0JBQWdCLEtBQUssR0FBRyxxQkFBcUIsTUFBTSxNQUFNO0FBRzdELFlBQUksUUFBUSxTQUFTO0FBQ2pCLGdCQUFNLFFBQVEsY0FBYyxNQUFNO0FBQ2xDLGdCQUFNLFFBQVEsQ0FBQyxNQUFNLE1BQU07QUFDdkIsa0JBQU0sY0FBYyxLQUFLLFlBQVk7QUFDckMsMkJBQWUsV0FBVztBQUFBLGNBQ3RCLE1BQU0sT0FBUSxLQUFJLE1BQU0sU0FBUyxJQUFJLE1BQU07QUFBQSxjQUMzQyxLQUFLLGNBQWMsb0JBQW9CO0FBQUE7QUFBQTtBQUFBLGVBRzVDO0FBRUgsZ0JBQU0sV0FBVyxlQUFlO0FBQ2hDLG1CQUFTLFlBQVksZ0JBQWdCO0FBQUE7QUFBQTtBQUs3QyxVQUFJLFFBQVEsTUFBTTtBQUNkLGNBQU0sZ0JBQWdCLFVBQVUsVUFBVSxFQUFFLEtBQUs7QUFDakQsY0FBTSxXQUFXLEdBQUcsUUFBUSxtQkFBbUIsZ0JBQWdCLGdCQUFnQixnQkFBZ0IsTUFBTSxjQUFjO0FBQ25ILGNBQU0sVUFBVSxLQUFLLHdCQUF3QixVQUFVO0FBQ3ZELGNBQU0sT0FBTyxjQUFjLFNBQVMsS0FBSztBQUFBLFVBQ3JDLE1BQU0sS0FBSztBQUFBLFVBQ1gsTUFBTTtBQUFBO0FBRVYsYUFBSyxTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPbEIsMkJBQTJCO0FBQy9CLFdBQU8sUUFBUSxLQUFLLFNBQVMsV0FBVyxRQUFRLENBQUMsQ0FBQyxVQUFVLGVBQWU7QUFDdkUsV0FBSyxXQUFXO0FBQUEsUUFDWixJQUFJLGtCQUFrQjtBQUFBLFFBQ3RCLE1BQU0sVUFBVSxjQUFjO0FBQUEsUUFDOUIsZ0JBQWdCLENBQUMsV0FBbUI7QUFDaEMsZUFBSyx3QkFBd0IsUUFBUTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNN0Msd0JBQXdCLFFBQWdCLFdBQW1CO0FBRS9ELFVBQU0sUUFBUSxVQUFVLE1BQU07QUFDOUIsUUFBSSxDQUFDLE9BQU87QUFDUixVQUFJLHdCQUFPLDZCQUE2QjtBQUN4QztBQUFBO0FBR0osVUFBTSxDQUFDLEVBQUUsTUFBTSxTQUFTLFNBQVM7QUFDakMsVUFBTSxhQUFhLFNBQVM7QUFDNUIsVUFBTSxXQUFXLFNBQVM7QUFHMUIsVUFBTSxZQUFZLEtBQUssR0FBRyxTQUFTLE1BQU0sWUFBWSxVQUFVLEtBQUssU0FBUztBQUM3RSxRQUFJLENBQUMsV0FBVztBQUNaLFVBQUksd0JBQU8sb0JBQW9CLGdCQUFnQixLQUFLLFNBQVM7QUFDN0Q7QUFBQTtBQUdKLFNBQUsscUJBQXFCLFFBQVEsV0FBVyxLQUFLLFNBQVMsb0JBQW9CLEtBQUssU0FBUyxZQUFZO0FBQUE7QUFBQSxFQU9yRyw4QkFBOEI7QUFDbEMsYUFBUyxpQkFBaUIseUJBQXlCLFFBQVEsQ0FBQyxPQUFPO0FBQy9ELFVBQUssR0FBbUIsYUFBYSw4QkFBOEI7QUFBSztBQUN4RSxNQUFDLEdBQW1CLGFBQWEsMEJBQTBCO0FBQzNELFNBQUcsaUJBQWlCLGNBQWMsQ0FBQyxNQUFNO0FBQ3JDLGFBQUssMkJBQTJCO0FBQUE7QUFFcEMsU0FBRyxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFDaEMsVUFBRTtBQUNGLFVBQUU7QUFDRixhQUFLLDJCQUEyQixJQUFtQjtBQUFBO0FBRXZELFNBQUcsaUJBQWlCLGNBQWMsTUFBTTtBQUNwQyxtQkFBVyxNQUFNO0FBQ2IsbUJBQVMsaUJBQWlCLDZCQUE2QixRQUFRLFNBQU0sSUFBRztBQUFBLFdBQ3pFO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFVUCwyQkFBMkIsUUFBcUIsUUFBUSxPQUFPO0FBRW5FLGFBQVMsaUJBQWlCLDZCQUE2QixRQUFRLFFBQU0sR0FBRztBQUd4RSxRQUFJLE9BQU8sT0FBTyxlQUFlO0FBQ2pDLFFBQUksV0FBVyxLQUFLLE1BQU07QUFDMUIsUUFBSSxDQUFDO0FBQVU7QUFDZixRQUFJLFlBQVksU0FBUztBQUN6QixRQUFJLGNBQWMsU0FBUztBQUczQixRQUFJLFFBQVEsVUFBVSxNQUFNO0FBQzVCLFFBQUksQ0FBQztBQUFPO0FBQ1osVUFBTSxDQUFDLEVBQUUsTUFBTSxTQUFTLFlBQVksWUFBWTtBQUNoRCxVQUFNLGFBQWEsU0FBUztBQUM1QixVQUFNLGdCQUFnQixhQUFhLFNBQVMsY0FBYztBQUMxRCxVQUFNLGNBQWMsV0FBVyxTQUFTLFlBQVk7QUFDcEQsUUFBSSxTQUFtQjtBQUN2QixhQUFTLElBQUksZUFBZSxLQUFLLGFBQWEsS0FBSztBQUMvQyxZQUFNLFlBQVksS0FBSyxHQUFHLFNBQVMsTUFBTSxZQUFZLEdBQUc7QUFDeEQsVUFBSSxXQUFXO0FBQ1gsZUFBTyxLQUFLLDZDQUE2QyxZQUFZLFVBQVU7QUFBQTtBQUFBO0FBR3ZGLFFBQUksT0FBTyxXQUFXO0FBQUc7QUFHekIsVUFBTSxVQUFVLFNBQVMsY0FBYztBQUN2QyxZQUFRLFlBQVk7QUFDcEIsWUFBUSxZQUFZLG9EQUFvRCxjQUFjLHFCQUFxQixPQUFPLEtBQUs7QUFDdkgsWUFBUSxNQUFNLFdBQVc7QUFDekIsWUFBUSxNQUFNLFNBQVM7QUFDdkIsWUFBUSxNQUFNLGFBQWE7QUFDM0IsWUFBUSxNQUFNLFFBQVE7QUFDdEIsWUFBUSxNQUFNLFNBQVM7QUFDdkIsWUFBUSxNQUFNLGVBQWU7QUFDN0IsWUFBUSxNQUFNLFVBQVU7QUFDeEIsWUFBUSxNQUFNLFlBQVk7QUFDMUIsWUFBUSxNQUFNLFdBQVc7QUFDekIsWUFBUSxNQUFNLFdBQVc7QUFDekIsWUFBUSxNQUFNLGdCQUFnQjtBQUM5QixZQUFRLE1BQU0sYUFBYTtBQUMzQixZQUFRLE1BQU0sWUFBWTtBQUcxQixVQUFNLE9BQU8sT0FBTztBQUNwQixZQUFRLE1BQU0sT0FBTyxHQUFHLEtBQUssT0FBTyxPQUFPO0FBQzNDLFlBQVEsTUFBTSxNQUFNLEdBQUcsS0FBSyxTQUFTLE9BQU8sVUFBVTtBQUV0RCxhQUFTLEtBQUssWUFBWTtBQUcxQixVQUFNLGdCQUFnQixDQUFDLE1BQWM7QUFDakMsVUFBSSxRQUFRO0FBQVksZ0JBQVEsV0FBVyxZQUFZO0FBQ3ZELGVBQVMsb0JBQW9CLGFBQWE7QUFBQTtBQUU5QyxVQUFNLGFBQWEsQ0FBQyxNQUFrQjtBQUNsQyxVQUFJLENBQUMsUUFBUSxTQUFTLEVBQUUsV0FBbUIsRUFBRSxXQUFXLFFBQVE7QUFDNUQ7QUFBQTtBQUFBO0FBR1IsUUFBSSxDQUFDLE9BQU87QUFDUixjQUFRLGlCQUFpQixjQUFjO0FBQUE7QUFFM0MsYUFBUyxpQkFBaUIsYUFBYTtBQUFBO0FBQUEsRUFHbkMscUJBQ0osUUFDQSxXQUNBLGFBQ0EsWUFDQSxTQUNGO0FBR0UsUUFBSSxrQkFBa0IsVUFBVSxNQUFNO0FBQ3RDLFFBQUksb0JBQW9CLFVBQVUsTUFBTTtBQUN4QyxRQUFJLFFBQVEsVUFBVSxNQUFNO0FBQzVCLFFBQUksU0FBNkM7QUFDakQsUUFBSSxNQUFjLFlBQW9CLGVBQXVCO0FBRTdELFFBQUksbUJBQW1CO0FBRW5CLFVBQUksd0JBQU87QUFDWDtBQUFBLGVBQ08saUJBQWlCO0FBQ3hCLFVBQUk7QUFDSixPQUFDLEVBQUUsTUFBTSxZQUFZLGFBQWE7QUFDbEMsYUFBTyxLQUFLO0FBQ1osbUJBQWEsU0FBUztBQUV0QixVQUFJLGVBQXlCO0FBQzdCLGdCQUFVLE1BQU0sS0FBSyxRQUFRLFVBQVE7QUFDakMsWUFBSSxLQUFLLFNBQVMsTUFBTTtBQUNwQixnQkFBTSxDQUFDLE9BQU8sT0FBTyxLQUFLLE1BQU0sS0FBSyxJQUFJO0FBQ3pDLG1CQUFTLElBQUksT0FBTyxLQUFLLEtBQUssS0FBSztBQUMvQix5QkFBYSxLQUFLO0FBQUE7QUFBQSxlQUVuQjtBQUNILHVCQUFhLEtBQUssT0FBTztBQUFBO0FBQUE7QUFHakMsaUJBQVcsS0FBSyxjQUFjO0FBQzFCLGNBQU0sWUFBWSxLQUFLLEdBQUcsU0FBUyxNQUFNLFlBQVksR0FBRztBQUN4RCxZQUFJLFdBQVc7QUFDWCxpQkFBTyxLQUFLLEVBQUUsT0FBTyxHQUFHLE1BQU0sVUFBVTtBQUFBO0FBQUE7QUFBQSxlQUd6QyxPQUFPO0FBQ2QsT0FBQyxFQUFFLE1BQU0sWUFBWSxpQkFBaUI7QUFDdEMsYUFBTyxLQUFLO0FBQ1osbUJBQWEsU0FBUztBQUN0QixzQkFBZ0IsZ0JBQWdCLFNBQVMsaUJBQWlCO0FBQzFELG9CQUFjO0FBQ2QsWUFBTSxZQUFZLEtBQUssR0FBRyxTQUFTLE1BQU0sWUFBWSxlQUFlO0FBQ3BFLFVBQUksV0FBVztBQUNYLGVBQU8sS0FBSyxFQUFFLE9BQU8sZUFBZSxNQUFNLFVBQVU7QUFBQTtBQUFBLFdBRXJEO0FBQ0gsVUFBSSx3QkFBTyw2QkFBNkI7QUFDeEM7QUFBQTtBQUdKLFFBQUksT0FBTyxXQUFXLEdBQUc7QUFDckIsVUFBSSx3QkFBTyxzQkFBc0IsZ0JBQWdCO0FBQ2pEO0FBQUE7QUFHSixRQUFJO0FBQ0osUUFBSSxlQUFlLFFBQVE7QUFFdkIsWUFBTSxVQUFVLEdBQUcsY0FBYztBQUNqQyxZQUFNLE9BQU8sU0FBUyxjQUFjO0FBQ3BDLFdBQUssWUFBWTtBQUNqQixXQUFLLGNBQWM7QUFDbkIsV0FBSyxNQUFNLFNBQVM7QUFDcEIsV0FBSyxRQUFRO0FBQ2IsV0FBSyxpQkFBaUIsY0FBYyxNQUFNLEtBQUssMkJBQTJCLE1BQU07QUFDaEYsV0FBSyxpQkFBaUIsY0FBYyxNQUFNO0FBQ3RDLG1CQUFXLE1BQU07QUFDYixtQkFBUyxpQkFBaUIsNkJBQTZCLFFBQVEsUUFBTSxHQUFHO0FBQUEsV0FDekU7QUFBQTtBQUVQLFdBQUssaUJBQWlCLFNBQVMsQ0FBQyxNQUFNO0FBQ2xDLFVBQUU7QUFDRixhQUFLLDJCQUEyQixNQUFNO0FBQUE7QUFHMUMsVUFBSyxPQUFlLHNCQUFzQjtBQUN0QyxRQUFDLE9BQWUscUJBQXFCLEtBQUs7QUFBQSxhQUN2QztBQUNILGVBQU8saUJBQWlCO0FBQUE7QUFBQSxlQUVyQixlQUFlLFFBQVE7QUFFOUIsWUFBTSxVQUFVLEdBQUcsY0FBYztBQUNqQyxZQUFNLE1BQU0sS0FBSyx3QkFBd0IsV0FBVztBQUNwRCxZQUFNLElBQUksU0FBUyxjQUFjO0FBQ2pDLFFBQUUsWUFBWTtBQUNkLFFBQUUsY0FBYztBQUNoQixRQUFFLE9BQU87QUFDVCxRQUFFLFNBQVM7QUFDWCxRQUFFLE1BQU0sU0FBUztBQUNqQixRQUFFLFFBQVE7QUFDVixRQUFFLGlCQUFpQixjQUFjLE1BQU0sS0FBSywyQkFBMkIsR0FBRztBQUMxRSxRQUFFLGlCQUFpQixjQUFjLE1BQU07QUFDbkMsbUJBQVcsTUFBTTtBQUNiLG1CQUFTLGlCQUFpQiw2QkFBNkIsUUFBUSxRQUFNLEdBQUc7QUFBQSxXQUN6RTtBQUFBO0FBRVAsUUFBRSxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFFL0IsYUFBSywyQkFBMkIsR0FBRztBQUFBO0FBRXZDLFVBQUssT0FBZSxzQkFBc0I7QUFDdEMsUUFBQyxPQUFlLHFCQUFxQixFQUFFO0FBQUEsYUFDcEM7QUFDSCxlQUFPLGlCQUFpQixJQUFJLFlBQVk7QUFBQTtBQUFBLFdBRXpDO0FBRUgsWUFBTSxhQUFhLFFBQVEsU0FBUyxJQUFJLEtBQUssUUFBUSxLQUFLLFVBQVU7QUFDcEUsYUFBTyxTQUFTLEtBQUssU0FBUztBQUFBLEVBQXNCLGVBQWUsWUFBWTtBQUFBLEVBQWUsT0FBTyxJQUFJLE9BQUssRUFBRSxNQUFNLEtBQUs7QUFBQTtBQUFBO0FBSS9ILFdBQU8saUJBQWlCO0FBQUE7QUFBQSxFQU1wQixnQkFBZ0IsTUFBYyxTQUFpQixPQUFlLGFBQTZCO0FBQy9GLFFBQUksZ0JBQWdCO0FBQ3BCLFFBQUksS0FBSyxTQUFTLGdCQUFnQixtQkFBbUIsT0FBTztBQUN4RCxzQkFBZ0IsbUJBQW1CO0FBQUE7QUFHdkMsV0FBTyxLQUFLLFNBQVMsc0JBQ2YsR0FBRyxpQkFBaUIsV0FBVyxTQUFTLGdCQUN4QyxHQUFHLGlCQUFpQixXQUFXO0FBQUE7QUFBQSxRQUszQixnQkFBZ0IsTUFBYyxTQUFpQixPQUFlLGFBQXFCO0FBQzdGLFFBQUk7QUFDQSxZQUFNLFlBQVksS0FBSyxHQUFHLFNBQVMsTUFBTSxTQUFTLE9BQU87QUFDekQsVUFBSSxDQUFDO0FBQVc7QUFHaEIsWUFBTSxXQUFXLFNBQVMsUUFBUSxXQUFXO0FBRzdDLFlBQU0sZUFBZSxLQUFLLElBQUksTUFBTSxzQkFBc0I7QUFDMUQsVUFBSTtBQUFjO0FBR2xCLFlBQU0sVUFBVSxTQUFTLFFBQVE7QUFDakMsWUFBTSxZQUFZLEtBQUssSUFBSSxNQUFNLHNCQUFzQjtBQUN2RCxVQUFJLENBQUMsV0FBVztBQUVaLGNBQU0sS0FBSyx5QkFBeUI7QUFBQTtBQUl4QyxZQUFNLGtCQUFrQixLQUFLLG1CQUFtQjtBQUNoRCxZQUFNLFlBQVksS0FBSyxnQkFBZ0IsTUFBTSxTQUFTLE9BQU87QUFHN0QsWUFBTSxVQUFVO0FBQUEsUUFDcEI7QUFBQSxXQUNHO0FBQUEsU0FDRjtBQUFBLGVBQ007QUFBQSxTQUNOLFVBQVUsS0FBSyxRQUFRLE1BQU07QUFBQSxjQUN4QjtBQUFBLGFBQ0QsZ0JBQWdCO0FBQUEsYUFDaEIsZ0JBQWdCO0FBQUEscUJBQ1IsZ0JBQWdCO0FBQUEsV0FDMUIsSUFBSSxPQUFPO0FBQUE7QUFBQTtBQUFBLElBR2xCO0FBQUE7QUFBQSxFQUVGLFVBQVU7QUFBQTtBQUFBLGdCQUVJLGdCQUFnQixTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUEsY0FJM0I7QUFBQSxpQkFDRztBQUFBLGVBQ0Y7QUFBQSxxQkFDTTtBQUFBLGtCQUNILGdCQUFnQjtBQUFBLGtCQUNoQixnQkFBZ0I7QUFBQSxtQkFDZjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGdCQU9ILHVCQUF1QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx3QkFTZixVQUFVLEtBQUssTUFBTSxLQUFLLE1BQU0sR0FBRyxHQUFHLEtBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU92RCxZQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVTtBQUFBLGFBRWpDLE9BQVA7QUFDRSxjQUFRLE1BQU0sOEJBQThCO0FBQUE7QUFBQTtBQUFBLEVBSzVDLG1CQUFtQixjQUE0RTtBQUVuRyxVQUFNLGNBQWMsS0FBSyxHQUFHLGtCQUFrQixLQUFLLE9BQUssRUFBRSxpQkFBaUI7QUFDM0UsUUFBSSxhQUFhO0FBRWIsWUFBTSxtQkFBbUIsS0FBSyxvQkFBb0I7QUFDbEQsYUFBTztBQUFBLFFBQ0gsTUFBTSxZQUFZO0FBQUEsUUFDbEIsVUFBVSxzREFBa0IsYUFBWTtBQUFBLFFBQ3hDLFVBQVUsc0RBQWtCLGFBQVk7QUFBQTtBQUFBO0FBSWhELFdBQU87QUFBQSxNQUNILE1BQU07QUFBQSxNQUNOLFVBQVU7QUFBQSxNQUNWLFVBQVU7QUFBQTtBQUFBO0FBQUEsRUFJVixvQkFBb0IsY0FBbUY7QUFDM0csVUFBTSxvQkFBb0I7QUFBQSxNQUN0QixPQUFPLEVBQUUsTUFBTSxvQ0FBb0MsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUM3RSxPQUFPLEVBQUUsTUFBTSxzQkFBc0IsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUMvRCxPQUFPLEVBQUUsTUFBTSx1QkFBdUIsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUNoRSxPQUFPLEVBQUUsTUFBTSxzQ0FBdUMsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUNoRixPQUFPLEVBQUUsTUFBTSxzQ0FBc0MsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUMvRSxPQUFPLEVBQUUsTUFBTSx5QkFBeUIsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUNsRSxRQUFRLEVBQUUsTUFBTSxrQ0FBa0MsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUM1RSxTQUFTLEVBQUUsTUFBTSx1Q0FBdUMsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUNsRixXQUFXLEVBQUUsTUFBTSxpQkFBaUIsVUFBVSxNQUFNLFVBQVU7QUFBQSxNQUM5RCxPQUFPLEVBQUUsTUFBTSw4QkFBOEIsVUFBVSxPQUFPLFVBQVU7QUFBQSxNQUN4RSxPQUFPLEVBQUUsTUFBTSwrQkFBK0IsVUFBVSxPQUFPLFVBQVU7QUFBQTtBQUc3RSxXQUFPLGtCQUFrQixpQkFBaUI7QUFBQTtBQUFBLFFBR2hDLHlCQUF5QixTQUFpQjtBQUNwRCxVQUFNLFFBQVEsUUFBUSxNQUFNO0FBQzVCLFFBQUksY0FBYztBQUVsQixlQUFXLFFBQVEsT0FBTztBQUN0QixvQkFBYyxjQUFjLEdBQUcsZUFBZSxTQUFTO0FBQ3ZELFlBQU0sU0FBUyxLQUFLLElBQUksTUFBTSxzQkFBc0I7QUFDcEQsVUFBSSxDQUFDLFFBQVE7QUFDVCxZQUFJO0FBQ0EsZ0JBQU0sS0FBSyxJQUFJLE1BQU0sYUFBYTtBQUFBLGlCQUM3QixPQUFQO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9OLHlCQUF5QjtBQUU3QixVQUFNLGlCQUFpQixLQUFLLElBQUksUUFBUSxRQUFRO0FBQ2hELFFBQUksQ0FBQyxnQkFBZ0I7QUFDakIsY0FBUSxJQUFJO0FBQ1o7QUFBQTtBQUdKLFFBQUk7QUFHQSxjQUFRLElBQUk7QUFDWixjQUFRLElBQUk7QUFBQSxhQUNQLE9BQVA7QUFDRSxjQUFRLE1BQU0sMERBQTBEO0FBQUE7QUFBQTtBQUFBLEVBSXhFLG9CQUFvQixPQUFzQjtBQUM5QyxRQUFJO0FBQ0EsY0FBUSxJQUFJLDBDQUEwQztBQUd0RCxZQUFNLGNBQWMsS0FBSyxtQkFBbUI7QUFDNUMsY0FBUSxJQUFJLDZCQUE2QjtBQUd6QyxVQUFJLFVBQVUsS0FBSztBQUduQixVQUFJLFlBQVksT0FBTztBQUNuQixrQkFBVSxLQUFLLHFCQUFxQixTQUFTLFlBQVk7QUFBQTtBQUk3RCxVQUFJLFlBQVksTUFBTTtBQUNsQixrQkFBVSxLQUFLLFVBQVUsU0FBUyxZQUFZO0FBQUE7QUFJbEQsVUFBSSxZQUFZLE9BQU87QUFDbkIsa0JBQVUsUUFBUSxNQUFNLEdBQUcsWUFBWTtBQUFBO0FBRzNDLGNBQVEsSUFBSSw4QkFBOEIsUUFBUTtBQUNsRCxhQUFPO0FBQUEsYUFFRixPQUFQO0FBQ0UsY0FBUSxNQUFNLHFDQUFxQztBQUNuRCxhQUFPO0FBQUE7QUFBQTtBQUFBLEVBSVAsbUJBQW1CLE9BSXpCO0FBQ0UsVUFBTSxTQUFjO0FBR3BCLFVBQU0sYUFBYSxNQUFNLE1BQU07QUFDL0IsUUFBSSxZQUFZO0FBQ1osYUFBTyxRQUFRLEtBQUsscUJBQXFCLFdBQVc7QUFBQTtBQUl4RCxVQUFNLFlBQVksTUFBTSxNQUFNO0FBQzlCLFFBQUksV0FBVztBQUNYLGFBQU8sT0FBTyxLQUFLLG9CQUFvQixVQUFVO0FBQUE7QUFJckQsVUFBTSxhQUFhLE1BQU0sTUFBTTtBQUMvQixRQUFJLFlBQVk7QUFDWixhQUFPLFFBQVEsU0FBUyxXQUFXO0FBQUE7QUFHdkMsV0FBTztBQUFBO0FBQUEsRUFHSCxxQkFBcUIsWUFBMkI7QUFDcEQsVUFBTSxtQkFBMEI7QUFHaEMsVUFBTSxXQUFXLFdBQVcsTUFBTTtBQUVsQyxlQUFXLFFBQVEsVUFBVTtBQUV6QixZQUFNLFVBQVUsS0FBSyxNQUFNO0FBQzNCLFVBQUksU0FBUztBQUNULHlCQUFpQixLQUFLO0FBQUEsVUFDbEIsTUFBTTtBQUFBLFVBQ04sT0FBTyxRQUFRLEdBQUc7QUFBQSxVQUNsQixPQUFPLFFBQVE7QUFBQTtBQUVuQjtBQUFBO0FBSUosWUFBTSxXQUFXLEtBQUssTUFBTTtBQUM1QixVQUFJLFVBQVU7QUFDVix5QkFBaUIsS0FBSztBQUFBLFVBQ2xCLE1BQU07QUFBQSxVQUNOLE9BQU8sU0FBUyxHQUFHO0FBQUEsVUFDbkIsT0FBTyxTQUFTLFNBQVM7QUFBQTtBQUU3QjtBQUFBO0FBSUosWUFBTSxnQkFBZ0IsS0FBSyxNQUFNO0FBQ2pDLFVBQUksZUFBZTtBQUNmLHlCQUFpQixLQUFLO0FBQUEsVUFDbEIsTUFBTTtBQUFBLFVBQ04sT0FBTyxjQUFjLEdBQUc7QUFBQSxVQUN4QixPQUFPLGNBQWM7QUFBQTtBQUV6QjtBQUFBO0FBSUosWUFBTSxVQUFVLEtBQUssTUFBTTtBQUMzQixVQUFJLFNBQVM7QUFDVCx5QkFBaUIsS0FBSztBQUFBLFVBQ2xCLE1BQU07QUFBQSxVQUNOLE9BQU8sUUFBUSxHQUFHO0FBQUEsVUFDbEIsT0FBTyxTQUFTLFFBQVE7QUFBQTtBQUU1QjtBQUFBO0FBSUosWUFBTSxVQUFVLEtBQUssTUFBTTtBQUMzQixVQUFJLFNBQVM7QUFDVCx5QkFBaUIsS0FBSztBQUFBLFVBQ2xCLE1BQU07QUFBQSxVQUNOLE9BQU8sUUFBUSxHQUFHO0FBQUEsVUFDbEIsT0FBTyxTQUFTLFFBQVE7QUFBQTtBQUU1QjtBQUFBO0FBQUE7QUFJUixXQUFPO0FBQUE7QUFBQSxFQUdILG9CQUFvQixZQUFvRTtBQUM1RixVQUFNLFFBQXdEO0FBRzlELFVBQU0sUUFBUSxXQUFXLE1BQU0sS0FBSyxJQUFJLE9BQUssRUFBRTtBQUUvQyxlQUFXLFFBQVEsT0FBTztBQUV0QixZQUFNLFlBQVksS0FBSyxNQUFNO0FBQzdCLFVBQUksV0FBVztBQUNYLGNBQU0sS0FBSyxFQUFFLE9BQU8sVUFBVSxHQUFHLGVBQWUsV0FBVztBQUMzRDtBQUFBO0FBR0osWUFBTSxXQUFXLEtBQUssTUFBTTtBQUM1QixVQUFJLFVBQVU7QUFDVixjQUFNLEtBQUssRUFBRSxPQUFPLFNBQVMsR0FBRyxlQUFlLFdBQVc7QUFDMUQ7QUFBQTtBQUlKLFlBQU0sYUFBYSxLQUFLLE1BQU07QUFDOUIsVUFBSSxZQUFZO0FBQ1osY0FBTSxLQUFLLEVBQUUsT0FBTyxXQUFXLEdBQUcsZUFBZSxXQUFXO0FBQUE7QUFBQTtBQUlwRSxXQUFPO0FBQUE7QUFBQSxFQUdKLDJCQUFrQztBQUNyQyxVQUFNLFVBQWlCO0FBRXZCLGVBQVcsZUFBZSxLQUFLLEdBQUcsbUJBQW1CO0FBQ2pELGlCQUFXLFFBQVEsS0FBSyxHQUFHLFlBQVk7QUFDbkMsY0FBTSxXQUFXLEtBQUssR0FBRyxtQkFBbUIsTUFBTSxZQUFZO0FBQzlELG1CQUFXLFdBQVcsVUFBVTtBQUM1QixnQkFBTSxTQUFTLEtBQUssR0FBRyxvQkFBb0IsTUFBTSxTQUFTLFlBQVk7QUFDdEUscUJBQVcsWUFBWSxRQUFRO0FBQzNCLGtCQUFNLFlBQVksS0FBSyxHQUFHLFNBQVMsTUFBTSxTQUFTLFVBQVUsWUFBWTtBQUN4RSxnQkFBSSxXQUFXO0FBQ1gsb0JBQU0sT0FBTyxVQUFVO0FBQ3ZCLG9CQUFNLFlBQVksS0FBSyxNQUFNLE9BQU87QUFDcEMsb0JBQU0sWUFBWSxLQUFLO0FBRXZCLHNCQUFRLEtBQUs7QUFBQSxnQkFDVCxNQUFNLFVBQVU7QUFBQSxnQkFDaEIsU0FBUyxVQUFVO0FBQUEsZ0JBQ25CLE9BQU8sVUFBVTtBQUFBLGdCQUNqQjtBQUFBLGdCQUNBLGFBQWEsWUFBWTtBQUFBLGdCQUN6QixrQkFBa0IsWUFBWTtBQUFBLGdCQUM5QixXQUFXLEdBQUcsVUFBVSxRQUFRLFVBQVUsV0FBVyxVQUFVO0FBQUEsZ0JBQy9ELFlBQVk7QUFBQSxnQkFDWixZQUFZO0FBQUEsZ0JBRVosZUFBZSxLQUFLLFlBQVk7QUFBQSxnQkFDaEMsZ0JBQWdCLEtBQUssa0JBQWtCO0FBQUEsZ0JBRXZDLFdBQVcsS0FBSyxhQUFhLFVBQVU7QUFBQSxnQkFDdkMsZUFBZSxLQUFLLGdCQUFnQixVQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUXRFLFdBQU87QUFBQTtBQUFBLEVBR0gscUJBQXFCLFFBQWUsWUFBMEI7QUFDbEUsV0FBTyxPQUFPLE9BQU8sV0FBUztBQUMxQixhQUFPLFdBQVcsTUFBTSxlQUFhO0FBQ2pDLGNBQU0sYUFBYSxNQUFNLFVBQVU7QUFFbkMsZ0JBQVEsVUFBVTtBQUFBLGVBQ1Q7QUFDRCxtQkFBTyxlQUFlLFVBQVU7QUFBQSxlQUMvQjtBQUNELG1CQUFPLE9BQU8sZUFBZSxZQUN0QixXQUFXLGNBQWMsU0FBUyxVQUFVLE1BQU07QUFBQSxlQUN4RDtBQUNELG1CQUFPLE9BQU8sZUFBZSxZQUFZLGFBQWEsVUFBVTtBQUFBLGVBQy9EO0FBQ0QsbUJBQU8sT0FBTyxlQUFlLFlBQVksYUFBYSxVQUFVO0FBQUE7QUFFaEUsbUJBQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTW5CLFVBQVUsUUFBZSxPQUE4RDtBQUMzRixXQUFPLENBQUMsR0FBRyxRQUFRLEtBQUssQ0FBQyxHQUFHLE1BQU07QUFDOUIsaUJBQVcsUUFBUSxPQUFPO0FBQ3RCLGNBQU0sT0FBTyxFQUFFLEtBQUs7QUFDcEIsY0FBTSxPQUFPLEVBQUUsS0FBSztBQUVwQixZQUFJLGFBQWE7QUFDakIsWUFBSSxPQUFPLFNBQVMsWUFBWSxPQUFPLFNBQVMsVUFBVTtBQUN0RCx1QkFBYSxLQUFLLGNBQWM7QUFBQSxtQkFDekIsT0FBTyxTQUFTLFlBQVksT0FBTyxTQUFTLFVBQVU7QUFDN0QsdUJBQWEsT0FBTztBQUFBLGVBQ2pCO0FBQ0gsdUJBQWEsT0FBTyxNQUFNLGNBQWMsT0FBTztBQUFBO0FBR25ELFlBQUksZUFBZSxHQUFHO0FBQ2xCLGlCQUFPLEtBQUssY0FBYyxTQUFTLENBQUMsYUFBYTtBQUFBO0FBQUE7QUFHekQsYUFBTztBQUFBO0FBQUE7QUFBQSxFQUlQLGFBQWEsTUFBc0I7QUFDdkMsVUFBTSxvQkFBb0I7QUFBQSxNQUN0QjtBQUFBLE1BQVc7QUFBQSxNQUFVO0FBQUEsTUFBYTtBQUFBLE1BQVc7QUFBQSxNQUM3QztBQUFBLE1BQVU7QUFBQSxNQUFVO0FBQUEsTUFBUTtBQUFBLE1BQVk7QUFBQSxNQUN4QztBQUFBLE1BQVc7QUFBQSxNQUFXO0FBQUEsTUFBZ0I7QUFBQSxNQUN0QztBQUFBLE1BQVE7QUFBQSxNQUFZO0FBQUEsTUFBVTtBQUFBLE1BQU87QUFBQSxNQUNyQztBQUFBLE1BQVk7QUFBQSxNQUFnQjtBQUFBLE1BQW1CO0FBQUEsTUFDL0M7QUFBQSxNQUFZO0FBQUEsTUFBZ0I7QUFBQSxNQUFXO0FBQUEsTUFDdkM7QUFBQSxNQUFTO0FBQUEsTUFBUTtBQUFBLE1BQVE7QUFBQSxNQUFXO0FBQUEsTUFDcEM7QUFBQSxNQUFTO0FBQUEsTUFBUztBQUFBLE1BQVk7QUFBQSxNQUFhO0FBQUEsTUFDM0M7QUFBQSxNQUFhO0FBQUE7QUFHakIsV0FBTyxrQkFBa0IsU0FBUyxRQUFRLGtCQUFrQjtBQUFBO0FBQUEsRUFHeEQsZ0JBQWdCLE1BQXNCO0FBQzFDLFVBQU0sYUFBcUM7QUFBQSxNQUV2QyxXQUFXO0FBQUEsTUFBTyxVQUFVO0FBQUEsTUFBTyxhQUFhO0FBQUEsTUFBTyxXQUFXO0FBQUEsTUFBTyxlQUFlO0FBQUEsTUFDeEYsVUFBVTtBQUFBLE1BQWMsVUFBVTtBQUFBLE1BQWMsUUFBUTtBQUFBLE1BQWMsWUFBWTtBQUFBLE1BQWMsWUFBWTtBQUFBLE1BQzVHLFdBQVc7QUFBQSxNQUFjLFdBQVc7QUFBQSxNQUFjLGdCQUFnQjtBQUFBLE1BQWMsZ0JBQWdCO0FBQUEsTUFDaEcsUUFBUTtBQUFBLE1BQWMsWUFBWTtBQUFBLE1BQWMsVUFBVTtBQUFBLE1BQzFELE9BQU87QUFBQSxNQUFVLFVBQVU7QUFBQSxNQUFVLFlBQVk7QUFBQSxNQUFVLGdCQUFnQjtBQUFBLE1BQVUsbUJBQW1CO0FBQUEsTUFDeEcsVUFBVTtBQUFBLE1BQWEsWUFBWTtBQUFBLE1BQWEsZ0JBQWdCO0FBQUEsTUFBYSxXQUFXO0FBQUEsTUFBYSxVQUFVO0FBQUEsTUFDL0csU0FBUztBQUFBLE1BQWEsUUFBUTtBQUFBLE1BQWEsUUFBUTtBQUFBLE1BQWEsV0FBVztBQUFBLE1BQWEsU0FBUztBQUFBLE1BQ2pHLFNBQVM7QUFBQSxNQUFhLFNBQVM7QUFBQSxNQUFhLFlBQVk7QUFBQSxNQUFhLGFBQWE7QUFBQSxNQUFhLFVBQVU7QUFBQSxNQUN6RyxhQUFhO0FBQUEsTUFBYSxXQUFXO0FBQUEsTUFFckMsV0FBVztBQUFBLE1BQVUsUUFBUTtBQUFBLE1BQVUsUUFBUTtBQUFBLE1BQVUsUUFBUTtBQUFBLE1BQ2pFLFFBQVE7QUFBQSxNQUNSLFVBQVU7QUFBQSxNQUFXLGlCQUFpQjtBQUFBLE1BQVcsaUJBQWlCO0FBQUEsTUFBVyxhQUFhO0FBQUEsTUFBVyxhQUFhO0FBQUEsTUFDbEgsZUFBZTtBQUFBLE1BQVcsY0FBYztBQUFBLE1BQVcsbUJBQW1CO0FBQUEsTUFBVyxtQkFBbUI7QUFBQSxNQUNwRyxhQUFhO0FBQUEsTUFBVyxhQUFhO0FBQUEsTUFBVyxTQUFTO0FBQUEsTUFBVyxZQUFZO0FBQUEsTUFDaEYsV0FBVztBQUFBLE1BQVcsU0FBUztBQUFBLE1BQVcsV0FBVztBQUFBLE1BQVcsV0FBVztBQUFBLE1BQzNFLFVBQVU7QUFBQSxNQUFXLFVBQVU7QUFBQSxNQUFXLFVBQVU7QUFBQSxNQUFXLFFBQVE7QUFBQSxNQUN2RSxjQUFjO0FBQUE7QUFHbEIsV0FBTyxXQUFXLFNBQVM7QUFBQTtBQUFBLEVBR3ZCLGtCQUFrQixNQUF1QjtBQUU3QyxVQUFNLGtCQUFrQjtBQUFBLE1BQ3BCO0FBQUEsTUFBUTtBQUFBLE1BQVU7QUFBQSxNQUFTO0FBQUEsTUFBUTtBQUFBLE1BQVU7QUFBQSxNQUFXO0FBQUEsTUFDeEQ7QUFBQSxNQUFXO0FBQUEsTUFBWTtBQUFBLE1BQWE7QUFBQSxNQUFnQjtBQUFBO0FBR3hELFVBQU0sWUFBWSxLQUFLO0FBQ3ZCLFdBQU8sZ0JBQWdCLEtBQUssZUFBYSxVQUFVLFNBQVMsVUFBVTtBQUFBO0FBQUEsRUFJbkUsWUFBWSxNQUFlLFNBQWtCLGFBQTZCO0FBQzdFLFFBQUksVUFBVSxLQUFLO0FBR25CLFFBQUksTUFBTTtBQUNOLGdCQUFVLFFBQVEsT0FBTyxPQUFLLEVBQUUsU0FBUztBQUFBO0FBRTdDLFFBQUksU0FBUztBQUNULGdCQUFVLFFBQVEsT0FBTyxPQUFLLEVBQUUsWUFBWTtBQUFBO0FBRWhELFFBQUksYUFBYTtBQUNiLGdCQUFVLFFBQVEsT0FBTyxPQUFLLEVBQUUsZ0JBQWdCO0FBQUE7QUFHcEQsV0FBTyxRQUFRLE1BQU0sR0FBRztBQUFBO0FBQUEsRUFHcEIsWUFBWSxNQUF1QjtBQUV2QyxVQUFNLGFBQWEsQ0FBQyxTQUFTLFVBQVUsUUFBUSxVQUFVLFNBQVM7QUFDbEUsV0FBTyxXQUFXLEtBQUssT0FBSyxLQUFLLFNBQVM7QUFBQTtBQUFBLEVBR3RDLHdCQUF3QixXQUFtQixhQUE2QjtBQUU1RSxVQUFNLGlCQUF5QztBQUFBLE1BQzNDLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQSxNQUNQLFFBQVE7QUFBQSxNQUNSLFNBQVM7QUFBQSxNQUNULFdBQVc7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLE9BQU87QUFBQTtBQUdYLFVBQU0sMEJBQTBCLGVBQWUsZ0JBQWdCO0FBQy9ELFVBQU0sbUJBQW1CLG1CQUFtQjtBQUM1QyxXQUFPLGdEQUFnRCw0QkFBNEI7QUFBQTtBQUFBOyIsCiAgIm5hbWVzIjogW10KfQo=
